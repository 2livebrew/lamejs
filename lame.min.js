function lamejs(){function Y(d){return new Int32Array(d)}function F(d){return new Float32Array(d)}function wa(d){if(1==d.length)return F(d[0]);var k=d[0];d=d.slice(1);for(var p=[],B=0;B<k;B++)p.push(wa(d));return p}function Sa(d){if(1==d.length)return Y(d[0]);var k=d[0];d=d.slice(1);for(var p=[],B=0;B<k;B++)p.push(Sa(d));return p}function rc(d){if(1==d.length)return new Int16Array(d[0]);var k=d[0];d=d.slice(1);for(var p=[],B=0;B<k;B++)p.push(rc(d));return p}function Ub(d){if(1==d.length)return Array(d[0]);
var k=d[0];d=d.slice(1);for(var p=[],B=0;B<k;B++)p.push(Ub(d));return p}function Ja(d){this.ordinal=d}function K(d){this.ordinal=d}function la(d){this.ordinal=function(){return d}}function Fc(){this.getLameVersion=function(){return"3.98.4"};this.getLameShortVersion=function(){return"3.98.4"};this.getLameVeryShortVersion=function(){return"LAME3.98r"};this.getPsyVersion=function(){return"0.93"};this.getLameUrl=function(){return"http://www.mp3dev.org/"};this.getLameOsBitness=function(){return"32bits"}}
function Gc(){function d(b,n,a,f,g,l,q,c,e,v,C,w,y,m,h){this.vbr_q=b;this.quant_comp=n;this.quant_comp_s=a;this.expY=f;this.st_lrm=g;this.st_s=l;this.masking_adj=q;this.masking_adj_short=c;this.ath_lower=e;this.ath_curve=v;this.ath_sensitivity=C;this.interch=w;this.safejoint=y;this.sfb21mod=m;this.msfix=h}function k(b,d,a,f,n,l,q,c,e,v,C,w,y,m){this.quant_comp=d;this.quant_comp_s=a;this.safejoint=f;this.nsmsfix=n;this.st_lrm=l;this.st_s=q;this.nsbass=c;this.scale=e;this.masking_adj=v;this.ath_lower=
C;this.ath_curve=w;this.interch=y;this.sfscale=m}function p(b,d,a){var f=b.VBR==K.vbr_rh?n:ba,g=b.VBR_q_frac,l=f[d],f=f[d+1];l.st_lrm+=g*(f.st_lrm-l.st_lrm);l.st_s+=g*(f.st_s-l.st_s);l.masking_adj+=g*(f.masking_adj-l.masking_adj);l.masking_adj_short+=g*(f.masking_adj_short-l.masking_adj_short);l.ath_lower+=g*(f.ath_lower-l.ath_lower);l.ath_curve+=g*(f.ath_curve-l.ath_curve);l.ath_sensitivity+=g*(f.ath_sensitivity-l.ath_sensitivity);l.interch+=g*(f.interch-l.interch);l.msfix+=g*(f.msfix-l.msfix);f=
l.vbr_q;0>f&&(f=0);9<f&&(f=9);b.VBR_q=f;b.VBR_q_frac=0;0!=a?b.quant_comp=l.quant_comp:0<Math.abs(b.quant_comp- -1)||(b.quant_comp=l.quant_comp);0!=a?b.quant_comp_short=l.quant_comp_s:0<Math.abs(b.quant_comp_short- -1)||(b.quant_comp_short=l.quant_comp_s);0!=l.expY&&(b.experimentalY=0!=l.expY);0!=a?b.internal_flags.nsPsy.attackthre=l.st_lrm:0<Math.abs(b.internal_flags.nsPsy.attackthre- -1)||(b.internal_flags.nsPsy.attackthre=l.st_lrm);0!=a?b.internal_flags.nsPsy.attackthre_s=l.st_s:0<Math.abs(b.internal_flags.nsPsy.attackthre_s-
-1)||(b.internal_flags.nsPsy.attackthre_s=l.st_s);0!=a?b.maskingadjust=l.masking_adj:0<Math.abs(b.maskingadjust-0)||(b.maskingadjust=l.masking_adj);0!=a?b.maskingadjust_short=l.masking_adj_short:0<Math.abs(b.maskingadjust_short-0)||(b.maskingadjust_short=l.masking_adj_short);0!=a?b.ATHlower=-l.ath_lower/10:0<Math.abs(10*-b.ATHlower-0)||(b.ATHlower=-l.ath_lower/10);0!=a?b.ATHcurve=l.ath_curve:0<Math.abs(b.ATHcurve- -1)||(b.ATHcurve=l.ath_curve);0!=a?b.athaa_sensitivity=l.ath_sensitivity:0<Math.abs(b.athaa_sensitivity-
-1)||(b.athaa_sensitivity=l.ath_sensitivity);0<l.interch&&(0!=a?b.interChRatio=l.interch:0<Math.abs(b.interChRatio- -1)||(b.interChRatio=l.interch));0<l.safejoint&&(b.exp_nspsytune|=l.safejoint);0<l.sfb21mod&&(b.exp_nspsytune|=l.sfb21mod<<20);0!=a?b.msfix=l.msfix:0<Math.abs(b.msfix- -1)||(b.msfix=l.msfix);0==a&&(b.VBR_q=d,b.VBR_q_frac=g)}function B(b,d,a){var f=z.nearestBitrateFullIndex(d);b.VBR=K.vbr_abr;b.VBR_mean_bitrate_kbps=d;b.VBR_mean_bitrate_kbps=Math.min(b.VBR_mean_bitrate_kbps,320);b.VBR_mean_bitrate_kbps=
Math.max(b.VBR_mean_bitrate_kbps,8);b.brate=b.VBR_mean_bitrate_kbps;320<b.VBR_mean_bitrate_kbps&&(b.disable_reservoir=!0);0<g[f].safejoint&&(b.exp_nspsytune|=2);0<g[f].sfscale&&(b.internal_flags.noise_shaping=2);if(0<Math.abs(g[f].nsbass)){var n=int(4*g[f].nsbass);0>n&&(n+=64);b.exp_nspsytune|=n<<2}0!=a?b.quant_comp=g[f].quant_comp:0<Math.abs(b.quant_comp- -1)||(b.quant_comp=g[f].quant_comp);0!=a?b.quant_comp_short=g[f].quant_comp_s:0<Math.abs(b.quant_comp_short- -1)||(b.quant_comp_short=g[f].quant_comp_s);
0!=a?b.msfix=g[f].nsmsfix:0<Math.abs(b.msfix- -1)||(b.msfix=g[f].nsmsfix);0!=a?b.internal_flags.nsPsy.attackthre=g[f].st_lrm:0<Math.abs(b.internal_flags.nsPsy.attackthre- -1)||(b.internal_flags.nsPsy.attackthre=g[f].st_lrm);0!=a?b.internal_flags.nsPsy.attackthre_s=g[f].st_s:0<Math.abs(b.internal_flags.nsPsy.attackthre_s- -1)||(b.internal_flags.nsPsy.attackthre_s=g[f].st_s);0!=a?b.scale=g[f].scale:0<Math.abs(b.scale- -1)||(b.scale=g[f].scale);0!=a?b.maskingadjust=g[f].masking_adj:0<Math.abs(b.maskingadjust-
0)||(b.maskingadjust=g[f].masking_adj);0<g[f].masking_adj?0!=a?b.maskingadjust_short=.9*g[f].masking_adj:0<Math.abs(b.maskingadjust_short-0)||(b.maskingadjust_short=.9*g[f].masking_adj):0!=a?b.maskingadjust_short=1.1*g[f].masking_adj:0<Math.abs(b.maskingadjust_short-0)||(b.maskingadjust_short=1.1*g[f].masking_adj);0!=a?b.ATHlower=-g[f].ath_lower/10:0<Math.abs(10*-b.ATHlower-0)||(b.ATHlower=-g[f].ath_lower/10);0!=a?b.ATHcurve=g[f].ath_curve:0<Math.abs(b.ATHcurve- -1)||(b.ATHcurve=g[f].ath_curve);0!=
a?b.interChRatio=g[f].interch:0<Math.abs(b.interChRatio- -1)||(b.interChRatio=g[f].interch);return d}var z;this.setModules=function(b){z=b};var n=[new d(0,9,9,0,5.2,125,-4.2,-6.3,4.8,1,0,0,2,21,.97),new d(1,9,9,0,5.3,125,-3.6,-5.6,4.5,1.5,0,0,2,21,1.35),new d(2,9,9,0,5.6,125,-2.2,-3.5,2.8,2,0,0,2,21,1.49),new d(3,9,9,1,5.8,130,-1.8,-2.8,2.6,3,-4,0,2,20,1.64),new d(4,9,9,1,6,135,-.7,-1.1,1.1,3.5,-8,0,2,0,1.79),new d(5,9,9,1,6.4,140,.5,.4,-7.5,4,-12,2E-4,0,0,1.95),new d(6,9,9,1,6.6,145,.67,.65,-14.7,
6.5,-19,4E-4,0,0,2.3),new d(7,9,9,1,6.6,145,.8,.75,-19.7,8,-22,6E-4,0,0,2.7),new d(8,9,9,1,6.6,145,1.2,1.15,-27.5,10,-23,7E-4,0,0,0),new d(9,9,9,1,6.6,145,1.6,1.6,-36,11,-25,8E-4,0,0,0),new d(10,9,9,1,6.6,145,2,2,-36,12,-25,8E-4,0,0,0)],ba=[new d(0,9,9,0,4.2,25,-7,-4,7.5,1,0,0,2,26,.97),new d(1,9,9,0,4.2,25,-5.6,-3.6,4.5,1.5,0,0,2,21,1.35),new d(2,9,9,0,4.2,25,-4.4,-1.8,2,2,0,0,2,18,1.49),new d(3,9,9,1,4.2,25,-3.4,-1.25,1.1,3,-4,0,2,15,1.64),new d(4,9,9,1,4.2,25,-2.2,.1,0,3.5,-8,0,2,0,1.79),new d(5,
9,9,1,4.2,25,-1,1.65,-7.7,4,-12,2E-4,0,0,1.95),new d(6,9,9,1,4.2,25,-0,2.47,-7.7,6.5,-19,4E-4,0,0,2),new d(7,9,9,1,4.2,25,.5,2,-14.5,8,-22,6E-4,0,0,2),new d(8,9,9,1,4.2,25,1,2.4,-22,10,-23,7E-4,0,0,2),new d(9,9,9,1,4.2,25,1.5,2.95,-30,11,-25,8E-4,0,0,2),new d(10,9,9,1,4.2,25,2,2.95,-36,12,-30,8E-4,0,0,2)],g=[new k(8,9,9,0,0,6.6,145,0,.95,0,-30,11,.0012,1),new k(16,9,9,0,0,6.6,145,0,.95,0,-25,11,.001,1),new k(24,9,9,0,0,6.6,145,0,.95,0,-20,11,.001,1),new k(32,9,9,0,0,6.6,145,0,.95,0,-15,11,.001,1),
new k(40,9,9,0,0,6.6,145,0,.95,0,-10,11,9E-4,1),new k(48,9,9,0,0,6.6,145,0,.95,0,-10,11,9E-4,1),new k(56,9,9,0,0,6.6,145,0,.95,0,-6,11,8E-4,1),new k(64,9,9,0,0,6.6,145,0,.95,0,-2,11,8E-4,1),new k(80,9,9,0,0,6.6,145,0,.95,0,0,8,7E-4,1),new k(96,9,9,0,2.5,6.6,145,0,.95,0,1,5.5,6E-4,1),new k(112,9,9,0,2.25,6.6,145,0,.95,0,2,4.5,5E-4,1),new k(128,9,9,0,1.95,6.4,140,0,.95,0,3,4,2E-4,1),new k(160,9,9,1,1.79,6,135,0,.95,-2,5,3.5,0,1),new k(192,9,9,1,1.49,5.6,125,0,.97,-4,7,3,0,0),new k(224,9,9,1,1.25,5.2,
125,0,.98,-6,9,2,0,0),new k(256,9,9,1,.97,5.2,125,0,1,-8,10,1,0,0),new k(320,9,9,1,.9,5.2,125,0,1,-10,12,0,0,0)];this.apply_preset=function(b,d,a){switch(d){case N.R3MIX:d=N.V3;b.VBR=K.vbr_mtrh;break;case N.MEDIUM:d=N.V4;b.VBR=K.vbr_rh;break;case N.MEDIUM_FAST:d=N.V4;b.VBR=K.vbr_mtrh;break;case N.STANDARD:d=N.V2;b.VBR=K.vbr_rh;break;case N.STANDARD_FAST:d=N.V2;b.VBR=K.vbr_mtrh;break;case N.EXTREME:d=N.V0;b.VBR=K.vbr_rh;break;case N.EXTREME_FAST:d=N.V0;b.VBR=K.vbr_mtrh;break;case N.INSANE:return d=
320,b.preset=d,B(b,d,a),b.VBR=K.vbr_off,d}b.preset=d;switch(d){case N.V9:return p(b,9,a),d;case N.V8:return p(b,8,a),d;case N.V7:return p(b,7,a),d;case N.V6:return p(b,6,a),d;case N.V5:return p(b,5,a),d;case N.V4:return p(b,4,a),d;case N.V3:return p(b,3,a),d;case N.V2:return p(b,2,a),d;case N.V1:return p(b,1,a),d;case N.V0:return p(b,0,a),d}if(8<=d&&320>=d)return B(b,d,a);b.preset=0;return d}}function L(){function d(n,k,g,b,t,a){for(;0!=t--;)g[b]=1E-10+n[k+0]*a[0]-g[b-1]*a[1]+n[k-1]*a[2]-g[b-2]*a[3]+
n[k-2]*a[4]-g[b-3]*a[5]+n[k-3]*a[6]-g[b-4]*a[7]+n[k-4]*a[8]-g[b-5]*a[9]+n[k-5]*a[10]-g[b-6]*a[11]+n[k-6]*a[12]-g[b-7]*a[13]+n[k-7]*a[14]-g[b-8]*a[15]+n[k-8]*a[16]-g[b-9]*a[17]+n[k-9]*a[18]-g[b-10]*a[19]+n[k-10]*a[20],++b,++k}function k(d,k,g,b,t,a){for(;0!=t--;)g[b]=d[k+0]*a[0]-g[b-1]*a[1]+d[k-1]*a[2]-g[b-2]*a[3]+d[k-2]*a[4],++b,++k}function p(d){return d*d}var B=[[.038575994352,-3.84664617118067,-.02160367184185,7.81501653005538,-.00123395316851,-11.34170355132042,-9.291677959E-5,13.05504219327545,
-.01655260341619,-12.28759895145294,.02161526843274,9.4829380631979,-.02074045215285,-5.87257861775999,.00594298065125,2.75465861874613,.00306428023191,-.86984376593551,1.2025322027E-4,.13919314567432,.00288463683916],[.0541865640643,-3.47845948550071,-.02911007808948,6.36317777566148,-.00848709379851,-8.54751527471874,-.00851165645469,9.4769360780128,-.00834990904936,-8.81498681370155,.02245293253339,6.85401540936998,-.02596338512915,-4.39470996079559,.01624864962975,2.19611684890774,-.00240879051584,
-.75104302451432,.00674613682247,.13149317958808,-.00187763777362],[.15457299681924,-2.37898834973084,-.09331049056315,2.84868151156327,-.06247880153653,-2.64577170229825,.02163541888798,2.23697657451713,-.05588393329856,-1.67148153367602,.04781476674921,1.00595954808547,.00222312597743,-.45953458054983,.03174092540049,.16378164858596,-.01390589421898,-.05032077717131,.00651420667831,.0234789740702,-.00881362733839],[.30296907319327,-1.61273165137247,-.22613988682123,1.0797749225997,-.08587323730772,
-.2565625775407,.03282930172664,-.1627671912044,-.00915702933434,-.22638893773906,-.02364141202522,.39120800788284,-.00584456039913,-.22138138954925,.06276101321749,.04500235387352,-8.28086748E-6,.02005851806501,.00205861885564,.00302439095741,-.02950134983287],[.33642304856132,-1.49858979367799,-.2557224142557,.87350271418188,-.11828570177555,.12205022308084,.11921148675203,-.80774944671438,-.07834489609479,.47854794562326,-.0046997791438,-.12453458140019,-.0058950022444,-.04067510197014,.05724228140351,
.08333755284107,.00832043980773,-.04237348025746,-.0163538138454,.02977207319925,-.0176017656815],[.4491525660845,-.62820619233671,-.14351757464547,.29661783706366,-.22784394429749,-.372563729424,-.01419140100551,.00213767857124,.04078262797139,-.42029820170918,-.12398163381748,.22199650564824,.04097565135648,.00613424350682,.10478503600251,.06747620744683,-.01863887810927,.05784820375801,-.03193428438915,.03222754072173,.00541907748707],[.56619470757641,-1.04800335126349,-.75464456939302,.29156311971249,
.1624213774223,-.26806001042947,.16744243493672,.00819999645858,-.18901604199609,.45054734505008,.3093178284183,-.33032403314006,-.27562961986224,.0673936833311,.00647310677246,-.04784254229033,.08647503780351,.01639907836189,-.0378898455484,.01807364323573,-.00588215443421],[.58100494960553,-.51035327095184,-.53174909058578,-.31863563325245,-.14289799034253,-.20256413484477,.17520704835522,.1472815413433,.02377945217615,.38952639978999,.15558449135573,-.23313271880868,-.25344790059353,-.05246019024463,
.01628462406333,-.02505961724053,.06920467763959,.02442357316099,-.03721611395801,.01818801111503,-.00749618797172],[.53648789255105,-.2504987195602,-.42163034350696,-.43193942311114,-.00275953611929,-.03424681017675,.04267842219415,-.04678328784242,-.10214864179676,.26408300200955,.14590772289388,.15113130533216,-.02459864859345,-.17556493366449,-.11202315195388,-.18823009262115,-.04060034127,.05477720428674,.0478866554818,.0470440968812,-.02217936801134]],z=[[.98621192462708,-1.97223372919527,-1.97242384925416,
.97261396931306,.98621192462708],[.98500175787242,-1.96977855582618,-1.97000351574484,.9702284756635,.98500175787242],[.97938932735214,-1.95835380975398,-1.95877865470428,.95920349965459,.97938932735214],[.97531843204928,-1.95002759149878,-1.95063686409857,.95124613669835,.97531843204928],[.97316523498161,-1.94561023566527,-1.94633046996323,.94705070426118,.97316523498161],[.96454515552826,-1.92783286977036,-1.92909031105652,.93034775234268,.96454515552826],[.96009142950541,-1.91858953033784,-1.92018285901082,
.92177618768381,.96009142950541],[.95856916599601,-1.9154210807478,-1.91713833199203,.91885558323625,.95856916599601],[.94597685600279,-1.88903307939452,-1.89195371200558,.89487434461664,.94597685600279]];this.InitGainAnalysis=function(d,k){var g;a:{for(g=0;g<MAX_ORDER;g++)d.linprebuf[g]=d.lstepbuf[g]=d.loutbuf[g]=d.rinprebuf[g]=d.rstepbuf[g]=d.routbuf[g]=0;switch(0|k){case 48E3:d.reqindex=0;break;case 44100:d.reqindex=1;break;case 32E3:d.reqindex=2;break;case 24E3:d.reqindex=3;break;case 22050:d.reqindex=
4;break;case 16E3:d.reqindex=5;break;case 12E3:d.reqindex=6;break;case 11025:d.reqindex=7;break;case 8E3:d.reqindex=8;break;default:g=INIT_GAIN_ANALYSIS_ERROR;break a}d.sampleWindow=0|(1*k+20-1)/20;d.lsum=0;d.rsum=0;d.totsamp=0;Ha.ill(d.A,0);g=INIT_GAIN_ANALYSIS_OK}if(g!=INIT_GAIN_ANALYSIS_OK)return INIT_GAIN_ANALYSIS_ERROR;d.linpre=MAX_ORDER;d.rinpre=MAX_ORDER;d.lstep=MAX_ORDER;d.rstep=MAX_ORDER;d.lout=MAX_ORDER;d.rout=MAX_ORDER;Ha.fill(d.B,0);return INIT_GAIN_ANALYSIS_OK};this.AnalyzeSamples=function(n,
r,g,b,t,a,f){var D,l,q,c,e,v;if(0==a)return GAIN_ANALYSIS_OK;v=0;c=a;switch(f){case 1:b=r;t=g;break;case 2:break;default:return GAIN_ANALYSIS_ERROR}a<MAX_ORDER?(Q.arraycopy(r,g,n.linprebuf,MAX_ORDER,a),Q.arraycopy(b,t,n.rinprebuf,MAX_ORDER,a)):(Q.arraycopy(r,g,n.linprebuf,MAX_ORDER,MAX_ORDER),Q.arraycopy(b,t,n.rinprebuf,MAX_ORDER,MAX_ORDER));for(;0<c;){e=c>n.sampleWindow-n.totsamp?n.sampleWindow-n.totsamp:c;v<MAX_ORDER?(f=n.linpre+v,D=n.linprebuf,l=n.rinpre+v,q=n.rinprebuf,e>MAX_ORDER-v&&(e=MAX_ORDER-
v)):(f=g+v,D=r,l=t+v,q=b);d(D,f,n.lstepbuf,n.lstep+n.totsamp,e,B[n.reqindex]);d(q,l,n.rstepbuf,n.rstep+n.totsamp,e,B[n.reqindex]);k(n.lstepbuf,n.lstep+n.totsamp,n.loutbuf,n.lout+n.totsamp,e,z[n.reqindex]);k(n.rstepbuf,n.rstep+n.totsamp,n.routbuf,n.rout+n.totsamp,e,z[n.reqindex]);f=n.lout+n.totsamp;D=n.loutbuf;l=n.rout+n.totsamp;q=n.routbuf;for(var C=e%8;0!=C--;)n.lsum+=p(D[f++]),n.rsum+=p(q[l++]);for(C=e/8;0!=C--;)n.lsum+=p(D[f+0])+p(D[f+1])+p(D[f+2])+p(D[f+3])+p(D[f+4])+p(D[f+5])+p(D[f+6])+p(D[f+
7]),f+=8,n.rsum+=p(q[l+0])+p(q[l+1])+p(q[l+2])+p(q[l+3])+p(q[l+4])+p(q[l+5])+p(q[l+6])+p(q[l+7]),l+=8;c-=e;v+=e;n.totsamp+=e;n.totsamp==n.sampleWindow&&(f=10*L.STEPS_per_dB*Math.log10((n.lsum+n.rsum)/n.totsamp*.5+1E-37),f=0>=f?0:0|f,f>=n.A.length&&(f=n.A.length-1),n.A[f]++,n.lsum=n.rsum=0,Q.arraycopy(n.loutbuf,n.totsamp,n.loutbuf,0,MAX_ORDER),Q.arraycopy(n.routbuf,n.totsamp,n.routbuf,0,MAX_ORDER),Q.arraycopy(n.lstepbuf,n.totsamp,n.lstepbuf,0,MAX_ORDER),Q.arraycopy(n.rstepbuf,n.totsamp,n.rstepbuf,
0,MAX_ORDER),n.totsamp=0);if(n.totsamp>n.sampleWindow)return GAIN_ANALYSIS_ERROR}a<MAX_ORDER?(Q.arraycopy(n.linprebuf,a,n.linprebuf,0,MAX_ORDER-a),Q.arraycopy(n.rinprebuf,a,n.rinprebuf,0,MAX_ORDER-a),Q.arraycopy(r,g,n.linprebuf,MAX_ORDER-a,a),Q.arraycopy(b,t,n.rinprebuf,MAX_ORDER-a,a)):(Q.arraycopy(r,g+a-MAX_ORDER,n.linprebuf,0,MAX_ORDER),Q.arraycopy(b,t+a-MAX_ORDER,n.rinprebuf,0,MAX_ORDER));return GAIN_ANALYSIS_OK};this.GetTitleGain=function(d){var k;k=d.A;var g=d.A.length,b,t=0;for(b=0;b<g;b++)t+=
k[b];if(0==t)k=GAIN_NOT_ENOUGH_SAMPLES;else{t=0|Math.ceil(t*(1-.95));for(b=g;0<b--&&!(0>=(t-=k[b])););k=64.82-b/L.STEPS_per_dB}for(g=0;g<d.A.length;g++)d.B[g]+=d.A[g],d.A[g]=0;for(g=0;g<MAX_ORDER;g++)d.linprebuf[g]=d.lstepbuf[g]=d.loutbuf[g]=d.rinprebuf[g]=d.rstepbuf[g]=d.routbuf[g]=0;d.totsamp=0;d.lsum=d.rsum=0;return k}}function zb(){function H(a){this.bits=0|a}function k(a,c,b,l,m,h){c=.5946/c;for(a>>=1;0!=a--;)m[h++]=c>b[l++]?0:1,m[h++]=c>b[l++]?0:1}function p(a,c,b,l,m,h){a>>=1;var x=a%2;for(a>>=
1;0!=a--;){var d,e,q,f,g,k,t;d=b[l++]*c;e=b[l++]*c;g=0|d;q=b[l++]*c;k=0|e;f=b[l++]*c;t=0|q;d+=n.adj43[g];g=0|f;e+=n.adj43[k];m[h++]=0|d;q+=n.adj43[t];m[h++]=0|e;f+=n.adj43[g];m[h++]=0|q;m[h++]=0|f}0!=x&&(d=b[l++]*c,e=b[l++]*c,d+=n.adj43[0|d],e+=n.adj43[0|e],m[h++]=0|d,m[h++]=0|e)}function B(a,c,b,l){var m,h=c,x=m=0;do{var d=a[h++],e=a[h++];m<d&&(m=d);x<e&&(x=e)}while(h<b);m<x&&(m=x);switch(m){case 0:return m;case 1:h=c;c=0;m=r.ht[1].hlen;do x=2*a[h+0]+a[h+1],h+=2,c+=m[x];while(h<b);l.bits+=c;return 1;
case 2:case 3:h=c;c=g[m-1];m=0;x=r.ht[c].xlen;d=2==c?r.table23:r.table56;do e=a[h+0]*x+a[h+1],h+=2,m+=d[e];while(h<b);a=m&65535;m>>=16;m>a&&(m=a,c++);l.bits+=m;return c;case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:h=c;c=g[m-1];var d=x=m=0,e=r.ht[c].xlen,q=r.ht[c].hlen,f=r.ht[c+1].hlen,n=r.ht[c+2].hlen;do{var k=a[h+0]*e+a[h+1],h=h+2;m+=q[k];x+=f[k];d+=n[k]}while(h<b);a=c;m>x&&(m=x,a++);m>d&&(m=d,a=c+2);l.bits+=m;return a;default:if(m>ya.IXMAX_VAL)return l.bits=
ya.LARGE_BITS,-1;m-=15;for(h=24;32>h&&!(r.ht[h].linmax>=m);h++);for(x=h-8;24>x&&!(r.ht[x].linmax>=m);x++);m=x;d=65536*r.ht[m].xlen+r.ht[h].xlen;x=0;do e=a[c++],q=a[c++],0!=e&&(14<e&&(e=15,x+=d),e*=16),0!=q&&(14<q&&(q=15,x+=d),e+=q),x+=r.largetbl[e];while(c<b);a=x&65535;x>>=16;x>a&&(x=a,m=h);l.bits+=x;return m}}function z(a,c,b,l,m,h,x,e){for(var q=c.big_values,f=2;f<d.SBMAX_l+1;f++){var g=a.scalefac_band.l[f];if(g>=q)break;var n=m[f-2]+c.count1bits;if(b.part2_3_length<=n)break;n=new H(n);g=B(l,g,
q,n);n=n.bits;b.part2_3_length<=n||(b.assign(c),b.part2_3_length=n,b.region0_count=h[f-2],b.region1_count=f-2-h[f-2],b.table_select[0]=x[f-2],b.table_select[1]=e[f-2],b.table_select[2]=g)}}var n=null;this.qupvt=null;this.setModules=function(a){n=this.qupvt=a};var ba=[[0,0],[0,0],[0,0],[0,0],[0,0],[0,1],[1,1],[1,1],[1,2],[2,2],[2,3],[2,3],[3,4],[3,4],[3,4],[4,5],[4,5],[4,6],[5,6],[5,6],[5,7],[6,7],[6,7]],g=[1,2,5,7,7,10,10,13,13,13,13,13,13,13,13];this.noquant_count_bits=function(a,c,b){var l=c.l3_enc,
m=Math.min(576,c.max_nonzero_coeff+2>>1<<1);null!=b&&(b.sfb_count1=0);for(;1<m&&0==(l[m-1]|l[m-2]);m-=2);c.count1=m;for(var h=0,x=0;3<m;m-=4){var e;if(1<((l[m-1]|l[m-2]|l[m-3]|l[m-4])&2147483647))break;e=2*(2*(2*l[m-4]+l[m-3])+l[m-2])+l[m-1];h+=r.t32l[e];x+=r.t33l[e]}e=h;c.count1table_select=0;h>x&&(e=x,c.count1table_select=1);c.count1bits=e;c.big_values=m;if(0==m)return e;c.block_type==d.SHORT_TYPE?(h=3*a.scalefac_band.s[3],h>c.big_values&&(h=c.big_values),x=c.big_values):c.block_type==d.NORM_TYPE?
(h=c.region0_count=a.bv_scf[m-2],x=c.region1_count=a.bv_scf[m-1],x=a.scalefac_band.l[h+x+2],h=a.scalefac_band.l[h+1],x<m&&(e=new H(e),c.table_select[2]=B(l,x,m,e),e=e.bits)):(c.region0_count=7,c.region1_count=d.SBMAX_l-1-7-1,h=a.scalefac_band.l[8],x=m,h>x&&(h=x));h=Math.min(h,m);x=Math.min(x,m);0<h&&(e=new H(e),c.table_select[0]=B(l,0,h,e),e=e.bits);h<x&&(e=new H(e),c.table_select[1]=B(l,h,x,e),e=e.bits);2==a.use_best_huffman&&(c.part2_3_length=e,best_huffman_divide(a,c),e=c.part2_3_length);if(null!=
b&&c.block_type==d.NORM_TYPE){for(l=0;a.scalefac_band.l[l]<c.big_values;)l++;b.sfb_count1=l}return e};this.count_bits=function(a,c,b,l){var m=b.l3_enc,h=ya.IXMAX_VAL/n.IPOW20(b.global_gain);if(b.xrpow_max>h)return ya.LARGE_BITS;var h=n.IPOW20(b.global_gain),x,e,q=0,f,g=0,t=0,D=0,u=0,E=m,J=0,R=c,U=0;f=null!=l&&b.global_gain==l.global_gain;e=b.block_type==d.SHORT_TYPE?38:21;for(x=0;x<=e;x++){var H=-1;if(f||b.block_type==d.NORM_TYPE)H=b.global_gain-(b.scalefac[x]+(0!=b.preflag?n.pretab[x]:0)<<b.scalefac_scale+
1)-8*b.subblock_gain[b.window[x]];if(f&&l.step[x]==H)0!=g&&(p(g,h,R,U,E,J),g=0),0!=t&&(k(t,h,R,U,E,J),t=0);else{var ia=b.width[x];q+b.width[x]>b.max_nonzero_coeff&&(x=b.max_nonzero_coeff-q+1,Ha.fill(m,b.max_nonzero_coeff,576,0),ia=x,0>ia&&(ia=0),x=e+1);0==g&&0==t&&(E=m,J=u,R=c,U=D);null!=l&&0<l.sfb_count1&&x>=l.sfb_count1&&0<l.step[x]&&H>=l.step[x]?(0!=g&&(p(g,h,R,U,E,J),g=0,E=m,J=u,R=c,U=D),t+=ia):(0!=t&&(k(t,h,R,U,E,J),t=0,E=m,J=u,R=c,U=D),g+=ia);if(0>=ia){0!=t&&(k(t,h,R,U,E,J),t=0);0!=g&&(p(g,
h,R,U,E,J),g=0);break}}x<=e&&(u+=b.width[x],D+=b.width[x],q+=b.width[x])}0!=g&&p(g,h,R,U,E,J);0!=t&&k(t,h,R,U,E,J);if(0!=(a.substep_shaping&2))for(h=0,e=.634521682242439/n.IPOW20(b.global_gain+b.scalefac_scale),q=0;q<b.sfbmax;q++)if(f=b.width[q],0==a.pseudohalf[q])h+=f;else for(g=h,h+=f;g<h;++g)m[g]=c[g]>=e?m[g]:0;return this.noquant_count_bits(a,b,l)};this.best_huffman_divide=function(a,c){var b=new Ab,l=c.l3_enc,m=Y(23),h=Y(23),e=Y(23),q=Y(23);if(c.block_type!=d.SHORT_TYPE||1!=a.mode_gr){b.assign(c);
if(c.block_type==d.NORM_TYPE){for(var f=c.big_values,g=0;22>=g;g++)m[g]=ya.LARGE_BITS;for(g=0;16>g;g++){var n=a.scalefac_band.l[g+1];if(n>=f)break;for(var t=0,k=new H(t),p=B(l,0,n,k),t=k.bits,E=0;8>E;E++){var J=a.scalefac_band.l[g+E+2];if(J>=f)break;k=t;k=new H(k);J=B(l,n,J,k);k=k.bits;m[g+E]>k&&(m[g+E]=k,h[g+E]=g,e[g+E]=p,q[g+E]=J)}}z(a,b,c,l,m,h,e,q)}f=b.big_values;if(!(0==f||1<(l[f-2]|l[f-1])||(f=c.count1+2,576<f))){b.assign(c);b.count1=f;for(n=g=0;f>b.big_values;f-=4)t=2*(2*(2*l[f-4]+l[f-3])+
l[f-2])+l[f-1],g+=r.t32l[t],n+=r.t33l[t];b.big_values=f;b.count1table_select=0;g>n&&(g=n,b.count1table_select=1);b.count1bits=g;b.block_type==d.NORM_TYPE?z(a,b,c,l,m,h,e,q):(b.part2_3_length=g,g=a.scalefac_band.l[8],g>f&&(g=f),0<g&&(m=new H(b.part2_3_length),b.table_select[0]=B(l,0,g,m),b.part2_3_length=m.bits),f>g&&(m=new H(b.part2_3_length),b.table_select[1]=B(l,g,f,m),b.part2_3_length=m.bits),c.part2_3_length>b.part2_3_length&&c.assign(b))}}};var b=[1,1,1,1,8,2,2,2,4,4,4,8,8,8,16,16],t=[1,2,4,
8,1,2,4,8,2,4,8,2,4,8,4,8],a=[0,0,0,0,3,1,1,1,2,2,2,3,3,3,4,4],f=[0,1,2,3,0,1,2,3,1,2,3,1,2,3,2,3];zb.slen1_tab=a;zb.slen2_tab=f;this.best_scalefac_store=function(c,l,e,q){var m=q.tt[l][e],h,x,g,k=0;for(h=x=0;h<m.sfbmax;h++){g=m.width[h];x+=g;for(g=-g;0>g&&0==m.l3_enc[g+x];g++);0==g&&(m.scalefac[h]=k=-2)}if(0==m.scalefac_scale&&0==m.preflag){for(h=x=0;h<m.sfbmax;h++)0<m.scalefac[h]&&(x|=m.scalefac[h]);if(0==(x&1)&&0!=x){for(h=0;h<m.sfbmax;h++)0<m.scalefac[h]&&(m.scalefac[h]>>=1);m.scalefac_scale=
k=1}}if(0==m.preflag&&m.block_type!=d.SHORT_TYPE&&2==c.mode_gr){for(h=11;h<d.SBPSY_l&&!(m.scalefac[h]<n.pretab[h]&&-2!=m.scalefac[h]);h++);if(h==d.SBPSY_l){for(h=11;h<d.SBPSY_l;h++)0<m.scalefac[h]&&(m.scalefac[h]-=n.pretab[h]);m.preflag=k=1}}for(h=0;4>h;h++)q.scfsi[e][h]=0;if(2==c.mode_gr&&1==l&&q.tt[0][e].block_type!=d.SHORT_TYPE&&q.tt[1][e].block_type!=d.SHORT_TYPE){l=q.tt[1][e];x=q.tt[0][e];for(k=0;k<r.scfsi_band.length-1;k++){for(h=r.scfsi_band[k];h<r.scfsi_band[k+1]&&!(x.scalefac[h]!=l.scalefac[h]&&
0<=l.scalefac[h]);h++);if(h==r.scfsi_band[k+1]){for(h=r.scfsi_band[k];h<r.scfsi_band[k+1];h++)l.scalefac[h]=-1;q.scfsi[e][k]=1}}for(h=q=e=0;11>h;h++)-1!=l.scalefac[h]&&(q++,e<l.scalefac[h]&&(e=l.scalefac[h]));for(g=x=0;h<d.SBPSY_l;h++)-1!=l.scalefac[h]&&(g++,x<l.scalefac[h]&&(x=l.scalefac[h]));for(k=0;16>k;k++)e<b[k]&&x<t[k]&&(h=a[k]*q+f[k]*g,l.part2_length>h&&(l.part2_length=h,l.scalefac_compress=k));k=0}for(h=0;h<m.sfbmax;h++)-2==m.scalefac[h]&&(m.scalefac[h]=0);0!=k&&(2==c.mode_gr?this.scale_bitcount(m):
this.scale_bitcount_lsf(c,m))};var D=[0,18,36,54,54,36,54,72,54,72,90,72,90,108,108,126],l=[0,18,36,54,51,35,53,71,52,70,88,69,87,105,104,122],q=[0,10,20,30,33,21,31,41,32,42,52,43,53,63,64,74];this.scale_bitcount=function(a){var c,e=0,g=0,m,h=a.scalefac;if(a.block_type==d.SHORT_TYPE)m=D,0!=a.mixed_block_flag&&(m=l);else if(m=q,0==a.preflag){for(c=11;c<d.SBPSY_l&&!(h[c]<n.pretab[c]);c++);if(c==d.SBPSY_l)for(a.preflag=1,c=11;c<d.SBPSY_l;c++)h[c]-=n.pretab[c]}for(c=0;c<a.sfbdivide;c++)e<h[c]&&(e=h[c]);
for(;c<a.sfbmax;c++)g<h[c]&&(g=h[c]);a.part2_length=ya.LARGE_BITS;for(c=0;16>c;c++)e<b[c]&&g<t[c]&&a.part2_length>m[c]&&(a.part2_length=m[c],a.scalefac_compress=c);return a.part2_length==ya.LARGE_BITS};var c=[[15,15,7,7],[15,15,7,0],[7,3,0,0],[15,31,31,0],[7,7,7,0],[3,3,0,0]];this.scale_bitcount_lsf=function(a,b){var l,q,m,h,x,g,f,k=Y(4),t=b.scalefac;l=0!=b.preflag?2:0;for(g=0;4>g;g++)k[g]=0;if(b.block_type==d.SHORT_TYPE){q=1;var p=n.nr_of_sfb_block[l][q];for(m=f=0;4>m;m++)for(h=p[m]/3,g=0;g<h;g++,
f++)for(x=0;3>x;x++)t[3*f+x]>k[m]&&(k[m]=t[3*f+x])}else for(q=0,p=n.nr_of_sfb_block[l][q],m=f=0;4>m;m++)for(h=p[m],g=0;g<h;g++,f++)t[f]>k[m]&&(k[m]=t[f]);h=!1;for(m=0;4>m;m++)k[m]>c[l][m]&&(h=!0);if(!h){b.sfb_partition_table=n.nr_of_sfb_block[l][q];for(m=0;4>m;m++)b.slen[m]=e[k[m]];q=b.slen[0];m=b.slen[1];k=b.slen[2];x=b.slen[3];switch(l){case 0:b.scalefac_compress=(5*q+m<<4)+(k<<2)+x;break;case 1:b.scalefac_compress=400+(5*q+m<<2)+k;break;case 2:b.scalefac_compress=500+3*q+m;break;default:Q.err.printf("intensity stereo not implemented yet\n")}}if(!h)for(m=
b.part2_length=0;4>m;m++)b.part2_length+=b.slen[m]*b.sfb_partition_table[m];return h};var e=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4];this.huffman_init=function(a){for(var c=2;576>=c;c+=2){for(var b=0,l;a.scalefac_band.l[++b]<c;);for(l=ba[b][0];a.scalefac_band.l[l+1]>c;)l--;0>l&&(l=ba[b][0]);a.bv_scf[c-2]=l;for(l=ba[b][1];a.scalefac_band.l[l+a.bv_scf[c-2]+2]>c;)l--;0>l&&(l=ba[b][1]);a.bv_scf[c-1]=l}}}function Hc(){var d;this.setModules=function(k){d=k};this.ResvFrameBegin=function(k,p){var B=k.internal_flags,
z,n=B.l3_side,r=d.getframebits(k);p.bits=(r-8*B.sideinfo_len)/B.mode_gr;var g=2048*B.mode_gr-8;320<k.brate?z=8*int(1E3*k.brate/(k.out_samplerate/1152)/8+.5):(z=11520,k.strict_ISO&&(z=8*int(32E4/(k.out_samplerate/1152)/8+.5)));B.ResvMax=z-r;B.ResvMax>g&&(B.ResvMax=g);if(0>B.ResvMax||k.disable_reservoir)B.ResvMax=0;r=p.bits*B.mode_gr+Math.min(B.ResvSize,B.ResvMax);r>z&&(r=z);n.resvDrain_pre=0;null!=B.pinfo&&(B.pinfo.mean_bits=p.bits/2,B.pinfo.resvsize=B.ResvSize);return r};this.ResvMaxBits=function(d,
p,H,z){var n=d.internal_flags,r=n.ResvSize,g=n.ResvMax;0!=z&&(r+=p);0!=(n.substep_shaping&1)&&(g*=.9);H.bits=p;10*r>9*g?(z=r-9*g/10,H.bits+=z,n.substep_shaping|=128):(z=0,n.substep_shaping&=127,d.disable_reservoir||0!=(n.substep_shaping&1)||(H.bits-=.1*p));d=r<6*n.ResvMax/10?r:6*n.ResvMax/10;d-=z;0>d&&(d=0);return d};this.ResvAdjust=function(d,p){d.ResvSize-=p.part2_3_length+p.part2_length};this.ResvFrameEnd=function(d,p){var H,z=d.l3_side;d.ResvSize+=p*d.mode_gr;var n=0;z.resvDrain_post=0;z.resvDrain_pre=
0;0!=(H=d.ResvSize%8)&&(n+=H);H=d.ResvSize-n-d.ResvMax;0<H&&(n+=H);H=Math.min(8*z.main_data_begin,n)/8;z.resvDrain_pre+=8*H;n-=8*H;d.ResvSize-=8*H;z.main_data_begin-=H;z.resvDrain_post+=n;d.ResvSize-=n}}function na(){function H(a,b,m){for(;0<m;){var h;0==C&&(C=8,v++,a.header[a.w_ptr].write_timing==e&&(h=a,Q.arraycopy(h.header[h.w_ptr].buf,0,c,v,h.sideinfo_len),v+=h.sideinfo_len,e+=8*h.sideinfo_len,h.w_ptr=h.w_ptr+1&X.MAX_HEADER_BUF-1),c[v]=0);h=Math.min(m,C);m-=h;C-=h;c[v]|=b>>m<<C;e+=h}}function k(a,
c){var m=a.internal_flags,h;8<=c&&(H(m,76,8),c-=8);8<=c&&(H(m,65,8),c-=8);8<=c&&(H(m,77,8),c-=8);8<=c&&(H(m,69,8),c-=8);if(32<=c){var b=l.getLameShortVersion();if(32<=c)for(h=0;h<b.length&&8<=c;++h)c-=8,H(m,b.charAt(h),8)}for(;1<=c;--c)H(m,m.ancillary_flag,1),m.ancillary_flag^=a.disable_reservoir?0:1}function p(a,c,m){for(var h=a.header[a.h_ptr].ptr;0<m;){var b=Math.min(m,8-(h&7));m-=b;a.header[a.h_ptr].buf[h>>3]|=c>>m<<8-(h&7)-b;h+=b}a.header[a.h_ptr].ptr=h}function B(a,c){a<<=8;for(var m=0;8>m;m++)a<<=
1,c<<=1,0!=((c^a)&65536)&&(c^=32773);return c}function z(a,c){var m=r.ht[c.count1table_select+32],h,b=0,l=c.big_values,e=c.big_values;for(h=(c.count1-c.big_values)/4;0<h;--h){var d=0,q=0,g;g=c.l3_enc[l+0];0!=g&&(q+=8,0>c.xr[e+0]&&d++);g=c.l3_enc[l+1];0!=g&&(q+=4,d*=2,0>c.xr[e+1]&&d++);g=c.l3_enc[l+2];0!=g&&(q+=2,d*=2,0>c.xr[e+2]&&d++);g=c.l3_enc[l+3];0!=g&&(q++,d*=2,0>c.xr[e+3]&&d++);l+=4;e+=4;H(a,d+m.table[q],m.hlen[q]);b+=m.hlen[q]}return b}function n(a,c,m,h,b){var l=r.ht[c],e=0;if(0==c)return e;
for(;m<h;m+=2){var d=0,q=0,g=l.xlen,f=l.xlen,n=0,E=b.l3_enc[m],k=b.l3_enc[m+1];0!=E&&(0>b.xr[m]&&n++,d--);15<c&&(14<E&&(n|=E-15<<1,q=g,E=15),14<k&&(f=k-15,n<<=g,n|=f,q+=g,k=15),f=16);0!=k&&(n<<=1,0>b.xr[m+1]&&n++,d--);E=E*f+k;q-=d;d+=l.hlen[E];H(a,l.table[E],d);H(a,n,q);e+=d+q}return e}function ba(a,c){var m=3*a.scalefac_band.s[3];m>c.big_values&&(m=c.big_values);var h=n(a,c.table_select[0],0,m,c);return h+=n(a,c.table_select[1],m,c.big_values,c)}function g(a,c){var m,h,b,l;m=c.big_values;h=c.region0_count+
1;b=a.scalefac_band.l[h];h+=c.region1_count+1;l=a.scalefac_band.l[h];b>m&&(b=m);l>m&&(l=m);h=n(a,c.table_select[0],0,b,c);h+=n(a,c.table_select[1],b,l,c);return h+=n(a,c.table_select[2],l,m,c)}function b(){this.total=0}function t(c,b){var m=c.internal_flags,h,l,d,q;q=m.w_ptr;d=m.h_ptr-1;-1==d&&(d=X.MAX_HEADER_BUF-1);h=m.header[d].write_timing-e;b.total=h;0<=h&&(l=1+d-q,d<q&&(l=1+d-q+X.MAX_HEADER_BUF),h-=8*l*m.sideinfo_len);m=a.getframebits(c);h+=m;b.total+=m;b.total=0!=b.total%8?1+b.total/8:b.total/
8;b.total+=v+1;0>h&&Q.err.println("strange error flushing buffer ... \n");return h}var a=this,f=null,D=null,l=null,q=null;this.setModules=function(a,c,m,h){f=a;D=c;l=m;q=h};var c=null,e=0,v=0,C=0;this.getframebits=function(a){var c=a.internal_flags;return 8*(0|72E3*(a.version+1)*(0!=c.bitrate_index?r.bitrate_table[a.version][c.bitrate_index]:a.brate)/a.out_samplerate+c.padding)};this.CRC_writeheader=function(a,c){var m;m=B(c[2]&255,65535);m=B(c[3]&255,m);for(var h=6;h<a.sideinfo_len;h++)m=B(c[h]&
255,m);c[4]=byte(m>>8);c[5]=byte(m&255)};this.flush_bitstream=function(a){var c=a.internal_flags,m,h;m=c.l3_side;0>(h=t(a,new b))||(k(a,h),c.ResvSize=0,m.main_data_begin=0,c.findReplayGain&&(m=f.GetTitleGain(c.rgdata),c.RadioGain=Math.floor(10*m+.5)|0),c.findPeakSample&&(c.noclipGainChange=Math.ceil(200*Math.log10(c.PeakSample/32767))|0,0<c.noclipGainChange?EQ(a.scale,1)||EQ(a.scale,0)?c.noclipScale=Math.floor(32767/c.PeakSample*100)/100:c.noclipScale=-1:c.noclipScale=-1))};this.add_dummy_byte=function(a,
b,m){a=a.internal_flags;for(var h;0<m--;){h=b;for(var l=8;0<l;){var d;0==C&&(C=8,v++,c[v]=0);d=Math.min(l,C);l-=d;C-=d;c[v]|=h>>l<<C;e+=d}for(h=0;h<X.MAX_HEADER_BUF;++h)a.header[h].write_timing+=8}};this.format_bitstream=function(c){var a=c.internal_flags,m;m=a.l3_side;var h=this.getframebits(c);k(c,m.resvDrain_pre);var l=c.internal_flags,q,f,n;q=l.l3_side;l.header[l.h_ptr].ptr=0;Ha.fill(l.header[l.h_ptr].buf,0,l.sideinfo_len,0);16E3>c.out_samplerate?p(l,4094,12):p(l,4095,12);p(l,c.version,1);p(l,
1,2);p(l,c.error_protection?0:1,1);p(l,l.bitrate_index,4);p(l,l.samplerate_index,2);p(l,l.padding,1);p(l,c.extension,1);p(l,c.mode.ordinal(),2);p(l,l.mode_ext,2);p(l,c.copyright,1);p(l,c.original,1);p(l,c.emphasis,2);c.error_protection&&p(l,0,16);if(1==c.version){p(l,q.main_data_begin,9);2==l.channels_out?p(l,q.private_bits,3):p(l,q.private_bits,5);for(n=0;n<l.channels_out;n++)for(f=0;4>f;f++)p(l,q.scfsi[n][f],1);for(f=0;2>f;f++)for(n=0;n<l.channels_out;n++){var v=q.tt[f][n];p(l,v.part2_3_length+
v.part2_length,12);p(l,v.big_values/2,9);p(l,v.global_gain,8);p(l,v.scalefac_compress,4);v.block_type!=d.NORM_TYPE?(p(l,1,1),p(l,v.block_type,2),p(l,v.mixed_block_flag,1),14==v.table_select[0]&&(v.table_select[0]=16),p(l,v.table_select[0],5),14==v.table_select[1]&&(v.table_select[1]=16),p(l,v.table_select[1],5),p(l,v.subblock_gain[0],3),p(l,v.subblock_gain[1],3),p(l,v.subblock_gain[2],3)):(p(l,0,1),14==v.table_select[0]&&(v.table_select[0]=16),p(l,v.table_select[0],5),14==v.table_select[1]&&(v.table_select[1]=
16),p(l,v.table_select[1],5),14==v.table_select[2]&&(v.table_select[2]=16),p(l,v.table_select[2],5),p(l,v.region0_count,4),p(l,v.region1_count,3));p(l,v.preflag,1);p(l,v.scalefac_scale,1);p(l,v.count1table_select,1)}}else for(p(l,q.main_data_begin,8),p(l,q.private_bits,l.channels_out),n=f=0;n<l.channels_out;n++)v=q.tt[f][n],p(l,v.part2_3_length+v.part2_length,12),p(l,v.big_values/2,9),p(l,v.global_gain,8),p(l,v.scalefac_compress,9),v.block_type!=d.NORM_TYPE?(p(l,1,1),p(l,v.block_type,2),p(l,v.mixed_block_flag,
1),14==v.table_select[0]&&(v.table_select[0]=16),p(l,v.table_select[0],5),14==v.table_select[1]&&(v.table_select[1]=16),p(l,v.table_select[1],5),p(l,v.subblock_gain[0],3),p(l,v.subblock_gain[1],3),p(l,v.subblock_gain[2],3)):(p(l,0,1),14==v.table_select[0]&&(v.table_select[0]=16),p(l,v.table_select[0],5),14==v.table_select[1]&&(v.table_select[1]=16),p(l,v.table_select[1],5),14==v.table_select[2]&&(v.table_select[2]=16),p(l,v.table_select[2],5),p(l,v.region0_count,4),p(l,v.region1_count,3)),p(l,v.scalefac_scale,
1),p(l,v.count1table_select,1);c.error_protection&&CRC_writeheader(l,l.header[l.h_ptr].buf);q=l.h_ptr;l.h_ptr=q+1&X.MAX_HEADER_BUF-1;l.header[l.h_ptr].write_timing=l.header[q].write_timing+h;l.h_ptr==l.w_ptr&&Q.err.println("Error: MAX_HEADER_BUF too small in bitstream.c \n");var l=8*a.sideinfo_len,C=0,D=c.internal_flags,u=D.l3_side;if(1==c.version)for(q=0;2>q;q++)for(n=0;n<D.channels_out;n++){var E=u.tt[q][n],J=zb.slen1_tab[E.scalefac_compress],R=zb.slen2_tab[E.scalefac_compress];for(f=v=0;f<E.sfbdivide;f++)-1!=
E.scalefac[f]&&(H(D,E.scalefac[f],J),v+=J);for(;f<E.sfbmax;f++)-1!=E.scalefac[f]&&(H(D,E.scalefac[f],R),v+=R);v=E.block_type==d.SHORT_TYPE?v+ba(D,E):v+g(D,E);v+=z(D,E);C+=v}else for(n=q=0;n<D.channels_out;n++){var E=u.tt[q][n],U=0,R=f=v=0;if(E.block_type==d.SHORT_TYPE){for(;4>R;R++)for(var r=E.sfb_partition_table[R]/3,ia=E.slen[R],J=0;J<r;J++,f++)H(D,Math.max(E.scalefac[3*f+0],0),ia),H(D,Math.max(E.scalefac[3*f+1],0),ia),H(D,Math.max(E.scalefac[3*f+2],0),ia),U+=3*ia;v+=ba(D,E)}else{for(;4>R;R++)for(r=
E.sfb_partition_table[R],ia=E.slen[R],J=0;J<r;J++,f++)H(D,Math.max(E.scalefac[f],0),ia),U+=ia;v+=g(D,E)}v+=z(D,E);C+=U+v}l+=C;k(c,m.resvDrain_post);l+=m.resvDrain_post;m.main_data_begin+=(h-l)/8;t(c,new b)!=a.ResvSize&&Q.err.println("Internal buffer inconsistency. flushbits <> ResvSize");8*m.main_data_begin!=a.ResvSize&&(Q.err.printf("bit reservoir error: \nl3_side.main_data_begin: %d \nResvoir size:             %d \nresv drain (post)         %d \nresv drain (pre)          %d \nheader and sideinfo:      %d \ndata bits:                %d \ntotal bits:               %d (remainder: %d) \nbitsperframe:             %d \n",
8*m.main_data_begin,a.ResvSize,m.resvDrain_post,m.resvDrain_pre,8*a.sideinfo_len,l-m.resvDrain_post-8*a.sideinfo_len,l,l%8,h),Q.err.println("This is a fatal error.  It has several possible causes:"),Q.err.println("90%%  LAME compiled with buggy version of gcc using advanced optimizations"),Q.err.println(" 9%%  Your system is overclocked"),Q.err.println(" 1%%  bug in LAME encoding library"),a.ResvSize=8*m.main_data_begin);if(1E9<e){for(c=0;c<X.MAX_HEADER_BUF;++c)a.header[c].write_timing-=e;e=0}return 0};
this.copy_buffer=function(a,l,m,h,b){var d=v+1;if(0>=d)return 0;if(0!=h&&d>h)return-1;Q.arraycopy(c,0,l,m,d);v=-1;C=0;if(0!=b&&(h=Y(1),h[0]=a.nMusicCRC,q.updateMusicCRC(h,l,m,d),a.nMusicCRC=h[0],0<d&&(a.VBR_seek_table.nBytesWritten+=d),a.decode_on_the_fly)){h=wa([2,1152]);b=d;for(var e=-1,g;0!=e;)if(e=D.hip_decode1_unclipped(a.hip,l,m,b,h[0],h[1]),b=0,-1==e&&(e=0),0<e){if(a.findPeakSample){for(g=0;g<e;g++)h[0][g]>a.PeakSample?a.PeakSample=h[0][g]:-h[0][g]>a.PeakSample&&(a.PeakSample=-h[0][g]);if(1<
a.channels_out)for(g=0;g<e;g++)h[1][g]>a.PeakSample?a.PeakSample=h[1][g]:-h[1][g]>a.PeakSample&&(a.PeakSample=-h[1][g])}if(a.findReplayGain&&f.AnalyzeSamples(a.rgdata,h[0],0,h[1],0,e,a.channels_out)==L.GAIN_ANALYSIS_ERROR)return-6}}return d};this.init_bit_stream_w=function(a){c=new Int8Array(N.LAME_MAXMP3BUFFER);a.h_ptr=a.w_ptr=0;a.header[a.h_ptr].write_timing=0;v=-1;e=C=0}}function pb(){function d(a,b){var c=a[b+0]&255,c=c<<8|a[b+1]&255,c=c<<8,c=c|a[b+2]&255,c=c<<8;return c|=a[b+3]&255}function k(a,
b,c){a[b+0]=c>>24&255;a[b+1]=c>>16&255;a[b+2]=c>>8&255;a[b+3]=c&255}function p(a,b,c){a[b+0]=c>>8&255;a[b+1]=c&255}function B(a,b,c){return 255&(a<<b|c&~(-1<<b))}function z(a,b){var c=a.internal_flags;b[0]=B(b[0],8,255);b[1]=B(b[1],3,7);b[1]=B(b[1],1,16E3>a.out_samplerate?0:1);b[1]=B(b[1],1,a.version);b[1]=B(b[1],2,1);b[1]=B(b[1],1,a.error_protection?0:1);b[2]=B(b[2],4,c.bitrate_index);b[2]=B(b[2],2,c.samplerate_index);b[2]=B(b[2],1,0);b[2]=B(b[2],1,a.extension);b[3]=B(b[3],2,a.mode.ordinal());b[3]=
B(b[3],2,c.mode_ext);b[3]=B(b[3],1,a.copyright);b[3]=B(b[3],1,a.original);b[3]=B(b[3],2,a.emphasis);b[0]=255;var c=b[1]&241,d;d=1==a.version?128:16E3>a.out_samplerate?32:64;a.VBR==K.vbr_off&&(d=a.brate);d=a.free_format?0:255&16*ba.BitrateIndex(d,a.version,a.out_samplerate);b[1]=1==a.version?255&(c|10):255&(c|2);c=b[2]&13;b[2]=255&(d|c)}function n(a,b){return b=b>>8^D[(b^a)&255]}var ba,g,b;this.setModules=function(a,d,c){ba=a;g=d;b=c};var t=pb.NUMTOCENTRIES,a=pb.MAXFRAMESIZE,f=t+4+4+4+4+4+9+1+1+8+
1+1+3+1+1+2+4+2+2,D=[0,49345,49537,320,49921,960,640,49729,50689,1728,1920,51009,1280,50625,50305,1088,52225,3264,3456,52545,3840,53185,52865,3648,2560,51905,52097,2880,51457,2496,2176,51265,55297,6336,6528,55617,6912,56257,55937,6720,7680,57025,57217,8E3,56577,7616,7296,56385,5120,54465,54657,5440,55041,6080,5760,54849,53761,4800,4992,54081,4352,53697,53377,4160,61441,12480,12672,61761,13056,62401,62081,12864,13824,63169,63361,14144,62721,13760,13440,62529,15360,64705,64897,15680,65281,16320,16E3,
65089,64001,15040,15232,64321,14592,63937,63617,14400,10240,59585,59777,10560,60161,11200,10880,59969,60929,11968,12160,61249,11520,60865,60545,11328,58369,9408,9600,58689,9984,59329,59009,9792,8704,58049,58241,9024,57601,8640,8320,57409,40961,24768,24960,41281,25344,41921,41601,25152,26112,42689,42881,26432,42241,26048,25728,42049,27648,44225,44417,27968,44801,28608,28288,44609,43521,27328,27520,43841,26880,43457,43137,26688,30720,47297,47489,31040,47873,31680,31360,47681,48641,32448,32640,48961,
32E3,48577,48257,31808,46081,29888,30080,46401,30464,47041,46721,30272,29184,45761,45953,29504,45313,29120,28800,45121,20480,37057,37249,20800,37633,21440,21120,37441,38401,22208,22400,38721,21760,38337,38017,21568,39937,23744,23936,40257,24320,40897,40577,24128,23040,39617,39809,23360,39169,22976,22656,38977,34817,18624,18816,35137,19200,35777,35457,19008,19968,36545,36737,20288,36097,19904,19584,35905,17408,33985,34177,17728,34561,18368,18048,34369,33281,17088,17280,33601,16640,33217,32897,16448];
this.addVbrFrame=function(a){var b=a.internal_flags;var c=b.VBR_seek_table;a=r.bitrate_table[a.version][b.bitrate_index];c.nVbrNumFrames++;c.sum+=a;c.seen++;if(!(c.seen<c.want)&&(c.pos<c.size&&(c.bag[c.pos]=c.sum,c.pos++,c.seen=0),c.pos==c.size)){for(a=1;a<c.size;a+=2)c.bag[a/2]=c.bag[a];c.want*=2;c.pos/=2}};this.getVbrTag=function(a){var b=new VBRTagData,c=0;b.flags=0;var e=a[c+1]>>3&1,g=a[c+2]>>2&3,f=a[c+3]>>6&3,n=a[c+2]>>4&15,n=r.bitrate_table[e][n];b.samprate=14==a[c+1]>>4?r.samplerate_table[2][g]:
r.samplerate_table[e][g];g=c=0!=e?3!=f?c+36:c+21:3!=f?c+21:c+13;if(!(new String(a,g,4(),null)).equals("Xing")&&!(new String(a,g,4(),null)).equals("Info"))return null;c+=4;b.hId=e;g=b.flags=d(a,c);c+=4;0!=(g&1)&&(b.frames=d(a,c),c+=4);0!=(g&2)&&(b.bytes=d(a,c),c+=4);if(0!=(g&4)){if(null!=b.toc)for(f=0;f<t;f++)b.toc[f]=a[c+f];c+=t}b.vbrScale=-1;0!=(g&8)&&(b.vbrScale=d(a,c),c+=4);b.headersize=72E3*(e+1)*n/b.samprate;c+=21;e=a[c+0]<<4;e+=a[c+1]>>4;n=(a[c+1]&15)<<8;n+=a[c+2]&255;if(0>e||3E3<e)e=-1;if(0>
n||3E3<n)n=-1;b.encDelay=e;b.encPadding=n;return b};this.InitVbrTag=function(b){var d=b.internal_flags,c;c=1==b.version?128:16E3>b.out_samplerate?32:64;b.VBR==K.vbr_off&&(c=b.brate);c=72E3*(b.version+1)*c/b.out_samplerate;var e=d.sideinfo_len+f;d.VBR_seek_table.TotalFrameSize=c;if(c<e||c>a)b.bWriteVbrTag=!1;else for(d.VBR_seek_table.nVbrNumFrames=0,d.VBR_seek_table.nBytesWritten=0,d.VBR_seek_table.sum=0,d.VBR_seek_table.seen=0,d.VBR_seek_table.want=1,d.VBR_seek_table.pos=0,null==d.VBR_seek_table.bag&&
(d.VBR_seek_table.bag=new int[400],d.VBR_seek_table.size=400),c=new Int8Array(a),z(b,c),d=d.VBR_seek_table.TotalFrameSize,e=0;e<d;++e)g.add_dummy_byte(b,c[e]&255,1)};this.updateMusicCRC=function(a,b,c,d){for(var g=0;g<d;++g)a[0]=n(b[c+g],a[0])};this.getLameTagFrame=function(a,d){var c=a.internal_flags;if(!a.bWriteVbrTag||c.Class_ID!=N.LAME_ID||0>=c.VBR_seek_table.pos)return 0;if(d.length<c.VBR_seek_table.TotalFrameSize)return c.VBR_seek_table.TotalFrameSize;Ha.fill(d,0,c.VBR_seek_table.TotalFrameSize,
0);z(a,d);var e=new Int8Array(t);if(a.free_format)for(var f=1;f<t;++f)e[f]=255&255*f/100;else{var C=c.VBR_seek_table;if(!(0>=C.pos))for(f=1;f<t;++f){var w=0|Math.floor(f/t*C.pos);w>C.pos-1&&(w=C.pos-1);w=0|256*C.bag[w]/C.sum;255<w&&(w=255);e[f]=255&w}}w=c.sideinfo_len;a.error_protection&&(w-=2);d[w++]=0;d[w++]=0;d[w++]=0;d[w++]=0;k(d,w,15);w+=4;k(d,w,c.VBR_seek_table.nVbrNumFrames);w+=4;C=c.VBR_seek_table.nBytesWritten+c.VBR_seek_table.TotalFrameSize;k(d,w,0|C);w+=4;Q.arraycopy(e,0,d,w,e.length);
w+=e.length;a.error_protection&&g.CRC_writeheader(c,d);for(var y=0,f=0;f<w;f++)y=n(d[f],y);var e=w,f=y,m=a.internal_flags,w=0,y=a.encoder_delay,h=a.encoder_padding,x=100-10*a.VBR_q-a.quality,D=b.getLameVeryShortVersion(),H;H=[1,5,3,2,4,0,3];var r=0|(255<a.lowpassfreq/100+.5?255:a.lowpassfreq/100+.5),I=0,A=0,B=a.internal_flags.noise_shaping,u=0,E=0,J=0,R=0,u=0,u=0!=(a.exp_nspsytune&1),J=0!=(a.exp_nspsytune&2),U=!1,ma=!1,ia=a.internal_flags.nogap_total,sa=a.internal_flags.nogap_current,R=a.ATHtype,
ba=0,lc;switch(a.VBR){case vbr_abr:lc=a.VBR_mean_bitrate_kbps;break;case vbr_off:lc=a.brate;break;default:lc=a.VBR_min_bitrate_kbps}H=0+(a.VBR.ordinal()<H.length?H[a.VBR.ordinal()]:0);m.findReplayGain&&(510<m.RadioGain&&(m.RadioGain=510),-510>m.RadioGain&&(m.RadioGain=-510),A=11264,A=0<=m.RadioGain?A|m.RadioGain:A|512|-m.RadioGain);m.findPeakSample&&(I=Math.abs(0|m.PeakSample/32767*Math.pow(2,23)+.5));-1!=ia&&(0<sa&&(ma=!0),sa<ia-1&&(U=!0));ba=R+((u?1:0)<<4)+((J?1:0)<<5)+((U?1:0)<<6)+((ma?1:0)<<7);
0>x&&(x=0);switch(a.mode){case MONO:u=0;break;case STEREO:u=1;break;case DUAL_CHANNEL:u=2;break;case JOINT_STEREO:u=a.force_ms?4:3;break;default:u=7}J=32E3>=a.in_samplerate?0:48E3==a.in_samplerate?2:48E3<a.in_samplerate?3:1;if(a.short_blocks==Ja.short_block_forced||a.short_blocks==Ja.short_block_dispensed||-1==a.lowpassfreq&&-1==a.highpassfreq||a.scale_left<a.scale_right||a.scale_left>a.scale_right||a.disable_reservoir&&320>a.brate||a.noATH||a.ATHonly||0==R||32E3>=a.in_samplerate)E=1;R=B+(u<<2)+(E<<
5)+(J<<6);u=m.nMusicCRC;k(d,e+w,x);w+=4;for(m=0;9>m;m++)d[e+w+m]=255&D.charAt(m);w+=9;d[e+w]=255&H;w++;d[e+w]=255&r;w++;k(d,e+w,I);w+=4;p(d,e+w,A);w+=2;p(d,e+w,0);w+=2;d[e+w]=255&ba;w++;d[e+w]=255<=lc?255:255&lc;w++;d[e+w]=255&y>>4;d[e+w+1]=255&(y<<4)+(h>>8);d[e+w+2]=255&h;w+=3;d[e+w]=255&R;w++;d[e+w++]=0;p(d,e+w,a.preset);w+=2;k(d,e+w,C);w+=4;p(d,e+w,u);w+=2;for(C=0;C<w;C++)f=n(d[e+C],f);p(d,e+w,f);return c.VBR_seek_table.TotalFrameSize};this.putVbrTag=function(b,d){if(0>=b.internal_flags.VBR_seek_table.pos)return-1;
d.seek(d.length());if(0==d.length())return-1;d.seek(0);var c=new Int8Array(10);d.readFully(c);c=(new String(c,"ISO-8859-1")).startsWith("ID3")?0:((c[6]&127)<<21|(c[7]&127)<<14|(c[8]&127)<<7|c[9]&127)+c.length;d.seek(c);var c=new Int8Array(a),e=getLameTagFrame(b,c);if(e>c.length)return-1;if(1>e)return 0;d.write(c,0,e);return 0}}function T(d,k,p,r){this.xlen=d;this.linmax=k;this.table=p;this.hlen=r}function hb(d){this.bits=d}function Ic(){this.setModules=function(d,k){}}function Jb(){this.bits=this.over_SSD=
this.over_count=this.max_noise=this.tot_noise=this.over_noise=0}function Jc(){this.scale_right=this.scale_left=this.scale=this.out_samplerate=this.in_samplerate=this.num_channels=this.num_samples=this.class_id=0;this.decode_only=this.bWriteVbrTag=this.analysis=!1;this.quality=0;this.mode=la.STEREO;this.write_id3tag_automatic=this.decode_on_the_fly=this.findReplayGain=this.free_format=this.force_ms=!1;this.error_protection=this.emphasis=this.extension=this.original=this.copyright=this.compression_ratio=
this.brate=0;this.disable_reservoir=this.strict_ISO=!1;this.quant_comp_short=this.quant_comp=0;this.experimentalY=!1;this.preset=this.exp_nspsytune=this.experimentalZ=0;this.VBR=null;this.maskingadjust_short=this.maskingadjust=this.highpasswidth=this.lowpasswidth=this.highpassfreq=this.lowpassfreq=this.VBR_hard_min=this.VBR_max_bitrate_kbps=this.VBR_min_bitrate_kbps=this.VBR_mean_bitrate_kbps=this.VBR_q=this.VBR_q_frac=0;this.noATH=this.ATHshort=this.ATHonly=!1;this.athaa_sensitivity=this.athaa_loudapprox=
this.athaa_type=this.ATHlower=this.ATHcurve=this.ATHtype=0;this.short_blocks=null;this.useTemporal=!1;this.msfix=this.interChRatio=0;this.tune=!1;this.lame_allocated_gfp=this.frameNum=this.framesize=this.encoder_padding=this.encoder_delay=this.version=this.tune_value_a=0;this.internal_flags=null}function Kc(){this.floor=this.decay=this.adjustLimit=this.adjust=this.aaSensitivityP=this.useAdjust=0;this.l=F(d.SBMAX_l);this.s=F(d.SBMAX_s);this.psfb21=F(d.PSFB21);this.psfb12=F(d.PSFB12);this.cb_l=F(d.CBANDS);
this.cb_s=F(d.CBANDS);this.eql_w=F(d.BLKSIZE/2)}function Lc(){this.linprebuf=F(2*L.MAX_ORDER);this.linpre=0;this.lstepbuf=F(L.MAX_SAMPLES_PER_WINDOW+L.MAX_ORDER);this.lstep=0;this.loutbuf=F(L.MAX_SAMPLES_PER_WINDOW+L.MAX_ORDER);this.lout=0;this.rinprebuf=F(2*L.MAX_ORDER);this.rinpre=0;this.rstepbuf=F(L.MAX_SAMPLES_PER_WINDOW+L.MAX_ORDER);this.rstep=0;this.routbuf=F(L.MAX_SAMPLES_PER_WINDOW+L.MAX_ORDER);this.first=this.freqindex=this.rsum=this.lsum=this.totsamp=this.sampleWindow=this.rout=0;this.A=
Y(0|L.STEPS_per_dB*L.MAX_dB);this.B=Y(0|L.STEPS_per_dB*L.MAX_dB)}function Mc(H){this.quantize=H;this.iteration_loop=function(k,p,H,z){var n=k.internal_flags,r=F(za.SFBMAX),g=F(576),b=Y(2),t,a,f=n.l3_side;t=new hb(0);this.quantize.rv.ResvFrameBegin(k,t);t=t.bits;for(var D=0;D<n.mode_gr;D++)for(a=this.quantize.qupvt.on_pe(k,p,b,t,D,D),n.mode_ext==d.MPG_MD_MS_LR&&(this.quantize.ms_convert(n.l3_side,D),this.quantize.qupvt.reduce_side(b,H[D],t,a)),a=0;a<n.channels_out;a++){var l,q=f.tt[D][a];q.block_type!=
d.SHORT_TYPE?(l=0,l=n.PSY.mask_adjust-l):(l=0,l=n.PSY.mask_adjust_short-l);n.masking_lower=Math.pow(10,.1*l);this.quantize.init_outer_loop(n,q);this.quantize.init_xrpow(n,q,g)&&(this.quantize.qupvt.calc_xmin(k,z[D][a],q,r),this.quantize.outer_loop(k,q,r,g,a,b[a]));this.quantize.iteration_finish_one(n,D,a)}this.quantize.rv.ResvFrameEnd(n,t)}}function Ba(H,k,p,r){this.l=Y(1+d.SBMAX_l);this.s=Y(1+d.SBMAX_s);this.psfb21=Y(1+d.PSFB21);this.psfb12=Y(1+d.PSFB12);var z=this.l,n=this.s;4==arguments.length&&
(this.arrL=arguments[0],this.arrS=arguments[1],this.arr21=arguments[2],this.arr12=arguments[3],Q.arraycopy(this.arrL,0,z,0,Math.min(this.arrL.length,this.l.length)),Q.arraycopy(this.arrS,0,n,0,Math.min(this.arrS.length,this.s.length)),Q.arraycopy(this.arr21,0,this.psfb21,0,Math.min(this.arr21.length,this.psfb21.length)),Q.arraycopy(this.arr12,0,this.psfb12,0,Math.min(this.arr12.length,this.psfb12.length)))}function ya(){function H(a,b){var c=z.ATHformula(b,a);return c=Math.pow(10,(c-100)/10+a.ATHlower)}
function k(a){this.s=a}var p=null,r=null,z=null;this.setModules=function(a,b,c){p=a;r=b;z=c};this.IPOW20=function(b){return a[b]};var n=ya.IXMAX_VAL+2,ba=ya.Q_MAX,g=ya.Q_MAX2;this.nr_of_sfb_block=[[[6,5,5,5],[9,9,9,9],[6,9,9,9]],[[6,5,7,3],[9,9,12,6],[6,9,12,6]],[[11,10,0,0],[18,18,0,0],[15,18,0,0]],[[7,7,7,0],[12,12,12,0],[6,15,12,0]],[[6,6,6,3],[12,9,9,6],[6,12,9,6]],[[8,8,5,0],[15,12,9,0],[6,18,9,0]]];var b=[0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,2,2,3,3,3,2,0];this.pretab=b;this.sfBandIndex=[new Ba([0,
6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,24,32,42,56,74,100,132,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new Ba([0,6,12,18,24,30,36,44,54,66,80,96,114,136,162,194,232,278,332,394,464,540,576],[0,4,8,12,18,26,36,48,62,80,104,136,180,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new Ba([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,26,36,48,62,80,104,134,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new Ba([0,4,8,12,
16,20,24,30,36,44,52,62,74,90,110,134,162,196,238,288,342,418,576],[0,4,8,12,16,22,30,40,52,66,84,106,136,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new Ba([0,4,8,12,16,20,24,30,36,42,50,60,72,88,106,128,156,190,230,276,330,384,576],[0,4,8,12,16,22,28,38,50,64,80,100,126,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new Ba([0,4,8,12,16,20,24,30,36,44,54,66,82,102,126,156,194,240,296,364,448,550,576],[0,4,8,12,16,22,30,42,58,78,104,138,180,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new Ba([0,6,12,18,24,30,36,44,54,
66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,26,36,48,62,80,104,134,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new Ba([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,26,36,48,62,80,104,134,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new Ba([0,12,24,36,48,60,72,88,108,132,160,192,232,280,336,400,476,566,568,570,572,574,576],[0,8,16,24,36,52,72,96,124,160,162,164,166,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0])];var t=F(ba+g+1),a=F(ba),f=F(n),
D=F(n);this.adj43=D;this.iteration_init=function(b){var q=b.internal_flags,c=q.l3_side;if(0==q.iteration_init_init){q.iteration_init_init=1;c.main_data_begin=0;for(var c=b.internal_flags.ATH.l,e=b.internal_flags.ATH.psfb21,v=b.internal_flags.ATH.s,k=b.internal_flags.ATH.psfb12,w=b.internal_flags,y=b.out_samplerate,m=0;m<d.SBMAX_l;m++){var h=w.scalefac_band.l[m],x=w.scalefac_band.l[m+1];for(c[m]=$a.MAX_VALUE;h<x;h++){var G=h*y/1152,G=H(b,G);c[m]=Math.min(c[m],G)}}for(m=0;m<d.PSFB21;m++)for(h=w.scalefac_band.psfb21[m],
x=w.scalefac_band.psfb21[m+1],e[m]=$a.MAX_VALUE;h<x;h++)G=h*y/1152,G=H(b,G),e[m]=Math.min(e[m],G);for(m=0;m<d.SBMAX_s;m++){h=w.scalefac_band.s[m];x=w.scalefac_band.s[m+1];for(v[m]=$a.MAX_VALUE;h<x;h++)G=h*y/384,G=H(b,G),v[m]=Math.min(v[m],G);v[m]*=w.scalefac_band.s[m+1]-w.scalefac_band.s[m]}for(m=0;m<d.PSFB12;m++){h=w.scalefac_band.psfb12[m];x=w.scalefac_band.psfb12[m+1];for(k[m]=$a.MAX_VALUE;h<x;h++)G=h*y/384,G=H(b,G),k[m]=Math.min(k[m],G);k[m]*=w.scalefac_band.s[13]-w.scalefac_band.s[12]}if(b.noATH){for(m=
0;m<d.SBMAX_l;m++)c[m]=1E-20;for(m=0;m<d.PSFB21;m++)e[m]=1E-20;for(m=0;m<d.SBMAX_s;m++)v[m]=1E-20;for(m=0;m<d.PSFB12;m++)k[m]=1E-20}w.ATH.floor=10*Math.log10(H(b,-1));f[0]=0;for(c=1;c<n;c++)f[c]=Math.pow(c,4/3);for(c=0;c<n-1;c++)D[c]=c+1-Math.pow(.5*(f[c]+f[c+1]),.75);D[c]=.5;for(c=0;c<ba;c++)a[c]=Math.pow(2,-.1875*(c-210));for(c=0;c<=ba+g;c++)t[c]=Math.pow(2,.25*(c-210-g));p.huffman_init(q);c=b.exp_nspsytune>>2&63;32<=c&&(c-=64);e=Math.pow(10,c/4/10);c=b.exp_nspsytune>>8&63;32<=c&&(c-=64);v=Math.pow(10,
c/4/10);c=b.exp_nspsytune>>14&63;32<=c&&(c-=64);k=Math.pow(10,c/4/10);c=b.exp_nspsytune>>20&63;32<=c&&(c-=64);b=k*Math.pow(10,c/4/10);for(c=0;c<d.SBMAX_l;c++)w=6>=c?e:13>=c?v:20>=c?k:b,q.nsPsy.longfact[c]=w;for(c=0;c<d.SBMAX_s;c++)w=5>=c?e:10>=c?v:11>=c?k:b,q.nsPsy.shortfact[c]=w}};this.on_pe=function(a,b,c,d,f,g){var n=a.internal_flags,k=0,m=Y(2),h,k=new hb(k);a=r.ResvMaxBits(a,d,k,g);var k=k.bits,x=k+a;x>X.MAX_BITS_PER_GRANULE&&(x=X.MAX_BITS_PER_GRANULE);for(h=g=0;h<n.channels_out;++h)c[h]=Math.min(X.MAX_BITS_PER_CHANNEL,
k/n.channels_out),m[h]=0|c[h]*b[f][h]/700-c[h],m[h]>3*d/4&&(m[h]=3*d/4),0>m[h]&&(m[h]=0),m[h]+c[h]>X.MAX_BITS_PER_CHANNEL&&(m[h]=Math.max(0,X.MAX_BITS_PER_CHANNEL-c[h])),g+=m[h];if(g>a)for(h=0;h<n.channels_out;++h)m[h]=a*m[h]/g;for(h=0;h<n.channels_out;++h)c[h]+=m[h],a-=m[h];for(h=g=0;h<n.channels_out;++h)g+=c[h];if(g>X.MAX_BITS_PER_GRANULE)for(h=0;h<n.channels_out;++h)c[h]*=X.MAX_BITS_PER_GRANULE,c[h]/=g;return x};this.reduce_side=function(a,b,c,d){b=.33*(.5-b)/.5;0>b&&(b=0);.5<b&&(b=.5);b=0|.5*
b*(a[0]+a[1]);b>X.MAX_BITS_PER_CHANNEL-a[0]&&(b=X.MAX_BITS_PER_CHANNEL-a[0]);0>b&&(b=0);125<=a[1]&&(125<a[1]-b?(a[0]<c&&(a[0]+=b),a[1]-=b):(a[0]+=a[1]-125,a[1]=125));b=a[0]+a[1];b>d&&(a[0]=d*a[0]/b,a[1]=d*a[1]/b)};this.athAdjust=function(a,b,c){b=aa.FAST_LOG10_X(b,10);a*=a;var d=0;b-=c;1E-20<a&&(d=1+aa.FAST_LOG10_X(a,10/90.30873362));0>d&&(d=0);b=b*d+(c+90.30873362-94.82444863);return Math.pow(10,.1*b)};this.calc_xmin=function(a,b,c,e){var g=0,f=a.internal_flags,n,k=0,m=0,h=f.ATH,x=c.xr,t=a.VBR==
K.vbr_mtrh?1:0,p=f.masking_lower;if(a.VBR==K.vbr_mtrh||a.VBR==K.vbr_mt)p=1;for(n=0;n<c.psy_lmax;n++){var D,H,A,r,u,E;H=a.VBR==K.vbr_rh||a.VBR==K.vbr_mtrh?athAdjust(h.adjust,h.l[n],h.floor):h.adjust*h.l[n];u=c.width[n];A=H/u;r=2.220446049250313E-16;E=u>>1;D=0;do{var J;J=x[k]*x[k];D+=J;r+=J<A?J:A;k++;J=x[k]*x[k];D+=J;r+=J<A?J:A;k++}while(0<--E);D>H&&m++;n==d.SBPSY_l&&(A=H*f.nsPsy.longfact[n],r<A&&(r=A));0!=t&&(H=r);a.ATHonly||(r=b.en.l[n],0<r&&(A=D*b.thm.l[n]*p/r,0!=t&&(A*=f.nsPsy.longfact[n]),H<A&&
(H=A)));0!=t?e[g++]=H:e[g++]=H*f.nsPsy.longfact[n]}D=575;if(c.block_type!=d.SHORT_TYPE)for(H=576;0!=H--&&na.EQ(x[H],0);)D=H;c.max_nonzero_coeff=D;for(var R=c.sfb_smin;n<c.psymax;R++,n+=3){var U,z;z=a.VBR==K.vbr_rh||a.VBR==K.vbr_mtrh?athAdjust(h.adjust,h.s[R],h.floor):h.adjust*h.s[R];u=c.width[n];for(U=0;3>U;U++){D=0;E=u>>1;A=z/u;r=2.220446049250313E-16;do J=x[k]*x[k],D+=J,r+=J<A?J:A,k++,J=x[k]*x[k],D+=J,r+=J<A?J:A,k++;while(0<--E);D>z&&m++;R==d.SBPSY_s&&(A=z*f.nsPsy.shortfact[R],r<A&&(r=A));H=0!=
t?r:z;a.ATHonly||a.ATHshort||(r=b.en.s[R][U],0<r&&(A=D*b.thm.s[R][U]*p/r,0!=t&&(A*=f.nsPsy.shortfact[R]),H<A&&(H=A)));0!=t?e[g++]=H:e[g++]=H*f.nsPsy.shortfact[R]}a.useTemporal&&(e[g-3]>e[g-3+1]&&(e[g-3+1]+=(e[g-3]-e[g-3+1])*f.decay),e[g-3+1]>e[g-3+2]&&(e[g-3+2]+=(e[g-3+1]-e[g-3+2])*f.decay))}return m};this.calc_noise_core=function(a,b,c,d){var g=0,n=b.s,k=a.l3_enc;if(n>a.count1)for(;0!=c--;){var t;t=a.xr[n];n++;g+=t*t;t=a.xr[n];n++;g+=t*t}else if(n>a.big_values){var m=F(2);m[0]=0;for(m[1]=d;0!=c--;)t=
Math.abs(a.xr[n])-m[k[n]],n++,g+=t*t,t=Math.abs(a.xr[n])-m[k[n]],n++,g+=t*t}else for(;0!=c--;)t=Math.abs(a.xr[n])-f[k[n]]*d,n++,g+=t*t,t=Math.abs(a.xr[n])-f[k[n]]*d,n++,g+=t*t;b.s=n;return g};this.calc_noise=function(a,d,c,e,g){var f=0,n=0,p,m,h=0,x=0,D=0,H=-20,r=0,z=a.scalefac,A=0;for(p=e.over_SSD=0;p<a.psymax;p++){var B=a.global_gain-(z[A++]+(0!=a.preflag?b[p]:0)<<a.scalefac_scale+1)-8*a.subblock_gain[a.window[p]],u=0;null!=g&&g.step[p]==B?(u=g.noise[p],r+=a.width[p],c[f++]=u/d[n++],u=g.noise_log[p]):
(u=t[B+ya.Q_MAX2],m=a.width[p]>>1,r+a.width[p]>a.max_nonzero_coeff&&(m=a.max_nonzero_coeff-r+1,m=0<m?m>>1:0),r=new k(r),u=this.calc_noise_core(a,r,m,u),r=r.s,null!=g&&(g.step[p]=B,g.noise[p]=u),u=c[f++]=u/d[n++],u=aa.FAST_LOG10(Math.max(u,1E-20)),null!=g&&(g.noise_log[p]=u));null!=g&&(g.global_gain=a.global_gain);D+=u;0<u&&(B=Math.max(0|10*u+.5,1),e.over_SSD+=B*B,h++,x+=u);H=Math.max(H,u)}e.over_count=h;e.tot_noise=D;e.over_noise=x;e.max_noise=H;return h};this.set_pinfo=function(a,g,c,e,f){var n=
a.internal_flags,k,t,m,h,x=0==g.scalefac_scale?.5:1,p=g.scalefac,D=F(za.SFBMAX),H=F(za.SFBMAX),r=new Jb;calc_xmin(a,c,g,D);calc_noise(g,D,H,r,null);var A=0;t=g.sfb_lmax;g.block_type!=d.SHORT_TYPE&&0==g.mixed_block_flag&&(t=22);for(k=0;k<t;k++){var z=n.scalefac_band.l[k],u=n.scalefac_band.l[k+1],E=u-z;for(h=0;A<u;A++)h+=g.xr[A]*g.xr[A];h/=E;m=1E15;n.pinfo.en[e][f][k]=m*h;n.pinfo.xfsf[e][f][k]=m*D[k]*H[k]/E;h=0<c.en.l[k]&&!a.ATHonly?h/c.en.l[k]:0;n.pinfo.thr[e][f][k]=m*Math.max(h*c.thm.l[k],n.ATH.l[k]);
n.pinfo.LAMEsfb[e][f][k]=0;0!=g.preflag&&11<=k&&(n.pinfo.LAMEsfb[e][f][k]=-x*b[k]);k<d.SBPSY_l&&(n.pinfo.LAMEsfb[e][f][k]-=x*p[k])}if(g.block_type==d.SHORT_TYPE)for(t=k,k=g.sfb_smin;k<d.SBMAX_s;k++)for(var z=n.scalefac_band.s[k],u=n.scalefac_band.s[k+1],E=u-z,J=0;3>J;J++){h=0;for(m=z;m<u;m++)h+=g.xr[A]*g.xr[A],A++;h=Math.max(h/E,1E-20);m=1E15;n.pinfo.en_s[e][f][3*k+J]=m*h;n.pinfo.xfsf_s[e][f][3*k+J]=m*D[t]*H[t]/E;h=0<c.en.s[k][J]?h/c.en.s[k][J]:0;if(a.ATHonly||a.ATHshort)h=0;n.pinfo.thr_s[e][f][3*
k+J]=m*Math.max(h*c.thm.s[k][J],n.ATH.s[k]);n.pinfo.LAMEsfb_s[e][f][3*k+J]=-2*g.subblock_gain[J];k<d.SBPSY_s&&(n.pinfo.LAMEsfb_s[e][f][3*k+J]-=x*p[t]);t++}n.pinfo.LAMEqss[e][f]=g.global_gain;n.pinfo.LAMEmainbits[e][f]=g.part2_3_length+g.part2_length;n.pinfo.LAMEsfbits[e][f]=g.part2_length;n.pinfo.over[e][f]=r.over_count;n.pinfo.max_noise[e][f]=10*r.max_noise;n.pinfo.over_noise[e][f]=10*r.over_noise;n.pinfo.tot_noise[e][f]=10*r.tot_noise;n.pinfo.over_SSD[e][f]=r.over_SSD}}function Nc(){this.sfb_count1=
this.global_gain=0;this.step=Y(39);this.noise=F(39);this.noise_log=F(39)}function Ab(){this.xr=F(576);this.l3_enc=Y(576);this.scalefac=Y(za.SFBMAX);this.mixed_block_flag=this.block_type=this.scalefac_compress=this.global_gain=this.count1=this.big_values=this.part2_3_length=this.xrpow_max=0;this.table_select=Y(3);this.subblock_gain=Y(4);this.sfbdivide=this.psymax=this.sfbmax=this.psy_lmax=this.sfb_smin=this.sfb_lmax=this.part2_length=this.count1table_select=this.scalefac_scale=this.preflag=this.region1_count=
this.region0_count=0;this.width=Y(za.SFBMAX);this.window=Y(za.SFBMAX);this.count1bits=0;this.sfb_partition_table=null;this.slen=Y(4);this.max_nonzero_coeff=0;var d=this;this.assign=function(k){d.xr=new Float32Array(k.xr);d.l3_enc=new Int32Array(k.l3_enc);d.scalefac=new Int32Array(k.scalefac);d.xrpow_max=k.xrpow_max;d.part2_3_length=k.part2_3_length;d.big_values=k.big_values;d.count1=k.count1;d.global_gain=k.global_gain;d.scalefac_compress=k.scalefac_compress;d.block_type=k.block_type;d.mixed_block_flag=
k.mixed_block_flag;d.table_select=new Int32Array(k.table_select);d.subblock_gain=new Int32Array(k.subblock_gain);d.region0_count=k.region0_count;d.region1_count=k.region1_count;d.preflag=k.preflag;d.scalefac_scale=k.scalefac_scale;d.count1table_select=k.count1table_select;d.part2_length=k.part2_length;d.sfb_lmax=k.sfb_lmax;d.sfb_smin=k.sfb_smin;d.psy_lmax=k.psy_lmax;d.sfbmax=k.sfbmax;d.psymax=k.psymax;d.sfbdivide=k.sfbdivide;d.width=new Int32Array(k.width);d.window=new Int32Array(k.window);d.count1bits=
k.count1bits;d.sfb_partition_table=k.sfb_partition_table.slice(0);d.slen=new Int32Array(k.slen);d.max_nonzero_coeff=k.max_nonzero_coeff}}function Oc(){function r(d){this.ordinal=d}function k(d){for(var b=0;b<d.sfbmax;b++)if(0==d.scalefac[b]+d.subblock_gain[d.window[b]])return!1;return!0}var p;this.rv=null;var B;this.qupvt=null;var z,n=new Ic,ba;this.setModules=function(d,b,k,a){p=d;this.rv=B=b;this.qupvt=z=k;ba=a;n.setModules(z,ba)};this.ms_convert=function(d,b){for(var n=0;576>n;++n){var a=d.tt[b][0].xr[n],
f=d.tt[b][1].xr[n];d.tt[b][0].xr[n]=.5*(a+f)*aa.SQRT2;d.tt[b][1].xr[n]=.5*(a-f)*aa.SQRT2}};this.init_xrpow=function(d,b,n){var a=0,f=0|b.max_nonzero_coeff;b.xrpow_max=0;Ha.fill(n,f,576,0);for(var k=a=0;k<=f;++k){var l=Math.abs(b.xr[k]),a=a+l;n[k]=Math.sqrt(l*Math.sqrt(l));n[k]>b.xrpow_max&&(b.xrpow_max=n[k])}if(1E-20<a){n=0;0!=(d.substep_shaping&2)&&(n=1);for(f=0;f<b.psymax;f++)d.pseudohalf[f]=n;return!0}Ha.fill(b.l3_enc,0,576,0);return!1};this.init_outer_loop=function(g,b){b.part2_3_length=0;b.big_values=
0;b.count1=0;b.global_gain=210;b.scalefac_compress=0;b.table_select[0]=0;b.table_select[1]=0;b.table_select[2]=0;b.subblock_gain[0]=0;b.subblock_gain[1]=0;b.subblock_gain[2]=0;b.subblock_gain[3]=0;b.region0_count=0;b.region1_count=0;b.preflag=0;b.scalefac_scale=0;b.count1table_select=0;b.part2_length=0;b.sfb_lmax=d.SBPSY_l;b.sfb_smin=d.SBPSY_s;b.psy_lmax=g.sfb21_extra?d.SBMAX_l:d.SBPSY_l;b.psymax=b.psy_lmax;b.sfbmax=b.sfb_lmax;b.sfbdivide=11;for(var n=0;n<d.SBMAX_l;n++)b.width[n]=g.scalefac_band.l[n+
1]-g.scalefac_band.l[n],b.window[n]=3;if(b.block_type==d.SHORT_TYPE){var a=F(576);b.sfb_smin=0;b.sfb_lmax=0;0!=b.mixed_block_flag&&(b.sfb_smin=3,b.sfb_lmax=2*g.mode_gr+4);b.psymax=b.sfb_lmax+3*((g.sfb21_extra?d.SBMAX_s:d.SBPSY_s)-b.sfb_smin);b.sfbmax=b.sfb_lmax+3*(d.SBPSY_s-b.sfb_smin);b.sfbdivide=b.sfbmax-18;b.psy_lmax=b.sfb_lmax;var f=g.scalefac_band.l[b.sfb_lmax];Q.arraycopy(b.xr,0,a,0,576);for(n=b.sfb_smin;n<d.SBMAX_s;n++)for(var k=g.scalefac_band.s[n],l=g.scalefac_band.s[n+1],q=0;3>q;q++)for(var c=
k;c<l;c++)b.xr[f++]=a[3*c+q];a=b.sfb_lmax;for(n=b.sfb_smin;n<d.SBMAX_s;n++)b.width[a]=b.width[a+1]=b.width[a+2]=g.scalefac_band.s[n+1]-g.scalefac_band.s[n],b.window[a]=0,b.window[a+1]=1,b.window[a+2]=2,a+=3}b.count1bits=0;b.sfb_partition_table=z.nr_of_sfb_block[0][0];b.slen[0]=0;b.slen[1]=0;b.slen[2]=0;b.slen[3]=0;b.max_nonzero_coeff=575;Ha.fill(b.scalefac,0);n=g.ATH;a=b.xr;if(b.block_type!=d.SHORT_TYPE)for(f=!1,k=d.PSFB21-1;0<=k&&!f;k--)for(l=g.scalefac_band.psfb21[k],q=g.scalefac_band.psfb21[k+
1],c=z.athAdjust(n.adjust,n.psfb21[k],n.floor),1E-12<g.nsPsy.longfact[21]&&(c*=g.nsPsy.longfact[21]),--q;q>=l;q--)if(Math.abs(a[q])<c)a[q]=0;else{f=!0;break}else for(c=0;3>c;c++)for(f=!1,k=d.PSFB12-1;0<=k&&!f;k--){var l=3*g.scalefac_band.s[12]+(g.scalefac_band.s[13]-g.scalefac_band.s[12])*c+(g.scalefac_band.psfb12[k]-g.scalefac_band.psfb12[0]),q=l+(g.scalefac_band.psfb12[k+1]-g.scalefac_band.psfb12[k]),e=z.athAdjust(n.adjust,n.psfb12[k],n.floor);1E-12<g.nsPsy.shortfact[12]&&(e*=g.nsPsy.shortfact[12]);
for(--q;q>=l;q--)if(Math.abs(a[q])<e)a[q]=0;else{f=!0;break}}};r.BINSEARCH_NONE=new r(0);r.BINSEARCH_UP=new r(1);r.BINSEARCH_DOWN=new r(2);this.trancate_smallspectrums=function(g,b,n,a){var f=F(za.SFBMAX);if((0!=(g.substep_shaping&4)||b.block_type!=d.SHORT_TYPE)&&0==(g.substep_shaping&128)){z.calc_noise(b,n,f,new Jb,null);for(var k=0;576>k;k++){var l=0;0!=b.l3_enc[k]&&(l=Math.abs(b.xr[k]));a[k]=l}k=0;l=8;b.block_type==d.SHORT_TYPE&&(l=6);do{var q,c,e,v,p=b.width[l],k=k+p;if(!(1<=f[l]||(Ha.sort(a,
k-p,p),na.EQ(a[k-1],0)))){q=(1-f[l])*n[l];v=c=0;do{var w;for(e=1;v+e<p&&!na.NEQ(a[v+k-p],a[v+k+e-p]);e++);w=a[v+k-p]*a[v+k-p]*e;if(q<w){0!=v&&(c=a[v+k-p-1]);break}q-=w;v+=e}while(v<p);if(!na.EQ(c,0)){do Math.abs(b.xr[k-p])<=c&&(b.l3_enc[k-p]=0);while(0<--p)}}}while(++l<b.psymax);b.part2_3_length=ba.noquant_count_bits(g,b,null)}};this.outer_loop=function(g,b,n,a,f,p){var l=g.internal_flags,q=new Ab,c=F(576),e=F(za.SFBMAX),v=new Jb,C,w=new Nc,y=9999999,m=!1,h=!1,x=0,G,B,fa=l.CurrentStep[f],I=!1,A=l.OldValue[f];
C=r.BINSEARCH_NONE;b.global_gain=A;for(G=p-b.part2_length;;){B=ba.count_bits(l,a,b,null);if(1==fa||B==G)break;B>G?(C==r.BINSEARCH_DOWN&&(I=!0),I&&(fa/=2),C=r.BINSEARCH_UP,B=fa):(C==r.BINSEARCH_UP&&(I=!0),I&&(fa/=2),C=r.BINSEARCH_DOWN,B=-fa);b.global_gain+=B;0>b.global_gain&&(b.global_gain=0,I=!0);255<b.global_gain&&(b.global_gain=255,I=!0)}for(;B>G&&255>b.global_gain;)b.global_gain++,B=ba.count_bits(l,a,b,null);l.CurrentStep[f]=4<=A-b.global_gain?4:2;l.OldValue[f]=b.global_gain;b.part2_3_length=B;
if(0==l.noise_shaping)return 100;z.calc_noise(b,n,e,v,w);v.bits=b.part2_3_length;q.assign(b);f=0;for(Q.arraycopy(a,0,c,0,576);!m;){do{G=new Jb;I=255;fa=0!=(l.substep_shaping&2)?20:3;if(l.sfb21_extra){if(1<e[q.sfbmax])break;if(q.block_type==d.SHORT_TYPE&&(1<e[q.sfbmax+1]||1<e[q.sfbmax+2]))break}A=q;B=a;C=g.internal_flags;for(var W=A,u=e,E=B,J=g.internal_flags,R=void 0,R=0==W.scalefac_scale?1.2968395546510096:1.6817928305074292,U=0,ma=0;ma<W.sfbmax;ma++)U<u[ma]&&(U=u[ma]);ma=J.noise_shaping_amp;3==
ma&&(ma=h?2:1);switch(ma){case 2:break;case 1:U=1<U?Math.pow(U,.5):.95*U;break;default:U=1<U?1:.95*U}for(var ia=0,ma=0;ma<W.sfbmax;ma++){var sa=W.width[ma],ia=ia+sa;if(!(u[ma]<U)){if(0!=(J.substep_shaping&2)&&(J.pseudohalf[ma]=0==J.pseudohalf[ma]?1:0,0==J.pseudohalf[ma]&&2==J.noise_shaping_amp))break;W.scalefac[ma]++;for(sa=-sa;0>sa;sa++)E[ia+sa]*=R,E[ia+sa]>W.xrpow_max&&(W.xrpow_max=E[ia+sa]);if(2==J.noise_shaping_amp)break}}if(W=k(A))A=!1;else if(W=2==C.mode_gr?ba.scale_bitcount(A):ba.scale_bitcount_lsf(C,
A)){if(1<C.noise_shaping)if(Ha.fill(C.pseudohalf,0),0==A.scalefac_scale){W=A;for(E=u=0;E<W.sfbmax;E++){R=W.width[E];J=W.scalefac[E];0!=W.preflag&&(J+=z.pretab[E]);u+=R;if(0!=(J&1))for(J++,R=-R;0>R;R++)B[u+R]*=1.2968395546510096,B[u+R]>W.xrpow_max&&(W.xrpow_max=B[u+R]);W.scalefac[E]=J>>1}W.preflag=0;W.scalefac_scale=1;W=!1}else if(A.block_type==d.SHORT_TYPE&&0<C.subblock_gain){b:{W=C;u=A;E=void 0;J=u.scalefac;for(E=0;E<u.sfb_lmax;E++)if(16<=J[E]){B=!0;break b}for(R=0;3>R;R++){ma=U=0;for(E=u.sfb_lmax+
R;E<u.sfbdivide;E+=3)U<J[E]&&(U=J[E]);for(;E<u.sfbmax;E+=3)ma<J[E]&&(ma=J[E]);if(!(16>U&&8>ma)){if(7<=u.subblock_gain[R]){B=!0;break b}u.subblock_gain[R]++;U=W.scalefac_band.l[u.sfb_lmax];for(E=u.sfb_lmax+R;E<u.sfbmax;E+=3)if(ma=u.width[E],ia=J[E],ia-=4>>u.scalefac_scale,0<=ia)J[E]=ia,U+=3*ma;else{J[E]=0;ia=z.IPOW20(210+(ia<<u.scalefac_scale+1));U+=ma*(R+1);for(sa=-ma;0>sa;sa++)B[U+sa]*=ia,B[U+sa]>u.xrpow_max&&(u.xrpow_max=B[U+sa]);U+=ma*(3-R-1)}ia=z.IPOW20(202);U+=u.width[E]*(R+1);for(sa=-u.width[E];0>
sa;sa++)B[U+sa]*=ia,B[U+sa]>u.xrpow_max&&(u.xrpow_max=B[U+sa])}}B=!1}W=B||k(A)}W||(W=2==C.mode_gr?ba.scale_bitcount(A):ba.scale_bitcount_lsf(C,A));A=!W}else A=!0;if(!A)break;0!=q.scalefac_scale&&(I=254);A=p-q.part2_length;if(0>=A)break;for(;(q.part2_3_length=ba.count_bits(l,a,q,w))>A&&q.global_gain<=I;)q.global_gain++;if(q.global_gain>I)break;if(0==v.over_count){for(;(q.part2_3_length=ba.count_bits(l,a,q,w))>y&&q.global_gain<=I;)q.global_gain++;if(q.global_gain>I)break}z.calc_noise(q,n,e,G,w);G.bits=
q.part2_3_length;C=b.block_type!=d.SHORT_TYPE?g.quant_comp:g.quant_comp_short;I=v;A=G;W=q;B=e;u=void 0;switch(C){default:case 9:0<I.over_count?(u=A.over_SSD<=I.over_SSD,A.over_SSD==I.over_SSD&&(u=A.bits<I.bits)):u=0>A.max_noise&&10*A.max_noise+A.bits<=10*I.max_noise+I.bits;break;case 0:u=A.over_count<I.over_count||A.over_count==I.over_count&&A.over_noise<I.over_noise||A.over_count==I.over_count&&na.EQ(A.over_noise,I.over_noise)&&A.tot_noise<I.tot_noise;break;case 8:C=A;E=1E-37;for(u=0;u<W.psymax;u++)J=
B[u],J=aa.FAST_LOG10(.368+.632*J*J*J),E+=J;B=Math.max(1E-20,E);C.max_noise=B;case 1:u=A.max_noise<I.max_noise;break;case 2:u=A.tot_noise<I.tot_noise;break;case 3:u=A.tot_noise<I.tot_noise&&A.max_noise<I.max_noise;break;case 4:u=0>=A.max_noise&&.2<I.max_noise||0>=A.max_noise&&0>I.max_noise&&I.max_noise>A.max_noise-.2&&A.tot_noise<I.tot_noise||0>=A.max_noise&&0<I.max_noise&&I.max_noise>A.max_noise-.2&&A.tot_noise<I.tot_noise+I.over_noise||0<A.max_noise&&-.05<I.max_noise&&I.max_noise>A.max_noise-.1&&
A.tot_noise+A.over_noise<I.tot_noise+I.over_noise||0<A.max_noise&&-.1<I.max_noise&&I.max_noise>A.max_noise-.15&&A.tot_noise+A.over_noise+A.over_noise<I.tot_noise+I.over_noise+I.over_noise;break;case 5:u=A.over_noise<I.over_noise||na.EQ(A.over_noise,I.over_noise)&&A.tot_noise<I.tot_noise;break;case 6:u=A.over_noise<I.over_noise||na.EQ(A.over_noise,I.over_noise)&&(A.max_noise<I.max_noise||na.EQ(A.max_noise,I.max_noise)&&A.tot_noise<=I.tot_noise);break;case 7:u=A.over_count<I.over_count||A.over_noise<
I.over_noise}0==I.over_count&&(u=u&&A.bits<I.bits);C=u?1:0;if(0!=C)y=b.part2_3_length,v=G,b.assign(q),f=0,Q.arraycopy(a,0,c,0,576);else if(0==l.full_outer_loop){if(++f>fa&&0==v.over_count)break;if(3==l.noise_shaping_amp&&h&&30<f)break;if(3==l.noise_shaping_amp&&h&&15<q.global_gain-x)break}}while(255>q.global_gain+q.scalefac_scale);3==l.noise_shaping_amp?h?m=!0:(q.assign(b),Q.arraycopy(c,0,a,0,576),f=0,x=q.global_gain,h=!0):m=!0}g.VBR==K.vbr_rh||g.VBR==K.vbr_mtrh?Q.arraycopy(c,0,a,0,576):0!=(l.substep_shaping&
1)&&trancate_smallspectrums(l,b,n,a);return v.over_count};this.iteration_finish_one=function(d,b,n){var a=d.l3_side,f=a.tt[b][n];ba.best_scalefac_store(d,b,n,a);1==d.use_best_huffman&&ba.best_huffman_divide(d,f);B.ResvAdjust(d,f)};this.VBR_encode_granule=function(d,b,n,a,f,k,l){var q=d.internal_flags,c=new Ab,e=F(576),v=l,p=l+1,p=(l+k)/2,w,r=0,m=q.sfb21_extra;Ha.fill(c.l3_enc,0);do q.sfb21_extra=p>v-42?!1:m,w=outer_loop(d,b,n,a,f,p),0>=w?(r=1,p=b.part2_3_length,c.assign(b),Q.arraycopy(a,0,e,0,576),
l=p-32,w=l-k,p=(l+k)/2):(k=p+32,w=l-k,p=(l+k)/2,0!=r&&(r=2,b.assign(c),Q.arraycopy(e,0,a,0,576)));while(12<w);q.sfb21_extra=m;2==r&&Q.arraycopy(c.l3_enc,0,b.l3_enc,0,576)};this.get_framebits=function(d,b){var n=d.internal_flags;n.bitrate_index=n.VBR_min_bitrate;var a=p.getframebits(d);n.bitrate_index=1;for(var a=p.getframebits(d),f=1;f<=n.VBR_max_bitrate;f++)n.bitrate_index=f,a=new hb(a),b[f]=B.ResvFrameBegin(d,a),a=a.bits};this.VBR_old_prepare=function(g,b,n,a,f,k,l,q,c){var e=g.internal_flags,p;
p=0;var r=1,w=0;e.bitrate_index=e.VBR_max_bitrate;var y=B.ResvFrameBegin(g,new hb(0))/e.mode_gr;get_framebits(g,k);for(var m=0;m<e.mode_gr;m++){var h=z.on_pe(g,b,q[m],y,m,0);e.mode_ext==d.MPG_MD_MS_LR&&(ms_convert(e.l3_side,m),z.reduce_side(q[m],n[m],y,h));for(h=0;h<e.channels_out;++h){var x=e.l3_side.tt[m][h];x.block_type!=d.SHORT_TYPE?(p=1.28/(1+Math.exp(3.5-b[m][h]/300))-.05,p=e.PSY.mask_adjust-p):(p=2.56/(1+Math.exp(3.5-b[m][h]/300))-.14,p=e.PSY.mask_adjust_short-p);e.masking_lower=Math.pow(10,
.1*p);init_outer_loop(e,x);c[m][h]=z.calc_xmin(g,a[m][h],x,f[m][h]);0!=c[m][h]&&(r=0);l[m][h]=126;w+=q[m][h]}}for(m=0;m<e.mode_gr;m++)for(h=0;h<e.channels_out;h++)w>k[e.VBR_max_bitrate]&&(q[m][h]*=k[e.VBR_max_bitrate],q[m][h]/=w),l[m][h]>q[m][h]&&(l[m][h]=q[m][h]);return r};this.bitpressure_strategy=function(g,b,n,a){for(var f=0;f<g.mode_gr;f++)for(var k=0;k<g.channels_out;k++){for(var l=g.l3_side.tt[f][k],q=b[f][k],c=0,e=0;e<l.psy_lmax;e++)q[c++]*=1+.029*e*e/d.SBMAX_l/d.SBMAX_l;if(l.block_type==
d.SHORT_TYPE)for(e=l.sfb_smin;e<d.SBMAX_s;e++)q[c++]*=1+.029*e*e/d.SBMAX_s/d.SBMAX_s,q[c++]*=1+.029*e*e/d.SBMAX_s/d.SBMAX_s,q[c++]*=1+.029*e*e/d.SBMAX_s/d.SBMAX_s;a[f][k]=0|Math.max(n[f][k],.9*a[f][k])}};this.VBR_new_prepare=function(g,b,n,a,f,k){var l=g.internal_flags,q=1,c=0,e=0,p;g.free_format?(l.bitrate_index=0,c=new hb(c),p=B.ResvFrameBegin(g,c),c=c.bits,f[0]=p):(l.bitrate_index=l.VBR_max_bitrate,c=new hb(c),B.ResvFrameBegin(g,c),c=c.bits,get_framebits(g,f),p=f[l.VBR_max_bitrate]);for(f=0;f<
l.mode_gr;f++){z.on_pe(g,b,k[f],c,f,0);l.mode_ext==d.MPG_MD_MS_LR&&ms_convert(l.l3_side,f);for(var r=0;r<l.channels_out;++r){var w=l.l3_side.tt[f][r];l.masking_lower=Math.pow(10,.1*l.PSY.mask_adjust);init_outer_loop(l,w);0!=z.calc_xmin(g,n[f][r],w,a[f][r])&&(q=0);e+=k[f][r]}}for(f=0;f<l.mode_gr;f++)for(r=0;r<l.channels_out;r++)e>p&&(k[f][r]*=p,k[f][r]/=e);return q};this.calc_target_bits=function(g,b,n,a,f,k){var l=g.internal_flags,q=l.l3_side,c,e;l.bitrate_index=l.VBR_max_bitrate;e=new hb(0);k[0]=
B.ResvFrameBegin(g,e);l.bitrate_index=1;e=p.getframebits(g)-8*l.sideinfo_len;f[0]=e/(l.mode_gr*l.channels_out);e=g.VBR_mean_bitrate_kbps*g.framesize*1E3;0!=(l.substep_shaping&1)&&(e*=1.09);e/=g.out_samplerate;e-=8*l.sideinfo_len;e/=l.mode_gr*l.channels_out;c=.93+.07*(11-g.compression_ratio)/5.5;.9>c&&(c=.9);1<c&&(c=1);for(g=0;g<l.mode_gr;g++){var v=0;for(f=0;f<l.channels_out;f++){a[g][f]=int(c*e);if(700<b[g][f]){var r=int((b[g][f]-700)/1.4),w=q.tt[g][f];a[g][f]=int(c*e);w.block_type==d.SHORT_TYPE&&
r<e/2&&(r=e/2);r>3*e/2?r=3*e/2:0>r&&(r=0);a[g][f]+=r}a[g][f]>X.MAX_BITS_PER_CHANNEL&&(a[g][f]=X.MAX_BITS_PER_CHANNEL);v+=a[g][f]}if(v>X.MAX_BITS_PER_GRANULE)for(f=0;f<l.channels_out;++f)a[g][f]*=X.MAX_BITS_PER_GRANULE,a[g][f]/=v}if(l.mode_ext==d.MPG_MD_MS_LR)for(g=0;g<l.mode_gr;g++)z.reduce_side(a[g],n[g],e*l.channels_out,X.MAX_BITS_PER_GRANULE);for(g=b=0;g<l.mode_gr;g++)for(f=0;f<l.channels_out;f++)a[g][f]>X.MAX_BITS_PER_CHANNEL&&(a[g][f]=X.MAX_BITS_PER_CHANNEL),b+=a[g][f];if(b>k[0])for(g=0;g<l.mode_gr;g++)for(f=
0;f<l.channels_out;f++)a[g][f]*=k[0],a[g][f]/=b}}function Xa(){this.thm=new Vb;this.en=new Vb}function Pc(){function r(b,d,a){for(var g=10,n=d+238-14-286,l=-15;0>l;l++){var q,c,e;q=k[g+-10];c=b[n+-224]*q;e=b[d+224]*q;q=k[g+-9];c+=b[n+-160]*q;e+=b[d+160]*q;q=k[g+-8];c+=b[n+-96]*q;e+=b[d+96]*q;q=k[g+-7];c+=b[n+-32]*q;e+=b[d+32]*q;q=k[g+-6];c+=b[n+32]*q;e+=b[d+-32]*q;q=k[g+-5];c+=b[n+96]*q;e+=b[d+-96]*q;q=k[g+-4];c+=b[n+160]*q;e+=b[d+-160]*q;q=k[g+-3];c+=b[n+224]*q;e+=b[d+-224]*q;q=k[g+-2];c+=b[d+-256]*
q;e-=b[n+256]*q;q=k[g+-1];c+=b[d+-192]*q;e-=b[n+192]*q;q=k[g+0];c+=b[d+-128]*q;e-=b[n+128]*q;q=k[g+1];c+=b[d+-64]*q;e-=b[n+64]*q;q=k[g+2];c+=b[d+0]*q;e-=b[n+0]*q;q=k[g+3];c+=b[d+64]*q;e-=b[n+-64]*q;q=k[g+4];c+=b[d+128]*q;e-=b[n+-128]*q;q=k[g+5];c+=b[d+192]*q;e-=b[n+-192]*q;c*=k[g+6];q=e-c;a[30+2*l]=e+c;a[31+2*l]=k[g+7]*q;g+=18;d--;n++}e=b[d+-16]*k[g+-10];c=b[d+-32]*k[g+-2];e+=(b[d+-48]-b[d+16])*k[g+-9];c+=b[d+-96]*k[g+-1];e+=(b[d+-80]+b[d+48])*k[g+-8];c+=b[d+-160]*k[g+0];e+=(b[d+-112]-b[d+80])*k[g+
-7];c+=b[d+-224]*k[g+1];e+=(b[d+-144]+b[d+112])*k[g+-6];c-=b[d+32]*k[g+2];e+=(b[d+-176]-b[d+144])*k[g+-5];c-=b[d+96]*k[g+3];e+=(b[d+-208]+b[d+176])*k[g+-4];c-=b[d+160]*k[g+4];e+=(b[d+-240]-b[d+208])*k[g+-3];c-=b[d+224];b=c-e;d=c+e;e=a[14];c=a[15]-e;a[31]=d+e;a[30]=b+c;a[15]=b-c;a[14]=d-e;c=a[28]-a[0];a[0]+=a[28];a[28]=c*k[g+-36+7];c=a[29]-a[1];a[1]+=a[29];a[29]=c*k[g+-36+7];c=a[26]-a[2];a[2]+=a[26];a[26]=c*k[g+-72+7];c=a[27]-a[3];a[3]+=a[27];a[27]=c*k[g+-72+7];c=a[24]-a[4];a[4]+=a[24];a[24]=c*k[g+
-108+7];c=a[25]-a[5];a[5]+=a[25];a[25]=c*k[g+-108+7];c=a[22]-a[6];a[6]+=a[22];a[22]=c*aa.SQRT2;c=a[23]-a[7];a[7]+=a[23];a[23]=c*aa.SQRT2-a[7];a[7]-=a[6];a[22]-=a[7];a[23]-=a[22];c=a[6];a[6]=a[31]-c;a[31]+=c;c=a[7];a[7]=a[30]-c;a[30]+=c;c=a[22];a[22]=a[15]-c;a[15]+=c;c=a[23];a[23]=a[14]-c;a[14]+=c;c=a[20]-a[8];a[8]+=a[20];a[20]=c*k[g+-180+7];c=a[21]-a[9];a[9]+=a[21];a[21]=c*k[g+-180+7];c=a[18]-a[10];a[10]+=a[18];a[18]=c*k[g+-216+7];c=a[19]-a[11];a[11]+=a[19];a[19]=c*k[g+-216+7];c=a[16]-a[12];a[12]+=
a[16];a[16]=c*k[g+-252+7];c=a[17]-a[13];a[13]+=a[17];a[17]=c*k[g+-252+7];c=-a[20]+a[24];a[20]+=a[24];a[24]=c*k[g+-216+7];c=-a[21]+a[25];a[21]+=a[25];a[25]=c*k[g+-216+7];c=a[4]-a[8];a[4]+=a[8];a[8]=c*k[g+-216+7];c=a[5]-a[9];a[5]+=a[9];a[9]=c*k[g+-216+7];c=a[0]-a[12];a[0]+=a[12];a[12]=c*k[g+-72+7];c=a[1]-a[13];a[1]+=a[13];a[13]=c*k[g+-72+7];c=a[16]-a[28];a[16]+=a[28];a[28]=c*k[g+-72+7];c=-a[17]+a[29];a[17]+=a[29];a[29]=c*k[g+-72+7];c=aa.SQRT2*(a[2]-a[10]);a[2]+=a[10];a[10]=c;c=aa.SQRT2*(a[3]-a[11]);
a[3]+=a[11];a[11]=c;c=aa.SQRT2*(-a[18]+a[26]);a[18]+=a[26];a[26]=c-a[18];c=aa.SQRT2*(-a[19]+a[27]);a[19]+=a[27];a[27]=c-a[19];c=a[2];a[19]-=a[3];a[3]-=c;a[2]=a[31]-c;a[31]+=c;c=a[3];a[11]-=a[19];a[18]-=c;a[3]=a[30]-c;a[30]+=c;c=a[18];a[27]-=a[11];a[19]-=c;a[18]=a[15]-c;a[15]+=c;c=a[19];a[10]-=c;a[19]=a[14]-c;a[14]+=c;c=a[10];a[11]-=c;a[10]=a[23]-c;a[23]+=c;c=a[11];a[26]-=c;a[11]=a[22]-c;a[22]+=c;c=a[26];a[27]-=c;a[26]=a[7]-c;a[7]+=c;c=a[27];a[27]=a[6]-c;a[6]+=c;c=aa.SQRT2*(a[0]-a[4]);a[0]+=a[4];a[4]=
c;c=aa.SQRT2*(a[1]-a[5]);a[1]+=a[5];a[5]=c;c=aa.SQRT2*(a[16]-a[20]);a[16]+=a[20];a[20]=c;c=aa.SQRT2*(a[17]-a[21]);a[17]+=a[21];a[21]=c;c=-aa.SQRT2*(a[8]-a[12]);a[8]+=a[12];a[12]=c-a[8];c=-aa.SQRT2*(a[9]-a[13]);a[9]+=a[13];a[13]=c-a[9];c=-aa.SQRT2*(a[25]-a[29]);a[25]+=a[29];a[29]=c-a[25];c=-aa.SQRT2*(a[24]+a[28]);a[24]-=a[28];a[28]=c-a[24];c=a[24]-a[16];a[24]=c;c=a[20]-c;a[20]=c;c=a[28]-c;a[28]=c;c=a[25]-a[17];a[25]=c;c=a[21]-c;a[21]=c;c=a[29]-c;a[29]=c;c=a[17]-a[1];a[17]=c;c=a[9]-c;a[9]=c;c=a[25]-
c;a[25]=c;c=a[5]-c;a[5]=c;c=a[21]-c;a[21]=c;c=a[13]-c;a[13]=c;c=a[29]-c;a[29]=c;c=a[1]-a[0];a[1]=c;c=a[16]-c;a[16]=c;c=a[17]-c;a[17]=c;c=a[8]-c;a[8]=c;c=a[9]-c;a[9]=c;c=a[24]-c;a[24]=c;c=a[25]-c;a[25]=c;c=a[4]-c;a[4]=c;c=a[5]-c;a[5]=c;c=a[20]-c;a[20]=c;c=a[21]-c;a[21]=c;c=a[12]-c;a[12]=c;c=a[13]-c;a[13]=c;c=a[28]-c;a[28]=c;c=a[29]-c;a[29]=c;c=a[0];a[0]+=a[31];a[31]-=c;c=a[1];a[1]+=a[30];a[30]-=c;c=a[16];a[16]+=a[15];a[15]-=c;c=a[17];a[17]+=a[14];a[14]-=c;c=a[8];a[8]+=a[23];a[23]-=c;c=a[9];a[9]+=a[22];
a[22]-=c;c=a[24];a[24]+=a[7];a[7]-=c;c=a[25];a[25]+=a[6];a[6]-=c;c=a[4];a[4]+=a[27];a[27]-=c;c=a[5];a[5]+=a[26];a[26]-=c;c=a[20];a[20]+=a[11];a[11]-=c;c=a[21];a[21]+=a[10];a[10]-=c;c=a[12];a[12]+=a[19];a[19]-=c;c=a[13];a[13]+=a[18];a[18]-=c;c=a[28];a[28]+=a[3];a[3]-=c;c=a[29];a[29]+=a[2];a[2]-=c}var k=[-.1482523854003001,32.308141959636465,296.40344946382766,883.1344870032432,11113.947376231741,1057.2713659324597,305.7402417275812,30.825928907280012,3.8533188138216365,59.42900443849514,709.5899960123345,
5281.91112291017,-5829.66483675846,-817.6293103748613,-76.91656988279972,-4.594269939176596,.9063471690191471,.1960342806591213,-.15466694054279598,34.324387823855965,301.8067566458425,817.599602898885,11573.795901679885,1181.2520595540152,321.59731579894424,31.232021761053772,3.7107095756221318,53.650946155329365,684.167428119626,5224.56624370173,-6366.391851890084,-908.9766368219582,-89.83068876699639,-5.411397422890401,.8206787908286602,.3901806440322567,-.16070888947830023,36.147034243915876,
304.11815768187864,732.7429163887613,11989.60988270091,1300.012278487897,335.28490093152146,31.48816102859945,3.373875931311736,47.232241542899175,652.7371796173471,5132.414255594984,-6909.087078780055,-1001.9990371107289,-103.62185754286375,-6.104916304710272,.7416505462720353,.5805693545089249,-.16636367662261495,37.751650073343995,303.01103387567713,627.9747488785183,12358.763425278165,1412.2779918482834,346.7496836825721,31.598286663170416,3.1598635433980946,40.57878626349686,616.1671130880391,
5007.833007176154,-7454.040671756168,-1095.7960341867115,-118.24411666465777,-6.818469345853504,.6681786379192989,.7653668647301797,-.1716176790982088,39.11551877123304,298.3413246578966,503.5259106886539,12679.589408408976,1516.5821921214542,355.9850766329023,31.395241710249053,2.9164211881972335,33.79716964664243,574.8943997801362,4853.234992253242,-7997.57021486075,-1189.7624067269965,-133.6444792601766,-7.7202770609839915,.5993769336819237,.9427934736519954,-.17645823955292173,40.21879108166477,
289.9982036694474,359.3226160751053,12950.259102786438,1612.1013903507662,362.85067106591504,31.045922092242872,2.822222032597987,26.988862316190684,529.8996541764288,4671.371946949588,-8535.899136645805,-1282.5898586244496,-149.58553632943463,-8.643494270763135,.5345111359507916,1.111140466039205,-.36174739330527045,41.04429910497807,277.5463268268618,195.6386023135583,13169.43812144731,1697.6433561479398,367.40983966190305,30.557037410382826,2.531473372857427,20.070154905927314,481.50208566532336,
4464.970341588308,-9065.36882077239,-1373.62841526722,-166.1660487028118,-9.58289321133207,.4729647758913199,1.268786568327291,-.36970682634889585,41.393213350082036,261.2935935556502,12.935476055240873,13336.131683328815,1772.508612059496,369.76534388639965,29.751323653701338,2.4023193045459172,13.304795348228817,430.5615775526625,4237.0568611071185,-9581.931701634761,-1461.6913552409758,-183.12733958476446,-10.718010163869403,.41421356237309503,1.414213562373095,-.37677560326535325,41.619486213528496,
241.05423794991074,-187.94665032361226,13450.063605744153,1836.153896465782,369.4908799925761,29.001847876923147,2.0714759319987186,6.779591200894186,377.7767837205709,3990.386575512536,-10081.709459700915,-1545.947424837898,-200.3762958015653,-11.864482073055006,.3578057213145241,1.546020906725474,-.3829366947518991,41.1516456456653,216.47684307105183,-406.1569483347166,13511.136535077321,1887.8076599260432,367.3025214564151,28.136213436723654,1.913880671464418,.3829366947518991,323.85365704338597,
3728.1472257487526,-10561.233882199509,-1625.2025997821418,-217.62525175416,-13.015432208941645,.3033466836073424,1.66293922460509,-.5822628872992417,40.35639251440489,188.20071124269245,-640.2706748618148,13519.21490106562,1927.6022433578062,362.8197642637487,26.968821921868447,1.7463817695935329,-5.62650678237171,269.3016715297017,3453.386536448852,-11016.145278780888,-1698.6569643425091,-234.7658734267683,-14.16351421663124,.2504869601913055,1.76384252869671,-.5887180101749253,39.23429103868072,
155.76096234403798,-889.2492977967378,13475.470561874661,1955.0535223723712,356.4450994756727,25.894952980042156,1.5695032905781554,-11.181939564328772,214.80884394039484,3169.1640829158237,-11443.321309975563,-1765.1588461316153,-251.68908574481912,-15.49755935939164,.198912367379658,1.847759065022573,-.7912582233652842,37.39369355329111,119.699486012458,-1151.0956593239027,13380.446257078214,1970.3952110853447,348.01959814116185,24.731487364283044,1.3850130831637748,-16.421408865300393,161.05030052864092,
2878.3322807850063,-11838.991423510031,-1823.985884688674,-268.2854986386903,-16.81724543849939,.1483359875383474,1.913880671464418,-.7960642926861912,35.2322109610459,80.01928065061526,-1424.0212633405113,13235.794061869668,1973.804052543835,337.9908651258184,23.289159354463873,1.3934255946442087,-21.099669467133474,108.48348407242611,2583.700758091299,-12199.726194855148,-1874.2780658979746,-284.2467154529415,-18.11369784385905,.09849140335716425,1.961570560806461,-.998795456205172,32.56307803611191,
36.958364584370486,-1706.075448829146,13043.287458812016,1965.3831106103316,326.43182772364605,22.175018750622293,1.198638339011324,-25.371248002043963,57.53505923036915,2288.41886619975,-12522.674544337233,-1914.8400385312243,-299.26241273417224,-19.37805630698734,.04912684976946725,1.990369453344394,.0178904535*aa.SQRT2/2.384E-6,.008938074*aa.SQRT2/2.384E-6,.0015673635*aa.SQRT2/2.384E-6,.001228571*aa.SQRT2/2.384E-6,4.856585E-4*aa.SQRT2/2.384E-6,1.09434E-4*aa.SQRT2/2.384E-6,5.0783E-5*aa.SQRT2/2.384E-6,
6.914E-6*aa.SQRT2/2.384E-6,12804.797818791945,1945.5515939597317,313.4244966442953,20.801593959731544,1995.1556208053692,9.000838926174497,-29.20218120805369],p=[[2.382191739347913E-13,6.423305872147834E-13,9.400849094049688E-13,1.122435026096556E-12,1.183840321267481E-12,1.122435026096556E-12,9.40084909404969E-13,6.423305872147839E-13,2.382191739347918E-13,5.456116108943412E-12,4.878985199565852E-12,4.240448995017367E-12,3.559909094758252E-12,2.858043359288075E-12,2.156177623817898E-12,1.475637723558783E-12,
8.371015190102974E-13,2.599706096327376E-13,-5.456116108943412E-12,-4.878985199565852E-12,-4.240448995017367E-12,-3.559909094758252E-12,-2.858043359288076E-12,-2.156177623817898E-12,-1.475637723558783E-12,-8.371015190102975E-13,-2.599706096327376E-13,-2.382191739347923E-13,-6.423305872147843E-13,-9.400849094049696E-13,-1.122435026096556E-12,-1.183840321267481E-12,-1.122435026096556E-12,-9.400849094049694E-13,-6.42330587214784E-13,-2.382191739347918E-13],[2.382191739347913E-13,6.423305872147834E-13,
9.400849094049688E-13,1.122435026096556E-12,1.183840321267481E-12,1.122435026096556E-12,9.400849094049688E-13,6.423305872147841E-13,2.382191739347918E-13,5.456116108943413E-12,4.878985199565852E-12,4.240448995017367E-12,3.559909094758253E-12,2.858043359288075E-12,2.156177623817898E-12,1.475637723558782E-12,8.371015190102975E-13,2.599706096327376E-13,-5.461314069809755E-12,-4.921085770524055E-12,-4.343405037091838E-12,-3.732668368707687E-12,-3.093523840190885E-12,-2.430835727329465E-12,-1.734679010007751E-12,
-9.74825365660928E-13,-2.797435120168326E-13,0,0,0,0,0,0,-2.283748241799531E-13,-4.037858874020686E-13,-2.146547464825323E-13],[.1316524975873958,.414213562373095,.7673269879789602,1.091308501069271,1.303225372841206,1.56968557711749,1.920982126971166,2.414213562373094,3.171594802363212,4.510708503662055,7.595754112725146,22.90376554843115,.984807753012208,.6427876096865394,.3420201433256688,.9396926207859084,-.1736481776669303,-.7660444431189779,.8660254037844387,.5,-.5144957554275265,-.4717319685649723,
-.3133774542039019,-.1819131996109812,-.09457419252642064,-.04096558288530405,-.01419856857247115,-.003699974673760037,.8574929257125442,.8817419973177052,.9496286491027329,.9833145924917901,.9955178160675857,.9991605581781475,.999899195244447,.9999931550702802],[0,0,0,0,0,0,2.283748241799531E-13,4.037858874020686E-13,2.146547464825323E-13,5.461314069809755E-12,4.921085770524055E-12,4.343405037091838E-12,3.732668368707687E-12,3.093523840190885E-12,2.430835727329466E-12,1.734679010007751E-12,9.74825365660928E-13,
2.797435120168326E-13,-5.456116108943413E-12,-4.878985199565852E-12,-4.240448995017367E-12,-3.559909094758253E-12,-2.858043359288075E-12,-2.156177623817898E-12,-1.475637723558782E-12,-8.371015190102975E-13,-2.599706096327376E-13,-2.382191739347913E-13,-6.423305872147834E-13,-9.400849094049688E-13,-1.122435026096556E-12,-1.183840321267481E-12,-1.122435026096556E-12,-9.400849094049688E-13,-6.423305872147841E-13,-2.382191739347918E-13]],B=p[d.SHORT_TYPE],z=p[d.SHORT_TYPE],n=p[d.SHORT_TYPE],ba=p[d.SHORT_TYPE],
g=[0,1,16,17,8,9,24,25,4,5,20,21,12,13,28,29,2,3,18,19,10,11,26,27,6,7,22,23,14,15,30,31];this.mdct_sub48=function(b,k,a){for(var f=286,D=0;D<b.channels_out;D++){for(var l=0;l<b.mode_gr;l++){for(var q,c=b.l3_side.tt[l][D],e=c.xr,v=0,C=b.sb_sample[D][1-l],w=0,y=0;9>y;y++)for(r(k,f,C[w]),r(k,f+32,C[w+1]),w+=2,f+=64,q=1;32>q;q+=2)C[w-1][q]*=-1;for(q=0;32>q;q++,v+=18){var C=c.block_type,w=b.sb_sample[D][l],m=b.sb_sample[D][1-l];0!=c.mixed_block_flag&&2>q&&(C=0);if(1E-12>b.amp_filter[q])Ha.fill(e,v+0,
v+18,0);else{if(1>b.amp_filter[q])for(y=0;18>y;y++)m[y][g[q]]*=b.amp_filter[q];if(C==d.SHORT_TYPE){for(y=-3;0>y;y++){var h=p[d.SHORT_TYPE][y+3];e[v+3*y+9]=w[9+y][g[q]]*h-w[8-y][g[q]];e[v+3*y+18]=w[14-y][g[q]]*h+w[15+y][g[q]];e[v+3*y+10]=w[15+y][g[q]]*h-w[14-y][g[q]];e[v+3*y+19]=m[2-y][g[q]]*h+m[3+y][g[q]];e[v+3*y+11]=m[3+y][g[q]]*h-m[2-y][g[q]];e[v+3*y+20]=m[8-y][g[q]]*h+m[9+y][g[q]]}y=e;w=v;for(h=0;3>h;h++){var x,G,ea,fa,I;ea=y[w+6]*p[d.SHORT_TYPE][0]-y[w+15];m=y[w+0]*p[d.SHORT_TYPE][2]-y[w+9];x=
ea+m;G=ea-m;ea=y[w+15]*p[d.SHORT_TYPE][0]+y[w+6];m=y[w+9]*p[d.SHORT_TYPE][2]+y[w+0];fa=ea+m;I=-ea+m;m=2.069978111953089E-11*(y[w+3]*p[d.SHORT_TYPE][1]-y[w+12]);ea=2.069978111953089E-11*(y[w+12]*p[d.SHORT_TYPE][1]+y[w+3]);y[w+0]=1.90752519173728E-11*x+m;y[w+15]=1.90752519173728E-11*-fa+ea;G*=1.6519652744032674E-11;fa=9.537625958686404E-12*fa+ea;y[w+3]=G-fa;y[w+6]=G+fa;x=9.537625958686404E-12*x-m;I*=1.6519652744032674E-11;y[w+9]=x+I;y[w+12]=x-I;w++}}else{h=F(18);for(y=-9;0>y;y++)x=p[C][y+27]*m[y+9][g[q]]+
p[C][y+36]*m[8-y][g[q]],G=p[C][y+9]*w[y+9][g[q]]-p[C][y+18]*w[8-y][g[q]],h[y+9]=x-G*B[3+y+9],h[y+18]=x*B[3+y+9]+G;var y=e,w=v,A=I=fa=ea=G=x=m=void 0,W=void 0,u=void 0,E=void 0;G=h[17]-h[9];fa=h[15]-h[11];I=h[14]-h[12];A=h[0]+h[8];W=h[1]+h[7];u=h[2]+h[6];E=h[3]+h[5];y[w+17]=A+u-E-(W-h[4]);x=(A+u-E)*z[19]+(W-h[4]);m=(G-fa-I)*z[18];y[w+5]=m+x;y[w+6]=m-x;ea=(h[16]-h[10])*z[18];W=W*z[19]+h[4];m=G*z[12]+ea+fa*z[13]+I*z[14];x=-A*z[16]+W-u*z[17]+E*z[15];y[w+1]=m+x;y[w+2]=m-x;m=G*z[13]-ea-fa*z[14]+I*z[12];
x=-A*z[17]+W-u*z[15]+E*z[16];y[w+9]=m+x;y[w+10]=m-x;m=G*z[14]-ea+fa*z[12]-I*z[13];x=A*z[15]-W+u*z[16]-E*z[17];y[w+13]=m+x;y[w+14]=m-x;E=u=W=A=I=fa=ea=G=void 0;G=h[8]-h[0];fa=h[6]-h[2];I=h[5]-h[3];A=h[17]+h[9];W=h[16]+h[10];u=h[15]+h[11];E=h[14]+h[12];y[w+0]=A+u+E+(W+h[13]);m=(A+u+E)*z[19]-(W+h[13]);x=(G-fa+I)*z[18];y[w+11]=m+x;y[w+12]=m-x;ea=(h[7]-h[1])*z[18];W=h[13]-W*z[19];m=A*z[15]-W+u*z[16]+E*z[17];x=G*z[14]+ea+fa*z[12]+I*z[13];y[w+3]=m+x;y[w+4]=m-x;m=-A*z[17]+W-u*z[15]-E*z[16];x=G*z[13]+ea-fa*
z[14]-I*z[12];y[w+7]=m+x;y[w+8]=m-x;m=-A*z[16]+W-u*z[17]-E*z[15];x=G*z[12]-ea+fa*z[13]-I*z[14];y[w+15]=m+x;y[w+16]=m-x}}if(C!=d.SHORT_TYPE&&0!=q)for(y=7;0<=y;--y)C=e[v+y]*n[20+y]+e[v+-1-y]*ba[28+y],w=e[v+y]*ba[28+y]-e[v+-1-y]*n[20+y],e[v+-1-y]=C,e[v+y]=w}}k=a;f=286;if(1==b.mode_gr)for(l=0;18>l;l++)Q.arraycopy(b.sb_sample[D][1][l],0,b.sb_sample[D][0][l],0,32)}}}function d(){var r=d.FFTOFFSET,k=d.MPG_MD_MS_LR,p=null,B=this.psy=null,z=null,n=null;this.setModules=function(d,b,k,a){p=d;B=this.psy=b;z=
a;n=k};var ba=new Pc;this.lame_encode_mp3_frame=function(g,b,t,a,f,D){var l=Ub([2,2]);l[0][0]=new Xa;l[0][1]=new Xa;l[1][0]=new Xa;l[1][1]=new Xa;var q=Ub([2,2]);q[0][0]=new Xa;q[0][1]=new Xa;q[1][0]=new Xa;q[1][1]=new Xa;var c=[null,null],e=g.internal_flags,v=wa([2,4]),C=[.5,.5],w=[[0,0],[0,0]],y=[[0,0],[0,0]];c[0]=b;c[1]=t;if(0==e.lame_encode_frame_init){b=g.internal_flags;var m,h;if(0==b.lame_encode_frame_init){t=F(2014);var x=F(2014);b.lame_encode_frame_init=1;for(h=m=0;m<286+576*(1+b.mode_gr);++m)m<
576*b.mode_gr?(t[m]=0,2==b.channels_out&&(x[m]=0)):(t[m]=c[0][h],2==b.channels_out&&(x[m]=c[1][h]),++h);for(h=0;h<b.mode_gr;h++)for(m=0;m<b.channels_out;m++)b.l3_side.tt[h][m].block_type=d.SHORT_TYPE;ba.mdct_sub48(b,t,x)}}e.padding=0;0>(e.slot_lag-=e.frac_SpF)&&(e.slot_lag+=g.out_samplerate,e.padding=1);if(0!=e.psymodel)for(x=[null,null],m=0,h=Y(2),t=0;t<e.mode_gr;t++){for(b=0;b<e.channels_out;b++)x[b]=c[b],m=576+576*t-d.FFTOFFSET;b=g.VBR==K.vbr_mtrh||g.VBR==K.vbr_mt?B.L3psycho_anal_vbr(g,x,m,t,l,
q,w[t],y[t],v[t],h):B.L3psycho_anal_ns(g,x,m,t,l,q,w[t],y[t],v[t],h);if(0!=b)return-4;g.mode==la.JOINT_STEREO&&(C[t]=v[t][2]+v[t][3],0<C[t]&&(C[t]=v[t][3]/C[t]));for(b=0;b<e.channels_out;b++){var G=e.l3_side.tt[t][b];G.block_type=h[b];G.mixed_block_flag=0}}else for(t=0;t<e.mode_gr;t++)for(b=0;b<e.channels_out;b++)e.l3_side.tt[t][b].block_type=NORM_TYPE,e.l3_side.tt[t][b].mixed_block_flag=0,y[t][b]=w[t][b]=700;0==e.ATH.useAdjust?e.ATH.adjust=1:(b=e.loudness_sq[0][0],v=e.loudness_sq[1][0],2==e.channels_out?
(b+=e.loudness_sq[0][1],v+=e.loudness_sq[1][1]):(b+=b,v+=v),2==e.mode_gr&&(b=Math.max(b,v)),b=.5*b*e.ATH.aaSensitivityP,.03125<b?(1<=e.ATH.adjust?e.ATH.adjust=1:e.ATH.adjust<e.ATH.adjustLimit&&(e.ATH.adjust=e.ATH.adjustLimit),e.ATH.adjustLimit=1):(v=31.98*b+6.25E-4,e.ATH.adjust>=v?(e.ATH.adjust*=.075*v+.925,e.ATH.adjust<v&&(e.ATH.adjust=v)):e.ATH.adjustLimit>=v?e.ATH.adjust=v:e.ATH.adjust<e.ATH.adjustLimit&&(e.ATH.adjust=e.ATH.adjustLimit),e.ATH.adjustLimit=v));ba.mdct_sub48(e,c[0],c[1]);e.mode_ext=
d.MPG_MD_LR_LR;if(g.force_ms)e.mode_ext=d.MPG_MD_MS_LR;else if(g.mode==la.JOINT_STEREO){for(t=x=v=0;t<e.mode_gr;t++)for(b=0;b<e.channels_out;b++)v+=y[t][b],x+=w[t][b];v<=1*x&&(v=e.l3_side.tt[0],b=e.l3_side.tt[e.mode_gr-1],v[0].block_type==v[1].block_type&&b[0].block_type==b[1].block_type&&(e.mode_ext=d.MPG_MD_MS_LR))}e.mode_ext==k&&(l=q,w=y);if(g.analysis&&null!=e.pinfo)for(t=0;t<e.mode_gr;t++)for(b=0;b<e.channels_out;b++)e.pinfo.ms_ratio[t]=e.ms_ratio[t],e.pinfo.ms_ener_ratio[t]=C[t],e.pinfo.blocktype[t][b]=
e.l3_side.tt[t][b].block_type,e.pinfo.pe[t][b]=w[t][b],Q.arraycopy(e.l3_side.tt[t][b].xr,0,e.pinfo.xr[t][b],0,576),e.mode_ext==k&&(e.pinfo.ers[t][b]=e.pinfo.ers[t][b+2],Q.arraycopy(e.pinfo.energy[t][b+2],0,e.pinfo.energy[t][b],0,e.pinfo.energy[t][b].length));if(g.VBR==K.vbr_off||g.VBR==K.vbr_abr){for(q=0;18>q;q++)e.nsPsy.pefirbuf[q]=e.nsPsy.pefirbuf[q+1];for(t=y=0;t<e.mode_gr;t++)for(b=0;b<e.channels_out;b++)y+=w[t][b];e.nsPsy.pefirbuf[18]=y;y=e.nsPsy.pefirbuf[9];for(q=0;9>q;q++)y+=(e.nsPsy.pefirbuf[q]+
e.nsPsy.pefirbuf[18-q])*d.fircoef[q];y=3350*e.mode_gr*e.channels_out/y;for(t=0;t<e.mode_gr;t++)for(b=0;b<e.channels_out;b++)w[t][b]*=y}e.iteration_loop.iteration_loop(g,w,C,l);p.format_bitstream(g);a=p.copy_buffer(e,a,f,D,1);g.bWriteVbrTag&&z.addVbrFrame(g);if(g.analysis&&null!=e.pinfo){for(b=0;b<e.channels_out;b++){for(f=0;f<r;f++)e.pinfo.pcmdata[b][f]=e.pinfo.pcmdata[b][f+g.framesize];for(f=r;1600>f;f++)e.pinfo.pcmdata[b][f]=c[b][f-r]}n.set_frame_pinfo(g,l)}e.bitrate_stereoMode_Hist[e.bitrate_index][4]++;
e.bitrate_stereoMode_Hist[15][4]++;2==e.channels_out&&(e.bitrate_stereoMode_Hist[e.bitrate_index][e.mode_ext]++,e.bitrate_stereoMode_Hist[15][e.mode_ext]++);for(g=0;g<e.mode_gr;++g)for(c=0;c<e.channels_out;++c)f=e.l3_side.tt[g][c].block_type|0,0!=e.l3_side.tt[g][c].mixed_block_flag&&(f=4),e.bitrate_blockType_Hist[e.bitrate_index][f]++,e.bitrate_blockType_Hist[e.bitrate_index][5]++,e.bitrate_blockType_Hist[15][f]++,e.bitrate_blockType_Hist[15][5]++;return a}}function Qc(){this.size=this.pos=this.want=
this.seen=this.sum=0;this.bag=null;this.TotalFrameSize=this.nBytesWritten=this.nVbrNumFrames=0}function Rc(){this.tt=[[null,null],[null,null]];this.resvDrain_post=this.resvDrain_pre=this.private_bits=this.main_data_begin=0;this.scfsi=[Y(4),Y(4)];for(var d=0;2>d;d++)for(var k=0;2>k;k++)this.tt[d][k]=new Ab}function Sc(){this.last_en_subshort=wa([4,9]);this.lastAttacks=Y(4);this.pefirbuf=F(19);this.longfact=F(d.SBMAX_l);this.shortfact=F(d.SBMAX_s);this.attackthre_s=this.attackthre=0}function Vb(){this.l=
F(d.SBMAX_l);this.s=wa([d.SBMAX_s,3]);var r=this;this.assign=function(k){Q.arraycopy(k.l,0,r.l,0,d.SBMAX_l);for(var p=0;p<d.SBMAX_s;p++)for(var B=0;3>B;B++)r.s[p][B]=k.s[p][B]}}function X(){function r(){this.ptr=this.write_timing=0;this.buf=new Int8Array(40)}this.fill_buffer_resample_init=this.iteration_init_init=this.lame_encode_frame_init=this.Class_ID=0;this.mfbuf=wa([2,X.MFSIZE]);this.full_outer_loop=this.use_best_huffman=this.subblock_gain=this.noise_shaping_stop=this.psymodel=this.substep_shaping=
this.noise_shaping_amp=this.noise_shaping=this.highpass2=this.highpass1=this.lowpass2=this.lowpass1=this.mode_ext=this.samplerate_index=this.bitrate_index=this.VBR_max_bitrate=this.VBR_min_bitrate=this.mf_size=this.mf_samples_to_encode=this.resample_ratio=this.channels_out=this.channels_in=this.mode_gr=0;this.l3_side=new Rc;this.ms_ratio=F(2);this.slot_lag=this.frac_SpF=this.padding=0;this.tag_spec=null;this.nMusicCRC=0;this.OldValue=Y(2);this.CurrentStep=Y(2);this.masking_lower=0;this.bv_scf=Y(576);
this.pseudohalf=Y(za.SFBMAX);this.sfb21_extra=!1;this.inbuf_old=Array(2);this.blackfilt=Array(2*X.BPC+1);this.itime=new Float64Array(2);this.sideinfo_len=0;this.sb_sample=wa([2,2,18,d.SBLIMIT]);this.amp_filter=F(32);this.header=Array(X.MAX_HEADER_BUF);this.ResvMax=this.ResvSize=this.ancillary_flag=this.w_ptr=this.h_ptr=0;this.scalefac_band=new Ba;this.minval_l=F(d.CBANDS);this.minval_s=F(d.CBANDS);this.nb_1=wa([4,d.CBANDS]);this.nb_2=wa([4,d.CBANDS]);this.nb_s1=wa([4,d.CBANDS]);this.nb_s2=wa([4,d.CBANDS]);
this.s3_ll=this.s3_ss=null;this.decay=0;this.thm=Array(4);this.en=Array(4);this.tot_ener=F(4);this.loudness_sq=wa([2,2]);this.loudness_sq_save=F(2);this.mld_l=F(d.SBMAX_l);this.mld_s=F(d.SBMAX_s);this.bm_l=Y(d.SBMAX_l);this.bo_l=Y(d.SBMAX_l);this.bm_s=Y(d.SBMAX_s);this.bo_s=Y(d.SBMAX_s);this.npart_s=this.npart_l=0;this.s3ind=Sa([d.CBANDS,2]);this.s3ind_s=Sa([d.CBANDS,2]);this.numlines_s=Y(d.CBANDS);this.numlines_l=Y(d.CBANDS);this.rnumlines_l=F(d.CBANDS);this.mld_cb_l=F(d.CBANDS);this.mld_cb_s=F(d.CBANDS);
this.numlines_l_num1=this.numlines_s_num1=0;this.pe=F(4);this.ms_ener_ratio_old=this.ms_ratio_l_old=this.ms_ratio_s_old=0;this.blocktype_old=Y(2);this.nsPsy=new Sc;this.VBR_seek_table=new Qc;this.PSY=this.ATH=null;this.nogap_current=this.nogap_total=0;this.findPeakSample=this.findReplayGain=this.decode_on_the_fly=!0;this.AudiophileGain=this.RadioGain=this.PeakSample=0;this.rgdata=null;this.noclipScale=this.noclipGainChange=0;this.bitrate_stereoMode_Hist=Sa([16,5]);this.bitrate_blockType_Hist=Sa([16,
6]);this.hip=this.pinfo=null;this.in_buffer_nsamples=0;this.iteration_loop=this.in_buffer_1=this.in_buffer_0=null;for(var k=0;k<this.en.length;k++)this.en[k]=new Vb;for(k=0;k<this.thm.length;k++)this.thm[k]=new Vb;for(k=0;k<this.header.length;k++)this.header[k]=new r}function Tc(){function r(d,k,g){var b=0,p,a,f;g<<=1;var z=k+g;p=4;do{var l,q,c,e,v,H,w;w=p>>1;e=p;v=p<<1;H=v+e;p=v<<1;a=k;f=a+w;do{var y,m,h,x;m=d[a+0]-d[a+e];y=d[a+0]+d[a+e];x=d[a+v]-d[a+H];h=d[a+v]+d[a+H];d[a+v]=y-h;d[a+0]=y+h;d[a+
H]=m-x;d[a+e]=m+x;m=d[f+0]-d[f+e];y=d[f+0]+d[f+e];x=aa.SQRT2*d[f+H];h=aa.SQRT2*d[f+v];d[f+v]=y-h;d[f+0]=y+h;d[f+H]=m-x;d[f+e]=m+x;f+=p;a+=p}while(a<z);q=B[b+0];l=B[b+1];for(c=1;c<w;c++){var G,ea;G=1-2*l*l;ea=2*l*q;a=k+c;f=k+e-c;do{var F,I,A,W,u;F=ea*d[a+e]-G*d[f+e];h=G*d[a+e]+ea*d[f+e];m=d[a+0]-h;y=d[a+0]+h;A=d[f+0]-F;I=d[f+0]+F;F=ea*d[a+H]-G*d[f+H];h=G*d[a+H]+ea*d[f+H];x=d[a+v]-h;h=d[a+v]+h;u=d[f+v]-F;W=d[f+v]+F;F=l*h-q*u;h=q*h+l*u;d[a+v]=y-h;d[a+0]=y+h;d[f+H]=A-F;d[f+e]=A+F;F=q*W-l*x;h=l*W+q*x;
d[f+v]=I-h;d[f+0]=I+h;d[a+H]=m-F;d[a+e]=m+F;f+=p;a+=p}while(a<z);G=q;q=G*B[b+0]-l*B[b+1];l=G*B[b+1]+l*B[b+0]}b+=2}while(p<g)}var k=F(d.BLKSIZE),p=F(d.BLKSIZE_s/2),B=[.9238795325112867,.3826834323650898,.9951847266721969,.0980171403295606,.9996988186962042,.02454122852291229,.9999811752826011,.006135884649154475],z=[0,128,64,192,32,160,96,224,16,144,80,208,48,176,112,240,8,136,72,200,40,168,104,232,24,152,88,216,56,184,120,248,4,132,68,196,36,164,100,228,20,148,84,212,52,180,116,244,12,140,76,204,
44,172,108,236,28,156,92,220,60,188,124,252,2,130,66,194,34,162,98,226,18,146,82,210,50,178,114,242,10,138,74,202,42,170,106,234,26,154,90,218,58,186,122,250,6,134,70,198,38,166,102,230,22,150,86,214,54,182,118,246,14,142,78,206,46,174,110,238,30,158,94,222,62,190,126,254];this.fft_short=function(k,B,g,b,t){for(k=0;3>k;k++){var a=d.BLKSIZE_s/2,f=65535&192*(k+1),D=d.BLKSIZE_s/8-1;do{var l,q,c,e,v,C=z[D<<2]&255;l=p[C]*b[g][t+C+f];v=p[127-C]*b[g][t+C+f+128];q=l-v;l+=v;c=p[C+64]*b[g][t+C+f+64];v=p[63-
C]*b[g][t+C+f+192];e=c-v;c+=v;a-=4;B[k][a+0]=l+c;B[k][a+2]=l-c;B[k][a+1]=q+e;B[k][a+3]=q-e;l=p[C+1]*b[g][t+C+f+1];v=p[126-C]*b[g][t+C+f+129];q=l-v;l+=v;c=p[C+65]*b[g][t+C+f+65];v=p[62-C]*b[g][t+C+f+193];e=c-v;c+=v;B[k][a+d.BLKSIZE_s/2+0]=l+c;B[k][a+d.BLKSIZE_s/2+2]=l-c;B[k][a+d.BLKSIZE_s/2+1]=q+e;B[k][a+d.BLKSIZE_s/2+3]=q-e}while(0<=--D);r(B[k],a,d.BLKSIZE_s/2)}};this.fft_long=function(n,p,g,b,t){n=d.BLKSIZE/8-1;var a=d.BLKSIZE/2;do{var f,B,l,q,c,e=z[n]&255;f=k[e]*b[g][t+e];c=k[e+512]*b[g][t+e+512];
B=f-c;f+=c;l=k[e+256]*b[g][t+e+256];c=k[e+768]*b[g][t+e+768];q=l-c;l+=c;a-=4;p[a+0]=f+l;p[a+2]=f-l;p[a+1]=B+q;p[a+3]=B-q;f=k[e+1]*b[g][t+e+1];c=k[e+513]*b[g][t+e+513];B=f-c;f+=c;l=k[e+257]*b[g][t+e+257];c=k[e+769]*b[g][t+e+769];q=l-c;l+=c;p[a+d.BLKSIZE/2+0]=f+l;p[a+d.BLKSIZE/2+2]=f-l;p[a+d.BLKSIZE/2+1]=B+q;p[a+d.BLKSIZE/2+3]=B-q}while(0<=--n);r(p,a,d.BLKSIZE/2)};this.init_fft=function(n){for(n=0;n<d.BLKSIZE;n++)k[n]=.42-.5*Math.cos(2*Math.PI*(n+.5)/d.BLKSIZE)+.08*Math.cos(4*Math.PI*(n+.5)/d.BLKSIZE);
for(n=0;n<d.BLKSIZE_s/2;n++)p[n]=.5*(1-Math.cos(2*Math.PI*(n+.5)/d.BLKSIZE_s))}}function dc(){function r(a,c){for(var m=0,b=0;b<d.BLKSIZE/2;++b)m+=a[b]*c.ATH.eql_w[b];return m*=C}function k(a,c,d,b,h,g){var e;if(c>a)if(c<a*y)e=c/a;else return a+c;else{if(a>=c*y)return a+c;e=a/c}a+=c;if(6>=b+3){if(e>=w)return a;b=0|aa.FAST_LOG10_X(e,16);return a*G[b]}b=0|aa.FAST_LOG10_X(e,16);c=0!=g?h.ATH.cb_s[d]*h.ATH.adjust:h.ATH.cb_l[d]*h.ATH.adjust;return a<m*c?a>c?(d=1,13>=b&&(d=ea[b]),c=aa.FAST_LOG10_X(a/c,10/
15),a*((x[b]-d)*c+d)):13<b?a:a*ea[b]:a*x[b]}function p(a,c,m){var d;0>a&&(a=0);0>c&&(c=0);if(0>=a)return c;if(0>=c)return a;d=c>a?c/a:a/c;if(-2<=m&&2>=m){if(d>=w)return a+c;m=0|aa.FAST_LOG10_X(d,16);return(a+c)*fa[m]}if(d<y)return a+c;a<c&&(a=c);return a}function B(a,c,m,b,h){var e,g,l=0,k=0;for(e=g=0;e<d.SBMAX_s;++g,++e){for(var n=a.bo_s[e],f=a.npart_s,n=n<f?n:f;g<n;)l+=c[g],k+=m[g],g++;a.en[b].s[e][h]=l;a.thm[b].s[e][h]=k;if(g>=f){++e;break}k=a.PSY.bo_s_weight[e];f=1-k;l=k*c[g];k*=m[g];a.en[b].s[e][h]+=
l;a.thm[b].s[e][h]+=k;l=f*c[g];k=f*m[g]}for(;e<d.SBMAX_s;++e)a.en[b].s[e][h]=0,a.thm[b].s[e][h]=0}function z(a,c,m,b){var h,e,g=0,l=0;for(h=e=0;h<d.SBMAX_l;++e,++h){for(var k=a.bo_l[h],f=a.npart_l,k=k<f?k:f;e<k;)g+=c[e],l+=m[e],e++;a.en[b].l[h]=g;a.thm[b].l[h]=l;if(e>=f){++h;break}l=a.PSY.bo_l_weight[h];f=1-l;g=l*c[e];l*=m[e];a.en[b].l[h]+=g;a.thm[b].l[h]+=l;g=f*c[e];l=f*m[e]}for(;h<d.SBMAX_l;++h)a.en[b].l[h]=0,a.thm[b].l[h]=0}function n(a,c,m){return 1<=m?a:0>=m?c:0<c?Math.pow(a/c,m)*c:0}function ba(a,
c){for(var m=309.07,b=0;b<d.SBMAX_s-1;b++)for(var h=0;3>h;h++){var e=a.thm.s[b][h];if(0<e){var e=e*c,g=a.en.s[b][h];g>e&&(m=g>1E10*e?m+23.02585092994046*I[b]:m+I[b]*aa.FAST_LOG10(g/e))}}return m}function g(a,c){for(var m=281.0575,b=0;b<d.SBMAX_l-1;b++){var h=a.thm.l[b];if(0<h){var h=h*c,e=a.en.l[b];e>h&&(m=e>1E10*h?m+23.02585092994046*A[b]:m+A[b]*aa.FAST_LOG10(e/h))}}return m}function b(a,c,m,b,d){var h,e;for(h=e=0;h<a.npart_l;++h){var g=0,l=0,k;for(k=0;k<a.numlines_l[h];++k,++e){var f=c[e],g=g+f;
l<f&&(l=f)}m[h]=g;b[h]=l;d[h]=g*a.rnumlines_l[h]}}function t(a,c,m,b){var d=h.length-1,e=0,g=m[e]+m[e+1];if(0<g){var l=c[e];l<c[e+1]&&(l=c[e+1]);g=20*(2*l-g)/(g*(a.numlines_l[e]+a.numlines_l[e+1]-1));g|=0;g>d&&(g=d);b[e]=g}else b[e]=0;for(e=1;e<a.npart_l-1;e++)g=m[e-1]+m[e]+m[e+1],0<g?(l=c[e-1],l<c[e]&&(l=c[e]),l<c[e+1]&&(l=c[e+1]),g=20*(3*l-g)/(g*(a.numlines_l[e-1]+a.numlines_l[e]+a.numlines_l[e+1]-1)),g|=0,g>d&&(g=d),b[e]=g):b[e]=0;g=m[e-1]+m[e];0<g?(l=c[e-1],l<c[e]&&(l=c[e]),g=20*(2*l-g)/(g*(a.numlines_l[e-
1]+a.numlines_l[e]-1)),g|=0,g>d&&(g=d),b[e]=g):b[e]=0}function a(a,c,m,b,d,h,e){var g=2*h;d=0<h?Math.pow(10,d):1;for(var l,k,f=0;f<e;++f){var n=a[2][f],x=a[3][f],q=c[0][f],p=c[1][f],r=c[2][f],v=c[3][f];q<=1.58*p&&p<=1.58*q?(l=m[f]*n,k=Math.max(r,Math.min(v,m[f]*x)),l=Math.max(v,Math.min(r,l))):(k=r,l=v);0<h&&(v=b[f]*d,q=Math.min(Math.max(q,v),Math.max(p,v)),r=Math.max(k,v),v=Math.max(l,v),p=r+v,0<p&&q*g<p&&(q=q*g/p,r*=q,v*=q),k=Math.min(r,k),l=Math.min(v,l));k>n&&(k=n);l>x&&(l=x);c[2][f]=k;c[3][f]=
l}}function f(a,c){var m;m=0<=a?27*-a:a*c;return-72>=m?0:Math.exp(.2302585093*m)}function D(a){0>a&&(a=0);a*=.001;return 13*Math.atan(.76*a)+3.5*Math.atan(a*a/56.25)}function l(a,c,m,b,h,e,g,l,k,f,n,x){var q=F(d.CBANDS+1),p=l/(15<x?1152:384),v=Y(d.HBLKSIZE),r;l/=k;var w=0,t=0;for(r=0;r<d.CBANDS;r++){var u,A;u=D(l*w);q[r]=l*w;for(A=w;.34>D(l*A)-u&&A<=k/2;A++);a[r]=A-w;for(t=r+1;w<A;)v[w++]=r;if(w>k/2){w=k/2;++r;break}}q[r]=l*w;for(w=0;w<x;w++)r=f[w],u=f[w+1],r=0|Math.floor(.5+n*(r-.5)),0>r&&(r=0),
A=0|Math.floor(.5+n*(u-.5)),A>k/2&&(A=k/2),m[w]=(v[r]+v[A])/2,c[w]=v[A],g[w]=(p*u-q[c[w]])/(q[c[w]+1]-q[c[w]]),0>g[w]?g[w]=0:1<g[w]&&(g[w]=1),u=D(l*f[w]*n),u=Math.min(u,15.5)/15.5,e[w]=Math.pow(10,1.25*(1-Math.cos(Math.PI*u))-2.5);for(c=w=0;c<t;c++)m=a[c],u=D(l*w),e=D(l*(w+m-1)),b[c]=.5*(u+e),u=D(l*(w-.5)),e=D(l*(w+m-.5)),h[c]=e-u,w+=m;return t}function q(a,c,m,b,h,e){var g=wa([d.CBANDS,d.CBANDS]),l=0;if(e)for(var k=0;k<c;k++)for(e=0;e<c;e++){var n;var x=n=void 0,x=n=void 0;n=m[k]-m[e];n=0<=n?3*n:
1.5*n;.5<=n&&2.5>=n?(x=n-.5,x=8*(x*x-2*x)):x=0;n+=.474;n=15.811389+7.5*n-17.5*Math.sqrt(1+n*n);-60>=n?n=0:(n=Math.exp(.2302585093*(x+n)),n/=.6609193);x=n*b[e];g[k][e]=x*h[k]}else for(e=0;e<c;e++){n=15+Math.min(21/m[e],12);var q;var k=n,p=x=0;q=0;var r=p=void 0;for(q=0;1E-20<f(q,k);--q);p=q;for(r=0;1E-12<Math.abs(r-p);)q=(r+p)/2,0<f(q,k)?r=q:p=q;x=p;for(q=0;1E-20<f(q,k);q+=1);p=0;for(r=q;1E-12<Math.abs(r-p);)q=(r+p)/2,0<f(q,k)?p=q:r=q;for(var p=r,r=0,v=void 0,v=0;1E3>=v;++v)q=x+v*(p-x)/1E3,q=f(q,k),
r+=q;q=1001/(r*(p-x));for(k=0;k<c;k++)x=q*f(m[k]-m[e],n)*b[e],g[k][e]=x*h[k]}for(k=0;k<c;k++){for(e=0;e<c&&!(0<g[k][e]);e++);a[k][0]=e;for(e=c-1;0<e&&!(0<g[k][e]);e--);a[k][1]=e;l+=a[k][1]-a[k][0]+1}m=F(l);for(k=b=0;k<c;k++)for(e=a[k][0];e<=a[k][1];e++)m[b++]=g[k][e];return m}function c(a){a=D(a);a=Math.min(a,15.5)/15.5;return Math.pow(10,1.25*(1-Math.cos(Math.PI*a))-2.5)}function e(a,c){-.3>a&&(a=3410);a=Math.max(.1,a/1E3);return 3.64*Math.pow(a,-.8)-6.8*Math.exp(-.6*Math.pow(a-3.4,2))+6*Math.exp(-.15*
Math.pow(a-8.7,2))+.001*(.6+.04*c)*Math.pow(a,4)}var v=new Tc,C=1/217621504/(d.BLKSIZE/2),w,y,m,h=[1,.79433,.63096,.63096,.63096,.63096,.63096,.25119,.11749],x=[3.3246*3.3246,3.23837*3.23837,9.9500500969,9.0247369744,8.1854926609,7.0440875649,2.46209*2.46209,2.284*2.284,4.4892710641,1.96552*1.96552,1.82335*1.82335,1.69146*1.69146,2.4621061921,2.1508568964,1.37074*1.37074,1.31036*1.31036,1.5691069696,1.4555939904,1.16203*1.16203,1.2715945225,1.09428*1.09428,1.0659*1.0659,1.0779838276,1.0382591025,
1],G=[1.7782755904,1.35879*1.35879,1.38454*1.38454,1.39497*1.39497,1.40548*1.40548,1.3537*1.3537,1.6999465924,1.22321*1.22321,1.3169398564,1],ea=[5.5396212496,2.29259*2.29259,4.9868695969,2.12675*2.12675,2.02545*2.02545,1.87894*1.87894,1.74303*1.74303,1.61695*1.61695,2.2499700001,1.39148*1.39148,1.29083*1.29083,1.19746*1.19746,1.2339655056,1.0779838276],fa=[1.7782755904,1.35879*1.35879,1.38454*1.38454,1.39497*1.39497,1.40548*1.40548,1.3537*1.3537,1.6999465924,1.22321*1.22321,1.3169398564,1],I=[11.8,
13.6,17.2,32,46.5,51.3,57.5,67.1,71.5,84.6,97.6,130],A=[6.8,5.8,5.8,6.4,6.5,9.9,12.1,14.4,15,18.9,21.6,26.9,34.2,40.2,46.8,56.5,60.7,73.9,85.7,93.4,126.1],W=[-1.730326E-17,-.01703172,-1.349528E-17,.0418072,-6.73278E-17,-.0876324,-3.0835E-17,.1863476,-1.104424E-16,-.627638];this.L3psycho_anal_ns=function(a,c,m,e,l,f,x,q,p,w){var u=a.internal_flags,A=wa([2,d.BLKSIZE]),G=wa([2,3,d.BLKSIZE_s]),y=F(d.CBANDS+1),I=F(d.CBANDS+1),D=F(d.CBANDS+2),C=Y(2),ea=Y(2),fa,S,N,M,Q,T,X,L,na=wa([2,576]),V,ya=Y(d.CBANDS+
2),O=Y(d.CBANDS+2);Ha.fill(O,0);fa=u.channels_out;a.mode==la.JOINT_STEREO&&(fa=4);V=a.VBR==K.vbr_off?0==u.ResvMax?0:u.ResvSize/u.ResvMax*.5:a.VBR==K.vbr_rh||a.VBR==K.vbr_mtrh||a.VBR==K.vbr_mt?.6:1;for(S=0;S<u.channels_out;S++){var za=c[S],Fa=m+576-350-21+192;for(M=0;576>M;M++){var Na,sc;Na=za[Fa+M+10];for(Q=sc=0;9>Q;Q+=2)Na+=W[Q]*(za[Fa+M+Q]+za[Fa+M+21-Q]),sc+=W[Q+1]*(za[Fa+M+Q+1]+za[Fa+M+21-Q-1]);na[S][M]=Na+sc}l[e][S].en.assign(u.en[S]);l[e][S].thm.assign(u.thm[S]);2<fa&&(f[e][S].en.assign(u.en[S+
2]),f[e][S].thm.assign(u.thm[S+2]))}for(S=0;S<fa;S++){var oa=F(12),Oa=[0,0,0,0],Ba=F(12),zc=1,Xa,Sa=F(d.CBANDS),hb=F(d.CBANDS),pa=[0,0,0,0],$a=F(d.HBLKSIZE),ab=wa([3,d.HBLKSIZE_s]);for(M=0;3>M;M++)oa[M]=u.nsPsy.last_en_subshort[S][M+6],Ba[M]=oa[M]/u.nsPsy.last_en_subshort[S][M+4],Oa[0]+=oa[M];if(2==S)for(M=0;576>M;M++){var Ac,Bb;Ac=na[0][M];Bb=na[1][M];na[0][M]=Ac+Bb;na[1][M]=Ac-Bb}var ec=na[S&1],Cb=0;for(M=0;9>M;M++){for(var zb=Cb+64,La=1;Cb<zb;Cb++)La<Math.abs(ec[Cb])&&(La=Math.abs(ec[Cb]));u.nsPsy.last_en_subshort[S][M]=
oa[M+3]=La;Oa[1+M/3]+=La;La=La>oa[M+3-2]?La/oa[M+3-2]:oa[M+3-2]>10*La?oa[M+3-2]/(10*La):0;Ba[M+3]=La}if(a.analysis){var Kb=Ba[0];for(M=1;12>M;M++)Kb<Ba[M]&&(Kb=Ba[M]);u.pinfo.ers[e][S]=u.pinfo.ers_save[S];u.pinfo.ers_save[S]=Kb}Xa=3==S?u.nsPsy.attackthre_s:u.nsPsy.attackthre;for(M=0;12>M;M++)0==pa[M/3]&&Ba[M]>Xa&&(pa[M/3]=M%3+1);for(M=1;4>M;M++)1.7>(Oa[M-1]>Oa[M]?Oa[M-1]/Oa[M]:Oa[M]/Oa[M-1])&&(pa[M]=0,1==M&&(pa[0]=0));0!=pa[0]&&0!=u.nsPsy.lastAttacks[S]&&(pa[0]=0);if(3==u.nsPsy.lastAttacks[S]||0!=
pa[0]+pa[1]+pa[2]+pa[3])zc=0,0!=pa[1]&&0!=pa[0]&&(pa[1]=0),0!=pa[2]&&0!=pa[1]&&(pa[2]=0),0!=pa[3]&&0!=pa[2]&&(pa[3]=0);2>S?ea[S]=zc:0==zc&&(ea[0]=ea[1]=0);p[S]=u.tot_ener[S];var P=a,Ia=$a,Lb=ab,Ma=A,qb=S&1,Ta=G,Pa=S&1,ib=e,Ca=S,ta=c,pb=m,Va=P.internal_flags;if(2>Ca)v.fft_long(Va,Ma[qb],Ca,ta,pb),v.fft_short(Va,Ta[Pa],Ca,ta,pb);else if(2==Ca){for(var ga=d.BLKSIZE-1;0<=ga;--ga){var Mb=Ma[qb+0][ga],Db=Ma[qb+1][ga];Ma[qb+0][ga]=(Mb+Db)*aa.SQRT2*.5;Ma[qb+1][ga]=(Mb-Db)*aa.SQRT2*.5}for(var Da=2;0<=Da;--Da)for(ga=
d.BLKSIZE_s-1;0<=ga;--ga)Mb=Ta[Pa+0][Da][ga],Db=Ta[Pa+1][Da][ga],Ta[Pa+0][Da][ga]=(Mb+Db)*aa.SQRT2*.5,Ta[Pa+1][Da][ga]=(Mb-Db)*aa.SQRT2*.5}Ia[0]=Ma[qb+0][0];Ia[0]*=Ia[0];for(ga=d.BLKSIZE/2-1;0<=ga;--ga){var Wb=Ma[qb+0][d.BLKSIZE/2-ga],ub=Ma[qb+0][d.BLKSIZE/2+ga];Ia[d.BLKSIZE/2-ga]=.5*(Wb*Wb+ub*ub)}for(Da=2;0<=Da;--Da)for(Lb[Da][0]=Ta[Pa+0][Da][0],Lb[Da][0]*=Lb[Da][0],ga=d.BLKSIZE_s/2-1;0<=ga;--ga)Wb=Ta[Pa+0][Da][d.BLKSIZE_s/2-ga],ub=Ta[Pa+0][Da][d.BLKSIZE_s/2+ga],Lb[Da][d.BLKSIZE_s/2-ga]=.5*(Wb*Wb+
ub*ub);for(var xa=0,ga=11;ga<d.HBLKSIZE;ga++)xa+=Ia[ga];Va.tot_ener[Ca]=xa;if(P.analysis){for(ga=0;ga<d.HBLKSIZE;ga++)Va.pinfo.energy[ib][Ca][ga]=Va.pinfo.energy_save[Ca][ga],Va.pinfo.energy_save[Ca][ga]=Ia[ga];Va.pinfo.pe[ib][Ca]=Va.pe[Ca]}2==P.athaa_loudapprox&&2>Ca&&(Va.loudness_sq[ib][Ca]=Va.loudness_sq_save[Ca],Va.loudness_sq_save[Ca]=r(Ia,Va));b(u,$a,y,Sa,hb);t(u,Sa,hb,ya);for(L=0;3>L;L++){for(var mc,va,bb=ab,cb=I,Nb=D,Eb=S,Xb=L,Z=a.internal_flags,jb=void 0,ka=void 0,ka=jb=0;ka<Z.npart_s;++ka){for(var Wa=
0,fc=0,Ab=Z.numlines_s[ka],db=0;db<Ab;++db,++jb){var nc=bb[Xb][jb],Wa=Wa+nc;fc<nc&&(fc=nc)}cb[ka]=Wa}for(jb=ka=0;ka<Z.npart_s;ka++){var kb=Z.s3ind_s[ka][0],vb=Z.s3_ss[jb++]*cb[kb];for(++kb;kb<=Z.s3ind_s[ka][1];)vb+=Z.s3_ss[jb]*cb[kb],++jb,++kb;var Ob=2*Z.nb_s1[Eb][ka];Nb[ka]=Math.min(vb,Ob);Z.blocktype_old[Eb&1]==d.SHORT_TYPE&&(Ob=16*Z.nb_s2[Eb][ka],Nb[ka]=Math.min(Ob,Nb[ka]));Z.nb_s2[Eb][ka]=Z.nb_s1[Eb][ka];Z.nb_s1[Eb][ka]=vb}for(;ka<=d.CBANDS;++ka)cb[ka]=0,Nb[ka]=0;B(u,I,D,S,L);for(X=0;X<d.SBMAX_s;X++){va=
u.thm[S].s[X][L];va*=.8;if(2<=pa[L]||1==pa[L+1]){var Fb=0!=L?L-1:2,La=n(u.thm[S].s[X][Fb],va,.6*V);va=Math.min(va,La)}if(1==pa[L])Fb=0!=L?L-1:2,La=n(u.thm[S].s[X][Fb],va,.3*V),va=Math.min(va,La);else if(0!=L&&3==pa[L-1]||0==L&&3==u.nsPsy.lastAttacks[S])Fb=2!=L?L+1:0,La=n(u.thm[S].s[X][Fb],va,.3*V),va=Math.min(va,La);mc=oa[3*L+3]+oa[3*L+4]+oa[3*L+5];6*oa[3*L+5]<mc&&(va*=.5,6*oa[3*L+4]<mc&&(va*=.5));u.thm[S].s[X][L]=va}}u.nsPsy.lastAttacks[S]=pa[2];for(N=T=0;N<u.npart_l;N++){for(var lb=u.s3ind[N][0],
Pb=y[lb]*h[ya[lb]],mb=u.s3_ll[T++]*Pb;++lb<=u.s3ind[N][1];)Pb=y[lb]*h[ya[lb]],mb=k(mb,u.s3_ll[T++]*Pb,lb,lb-N,u,0);mb*=.158489319246111;D[N]=u.blocktype_old[S&1]==d.SHORT_TYPE?mb:n(Math.min(mb,Math.min(2*u.nb_1[S][N],16*u.nb_2[S][N])),mb,V);u.nb_2[S][N]=u.nb_1[S][N];u.nb_1[S][N]=mb}for(;N<=d.CBANDS;++N)y[N]=0,D[N]=0;z(u,y,D,S)}if((a.mode==la.STEREO||a.mode==la.JOINT_STEREO)&&0<a.interChRatio){var wb=a.interChRatio,ca=a.internal_flags;if(1<ca.channels_out){for(var Ea=0;Ea<d.SBMAX_l;Ea++){var Yb=ca.thm[0].l[Ea],
Gb=ca.thm[1].l[Ea];ca.thm[0].l[Ea]+=Gb*wb;ca.thm[1].l[Ea]+=Yb*wb}for(Ea=0;Ea<d.SBMAX_s;Ea++)for(var nb=0;3>nb;nb++)Yb=ca.thm[0].s[Ea][nb],Gb=ca.thm[1].s[Ea][nb],ca.thm[0].s[Ea][nb]+=Gb*wb,ca.thm[1].s[Ea][nb]+=Yb*wb}}if(a.mode==la.JOINT_STEREO){for(var Qa,ha=0;ha<d.SBMAX_l;ha++)if(!(u.thm[0].l[ha]>1.58*u.thm[1].l[ha]||u.thm[1].l[ha]>1.58*u.thm[0].l[ha])){var Ua=u.mld_l[ha]*u.en[3].l[ha],ob=Math.max(u.thm[2].l[ha],Math.min(u.thm[3].l[ha],Ua)),Ua=u.mld_l[ha]*u.en[2].l[ha],oc=Math.max(u.thm[3].l[ha],
Math.min(u.thm[2].l[ha],Ua));u.thm[2].l[ha]=ob;u.thm[3].l[ha]=oc}for(ha=0;ha<d.SBMAX_s;ha++)for(var qa=0;3>qa;qa++)u.thm[0].s[ha][qa]>1.58*u.thm[1].s[ha][qa]||u.thm[1].s[ha][qa]>1.58*u.thm[0].s[ha][qa]||(Ua=u.mld_s[ha]*u.en[3].s[ha][qa],ob=Math.max(u.thm[2].s[ha][qa],Math.min(u.thm[3].s[ha][qa],Ua)),Ua=u.mld_s[ha]*u.en[2].s[ha][qa],oc=Math.max(u.thm[3].s[ha][qa],Math.min(u.thm[2].s[ha][qa],Ua)),u.thm[2].s[ha][qa]=ob,u.thm[3].s[ha][qa]=oc);Qa=a.msfix;if(0<Math.abs(Qa)){for(var Hb=Qa,gc=Hb,Zb=Math.pow(10,
a.ATHlower*u.ATH.adjust),Hb=2*Hb,gc=2*gc,ua=0;ua<d.SBMAX_l;ua++){var Qb,Ka,Aa,Ya;Ya=u.ATH.cb_l[u.bm_l[ua]]*Zb;Qb=Math.min(Math.max(u.thm[0].l[ua],Ya),Math.max(u.thm[1].l[ua],Ya));Ka=Math.max(u.thm[2].l[ua],Ya);Aa=Math.max(u.thm[3].l[ua],Ya);if(Qb*Hb<Ka+Aa){var $b=Qb*gc/(Ka+Aa);Ka*=$b;Aa*=$b}u.thm[2].l[ua]=Math.min(Ka,u.thm[2].l[ua]);u.thm[3].l[ua]=Math.min(Aa,u.thm[3].l[ua])}Zb*=d.BLKSIZE_s/d.BLKSIZE;for(ua=0;ua<d.SBMAX_s;ua++)for(var ra=0;3>ra;ra++)Ya=u.ATH.cb_s[u.bm_s[ua]]*Zb,Qb=Math.min(Math.max(u.thm[0].s[ua][ra],
Ya),Math.max(u.thm[1].s[ua][ra],Ya)),Ka=Math.max(u.thm[2].s[ua][ra],Ya),Aa=Math.max(u.thm[3].s[ua][ra],Ya),Qb*Hb<Ka+Aa&&($b=Qb*Hb/(Ka+Aa),Ka*=$b,Aa*=$b),u.thm[2].s[ua][ra]=Math.min(u.thm[2].s[ua][ra],Ka),u.thm[3].s[ua][ra]=Math.min(u.thm[3].s[ua][ra],Aa)}}var eb=a.internal_flags;a.short_blocks!=Ja.short_block_coupled||0!=ea[0]&&0!=ea[1]||(ea[0]=ea[1]=0);for(var Ga=0;Ga<eb.channels_out;Ga++)C[Ga]=d.NORM_TYPE,a.short_blocks==Ja.short_block_dispensed&&(ea[Ga]=1),a.short_blocks==Ja.short_block_forced&&
(ea[Ga]=0),0!=ea[Ga]?eb.blocktype_old[Ga]==d.SHORT_TYPE&&(C[Ga]=d.STOP_TYPE):(C[Ga]=d.SHORT_TYPE,eb.blocktype_old[Ga]==d.NORM_TYPE&&(eb.blocktype_old[Ga]=d.START_TYPE),eb.blocktype_old[Ga]==d.STOP_TYPE&&(eb.blocktype_old[Ga]=d.SHORT_TYPE)),w[Ga]=eb.blocktype_old[Ga],eb.blocktype_old[Ga]=C[Ga];for(S=0;S<fa;S++){var Rb,fb=0,da,xb;if(1<S){Rb=q;fb=-2;da=d.NORM_TYPE;if(w[0]==d.SHORT_TYPE||w[1]==d.SHORT_TYPE)da=d.SHORT_TYPE;xb=f[e][S-2]}else Rb=x,fb=0,da=w[S],xb=l[e][S];Rb[fb+S]=da==d.SHORT_TYPE?ba(xb,
u.masking_lower):g(xb,u.masking_lower);a.analysis&&(u.pinfo.pe[e][S]=Rb[fb+S])}return 0};var u=[-1.730326E-17,-.01703172,-1.349528E-17,.0418072,-6.73278E-17,-.0876324,-3.0835E-17,.1863476,-1.104424E-16,-.627638];this.L3psycho_anal_vbr=function(c,m,e,l,k,f,x,q,w,A){for(var G=c.internal_flags,y,I,D=F(d.HBLKSIZE),C=wa([3,d.HBLKSIZE_s]),ea=wa([2,d.BLKSIZE]),W=wa([2,3,d.BLKSIZE_s]),K=wa([4,d.CBANDS]),N=wa([4,d.CBANDS]),fa=wa([4,3]),L=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],M=Y(2),Q=c.mode==la.JOINT_STEREO?
4:G.channels_out,X=wa([2,576]),T=c.internal_flags,na=T.channels_out,ya=c.mode==la.JOINT_STEREO?4:na,V=0;V<na;V++){firbuf=m[V];for(var za=e+576-350-21+192,O=0;576>O;O++){var Ba,Fa;Ba=firbuf[za+O+10];for(var Na=Fa=0;9>Na;Na+=2)Ba+=u[Na]*(firbuf[za+O+Na]+firbuf[za+O+21-Na]),Fa+=u[Na+1]*(firbuf[za+O+Na+1]+firbuf[za+O+21-Na-1]);X[V][O]=Ba+Fa}k[l][V].en.assign(T.en[V]);k[l][V].thm.assign(T.thm[V]);2<ya&&(f[l][V].en.assign(T.en[V+2]),f[l][V].thm.assign(T.thm[V+2]))}for(V=0;V<ya;V++){var Ha=F(12),oa=F(12),
Oa=[0,0,0,0],Xa=X[V&1],Sa=0,hb=3==V?T.nsPsy.attackthre_s:T.nsPsy.attackthre,$a=1;if(2==V)for(O=0,Na=576;0<Na;++O,--Na){var pb=X[0][O],pa=X[1][O];X[0][O]=pb+pa;X[1][O]=pb-pa}for(O=0;3>O;O++)oa[O]=T.nsPsy.last_en_subshort[V][O+6],Ha[O]=oa[O]/T.nsPsy.last_en_subshort[V][O+4],Oa[0]+=oa[O];for(O=0;9>O;O++){for(var zb=Sa+64,ab=1;Sa<zb;Sa++)ab<Math.abs(Xa[Sa])&&(ab=Math.abs(Xa[Sa]));T.nsPsy.last_en_subshort[V][O]=oa[O+3]=ab;Oa[1+O/3]+=ab;ab=ab>oa[O+3-2]?ab/oa[O+3-2]:oa[O+3-2]>10*ab?oa[O+3-2]/(10*ab):0;Ha[O+
3]=ab}for(O=0;3>O;++O){var Ab=oa[3*O+3]+oa[3*O+4]+oa[3*O+5],Bb=1;6*oa[3*O+5]<Ab&&(Bb*=.5,6*oa[3*O+4]<Ab&&(Bb*=.5));fa[V][O]=Bb}if(c.analysis){for(var ec=Ha[0],O=1;12>O;O++)ec<Ha[O]&&(ec=Ha[O]);T.pinfo.ers[l][V]=T.pinfo.ers_save[V];T.pinfo.ers_save[V]=ec}for(O=0;12>O;O++)0==L[V][O/3]&&Ha[O]>hb&&(L[V][O/3]=O%3+1);for(O=1;4>O;O++){var Cb=Oa[O-1],Jb=Oa[O];4E4>Math.max(Cb,Jb)&&Cb<1.7*Jb&&Jb<1.7*Cb&&(1==O&&L[V][0]<=L[V][O]&&(L[V][0]=0),L[V][O]=0)}L[V][0]<=T.nsPsy.lastAttacks[V]&&(L[V][0]=0);if(3==T.nsPsy.lastAttacks[V]||
0!=L[V][0]+L[V][1]+L[V][2]+L[V][3])$a=0,0!=L[V][1]&&0!=L[V][0]&&(L[V][1]=0),0!=L[V][2]&&0!=L[V][1]&&(L[V][2]=0),0!=L[V][3]&&0!=L[V][2]&&(L[V][3]=0);2>V?M[V]=$a:0==$a&&(M[0]=M[1]=0);w[V]=T.tot_ener[V]}var La=c.internal_flags;c.short_blocks!=Ja.short_block_coupled||0!=M[0]&&0!=M[1]||(M[0]=M[1]=0);for(var Kb=0;Kb<La.channels_out;Kb++)c.short_blocks==Ja.short_block_dispensed&&(M[Kb]=1),c.short_blocks==Ja.short_block_forced&&(M[Kb]=0);for(var P=0;P<Q;P++){var Ia=P&1;y=ea;var Lb=c,Ma=P,qb=l,Ta=D,Pa=y,ib=
Ia,Ca=Lb.internal_flags;if(2>Ma)v.fft_long(Ca,Pa[ib],Ma,m,e);else if(2==Ma)for(var ta=d.BLKSIZE-1;0<=ta;--ta){var Vb=Pa[ib+0][ta],Va=Pa[ib+1][ta];Pa[ib+0][ta]=(Vb+Va)*aa.SQRT2*.5;Pa[ib+1][ta]=(Vb-Va)*aa.SQRT2*.5}Ta[0]=Pa[ib+0][0];Ta[0]*=Ta[0];for(ta=d.BLKSIZE/2-1;0<=ta;--ta){var ga=Pa[ib+0][d.BLKSIZE/2-ta],Mb=Pa[ib+0][d.BLKSIZE/2+ta];Ta[d.BLKSIZE/2-ta]=.5*(ga*ga+Mb*Mb)}for(var Db=0,ta=11;ta<d.HBLKSIZE;ta++)Db+=Ta[ta];Ca.tot_ener[Ma]=Db;if(Lb.analysis){for(ta=0;ta<d.HBLKSIZE;ta++)Ca.pinfo.energy[qb][Ma][ta]=
Ca.pinfo.energy_save[Ma][ta],Ca.pinfo.energy_save[Ma][ta]=Ta[ta];Ca.pinfo.pe[qb][Ma]=Ca.pe[Ma]}var Da=P,Wb=D,ub=c.internal_flags;2==c.athaa_loudapprox&&2>Da&&(ub.loudness_sq[l][Da]=ub.loudness_sq_save[Da],ub.loudness_sq_save[Da]=r(Wb,ub));if(0!=M[Ia]){var xa=G,mc=D,va=K[P],bb=N[P],cb=P,Nb=F(d.CBANDS),Eb=F(d.CBANDS),Xb=Y(d.CBANDS+2),Z=void 0;b(xa,mc,va,Nb,Eb);t(xa,Nb,Eb,Xb);for(var jb=0,Z=0;Z<xa.npart_l;Z++){var ka,Wa,fc,kc,db=xa.s3ind[Z][0],nc=xa.s3ind[Z][1],kb=0,vb=0,kb=Xb[db],vb=vb+1;Wa=xa.s3_ll[jb]*
va[db]*h[Xb[db]];++jb;for(++db;db<=nc;)kb+=Xb[db],vb+=1,ka=xa.s3_ll[jb]*va[db]*h[Xb[db]],Wa=kc=p(Wa,ka,db-Z),++jb,++db;kb=(1+2*kb)/(2*vb);fc=.5*h[kb];Wa*=fc;if(xa.blocktype_old[cb&1]==d.SHORT_TYPE){var Ob=2*xa.nb_1[cb][Z];bb[Z]=0<Ob?Math.min(Wa,Ob):Math.min(Wa,.3*va[Z])}else{var Fb=16*xa.nb_2[cb][Z],lb=2*xa.nb_1[cb][Z];0>=Fb&&(Fb=Wa);0>=lb&&(lb=Wa);Ob=xa.blocktype_old[cb&1]==d.NORM_TYPE?Math.min(lb,Fb):lb;bb[Z]=Math.min(Wa,Ob)}xa.nb_2[cb][Z]=xa.nb_1[cb][Z];xa.nb_1[cb][Z]=Wa;ka=Nb[Z];ka*=xa.minval_l[Z];
ka*=fc;bb[Z]>ka&&(bb[Z]=ka);1<xa.masking_lower&&(bb[Z]*=xa.masking_lower);bb[Z]>va[Z]&&(bb[Z]=va[Z]);1>xa.masking_lower&&(bb[Z]*=xa.masking_lower)}for(;Z<d.CBANDS;++Z)va[Z]=0,bb[Z]=0}else for(var Pb=G,mb=P,wb=0;wb<Pb.npart_l;wb++)Pb.nb_2[mb][wb]=Pb.nb_1[mb][wb],Pb.nb_1[mb][wb]=0}2==M[0]+M[1]&&c.mode==la.JOINT_STEREO&&a(K,N,G.mld_cb_l,G.ATH.cb_l,c.ATHlower*G.ATH.adjust,c.msfix,G.npart_l);for(P=0;P<Q;P++)Ia=P&1,0!=M[Ia]&&z(G,K[P],N[P],P);for(var ca=0;3>ca;ca++){for(P=0;P<Q;++P)if(Ia=P&1,0!=M[Ia]){var Ea=
G,Yb=P;if(0==ca)for(var Gb=0;Gb<Ea.npart_s;Gb++)Ea.nb_s2[Yb][Gb]=Ea.nb_s1[Yb][Gb],Ea.nb_s1[Yb][Gb]=0}else{I=W;var nb=P,Qa=ca,ha=C,Ua=I,ob=Ia,oc=c.internal_flags;0==Qa&&2>nb&&v.fft_short(oc,Ua[ob],nb,m,e);if(2==nb)for(var qa=d.BLKSIZE_s-1;0<=qa;--qa){var Hb=Ua[ob+0][Qa][qa],gc=Ua[ob+1][Qa][qa];Ua[ob+0][Qa][qa]=(Hb+gc)*aa.SQRT2*.5;Ua[ob+1][Qa][qa]=(Hb-gc)*aa.SQRT2*.5}ha[Qa][0]=Ua[ob+0][Qa][0];ha[Qa][0]*=ha[Qa][0];for(qa=d.BLKSIZE_s/2-1;0<=qa;--qa){var Zb=Ua[ob+0][Qa][d.BLKSIZE_s/2-qa],ua=Ua[ob+0][Qa][d.BLKSIZE_s/
2+qa];ha[Qa][d.BLKSIZE_s/2-qa]=.5*(Zb*Zb+ua*ua)}for(var Qb=C,Ka=K[P],Aa=N[P],Ya=P,$b=ca,ra=c.internal_flags,eb=new float[d.CBANDS],Ga=F(d.CBANDS),Rb=void 0,fb=void 0,da=void 0,xb=new int[d.CBANDS],da=fb=0;da<ra.npart_s;++da){for(var tc=0,Ub=0,dc=ra.numlines_s[da],Rb=0;Rb<dc;++Rb,++fb){var Bc=Qb[$b][fb],tc=tc+Bc;Ub<Bc&&(Ub=Bc)}Ka[da]=tc;eb[da]=Ub;Ga[da]=tc/dc}for(;da<d.CBANDS;++da)eb[da]=0,Ga[da]=0;var Sb=ra,rb=eb,ac=Ga,hc=xb,ic=h.length-1,ja=0,Ra=ac[ja]+ac[ja+1];if(0<Ra){var gb=rb[ja];gb<rb[ja+1]&&
(gb=rb[ja+1]);var Ra=20*(2*gb-Ra)/(Ra*(Sb.numlines_s[ja]+Sb.numlines_s[ja+1]-1)),sb=0|Ra;sb>ic&&(sb=ic);hc[ja]=sb}else hc[ja]=0;for(ja=1;ja<Sb.npart_s-1;ja++)Ra=ac[ja-1]+ac[ja]+ac[ja+1],0<Ra?(gb=rb[ja-1],gb<rb[ja]&&(gb=rb[ja]),gb<rb[ja+1]&&(gb=rb[ja+1]),Ra=20*(3*gb-Ra)/(Ra*(Sb.numlines_s[ja-1]+Sb.numlines_s[ja]+Sb.numlines_s[ja+1]-1)),sb=0|Ra,sb>ic&&(sb=ic),hc[ja]=sb):hc[ja]=0;Ra=ac[ja-1]+ac[ja];0<Ra?(gb=rb[ja-1],gb<rb[ja]&&(gb=rb[ja]),Ra=20*(2*gb-Ra)/(Ra*(Sb.numlines_s[ja-1]+Sb.numlines_s[ja]-1)),
sb=0|Ra,sb>ic&&(sb=ic),hc[ja]=sb):hc[ja]=0;for(fb=da=0;da<ra.npart_s;da++){var yb=ra.s3ind_s[da][0],rc=ra.s3ind_s[da][1],jc,uc,Ib,bc,Cc;jc=xb[yb];uc=1;bc=ra.s3_ss[fb]*Ka[yb]*h[xb[yb]];++fb;for(++yb;yb<=rc;)jc+=xb[yb],uc+=1,Ib=ra.s3_ss[fb]*Ka[yb]*h[xb[yb]],bc=p(bc,Ib,yb-da),++fb,++yb;jc=(1+2*jc)/(2*uc);Cc=.5*h[jc];bc*=Cc;Aa[da]=bc;ra.nb_s2[Ya][da]=ra.nb_s1[Ya][da];ra.nb_s1[Ya][da]=bc;Ib=eb[da];Ib*=ra.minval_s[da];Ib*=Cc;Aa[da]>Ib&&(Aa[da]=Ib);1<ra.masking_lower&&(Aa[da]*=ra.masking_lower);Aa[da]>Ka[da]&&
(Aa[da]=Ka[da]);1>ra.masking_lower&&(Aa[da]*=ra.masking_lower)}for(;da<d.CBANDS;++da)Ka[da]=0,Aa[da]=0}0==M[0]+M[1]&&c.mode==la.JOINT_STEREO&&a(K,N,G.mld_cb_s,G.ATH.cb_s,c.ATHlower*G.ATH.adjust,c.msfix,G.npart_s);for(P=0;P<Q;++P)Ia=P&1,0==M[Ia]&&B(G,K[P],N[P],P,ca)}for(P=0;P<Q;P++)if(Ia=P&1,0==M[Ia])for(var cc=0;cc<d.SBMAX_s;cc++){for(var Ec=F(3),ca=0;3>ca;ca++){var Za=G.thm[P].s[cc][ca],Za=.8*Za;if(2<=L[P][ca]||1==L[P][ca+1])var pc=0!=ca?ca-1:2,qc=n(G.thm[P].s[cc][pc],Za,.36),Za=Math.min(Za,qc);
else if(1==L[P][ca])pc=0!=ca?ca-1:2,qc=n(G.thm[P].s[cc][pc],Za,.18),Za=Math.min(Za,qc);else if(0!=ca&&3==L[P][ca-1]||0==ca&&3==G.nsPsy.lastAttacks[P])pc=2!=ca?ca+1:0,qc=n(G.thm[P].s[cc][pc],Za,.18),Za=Math.min(Za,qc);Za*=fa[P][ca];Ec[ca]=Za}for(ca=0;3>ca;ca++)G.thm[P].s[cc][ca]=Ec[ca]}for(P=0;P<Q;P++)G.nsPsy.lastAttacks[P]=L[P][2];for(var Tb=c.internal_flags,tb=0;tb<Tb.channels_out;tb++){var Dc=d.NORM_TYPE;0!=M[tb]?Tb.blocktype_old[tb]==d.SHORT_TYPE&&(Dc=d.STOP_TYPE):(Dc=d.SHORT_TYPE,Tb.blocktype_old[tb]==
d.NORM_TYPE&&(Tb.blocktype_old[tb]=d.START_TYPE),Tb.blocktype_old[tb]==d.STOP_TYPE&&(Tb.blocktype_old[tb]=d.SHORT_TYPE));A[tb]=Tb.blocktype_old[tb];Tb.blocktype_old[tb]=Dc}for(P=0;P<Q;P++){var vc,wc,xc,yc;if(1<P){vc=q;wc=-2;xc=d.NORM_TYPE;if(A[0]==d.SHORT_TYPE||A[1]==d.SHORT_TYPE)xc=d.SHORT_TYPE;yc=f[l][P-2]}else vc=x,wc=0,xc=A[P],yc=k[l][P];vc[wc+P]=xc==d.SHORT_TYPE?ba(yc,G.masking_lower):g(yc,G.masking_lower);c.analysis&&(G.pinfo.pe[l][P]=vc[wc+P])}return 0};this.psymodel_init=function(a){var b=
a.internal_flags,h,e=!0,g=13,k=0,f=0,n=-8.25,x=-4.5,p=F(d.CBANDS),u=F(d.CBANDS),r=F(d.CBANDS),A=a.out_samplerate;switch(a.experimentalZ){default:case 0:e=!0;break;case 1:e=a.VBR==K.vbr_mtrh||a.VBR==K.vbr_mt?!1:!0;break;case 2:e=!1;break;case 3:g=8,k=-1.75,f=-.0125,n=-8.25,x=-2.25}b.ms_ener_ratio_old=.25;b.blocktype_old[0]=b.blocktype_old[1]=d.NORM_TYPE;for(h=0;4>h;++h){for(var t=0;t<d.CBANDS;++t)b.nb_1[h][t]=1E20,b.nb_2[h][t]=1E20,b.nb_s1[h][t]=b.nb_s2[h][t]=1;for(var G=0;G<d.SBMAX_l;G++)b.en[h].l[G]=
1E20,b.thm[h].l[G]=1E20;for(t=0;3>t;++t){for(G=0;G<d.SBMAX_s;G++)b.en[h].s[G][t]=1E20,b.thm[h].s[G][t]=1E20;b.nsPsy.lastAttacks[h]=0}for(t=0;9>t;t++)b.nsPsy.last_en_subshort[h][t]=10}b.loudness_sq_save[0]=b.loudness_sq_save[1]=0;b.npart_l=l(b.numlines_l,b.bo_l,b.bm_l,p,u,b.mld_l,b.PSY.bo_l_weight,A,d.BLKSIZE,b.scalefac_band.l,d.BLKSIZE/1152,d.SBMAX_l);for(h=0;h<b.npart_l;h++)G=k,p[h]>=g&&(G=f*(p[h]-g)/(24-g)+k*(24-p[h])/(24-g)),r[h]=Math.pow(10,G/10),b.rnumlines_l[h]=0<b.numlines_l[h]?1/b.numlines_l[h]:
0;b.s3_ll=q(b.s3ind,b.npart_l,p,u,r,e);for(h=t=0;h<b.npart_l;h++){f=$a.MAX_VALUE;for(G=0;G<b.numlines_l[h];G++,t++)k=A*t/(1E3*d.BLKSIZE),k=this.ATHformula(1E3*k,a)-20,k=Math.pow(10,.1*k),k*=b.numlines_l[h],f>k&&(f=k);b.ATH.cb_l[h]=f;f=-20+20*p[h]/10;6<f&&(f=100);-15>f&&(f=-15);f-=8;b.minval_l[h]=Math.pow(10,f/10)*b.numlines_l[h]}b.npart_s=l(b.numlines_s,b.bo_s,b.bm_s,p,u,b.mld_s,b.PSY.bo_s_weight,A,d.BLKSIZE_s,b.scalefac_band.s,d.BLKSIZE_s/384,d.SBMAX_s);for(h=t=0;h<b.npart_s;h++){G=n;p[h]>=g&&(G=
x*(p[h]-g)/(24-g)+n*(24-p[h])/(24-g));r[h]=Math.pow(10,G/10);f=$a.MAX_VALUE;for(G=0;G<b.numlines_s[h];G++,t++)k=A*t/(1E3*d.BLKSIZE_s),k=this.ATHformula(1E3*k,a)-20,k=Math.pow(10,.1*k),k*=b.numlines_s[h],f>k&&(f=k);b.ATH.cb_s[h]=f;f=-7+7*p[h]/12;12<p[h]&&(f*=1+3.1*Math.log(1+f));12>p[h]&&(f*=1+2.3*Math.log(1-f));-15>f&&(f=-15);f-=8;b.minval_s[h]=Math.pow(10,f/10)*b.numlines_s[h]}b.s3_ss=q(b.s3ind_s,b.npart_s,p,u,r,e);w=Math.pow(10,.5625);y=Math.pow(10,1.5);m=Math.pow(10,1.5);v.init_fft(b);b.decay=
Math.exp(-2.302585092994046/(.01*A/192));h=3.5;0!=(a.exp_nspsytune&2)&&(h=1);0<Math.abs(a.msfix)&&(h=a.msfix);a.msfix=h;for(e=0;e<b.npart_l;e++)b.s3ind[e][1]>b.npart_l-1&&(b.s3ind[e][1]=b.npart_l-1);b.ATH.decay=Math.pow(10,576*b.mode_gr/A*-1.2);b.ATH.adjust=.01;b.ATH.adjustLimit=1;if(-1!=a.ATHtype){t=a.out_samplerate/d.BLKSIZE;for(h=k=e=0;h<d.BLKSIZE/2;++h)k+=t,b.ATH.eql_w[h]=1/Math.pow(10,this.ATHformula(k,a)/10),e+=b.ATH.eql_w[h];e=1/e;for(h=d.BLKSIZE/2;0<=--h;)b.ATH.eql_w[h]*=e}for(e=t=0;e<b.npart_s;++e)for(h=
0;h<b.numlines_s[e];++h)++t;for(e=t=0;e<b.npart_l;++e)for(h=0;h<b.numlines_l[e];++h)++t;for(h=t=0;h<b.npart_l;h++)k=A*(t+b.numlines_l[h]/2)/(1*d.BLKSIZE),b.mld_cb_l[h]=c(k),t+=b.numlines_l[h];for(;h<d.CBANDS;++h)b.mld_cb_l[h]=1;for(h=t=0;h<b.npart_s;h++)k=A*(t+b.numlines_s[h]/2)/(1*d.BLKSIZE_s),b.mld_cb_s[h]=c(k),t+=b.numlines_s[h];for(;h<d.CBANDS;++h)b.mld_cb_s[h]=1;return 0};this.ATHformula=function(a,c){var b;switch(c.ATHtype){case 0:b=e(a,9);break;case 1:b=e(a,-1);break;case 2:b=e(a,0);break;
case 3:b=e(a,1)+6;break;case 4:b=e(a,c.ATHcurve);break;default:b=e(a,0)}return b}}function N(){function H(){this.mask_adjust_short=this.mask_adjust=0;this.bo_l_weight=F(d.SBMAX_l);this.bo_s_weight=F(d.SBMAX_s)}function k(){this.lowerlimit=0}function p(a,c){this.lowpass=c}function B(a){return 1<a?0:0>=a?1:Math.cos(Math.PI/2*a)}function z(a,c){switch(a){case 44100:return c.version=1,0;case 48E3:return c.version=1;case 32E3:return c.version=1,2;case 22050:return c.version=0;case 24E3:return c.version=
0,1;case 16E3:return c.version=0,2;case 11025:return c.version=0;case 12E3:return c.version=0,1;case 8E3:return c.version=0,2;default:return c.version=0,-1}}function n(a,c,b){16E3>b&&(c=2);b=r.bitrate_table[c][1];for(var d=2;14>=d;d++)0<r.bitrate_table[c][d]&&Math.abs(r.bitrate_table[c][d]-a)<Math.abs(b-a)&&(b=r.bitrate_table[c][d]);return b}function T(a,c,b){16E3>b&&(c=2);for(b=0;14>=b;b++)if(0<r.bitrate_table[c][b]&&r.bitrate_table[c][b]==a)return b;return-1}function g(a,c){var b=[new p(8,2E3),
new p(16,3700),new p(24,3900),new p(32,5500),new p(40,7E3),new p(48,7500),new p(56,1E4),new p(64,11E3),new p(80,13500),new p(96,15100),new p(112,15600),new p(128,17E3),new p(160,17500),new p(192,18600),new p(224,19400),new p(256,19700),new p(320,20500)],d=f.nearestBitrateFullIndex(c);a.lowerlimit=b[d].lowpass}function b(a){var c=d.BLKSIZE+a.framesize-d.FFTOFFSET;return c=Math.max(c,512+a.framesize-32)}function t(c,h,e,g,k,n,q){var p=c.internal_flags,r=0,u,v,w=[null,null],t=[null,null];if(4294479419!=
p.Class_ID)return-3;if(0==g)return 0;u=l.copy_buffer(p,k,n,q,0);if(0>u)return u;n+=u;r+=u;t[0]=h;t[1]=e;if(na.NEQ(c.scale,0)&&na.NEQ(c.scale,1))for(u=0;u<g;++u)t[0][u]*=c.scale,2==p.channels_out&&(t[1][u]*=c.scale);if(na.NEQ(c.scale_left,0)&&na.NEQ(c.scale_left,1))for(u=0;u<g;++u)t[0][u]*=c.scale_left;if(na.NEQ(c.scale_right,0)&&na.NEQ(c.scale_right,1))for(u=0;u<g;++u)t[1][u]*=c.scale_right;if(2==c.num_channels&&1==p.channels_out)for(u=0;u<g;++u)t[0][u]=.5*(t[0][u]+t[1][u]),t[1][u]=0;h=b(c);w[0]=
p.mfbuf[0];w[1]=p.mfbuf[1];for(e=0;0<g;){var B=[null,null];u=v=0;B[0]=t[0];B[1]=t[1];u=new a;var y=c;v=w;var z=e,H=g,C=u,F=y.internal_flags;if(.9999>F.resample_ratio||1.0001<F.resample_ratio)for(var K=0;K<F.channels_out;K++){var N=new NumUsed;C.n_out=fill_buffer_resample(y,v[K],F.mf_size,y.framesize,B[K],z,H,N,K);C.n_in=N.num_used}else for(C.n_out=Math.min(y.framesize,H),C.n_in=C.n_out,y=0;y<C.n_out;++y)v[0][F.mf_size+y]=B[0][z+y],2==F.channels_out&&(v[1][F.mf_size+y]=B[1][z+y]);v=u.n_in;u=u.n_out;
if(p.findReplayGain&&!p.decode_on_the_fly&&D.AnalyzeSamples(p.rgdata,w[0],p.mf_size,w[1],p.mf_size,u,p.channels_out)==L.GAIN_ANALYSIS_ERROR)return-6;g-=v;e+=v;p.mf_size+=u;1>p.mf_samples_to_encode&&(p.mf_samples_to_encode=d.ENCDELAY+d.POSTDELAY);p.mf_samples_to_encode+=u;if(p.mf_size>=h){v=q-r;0==q&&(v=0);u=c;v=f.enc.lame_encode_mp3_frame(u,w[0],w[1],k,n,v);u.frameNum++;u=v;if(0>u)return u;n+=u;r+=u;p.mf_size-=c.framesize;p.mf_samples_to_encode-=c.framesize;for(v=0;v<p.channels_out;v++)for(u=0;u<
p.mf_size;u++)w[v][u]=w[v][u+c.framesize]}}return r}function a(){this.n_out=this.n_in=0}var f=this;N.V9=410;N.V8=420;N.V7=430;N.V6=440;N.V5=450;N.V4=460;N.V3=470;N.V2=480;N.V1=490;N.V0=500;N.R3MIX=1E3;N.STANDARD=1001;N.EXTREME=1002;N.INSANE=1003;N.STANDARD_FAST=1004;N.EXTREME_FAST=1005;N.MEDIUM=1006;N.MEDIUM_FAST=1007;N.LAME_MAXMP3BUFFER=147456;var D,l,q,c,e,v=new dc,C,w,y;this.enc=new d;this.setModules=function(a,b,d,g,k,f,n,p,r){D=a;l=b;q=d;c=g;e=k;C=f;w=p;y=r;this.enc.setModules(l,v,c,C)};this.lame_init=
function(){var a=new Jc,c;a.class_id=4294479419;c=a.internal_flags=new X;a.mode=la.NOT_SET;a.original=1;a.in_samplerate=44100;a.num_channels=2;a.num_samples=-1;a.bWriteVbrTag=!0;a.quality=-1;a.short_blocks=null;c.subblock_gain=-1;a.lowpassfreq=0;a.highpassfreq=0;a.lowpasswidth=-1;a.highpasswidth=-1;a.VBR=K.vbr_off;a.VBR_q=4;a.ATHcurve=-1;a.VBR_mean_bitrate_kbps=128;a.VBR_min_bitrate_kbps=0;a.VBR_max_bitrate_kbps=0;a.VBR_hard_min=0;c.VBR_min_bitrate=1;c.VBR_max_bitrate=13;a.quant_comp=-1;a.quant_comp_short=
-1;a.msfix=-1;c.resample_ratio=1;c.OldValue[0]=180;c.OldValue[1]=180;c.CurrentStep[0]=4;c.CurrentStep[1]=4;c.masking_lower=1;c.nsPsy.attackthre=-1;c.nsPsy.attackthre_s=-1;a.scale=-1;a.athaa_type=-1;a.ATHtype=-1;a.athaa_loudapprox=-1;a.athaa_sensitivity=0;a.useTemporal=null;a.interChRatio=-1;c.mf_samples_to_encode=d.ENCDELAY+d.POSTDELAY;a.encoder_padding=0;c.mf_size=d.ENCDELAY-d.MDCTDELAY;a.findReplayGain=!1;a.decode_on_the_fly=!1;c.decode_on_the_fly=!1;c.findReplayGain=!1;c.findPeakSample=!1;c.RadioGain=
0;c.AudiophileGain=0;c.noclipGainChange=0;c.noclipScale=-1;a.preset=0;a.write_id3tag_automatic=!0;a.lame_allocated_gfp=1;return a};this.nearestBitrateFullIndex=function(a){for(var c=[8,16,24,32,40,48,56,64,80,96,112,128,160,192,224,256,320],b=0,d=0,e=0,g=0,g=c[16],e=16,d=c[16],b=16,k=0;16>k;k++)if(Math.max(a,c[k+1])!=a){g=c[k+1];e=k+1;d=c[k];b=k;break}return g-a>a-d?b:e};this.lame_init_params=function(a){var b=a.internal_flags;b.Class_ID=0;null==b.ATH&&(b.ATH=new Kc);null==b.PSY&&(b.PSY=new H);null==
b.rgdata&&(b.rgdata=new Lc);b.channels_in=a.num_channels;1==b.channels_in&&(a.mode=la.MONO);b.channels_out=a.mode==la.MONO?1:2;b.mode_ext=d.MPG_MD_MS_LR;a.mode==la.MONO&&(a.force_ms=!1);a.VBR==K.vbr_off&&128!=a.VBR_mean_bitrate_kbps&&0==a.brate&&(a.brate=a.VBR_mean_bitrate_kbps);a.VBR!=K.vbr_off&&a.VBR!=K.vbr_mtrh&&a.VBR!=K.vbr_mt&&(a.free_format=!1);a.VBR==K.vbr_off&&0==a.brate&&na.EQ(a.compression_ratio,0)&&(a.compression_ratio=11.025);a.VBR==K.vbr_off&&0<a.compression_ratio&&(0==a.out_samplerate&&
(a.out_samplerate=map2MP3Frequency(int(.97*a.in_samplerate))),a.brate=0|16*a.out_samplerate*b.channels_out/(1E3*a.compression_ratio),b.samplerate_index=z(a.out_samplerate,a),a.free_format||(a.brate=n(a.brate,a.version,a.out_samplerate)));0!=a.out_samplerate&&(16E3>a.out_samplerate?(a.VBR_mean_bitrate_kbps=Math.max(a.VBR_mean_bitrate_kbps,8),a.VBR_mean_bitrate_kbps=Math.min(a.VBR_mean_bitrate_kbps,64)):32E3>a.out_samplerate?(a.VBR_mean_bitrate_kbps=Math.max(a.VBR_mean_bitrate_kbps,8),a.VBR_mean_bitrate_kbps=
Math.min(a.VBR_mean_bitrate_kbps,160)):(a.VBR_mean_bitrate_kbps=Math.max(a.VBR_mean_bitrate_kbps,32),a.VBR_mean_bitrate_kbps=Math.min(a.VBR_mean_bitrate_kbps,320)));if(0==a.lowpassfreq){var f=16E3;switch(a.VBR){case K.vbr_off:f=new k;g(f,a.brate);f=f.lowerlimit;break;case K.vbr_abr:f=new k;g(f,a.VBR_mean_bitrate_kbps);f=f.lowerlimit;break;case K.vbr_rh:var p=[19500,19E3,18600,18E3,17500,16E3,15600,14900,12500,1E4,3950];if(0<=a.VBR_q&&9>=a.VBR_q)var f=p[a.VBR_q],p=p[a.VBR_q+1],t=a.VBR_q_frac,f=linear_int(f,
p,t);else f=19500;break;default:p=[19500,19E3,18500,18E3,17500,16500,15500,14500,12500,9500,3950],0<=a.VBR_q&&9>=a.VBR_q?(f=p[a.VBR_q],p=p[a.VBR_q+1],t=a.VBR_q_frac,f=linear_int(f,p,t)):f=19500}a.mode!=la.MONO||a.VBR!=K.vbr_off&&a.VBR!=K.vbr_abr||(f*=1.5);a.lowpassfreq=f|0}0==a.out_samplerate&&(2*a.lowpassfreq>a.in_samplerate&&(a.lowpassfreq=a.in_samplerate/2),f=a.lowpassfreq|0,p=a.in_samplerate,t=44100,48E3<=p?t=48E3:44100<=p?t=44100:32E3<=p?t=32E3:24E3<=p?t=24E3:22050<=p?t=22050:16E3<=p?t=16E3:
12E3<=p?t=12E3:11025<=p?t=11025:8E3<=p&&(t=8E3),-1==f?f=t:(15960>=f&&(t=44100),15250>=f&&(t=32E3),11220>=f&&(t=24E3),9970>=f&&(t=22050),7230>=f&&(t=16E3),5420>=f&&(t=12E3),4510>=f&&(t=11025),3970>=f&&(t=8E3),f=p<t?44100<p?48E3:32E3<p?44100:24E3<p?32E3:22050<p?24E3:16E3<p?22050:12E3<p?16E3:11025<p?12E3:8E3<p?11025:8E3:t),a.out_samplerate=f);a.lowpassfreq=Math.min(20500,a.lowpassfreq);a.lowpassfreq=Math.min(a.out_samplerate/2,a.lowpassfreq);a.VBR==K.vbr_off&&(a.compression_ratio=16*a.out_samplerate*
b.channels_out/(1E3*a.brate));a.VBR==K.vbr_abr&&(a.compression_ratio=16*a.out_samplerate*b.channels_out/(1E3*a.VBR_mean_bitrate_kbps));a.bWriteVbrTag||(a.findReplayGain=!1,a.decode_on_the_fly=!1,b.findPeakSample=!1);b.findReplayGain=a.findReplayGain;b.decode_on_the_fly=a.decode_on_the_fly;b.decode_on_the_fly&&(b.findPeakSample=!0);if(b.findReplayGain&&D.InitGainAnalysis(b.rgdata,a.out_samplerate)==L.INIT_GAIN_ANALYSIS_ERROR)return a.internal_flags=null,-6;b.decode_on_the_fly&&!a.decode_only&&(null!=
b.hip&&y.hip_decode_exit(b.hip),b.hip=y.hip_decode_init());b.mode_gr=24E3>=a.out_samplerate?1:2;a.framesize=576*b.mode_gr;a.encoder_delay=d.ENCDELAY;b.resample_ratio=a.in_samplerate/a.out_samplerate;switch(a.VBR){case K.vbr_mt:case K.vbr_rh:case K.vbr_mtrh:a.compression_ratio=[5.7,6.5,7.3,8.2,10,11.9,13,14,15,16.5][a.VBR_q];break;case K.vbr_abr:a.compression_ratio=16*a.out_samplerate*b.channels_out/(1E3*a.VBR_mean_bitrate_kbps);break;default:a.compression_ratio=16*a.out_samplerate*b.channels_out/
(1E3*a.brate)}a.mode==la.NOT_SET&&(a.mode=la.JOINT_STEREO);0<a.highpassfreq?(b.highpass1=2*a.highpassfreq,b.highpass2=0<=a.highpasswidth?2*(a.highpassfreq+a.highpasswidth):2*a.highpassfreq,b.highpass1/=a.out_samplerate,b.highpass2/=a.out_samplerate):(b.highpass1=0,b.highpass2=0);0<a.lowpassfreq?(b.lowpass2=2*a.lowpassfreq,0<=a.lowpasswidth?(b.lowpass1=2*(a.lowpassfreq-a.lowpasswidth),0>b.lowpass1&&(b.lowpass1=0)):b.lowpass1=2*a.lowpassfreq,b.lowpass1/=a.out_samplerate,b.lowpass2/=a.out_samplerate):
(b.lowpass1=0,b.lowpass2=0);var f=a.internal_flags,F=32,I=-1;if(0<f.lowpass1){for(var A=999,p=0;31>=p;p++)t=p/31,t>=f.lowpass2&&(F=Math.min(F,p)),f.lowpass1<t&&t<f.lowpass2&&(A=Math.min(A,p));f.lowpass1=999==A?(F-.75)/31:(A-.75)/31;f.lowpass2=F/31}0<f.highpass2&&f.highpass2<.75/31*.9&&(f.highpass1=0,f.highpass2=0,Q.err.println("Warning: highpass filter disabled.  highpass frequency too small\n"));if(0<f.highpass2){F=-1;for(p=0;31>=p;p++)t=p/31,t<=f.highpass1&&(I=Math.max(I,p)),f.highpass1<t&&t<f.highpass2&&
(F=Math.max(F,p));f.highpass1=I/31;f.highpass2=-1==F?(I+.75)/31:(F+.75)/31}for(p=0;32>p;p++)t=p/31,I=f.highpass2>f.highpass1?B((f.highpass2-t)/(f.highpass2-f.highpass1+1E-20)):1,t=f.lowpass2>f.lowpass1?B((t-f.lowpass1)/(f.lowpass2-f.lowpass1+1E-20)):1,f.amp_filter[p]=I*t;b.samplerate_index=z(a.out_samplerate,a);if(0>b.samplerate_index)return a.internal_flags=null,-1;if(a.VBR==K.vbr_off)if(a.free_format)b.bitrate_index=0;else{if(a.brate=n(a.brate,a.version,a.out_samplerate),b.bitrate_index=T(a.brate,
a.version,a.out_samplerate),0>=b.bitrate_index)return a.internal_flags=null,-1}else b.bitrate_index=1;a.analysis&&(a.bWriteVbrTag=!1);null!=b.pinfo&&(a.bWriteVbrTag=!1);l.init_bit_stream_w(b);f=b.samplerate_index+3*a.version+6*(16E3>a.out_samplerate?1:0);for(p=0;p<d.SBMAX_l+1;p++)b.scalefac_band.l[p]=c.sfBandIndex[f].l[p];for(p=0;p<d.PSFB21+1;p++)t=(b.scalefac_band.l[22]-b.scalefac_band.l[21])/d.PSFB21,t=b.scalefac_band.l[21]+p*t,b.scalefac_band.psfb21[p]=t;b.scalefac_band.psfb21[d.PSFB21]=576;for(p=
0;p<d.SBMAX_s+1;p++)b.scalefac_band.s[p]=c.sfBandIndex[f].s[p];for(p=0;p<d.PSFB12+1;p++)t=(b.scalefac_band.s[13]-b.scalefac_band.s[12])/d.PSFB12,t=b.scalefac_band.s[12]+p*t,b.scalefac_band.psfb12[p]=t;b.scalefac_band.psfb12[d.PSFB12]=192;b.sideinfo_len=1==a.version?1==b.channels_out?21:36:1==b.channels_out?13:21;a.error_protection&&(b.sideinfo_len+=2);f=a.internal_flags;a.frameNum=0;a.write_id3tag_automatic&&w.id3tag_write_v2(a);f.bitrate_stereoMode_Hist=Sa([16,5]);f.bitrate_blockType_Hist=Sa([16,
6]);f.PeakSample=0;a.bWriteVbrTag&&C.InitVbrTag(a);b.Class_ID=4294479419;for(f=0;19>f;f++)b.nsPsy.pefirbuf[f]=700*b.mode_gr*b.channels_out;-1==a.ATHtype&&(a.ATHtype=4);switch(a.VBR){case K.vbr_mt:a.VBR=K.vbr_mtrh;case K.vbr_mtrh:null==a.useTemporal&&(a.useTemporal=!1);q.apply_preset(a,500-10*a.VBR_q,0);0>a.quality&&(a.quality=LAME_DEFAULT_QUALITY);5>a.quality&&(a.quality=0);5<a.quality&&(a.quality=5);b.PSY.mask_adjust=a.maskingadjust;b.PSY.mask_adjust_short=a.maskingadjust_short;b.sfb21_extra=a.experimentalY?
!1:44E3<a.out_samplerate;b.iteration_loop=new VBRNewIterationLoop(e);break;case K.vbr_rh:q.apply_preset(a,500-10*a.VBR_q,0);b.PSY.mask_adjust=a.maskingadjust;b.PSY.mask_adjust_short=a.maskingadjust_short;b.sfb21_extra=a.experimentalY?!1:44E3<a.out_samplerate;6<a.quality&&(a.quality=6);0>a.quality&&(a.quality=LAME_DEFAULT_QUALITY);b.iteration_loop=new VBROldIterationLoop(e);break;default:b.sfb21_extra=!1,0>a.quality&&(a.quality=LAME_DEFAULT_QUALITY),f=a.VBR,f==K.vbr_off&&(a.VBR_mean_bitrate_kbps=a.brate),
q.apply_preset(a,a.VBR_mean_bitrate_kbps,0),a.VBR=f,b.PSY.mask_adjust=a.maskingadjust,b.PSY.mask_adjust_short=a.maskingadjust_short,b.iteration_loop=f==K.vbr_off?new Mc(e):new ABRIterationLoop(e)}if(a.VBR!=K.vbr_off){b.VBR_min_bitrate=1;b.VBR_max_bitrate=14;16E3>a.out_samplerate&&(b.VBR_max_bitrate=8);if(0!=a.VBR_min_bitrate_kbps&&(a.VBR_min_bitrate_kbps=n(a.VBR_min_bitrate_kbps,a.version,a.out_samplerate),b.VBR_min_bitrate=T(a.VBR_min_bitrate_kbps,a.version,a.out_samplerate),0>b.VBR_min_bitrate)||
0!=a.VBR_max_bitrate_kbps&&(a.VBR_max_bitrate_kbps=n(a.VBR_max_bitrate_kbps,a.version,a.out_samplerate),b.VBR_max_bitrate=T(a.VBR_max_bitrate_kbps,a.version,a.out_samplerate),0>b.VBR_max_bitrate))return-1;a.VBR_min_bitrate_kbps=r.bitrate_table[a.version][b.VBR_min_bitrate];a.VBR_max_bitrate_kbps=r.bitrate_table[a.version][b.VBR_max_bitrate];a.VBR_mean_bitrate_kbps=Math.min(r.bitrate_table[a.version][b.VBR_max_bitrate],a.VBR_mean_bitrate_kbps);a.VBR_mean_bitrate_kbps=Math.max(r.bitrate_table[a.version][b.VBR_min_bitrate],
a.VBR_mean_bitrate_kbps)}a.tune&&(b.PSY.mask_adjust+=a.tune_value_a,b.PSY.mask_adjust_short+=a.tune_value_a);f=a.internal_flags;switch(a.quality){default:case 9:f.psymodel=0;f.noise_shaping=0;f.noise_shaping_amp=0;f.noise_shaping_stop=0;f.use_best_huffman=0;f.full_outer_loop=0;break;case 8:a.quality=7;case 7:f.psymodel=1;f.noise_shaping=0;f.noise_shaping_amp=0;f.noise_shaping_stop=0;f.use_best_huffman=0;f.full_outer_loop=0;break;case 6:f.psymodel=1;0==f.noise_shaping&&(f.noise_shaping=1);f.noise_shaping_amp=
0;f.noise_shaping_stop=0;-1==f.subblock_gain&&(f.subblock_gain=1);f.use_best_huffman=0;f.full_outer_loop=0;break;case 5:f.psymodel=1;0==f.noise_shaping&&(f.noise_shaping=1);f.noise_shaping_amp=0;f.noise_shaping_stop=0;-1==f.subblock_gain&&(f.subblock_gain=1);f.use_best_huffman=0;f.full_outer_loop=0;break;case 4:f.psymodel=1;0==f.noise_shaping&&(f.noise_shaping=1);f.noise_shaping_amp=0;f.noise_shaping_stop=0;-1==f.subblock_gain&&(f.subblock_gain=1);f.use_best_huffman=1;f.full_outer_loop=0;break;case 3:f.psymodel=
1;0==f.noise_shaping&&(f.noise_shaping=1);f.noise_shaping_amp=1;f.noise_shaping_stop=1;-1==f.subblock_gain&&(f.subblock_gain=1);f.use_best_huffman=1;f.full_outer_loop=0;break;case 2:f.psymodel=1;0==f.noise_shaping&&(f.noise_shaping=1);0==f.substep_shaping&&(f.substep_shaping=2);f.noise_shaping_amp=1;f.noise_shaping_stop=1;-1==f.subblock_gain&&(f.subblock_gain=1);f.use_best_huffman=1;f.full_outer_loop=0;break;case 1:f.psymodel=1;0==f.noise_shaping&&(f.noise_shaping=1);0==f.substep_shaping&&(f.substep_shaping=
2);f.noise_shaping_amp=2;f.noise_shaping_stop=1;-1==f.subblock_gain&&(f.subblock_gain=1);f.use_best_huffman=1;f.full_outer_loop=0;break;case 0:f.psymodel=1,0==f.noise_shaping&&(f.noise_shaping=1),0==f.substep_shaping&&(f.substep_shaping=2),f.noise_shaping_amp=2,f.noise_shaping_stop=1,-1==f.subblock_gain&&(f.subblock_gain=1),f.use_best_huffman=1,f.full_outer_loop=0}b.ATH.useAdjust=0>a.athaa_type?3:a.athaa_type;b.ATH.aaSensitivityP=Math.pow(10,a.athaa_sensitivity/-10);null==a.short_blocks&&(a.short_blocks=
Ja.short_block_allowed);a.short_blocks!=Ja.short_block_allowed||a.mode!=la.JOINT_STEREO&&a.mode!=la.STEREO||(a.short_blocks=Ja.short_block_coupled);0>a.quant_comp&&(a.quant_comp=1);0>a.quant_comp_short&&(a.quant_comp_short=0);0>a.msfix&&(a.msfix=0);a.exp_nspsytune|=1;0>a.internal_flags.nsPsy.attackthre&&(a.internal_flags.nsPsy.attackthre=dc.NSATTACKTHRE);0>a.internal_flags.nsPsy.attackthre_s&&(a.internal_flags.nsPsy.attackthre_s=dc.NSATTACKTHRE_S);0>a.scale&&(a.scale=1);0>a.ATHtype&&(a.ATHtype=4);
0>a.ATHcurve&&(a.ATHcurve=4);0>a.athaa_loudapprox&&(a.athaa_loudapprox=2);0>a.interChRatio&&(a.interChRatio=0);null==a.useTemporal&&(a.useTemporal=!0);b.slot_lag=b.frac_SpF=0;a.VBR==K.vbr_off&&(b.slot_lag=b.frac_SpF=72E3*(a.version+1)*a.brate%a.out_samplerate|0);c.iteration_init(a);v.psymodel_init(a);return 0};this.lame_encode_flush=function(a,c,e,f){var g=a.internal_flags,k=rc([2,1152]),n=0,p,q,u=g.mf_samples_to_encode-d.POSTDELAY,t=b(a);if(1>g.mf_samples_to_encode)return 0;p=0;a.in_samplerate!=
a.out_samplerate&&(u+=16*a.out_samplerate/a.in_samplerate);q=a.framesize-u%a.framesize;576>q&&(q+=a.framesize);a.encoder_padding=q;for(q=(u+q)/a.framesize;0<q&&0<=n;){var r=t-g.mf_size,u=a.frameNum,r=r*a.in_samplerate,r=r/a.out_samplerate;1152<r&&(r=1152);1>r&&(r=1);n=f-p;0==f&&(n=0);n=this.lame_encode_buffer(a,k[0],k[1],r,c,e,n);e+=n;p+=n;q-=u!=a.frameNum?1:0}g.mf_samples_to_encode=0;if(0>n)return n;n=f-p;0==f&&(n=0);l.flush_bitstream(a);n=l.copy_buffer(g,c,e,n,1);if(0>n)return n;e+=n;p+=n;n=f-p;
0==f&&(n=0);if(a.write_id3tag_automatic){w.id3tag_write_v1(a);n=l.copy_buffer(g,c,e,n,0);if(0>n)return n;p+=n}return p};this.lame_encode_buffer=function(a,b,c,d,e,f,g){var k=a.internal_flags,l=[null,null];if(4294479419!=k.Class_ID)return-3;if(0==d)return 0;if(null==k.in_buffer_0||k.in_buffer_nsamples<d)k.in_buffer_0=F(d),k.in_buffer_1=F(d),k.in_buffer_nsamples=d;l[0]=k.in_buffer_0;l[1]=k.in_buffer_1;for(var n=0;n<d;n++)l[0][n]=b[n],1<k.channels_in&&(l[1][n]=c[n]);return t(a,l[0],l[1],d,e,f,g)}}function Uc(){this.setModules=
function(d,k){}}function Vc(){this.setModules=function(d,k,p){}}function Wc(){}function Xc(){this.setModules=function(d,k){}}function Fa(){this.sampleRate=this.channels=this.dataLen=this.dataOffset=0}function kc(d){return d.charCodeAt(0)<<24|d.charCodeAt(1)<<16|d.charCodeAt(2)<<8|d.charCodeAt(3)}var Ha={fill:function(d,k,p,r){if(2==arguments.length)for(var z=0;z<d.length;z++)d[z]=arguments[1];else for(z=k;z<p;z++)d[z]=r}},Q={arraycopy:function(d,k,p,r,z){for(z=k+z;k<z;)p[r++]=d[k++]}},aa={SQRT2:1.4142135623730951,
FAST_LOG10:function(d){return Math.log10(d)},FAST_LOG10_X:function(d,k){return Math.log10(d)*k}};Ja.short_block_allowed=new Ja(0);Ja.short_block_coupled=new Ja(1);Ja.short_block_dispensed=new Ja(2);Ja.short_block_forced=new Ja(3);var $a={MAX_VALUE:3.4028235E38};K.vbr_off=new K(0);K.vbr_mt=new K(1);K.vbr_rh=new K(2);K.vbr_abr=new K(3);K.vbr_mtrh=new K(4);K.vbr_default=K.vbr_mtrh;la.STEREO=new la(0);la.JOINT_STEREO=new la(1);la.DUAL_CHANNEL=new la(2);la.MONO=new la(3);la.NOT_SET=new la(4);L.STEPS_per_dB=
100;L.MAX_dB=120;L.GAIN_NOT_ENOUGH_SAMPLES=-24601;L.GAIN_ANALYSIS_ERROR=0;L.GAIN_ANALYSIS_OK=1;L.INIT_GAIN_ANALYSIS_ERROR=0;L.INIT_GAIN_ANALYSIS_OK=1;L.YULE_ORDER=10;L.MAX_ORDER=L.YULE_ORDER;na.EQ=function(d,k){return Math.abs(d)>Math.abs(k)?Math.abs(d-k)<=1E-6*Math.abs(d):Math.abs(d-k)<=1E-6*Math.abs(k)};na.NEQ=function(d,k){return!na.EQ(d,k)};pb.NUMTOCENTRIES=100;pb.MAXFRAMESIZE=2880;var r={t1HB:[1,1,1,0],t2HB:[1,2,1,3,1,1,3,2,0],t3HB:[3,2,1,1,1,1,3,2,0],t5HB:[1,2,6,5,3,1,4,4,7,5,7,1,6,1,1,0],t6HB:[7,
3,5,1,6,2,3,2,5,4,4,1,3,3,2,0],t7HB:[1,2,10,19,16,10,3,3,7,10,5,3,11,4,13,17,8,4,12,11,18,15,11,2,7,6,9,14,3,1,6,4,5,3,2,0],t8HB:[3,4,6,18,12,5,5,1,2,16,9,3,7,3,5,14,7,3,19,17,15,13,10,4,13,5,8,11,5,1,12,4,4,1,1,0],t9HB:[7,5,9,14,15,7,6,4,5,5,6,7,7,6,8,8,8,5,15,6,9,10,5,1,11,7,9,6,4,1,14,4,6,2,6,0],t10HB:[1,2,10,23,35,30,12,17,3,3,8,12,18,21,12,7,11,9,15,21,32,40,19,6,14,13,22,34,46,23,18,7,20,19,33,47,27,22,9,3,31,22,41,26,21,20,5,3,14,13,10,11,16,6,5,1,9,8,7,8,4,4,2,0],t11HB:[3,4,10,24,34,33,21,
15,5,3,4,10,32,17,11,10,11,7,13,18,30,31,20,5,25,11,19,59,27,18,12,5,35,33,31,58,30,16,7,5,28,26,32,19,17,15,8,14,14,12,9,13,14,9,4,1,11,4,6,6,6,3,2,0],t12HB:[9,6,16,33,41,39,38,26,7,5,6,9,23,16,26,11,17,7,11,14,21,30,10,7,17,10,15,12,18,28,14,5,32,13,22,19,18,16,9,5,40,17,31,29,17,13,4,2,27,12,11,15,10,7,4,1,27,12,8,12,6,3,1,0],t13HB:[1,5,14,21,34,51,46,71,42,52,68,52,67,44,43,19,3,4,12,19,31,26,44,33,31,24,32,24,31,35,22,14,15,13,23,36,59,49,77,65,29,40,30,40,27,33,42,16,22,20,37,61,56,79,73,64,
43,76,56,37,26,31,25,14,35,16,60,57,97,75,114,91,54,73,55,41,48,53,23,24,58,27,50,96,76,70,93,84,77,58,79,29,74,49,41,17,47,45,78,74,115,94,90,79,69,83,71,50,59,38,36,15,72,34,56,95,92,85,91,90,86,73,77,65,51,44,43,42,43,20,30,44,55,78,72,87,78,61,46,54,37,30,20,16,53,25,41,37,44,59,54,81,66,76,57,54,37,18,39,11,35,33,31,57,42,82,72,80,47,58,55,21,22,26,38,22,53,25,23,38,70,60,51,36,55,26,34,23,27,14,9,7,34,32,28,39,49,75,30,52,48,40,52,28,18,17,9,5,45,21,34,64,56,50,49,45,31,19,12,15,10,7,6,3,48,
23,20,39,36,35,53,21,16,23,13,10,6,1,4,2,16,15,17,27,25,20,29,11,17,12,16,8,1,1,0,1],t15HB:[7,12,18,53,47,76,124,108,89,123,108,119,107,81,122,63,13,5,16,27,46,36,61,51,42,70,52,83,65,41,59,36,19,17,15,24,41,34,59,48,40,64,50,78,62,80,56,33,29,28,25,43,39,63,55,93,76,59,93,72,54,75,50,29,52,22,42,40,67,57,95,79,72,57,89,69,49,66,46,27,77,37,35,66,58,52,91,74,62,48,79,63,90,62,40,38,125,32,60,56,50,92,78,65,55,87,71,51,73,51,70,30,109,53,49,94,88,75,66,122,91,73,56,42,64,44,21,25,90,43,41,77,73,63,
56,92,77,66,47,67,48,53,36,20,71,34,67,60,58,49,88,76,67,106,71,54,38,39,23,15,109,53,51,47,90,82,58,57,48,72,57,41,23,27,62,9,86,42,40,37,70,64,52,43,70,55,42,25,29,18,11,11,118,68,30,55,50,46,74,65,49,39,24,16,22,13,14,7,91,44,39,38,34,63,52,45,31,52,28,19,14,8,9,3,123,60,58,53,47,43,32,22,37,24,17,12,15,10,2,1,71,37,34,30,28,20,17,26,21,16,10,6,8,6,2,0],t16HB:[1,5,14,44,74,63,110,93,172,149,138,242,225,195,376,17,3,4,12,20,35,62,53,47,83,75,68,119,201,107,207,9,15,13,23,38,67,58,103,90,161,72,
127,117,110,209,206,16,45,21,39,69,64,114,99,87,158,140,252,212,199,387,365,26,75,36,68,65,115,101,179,164,155,264,246,226,395,382,362,9,66,30,59,56,102,185,173,265,142,253,232,400,388,378,445,16,111,54,52,100,184,178,160,133,257,244,228,217,385,366,715,10,98,48,91,88,165,157,148,261,248,407,397,372,380,889,884,8,85,84,81,159,156,143,260,249,427,401,392,383,727,713,708,7,154,76,73,141,131,256,245,426,406,394,384,735,359,710,352,11,139,129,67,125,247,233,229,219,393,743,737,720,885,882,439,4,243,120,
118,115,227,223,396,746,742,736,721,712,706,223,436,6,202,224,222,218,216,389,386,381,364,888,443,707,440,437,1728,4,747,211,210,208,370,379,734,723,714,1735,883,877,876,3459,865,2,377,369,102,187,726,722,358,711,709,866,1734,871,3458,870,434,0,12,10,7,11,10,17,11,9,13,12,10,7,5,3,1,3],t24HB:[15,13,46,80,146,262,248,434,426,669,653,649,621,517,1032,88,14,12,21,38,71,130,122,216,209,198,327,345,319,297,279,42,47,22,41,74,68,128,120,221,207,194,182,340,315,295,541,18,81,39,75,70,134,125,116,220,204,
190,178,325,311,293,271,16,147,72,69,135,127,118,112,210,200,188,352,323,306,285,540,14,263,66,129,126,119,114,214,202,192,180,341,317,301,281,262,12,249,123,121,117,113,215,206,195,185,347,330,308,291,272,520,10,435,115,111,109,211,203,196,187,353,332,313,298,283,531,381,17,427,212,208,205,201,193,186,177,169,320,303,286,268,514,377,16,335,199,197,191,189,181,174,333,321,305,289,275,521,379,371,11,668,184,183,179,175,344,331,314,304,290,277,530,383,373,366,10,652,346,171,168,164,318,309,299,287,
276,263,513,375,368,362,6,648,322,316,312,307,302,292,284,269,261,512,376,370,364,359,4,620,300,296,294,288,282,273,266,515,380,374,369,365,361,357,2,1033,280,278,274,267,264,259,382,378,372,367,363,360,358,356,0,43,20,19,17,15,13,11,9,7,6,4,7,5,3,1,3],t32HB:[1,10,8,20,12,20,16,32,14,12,24,0,28,16,24,16],t33HB:[15,28,26,48,22,40,36,64,14,24,20,32,12,16,8,0],t1l:[1,4,3,5],t2l:[1,4,7,4,5,7,6,7,8],t3l:[2,3,7,4,4,7,6,7,8],t5l:[1,4,7,8,4,5,8,9,7,8,9,10,8,8,9,10],t6l:[3,4,6,8,4,4,6,7,5,6,7,8,7,7,8,9],t7l:[1,
4,7,9,9,10,4,6,8,9,9,10,7,7,9,10,10,11,8,9,10,11,11,11,8,9,10,11,11,12,9,10,11,12,12,12],t8l:[2,4,7,9,9,10,4,4,6,10,10,10,7,6,8,10,10,11,9,10,10,11,11,12,9,9,10,11,12,12,10,10,11,11,13,13],t9l:[3,4,6,7,9,10,4,5,6,7,8,10,5,6,7,8,9,10,7,7,8,9,9,10,8,8,9,9,10,11,9,9,10,10,11,11],t10l:[1,4,7,9,10,10,10,11,4,6,8,9,10,11,10,10,7,8,9,10,11,12,11,11,8,9,10,11,12,12,11,12,9,10,11,12,12,12,12,12,10,11,12,12,13,13,12,13,9,10,11,12,12,12,13,13,10,10,11,12,12,13,13,13],t11l:[2,4,6,8,9,10,9,10,4,5,6,8,10,10,9,
10,6,7,8,9,10,11,10,10,8,8,9,11,10,12,10,11,9,10,10,11,11,12,11,12,9,10,11,12,12,13,12,13,9,9,9,10,11,12,12,12,9,9,10,11,12,12,12,12],t12l:[4,4,6,8,9,10,10,10,4,5,6,7,9,9,10,10,6,6,7,8,9,10,9,10,7,7,8,8,9,10,10,10,8,8,9,9,10,10,10,11,9,9,10,10,10,11,10,11,9,9,9,10,10,11,11,12,10,10,10,11,11,11,11,12],t13l:[1,5,7,8,9,10,10,11,10,11,12,12,13,13,14,14,4,6,8,9,10,10,11,11,11,11,12,12,13,14,14,14,7,8,9,10,11,11,12,12,11,12,12,13,13,14,15,15,8,9,10,11,11,12,12,12,12,13,13,13,13,14,15,15,9,9,11,11,12,12,
13,13,12,13,13,14,14,15,15,16,10,10,11,12,12,12,13,13,13,13,14,13,15,15,16,16,10,11,12,12,13,13,13,13,13,14,14,14,15,15,16,16,11,11,12,13,13,13,14,14,14,14,15,15,15,16,18,18,10,10,11,12,12,13,13,14,14,14,14,15,15,16,17,17,11,11,12,12,13,13,13,15,14,15,15,16,16,16,18,17,11,12,12,13,13,14,14,15,14,15,16,15,16,17,18,19,12,12,12,13,14,14,14,14,15,15,15,16,17,17,17,18,12,13,13,14,14,15,14,15,16,16,17,17,17,18,18,18,13,13,14,15,15,15,16,16,16,16,16,17,18,17,18,18,14,14,14,15,15,15,17,16,16,19,17,17,17,
19,18,18,13,14,15,16,16,16,17,16,17,17,18,18,21,20,21,18],t15l:[3,5,6,8,8,9,10,10,10,11,11,12,12,12,13,14,5,5,7,8,9,9,10,10,10,11,11,12,12,12,13,13,6,7,7,8,9,9,10,10,10,11,11,12,12,13,13,13,7,8,8,9,9,10,10,11,11,11,12,12,12,13,13,13,8,8,9,9,10,10,11,11,11,11,12,12,12,13,13,13,9,9,9,10,10,10,11,11,11,11,12,12,13,13,13,14,10,9,10,10,10,11,11,11,11,12,12,12,13,13,14,14,10,10,10,11,11,11,11,12,12,12,12,12,13,13,13,14,10,10,10,11,11,11,11,12,12,12,12,13,13,14,14,14,10,10,11,11,11,11,12,12,12,13,13,13,
13,14,14,14,11,11,11,11,12,12,12,12,12,13,13,13,13,14,15,14,11,11,11,11,12,12,12,12,13,13,13,13,14,14,14,15,12,12,11,12,12,12,13,13,13,13,13,13,14,14,15,15,12,12,12,12,12,13,13,13,13,14,14,14,14,14,15,15,13,13,13,13,13,13,13,13,14,14,14,14,15,15,14,15,13,13,13,13,13,13,13,14,14,14,14,14,15,15,15,15],t16_5l:[1,5,7,9,10,10,11,11,12,12,12,13,13,13,14,11,4,6,8,9,10,11,11,11,12,12,12,13,14,13,14,11,7,8,9,10,11,11,12,12,13,12,13,13,13,14,14,12,9,9,10,11,11,12,12,12,13,13,14,14,14,15,15,13,10,10,11,11,12,
12,13,13,13,14,14,14,15,15,15,12,10,10,11,11,12,13,13,14,13,14,14,15,15,15,16,13,11,11,11,12,13,13,13,13,14,14,14,14,15,15,16,13,11,11,12,12,13,13,13,14,14,15,15,15,15,17,17,13,11,12,12,13,13,13,14,14,15,15,15,15,16,16,16,13,12,12,12,13,13,14,14,15,15,15,15,16,15,16,15,14,12,13,12,13,14,14,14,14,15,16,16,16,17,17,16,13,13,13,13,13,14,14,15,16,16,16,16,16,16,15,16,14,13,14,14,14,14,15,15,15,15,17,16,16,16,16,18,14,15,14,14,14,15,15,16,16,16,18,17,17,17,19,17,14,14,15,13,14,16,16,15,16,16,17,18,17,
19,17,16,14,11,11,11,12,12,13,13,13,14,14,14,14,14,14,14,12],t16l:[1,5,7,9,10,10,11,11,12,12,12,13,13,13,14,10,4,6,8,9,10,11,11,11,12,12,12,13,14,13,14,10,7,8,9,10,11,11,12,12,13,12,13,13,13,14,14,11,9,9,10,11,11,12,12,12,13,13,14,14,14,15,15,12,10,10,11,11,12,12,13,13,13,14,14,14,15,15,15,11,10,10,11,11,12,13,13,14,13,14,14,15,15,15,16,12,11,11,11,12,13,13,13,13,14,14,14,14,15,15,16,12,11,11,12,12,13,13,13,14,14,15,15,15,15,17,17,12,11,12,12,13,13,13,14,14,15,15,15,15,16,16,16,12,12,12,12,13,13,
14,14,15,15,15,15,16,15,16,15,13,12,13,12,13,14,14,14,14,15,16,16,16,17,17,16,12,13,13,13,13,14,14,15,16,16,16,16,16,16,15,16,13,13,14,14,14,14,15,15,15,15,17,16,16,16,16,18,13,15,14,14,14,15,15,16,16,16,18,17,17,17,19,17,13,14,15,13,14,16,16,15,16,16,17,18,17,19,17,16,13,10,10,10,11,11,12,12,12,13,13,13,13,13,13,13,10],t24l:[4,5,7,8,9,10,10,11,11,12,12,12,12,12,13,10,5,6,7,8,9,10,10,11,11,11,12,12,12,12,12,10,7,7,8,9,9,10,10,11,11,11,11,12,12,12,13,9,8,8,9,9,10,10,10,11,11,11,11,12,12,12,12,9,9,
9,9,10,10,10,10,11,11,11,12,12,12,12,13,9,10,9,10,10,10,10,11,11,11,11,12,12,12,12,12,9,10,10,10,10,10,11,11,11,11,12,12,12,12,12,13,9,11,10,10,10,11,11,11,11,12,12,12,12,12,13,13,10,11,11,11,11,11,11,11,11,11,12,12,12,12,13,13,10,11,11,11,11,11,11,11,12,12,12,12,12,13,13,13,10,12,11,11,11,11,12,12,12,12,12,12,13,13,13,13,10,12,12,11,11,11,12,12,12,12,12,12,13,13,13,13,10,12,12,12,12,12,12,12,12,12,12,13,13,13,13,13,10,12,12,12,12,12,12,12,12,13,13,13,13,13,13,13,10,13,12,12,12,12,12,12,13,13,13,
13,13,13,13,13,10,9,9,9,9,9,9,9,9,9,9,9,10,10,10,10,6],t32l:[1,5,5,7,5,8,7,9,5,7,7,9,7,9,9,10],t33l:[4,5,5,6,5,6,6,7,5,6,6,7,6,7,7,8]};r.ht=[new T(0,0,null,null),new T(2,0,r.t1HB,r.t1l),new T(3,0,r.t2HB,r.t2l),new T(3,0,r.t3HB,r.t3l),new T(0,0,null,null),new T(4,0,r.t5HB,r.t5l),new T(4,0,r.t6HB,r.t6l),new T(6,0,r.t7HB,r.t7l),new T(6,0,r.t8HB,r.t8l),new T(6,0,r.t9HB,r.t9l),new T(8,0,r.t10HB,r.t10l),new T(8,0,r.t11HB,r.t11l),new T(8,0,r.t12HB,r.t12l),new T(16,0,r.t13HB,r.t13l),new T(0,0,null,r.t16_5l),
new T(16,0,r.t15HB,r.t15l),new T(1,1,r.t16HB,r.t16l),new T(2,3,r.t16HB,r.t16l),new T(3,7,r.t16HB,r.t16l),new T(4,15,r.t16HB,r.t16l),new T(6,63,r.t16HB,r.t16l),new T(8,255,r.t16HB,r.t16l),new T(10,1023,r.t16HB,r.t16l),new T(13,8191,r.t16HB,r.t16l),new T(4,15,r.t24HB,r.t24l),new T(5,31,r.t24HB,r.t24l),new T(6,63,r.t24HB,r.t24l),new T(7,127,r.t24HB,r.t24l),new T(8,255,r.t24HB,r.t24l),new T(9,511,r.t24HB,r.t24l),new T(11,2047,r.t24HB,r.t24l),new T(13,8191,r.t24HB,r.t24l),new T(0,0,r.t32HB,r.t32l),new T(0,
0,r.t33HB,r.t33l)];r.largetbl=[65540,327685,458759,589832,655369,655370,720906,720907,786443,786444,786444,851980,851980,851980,917517,655370,262149,393222,524295,589832,655369,720906,720906,720907,786443,786443,786444,851980,917516,851980,917516,655370,458759,524295,589832,655369,720905,720906,786442,786443,851979,786443,851979,851980,851980,917516,917517,720905,589832,589832,655369,720905,720906,786442,786442,786443,851979,851979,917515,917516,917516,983052,983052,786441,655369,655369,720905,720906,
786442,786442,851978,851979,851979,917515,917516,917516,983052,983052,983053,720905,655370,655369,720906,720906,786442,851978,851979,917515,851979,917515,917516,983052,983052,983052,1048588,786441,720906,720906,720906,786442,851978,851979,851979,851979,917515,917516,917516,917516,983052,983052,1048589,786441,720907,720906,786442,786442,851979,851979,851979,917515,917516,983052,983052,983052,983052,1114125,1114125,786442,720907,786443,786443,851979,851979,851979,917515,917515,983051,983052,983052,
983052,1048588,1048589,1048589,786442,786443,786443,786443,851979,851979,917515,917515,983052,983052,983052,983052,1048588,983053,1048589,983053,851978,786444,851979,786443,851979,917515,917516,917516,917516,983052,1048588,1048588,1048589,1114125,1114125,1048589,786442,851980,851980,851979,851979,917515,917516,983052,1048588,1048588,1048588,1048588,1048589,1048589,983053,1048589,851978,851980,917516,917516,917516,917516,983052,983052,983052,983052,1114124,1048589,1048589,1048589,1048589,1179661,851978,
983052,917516,917516,917516,983052,983052,1048588,1048588,1048589,1179661,1114125,1114125,1114125,1245197,1114125,851978,917517,983052,851980,917516,1048588,1048588,983052,1048589,1048589,1114125,1179661,1114125,1245197,1114125,1048589,851978,655369,655369,655369,720905,720905,786441,786441,786441,851977,851977,851977,851978,851978,851978,851978,655366];r.table23=[65538,262147,458759,262148,327684,458759,393222,458759,524296];r.table56=[65539,262148,458758,524296,262148,327684,524294,589831,458757,
524294,589831,655368,524295,524295,589832,655369];r.bitrate_table=[[0,8,16,24,32,40,48,56,64,80,96,112,128,144,160,-1],[0,32,40,48,56,64,80,96,112,128,160,192,224,256,320,-1],[0,8,16,24,32,40,48,56,64,-1,-1,-1,-1,-1,-1,-1]];r.samplerate_table=[[22050,24E3,16E3,-1],[44100,48E3,32E3,-1],[11025,12E3,8E3,-1]];r.scfsi_band=[0,6,11,16,21];ya.Q_MAX=257;ya.Q_MAX2=116;ya.LARGE_BITS=1E5;ya.IXMAX_VAL=8206;var za={};za.SFBMAX=3*d.SBMAX_s;d.ENCDELAY=576;d.POSTDELAY=1152;d.MDCTDELAY=48;d.FFTOFFSET=224+d.MDCTDELAY;
d.DECDELAY=528;d.SBLIMIT=32;d.CBANDS=64;d.SBPSY_l=21;d.SBPSY_s=12;d.SBMAX_l=22;d.SBMAX_s=13;d.PSFB21=6;d.PSFB12=6;d.BLKSIZE=1024;d.HBLKSIZE=d.BLKSIZE/2+1;d.BLKSIZE_s=256;d.HBLKSIZE_s=d.BLKSIZE_s/2+1;d.NORM_TYPE=0;d.START_TYPE=1;d.SHORT_TYPE=2;d.STOP_TYPE=3;d.MPG_MD_LR_LR=0;d.MPG_MD_LR_I=1;d.MPG_MD_MS_LR=2;d.MPG_MD_MS_I=3;d.fircoef=[-.1039435,-.1892065,-.0432472*5,-.155915,3.898045E-17,.0467745*5,.50455,.756825,.187098*5];X.MFSIZE=3456+d.ENCDELAY-d.MDCTDELAY;X.MAX_HEADER_BUF=256;X.MAX_BITS_PER_CHANNEL=
4095;X.MAX_BITS_PER_GRANULE=7680;X.BPC=320;Fa.RIFF=kc("RIFF");Fa.WAVE=kc("WAVE");Fa.fmt_=kc("fmt ");Fa.data=kc("data");Fa.readHeader=function(d){var k=new Fa,p=d.getUint32(0,!1);if(Fa.RIFF==p&&(d.getUint32(4,!0),Fa.WAVE==d.getUint32(8,!1)&&Fa.fmt_==d.getUint32(12,!1))){var r=d.getUint32(16,!0),z=20;switch(r){case 16:case 18:k.channels=d.getUint16(z+2,!0);k.sampleRate=d.getUint32(z+4,!0);break;default:throw"extended fmt chunk not implemented";}for(var z=z+r,r=Fa.data,n=0;r!=p;){p=d.getUint32(z,!1);
n=d.getUint32(z+4,!0);if(r==p)break;z+=n+8}k.dataLen=n;k.dataOffset=z+8;return k}};za.SFBMAX=3*d.SBMAX_s;this.Mp3Encoder=function(d,k,p){3!=arguments.length&&(console.error("WARN: Mp3Encoder(channels, samplerate, kbps) not specified"),d=1,k=44100,p=128);var r=new N,z=new Uc,n=new L,F=new na,g=new Gc,b=new ya,t=new Oc,a=new pb,f=new Fc,D=new Xc,l=new Hc,q=new zb,c=new Vc,e=new Wc;r.setModules(n,F,g,b,t,a,f,D,e);F.setModules(n,e,f,a);D.setModules(F,f);g.setModules(r);t.setModules(F,l,b,q);b.setModules(q,
l,r.enc.psy);l.setModules(F);q.setModules(b);a.setModules(r,F,f);z.setModules(c,e);c.setModules(f,D,g);var v=r.lame_init();v.num_channels=d;v.in_samplerate=k;v.brate=p;v.mode=la.STEREO;v.quality=3;v.bWriteVbrTag=!1;v.disable_reservoir=!0;v.write_id3tag_automatic=!1;r.lame_init_params(v);var C=1152,w=0|1.25*C+7200,y=new Int8Array(w);this.encodeBuffer=function(a,b){1==d&&(b=a);a.length>C&&(C=a.length,w=0|1.25*C+7200,y=new Int8Array(w));var c=r.lame_encode_buffer(v,a,b,a.length,y,0,w);return y.subarray(0,
c)};this.flush=function(){var a=r.lame_encode_flush(v,y,0,w);return y.subarray(0,a)}};this.WavHeader=Fa};
