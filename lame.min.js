function lamejs(){function Z(d){return new Int32Array(d)}function L(d){return new Float32Array(d)}function ya(d){if(1==d.length)return L(d[0]);var l=d[0];d=d.slice(1);for(var q=[],v=0;v<l;v++)q.push(ya(d));return q}function kb(d){if(1==d.length)return Z(d[0]);var l=d[0];d=d.slice(1);for(var q=[],v=0;v<l;v++)q.push(kb(d));return q}function qc(d){if(1==d.length)return new Int16Array(d[0]);var l=d[0];d=d.slice(1);for(var q=[],v=0;v<l;v++)q.push(qc(d));return q}function kc(d){if(1==d.length)return Array(d[0]);
var l=d[0];d=d.slice(1);for(var q=[],v=0;v<l;v++)q.push(kc(d));return q}function Ia(d){this.ordinal=d}function G(d){this.ordinal=d}function Fc(){var d;this.setModules=function(l){d=l};this.ResvFrameBegin=function(l,q){var M=l.internal_flags,C,g=M.l3_side,W=d.getframebits(l);q.bits=(W-8*M.sideinfo_len)/M.mode_gr;var h=2048*M.mode_gr-8;320<l.brate?C=8*int(1E3*l.brate/(l.out_samplerate/1152)/8+.5):(C=11520,l.strict_ISO&&(C=8*int(32E4/(l.out_samplerate/1152)/8+.5)));M.ResvMax=C-W;M.ResvMax>h&&(M.ResvMax=
h);if(0>M.ResvMax||l.disable_reservoir)M.ResvMax=0;W=q.bits*M.mode_gr+Math.min(M.ResvSize,M.ResvMax);W>C&&(W=C);v(0==M.ResvMax%8);v(0<=M.ResvMax);g.resvDrain_pre=0;null!=M.pinfo&&(M.pinfo.mean_bits=q.bits/2,M.pinfo.resvsize=M.ResvSize);return W};this.ResvMaxBits=function(d,q,v,B){var g=d.internal_flags,W=g.ResvSize,h=g.ResvMax;0!=B&&(W+=q);0!=(g.substep_shaping&1)&&(h*=.9);v.bits=q;10*W>9*h?(B=W-9*h/10,v.bits+=B,g.substep_shaping|=128):(B=0,g.substep_shaping&=127,d.disable_reservoir||0!=(g.substep_shaping&
1)||(v.bits-=.1*q));d=W<6*g.ResvMax/10?W:6*g.ResvMax/10;d-=B;0>d&&(d=0);return d};this.ResvAdjust=function(d,q){d.ResvSize-=q.part2_3_length+q.part2_length};this.ResvFrameEnd=function(d,q){var B,C=d.l3_side;d.ResvSize+=q*d.mode_gr;var g=0;C.resvDrain_post=0;C.resvDrain_pre=0;0!=(B=d.ResvSize%8)&&(g+=B);B=d.ResvSize-g-d.ResvMax;0<B&&(v(0==B%8),v(0<=B),g+=B);B=Math.min(8*C.main_data_begin,g)/8;C.resvDrain_pre+=8*B;g-=8*B;d.ResvSize-=8*B;C.main_data_begin-=B;C.resvDrain_post+=g;d.ResvSize-=g}}function na(d){this.ordinal=
function(){return d}}function Gc(){this.getLameVersion=function(){return"3.98.4"};this.getLameShortVersion=function(){return"3.98.4"};this.getLameVeryShortVersion=function(){return"LAME3.98r"};this.getPsyVersion=function(){return"0.93"};this.getLameUrl=function(){return"http://www.mp3dev.org/"};this.getLameOsBitness=function(){return"32bits"}}function Hc(){function d(b,g,a,f,h,p,n,c,e,t,D,y,z,k,m){this.vbr_q=b;this.quant_comp=g;this.quant_comp_s=a;this.expY=f;this.st_lrm=h;this.st_s=p;this.masking_adj=
n;this.masking_adj_short=c;this.ath_lower=e;this.ath_curve=t;this.ath_sensitivity=D;this.interch=y;this.safejoint=z;this.sfb21mod=k;this.msfix=m}function l(b,d,a,f,g,p,n,c,e,t,D,y,z,k){this.quant_comp=d;this.quant_comp_s=a;this.safejoint=f;this.nsmsfix=g;this.st_lrm=p;this.st_s=n;this.nsbass=c;this.scale=e;this.masking_adj=t;this.ath_lower=D;this.ath_curve=y;this.interch=z;this.sfscale=k}function q(b,d,a){var f=b.VBR==G.vbr_rh?g:W,h=b.VBR_q_frac,p=f[d],f=f[d+1];p.st_lrm+=h*(f.st_lrm-p.st_lrm);p.st_s+=
h*(f.st_s-p.st_s);p.masking_adj+=h*(f.masking_adj-p.masking_adj);p.masking_adj_short+=h*(f.masking_adj_short-p.masking_adj_short);p.ath_lower+=h*(f.ath_lower-p.ath_lower);p.ath_curve+=h*(f.ath_curve-p.ath_curve);p.ath_sensitivity+=h*(f.ath_sensitivity-p.ath_sensitivity);p.interch+=h*(f.interch-p.interch);p.msfix+=h*(f.msfix-p.msfix);f=p.vbr_q;0>f&&(f=0);9<f&&(f=9);b.VBR_q=f;b.VBR_q_frac=0;0!=a?b.quant_comp=p.quant_comp:0<Math.abs(b.quant_comp- -1)||(b.quant_comp=p.quant_comp);0!=a?b.quant_comp_short=
p.quant_comp_s:0<Math.abs(b.quant_comp_short- -1)||(b.quant_comp_short=p.quant_comp_s);0!=p.expY&&(b.experimentalY=0!=p.expY);0!=a?b.internal_flags.nsPsy.attackthre=p.st_lrm:0<Math.abs(b.internal_flags.nsPsy.attackthre- -1)||(b.internal_flags.nsPsy.attackthre=p.st_lrm);0!=a?b.internal_flags.nsPsy.attackthre_s=p.st_s:0<Math.abs(b.internal_flags.nsPsy.attackthre_s- -1)||(b.internal_flags.nsPsy.attackthre_s=p.st_s);0!=a?b.maskingadjust=p.masking_adj:0<Math.abs(b.maskingadjust-0)||(b.maskingadjust=p.masking_adj);
0!=a?b.maskingadjust_short=p.masking_adj_short:0<Math.abs(b.maskingadjust_short-0)||(b.maskingadjust_short=p.masking_adj_short);0!=a?b.ATHlower=-p.ath_lower/10:0<Math.abs(10*-b.ATHlower-0)||(b.ATHlower=-p.ath_lower/10);0!=a?b.ATHcurve=p.ath_curve:0<Math.abs(b.ATHcurve- -1)||(b.ATHcurve=p.ath_curve);0!=a?b.athaa_sensitivity=p.ath_sensitivity:0<Math.abs(b.athaa_sensitivity- -1)||(b.athaa_sensitivity=p.ath_sensitivity);0<p.interch&&(0!=a?b.interChRatio=p.interch:0<Math.abs(b.interChRatio- -1)||(b.interChRatio=
p.interch));0<p.safejoint&&(b.exp_nspsytune|=p.safejoint);0<p.sfb21mod&&(b.exp_nspsytune|=p.sfb21mod<<20);0!=a?b.msfix=p.msfix:0<Math.abs(b.msfix- -1)||(b.msfix=p.msfix);0==a&&(b.VBR_q=d,b.VBR_q_frac=h)}function v(b,d,a){var f=C.nearestBitrateFullIndex(d);b.VBR=G.vbr_abr;b.VBR_mean_bitrate_kbps=d;b.VBR_mean_bitrate_kbps=Math.min(b.VBR_mean_bitrate_kbps,320);b.VBR_mean_bitrate_kbps=Math.max(b.VBR_mean_bitrate_kbps,8);b.brate=b.VBR_mean_bitrate_kbps;320<b.VBR_mean_bitrate_kbps&&(b.disable_reservoir=
!0);0<h[f].safejoint&&(b.exp_nspsytune|=2);0<h[f].sfscale&&(b.internal_flags.noise_shaping=2);if(0<Math.abs(h[f].nsbass)){var g=int(4*h[f].nsbass);0>g&&(g+=64);b.exp_nspsytune|=g<<2}0!=a?b.quant_comp=h[f].quant_comp:0<Math.abs(b.quant_comp- -1)||(b.quant_comp=h[f].quant_comp);0!=a?b.quant_comp_short=h[f].quant_comp_s:0<Math.abs(b.quant_comp_short- -1)||(b.quant_comp_short=h[f].quant_comp_s);0!=a?b.msfix=h[f].nsmsfix:0<Math.abs(b.msfix- -1)||(b.msfix=h[f].nsmsfix);0!=a?b.internal_flags.nsPsy.attackthre=
h[f].st_lrm:0<Math.abs(b.internal_flags.nsPsy.attackthre- -1)||(b.internal_flags.nsPsy.attackthre=h[f].st_lrm);0!=a?b.internal_flags.nsPsy.attackthre_s=h[f].st_s:0<Math.abs(b.internal_flags.nsPsy.attackthre_s- -1)||(b.internal_flags.nsPsy.attackthre_s=h[f].st_s);0!=a?b.scale=h[f].scale:0<Math.abs(b.scale- -1)||(b.scale=h[f].scale);0!=a?b.maskingadjust=h[f].masking_adj:0<Math.abs(b.maskingadjust-0)||(b.maskingadjust=h[f].masking_adj);0<h[f].masking_adj?0!=a?b.maskingadjust_short=.9*h[f].masking_adj:
0<Math.abs(b.maskingadjust_short-0)||(b.maskingadjust_short=.9*h[f].masking_adj):0!=a?b.maskingadjust_short=1.1*h[f].masking_adj:0<Math.abs(b.maskingadjust_short-0)||(b.maskingadjust_short=1.1*h[f].masking_adj);0!=a?b.ATHlower=-h[f].ath_lower/10:0<Math.abs(10*-b.ATHlower-0)||(b.ATHlower=-h[f].ath_lower/10);0!=a?b.ATHcurve=h[f].ath_curve:0<Math.abs(b.ATHcurve- -1)||(b.ATHcurve=h[f].ath_curve);0!=a?b.interChRatio=h[f].interch:0<Math.abs(b.interChRatio- -1)||(b.interChRatio=h[f].interch);return d}var C;
this.setModules=function(b){C=b};var g=[new d(0,9,9,0,5.2,125,-4.2,-6.3,4.8,1,0,0,2,21,.97),new d(1,9,9,0,5.3,125,-3.6,-5.6,4.5,1.5,0,0,2,21,1.35),new d(2,9,9,0,5.6,125,-2.2,-3.5,2.8,2,0,0,2,21,1.49),new d(3,9,9,1,5.8,130,-1.8,-2.8,2.6,3,-4,0,2,20,1.64),new d(4,9,9,1,6,135,-.7,-1.1,1.1,3.5,-8,0,2,0,1.79),new d(5,9,9,1,6.4,140,.5,.4,-7.5,4,-12,2E-4,0,0,1.95),new d(6,9,9,1,6.6,145,.67,.65,-14.7,6.5,-19,4E-4,0,0,2.3),new d(7,9,9,1,6.6,145,.8,.75,-19.7,8,-22,6E-4,0,0,2.7),new d(8,9,9,1,6.6,145,1.2,1.15,
-27.5,10,-23,7E-4,0,0,0),new d(9,9,9,1,6.6,145,1.6,1.6,-36,11,-25,8E-4,0,0,0),new d(10,9,9,1,6.6,145,2,2,-36,12,-25,8E-4,0,0,0)],W=[new d(0,9,9,0,4.2,25,-7,-4,7.5,1,0,0,2,26,.97),new d(1,9,9,0,4.2,25,-5.6,-3.6,4.5,1.5,0,0,2,21,1.35),new d(2,9,9,0,4.2,25,-4.4,-1.8,2,2,0,0,2,18,1.49),new d(3,9,9,1,4.2,25,-3.4,-1.25,1.1,3,-4,0,2,15,1.64),new d(4,9,9,1,4.2,25,-2.2,.1,0,3.5,-8,0,2,0,1.79),new d(5,9,9,1,4.2,25,-1,1.65,-7.7,4,-12,2E-4,0,0,1.95),new d(6,9,9,1,4.2,25,-0,2.47,-7.7,6.5,-19,4E-4,0,0,2),new d(7,
9,9,1,4.2,25,.5,2,-14.5,8,-22,6E-4,0,0,2),new d(8,9,9,1,4.2,25,1,2.4,-22,10,-23,7E-4,0,0,2),new d(9,9,9,1,4.2,25,1.5,2.95,-30,11,-25,8E-4,0,0,2),new d(10,9,9,1,4.2,25,2,2.95,-36,12,-30,8E-4,0,0,2)],h=[new l(8,9,9,0,0,6.6,145,0,.95,0,-30,11,.0012,1),new l(16,9,9,0,0,6.6,145,0,.95,0,-25,11,.001,1),new l(24,9,9,0,0,6.6,145,0,.95,0,-20,11,.001,1),new l(32,9,9,0,0,6.6,145,0,.95,0,-15,11,.001,1),new l(40,9,9,0,0,6.6,145,0,.95,0,-10,11,9E-4,1),new l(48,9,9,0,0,6.6,145,0,.95,0,-10,11,9E-4,1),new l(56,9,9,
0,0,6.6,145,0,.95,0,-6,11,8E-4,1),new l(64,9,9,0,0,6.6,145,0,.95,0,-2,11,8E-4,1),new l(80,9,9,0,0,6.6,145,0,.95,0,0,8,7E-4,1),new l(96,9,9,0,2.5,6.6,145,0,.95,0,1,5.5,6E-4,1),new l(112,9,9,0,2.25,6.6,145,0,.95,0,2,4.5,5E-4,1),new l(128,9,9,0,1.95,6.4,140,0,.95,0,3,4,2E-4,1),new l(160,9,9,1,1.79,6,135,0,.95,-2,5,3.5,0,1),new l(192,9,9,1,1.49,5.6,125,0,.97,-4,7,3,0,0),new l(224,9,9,1,1.25,5.2,125,0,.98,-6,9,2,0,0),new l(256,9,9,1,.97,5.2,125,0,1,-8,10,1,0,0),new l(320,9,9,1,.9,5.2,125,0,1,-10,12,0,
0,0)];this.apply_preset=function(b,d,a){switch(d){case I.R3MIX:d=I.V3;b.VBR=G.vbr_mtrh;break;case I.MEDIUM:d=I.V4;b.VBR=G.vbr_rh;break;case I.MEDIUM_FAST:d=I.V4;b.VBR=G.vbr_mtrh;break;case I.STANDARD:d=I.V2;b.VBR=G.vbr_rh;break;case I.STANDARD_FAST:d=I.V2;b.VBR=G.vbr_mtrh;break;case I.EXTREME:d=I.V0;b.VBR=G.vbr_rh;break;case I.EXTREME_FAST:d=I.V0;b.VBR=G.vbr_mtrh;break;case I.INSANE:return d=320,b.preset=d,v(b,d,a),b.VBR=G.vbr_off,d}b.preset=d;switch(d){case I.V9:return q(b,9,a),d;case I.V8:return q(b,
8,a),d;case I.V7:return q(b,7,a),d;case I.V6:return q(b,6,a),d;case I.V5:return q(b,5,a),d;case I.V4:return q(b,4,a),d;case I.V3:return q(b,3,a),d;case I.V2:return q(b,2,a),d;case I.V1:return q(b,1,a),d;case I.V0:return q(b,0,a),d}if(8<=d&&320>=d)return v(b,d,a);b.preset=0;return d}}function X(){function d(g,l,h,b,r,a){for(;0!=r--;)h[b]=1E-10+g[l+0]*a[0]-h[b-1]*a[1]+g[l-1]*a[2]-h[b-2]*a[3]+g[l-2]*a[4]-h[b-3]*a[5]+g[l-3]*a[6]-h[b-4]*a[7]+g[l-4]*a[8]-h[b-5]*a[9]+g[l-5]*a[10]-h[b-6]*a[11]+g[l-6]*a[12]-
h[b-7]*a[13]+g[l-7]*a[14]-h[b-8]*a[15]+g[l-8]*a[16]-h[b-9]*a[17]+g[l-9]*a[18]-h[b-10]*a[19]+g[l-10]*a[20],++b,++l}function l(d,l,h,b,r,a){for(;0!=r--;)h[b]=d[l+0]*a[0]-h[b-1]*a[1]+d[l-1]*a[2]-h[b-2]*a[3]+d[l-2]*a[4],++b,++l}function q(d){return d*d}var v=[[.038575994352,-3.84664617118067,-.02160367184185,7.81501653005538,-.00123395316851,-11.34170355132042,-9.291677959E-5,13.05504219327545,-.01655260341619,-12.28759895145294,.02161526843274,9.4829380631979,-.02074045215285,-5.87257861775999,.00594298065125,
2.75465861874613,.00306428023191,-.86984376593551,1.2025322027E-4,.13919314567432,.00288463683916],[.0541865640643,-3.47845948550071,-.02911007808948,6.36317777566148,-.00848709379851,-8.54751527471874,-.00851165645469,9.4769360780128,-.00834990904936,-8.81498681370155,.02245293253339,6.85401540936998,-.02596338512915,-4.39470996079559,.01624864962975,2.19611684890774,-.00240879051584,-.75104302451432,.00674613682247,.13149317958808,-.00187763777362],[.15457299681924,-2.37898834973084,-.09331049056315,
2.84868151156327,-.06247880153653,-2.64577170229825,.02163541888798,2.23697657451713,-.05588393329856,-1.67148153367602,.04781476674921,1.00595954808547,.00222312597743,-.45953458054983,.03174092540049,.16378164858596,-.01390589421898,-.05032077717131,.00651420667831,.0234789740702,-.00881362733839],[.30296907319327,-1.61273165137247,-.22613988682123,1.0797749225997,-.08587323730772,-.2565625775407,.03282930172664,-.1627671912044,-.00915702933434,-.22638893773906,-.02364141202522,.39120800788284,
-.00584456039913,-.22138138954925,.06276101321749,.04500235387352,-8.28086748E-6,.02005851806501,.00205861885564,.00302439095741,-.02950134983287],[.33642304856132,-1.49858979367799,-.2557224142557,.87350271418188,-.11828570177555,.12205022308084,.11921148675203,-.80774944671438,-.07834489609479,.47854794562326,-.0046997791438,-.12453458140019,-.0058950022444,-.04067510197014,.05724228140351,.08333755284107,.00832043980773,-.04237348025746,-.0163538138454,.02977207319925,-.0176017656815],[.4491525660845,
-.62820619233671,-.14351757464547,.29661783706366,-.22784394429749,-.372563729424,-.01419140100551,.00213767857124,.04078262797139,-.42029820170918,-.12398163381748,.22199650564824,.04097565135648,.00613424350682,.10478503600251,.06747620744683,-.01863887810927,.05784820375801,-.03193428438915,.03222754072173,.00541907748707],[.56619470757641,-1.04800335126349,-.75464456939302,.29156311971249,.1624213774223,-.26806001042947,.16744243493672,.00819999645858,-.18901604199609,.45054734505008,.3093178284183,
-.33032403314006,-.27562961986224,.0673936833311,.00647310677246,-.04784254229033,.08647503780351,.01639907836189,-.0378898455484,.01807364323573,-.00588215443421],[.58100494960553,-.51035327095184,-.53174909058578,-.31863563325245,-.14289799034253,-.20256413484477,.17520704835522,.1472815413433,.02377945217615,.38952639978999,.15558449135573,-.23313271880868,-.25344790059353,-.05246019024463,.01628462406333,-.02505961724053,.06920467763959,.02442357316099,-.03721611395801,.01818801111503,-.00749618797172],
[.53648789255105,-.2504987195602,-.42163034350696,-.43193942311114,-.00275953611929,-.03424681017675,.04267842219415,-.04678328784242,-.10214864179676,.26408300200955,.14590772289388,.15113130533216,-.02459864859345,-.17556493366449,-.11202315195388,-.18823009262115,-.04060034127,.05477720428674,.0478866554818,.0470440968812,-.02217936801134]],C=[[.98621192462708,-1.97223372919527,-1.97242384925416,.97261396931306,.98621192462708],[.98500175787242,-1.96977855582618,-1.97000351574484,.9702284756635,
.98500175787242],[.97938932735214,-1.95835380975398,-1.95877865470428,.95920349965459,.97938932735214],[.97531843204928,-1.95002759149878,-1.95063686409857,.95124613669835,.97531843204928],[.97316523498161,-1.94561023566527,-1.94633046996323,.94705070426118,.97316523498161],[.96454515552826,-1.92783286977036,-1.92909031105652,.93034775234268,.96454515552826],[.96009142950541,-1.91858953033784,-1.92018285901082,.92177618768381,.96009142950541],[.95856916599601,-1.9154210807478,-1.91713833199203,.91885558323625,
.95856916599601],[.94597685600279,-1.88903307939452,-1.89195371200558,.89487434461664,.94597685600279]];this.InitGainAnalysis=function(d,l){var h;a:{for(h=0;h<MAX_ORDER;h++)d.linprebuf[h]=d.lstepbuf[h]=d.loutbuf[h]=d.rinprebuf[h]=d.rstepbuf[h]=d.routbuf[h]=0;switch(0|l){case 48E3:d.reqindex=0;break;case 44100:d.reqindex=1;break;case 32E3:d.reqindex=2;break;case 24E3:d.reqindex=3;break;case 22050:d.reqindex=4;break;case 16E3:d.reqindex=5;break;case 12E3:d.reqindex=6;break;case 11025:d.reqindex=7;break;
case 8E3:d.reqindex=8;break;default:h=INIT_GAIN_ANALYSIS_ERROR;break a}d.sampleWindow=0|(1*l+20-1)/20;d.lsum=0;d.rsum=0;d.totsamp=0;Va.ill(d.A,0);h=INIT_GAIN_ANALYSIS_OK}if(h!=INIT_GAIN_ANALYSIS_OK)return INIT_GAIN_ANALYSIS_ERROR;d.linpre=MAX_ORDER;d.rinpre=MAX_ORDER;d.lstep=MAX_ORDER;d.rstep=MAX_ORDER;d.lout=MAX_ORDER;d.rout=MAX_ORDER;Va.fill(d.B,0);return INIT_GAIN_ANALYSIS_OK};this.AnalyzeSamples=function(g,u,h,b,r,a,f){var F,p,n,c,e,t;if(0==a)return GAIN_ANALYSIS_OK;t=0;c=a;switch(f){case 1:b=
u;r=h;break;case 2:break;default:return GAIN_ANALYSIS_ERROR}a<MAX_ORDER?(N.arraycopy(u,h,g.linprebuf,MAX_ORDER,a),N.arraycopy(b,r,g.rinprebuf,MAX_ORDER,a)):(N.arraycopy(u,h,g.linprebuf,MAX_ORDER,MAX_ORDER),N.arraycopy(b,r,g.rinprebuf,MAX_ORDER,MAX_ORDER));for(;0<c;){e=c>g.sampleWindow-g.totsamp?g.sampleWindow-g.totsamp:c;t<MAX_ORDER?(f=g.linpre+t,F=g.linprebuf,p=g.rinpre+t,n=g.rinprebuf,e>MAX_ORDER-t&&(e=MAX_ORDER-t)):(f=h+t,F=u,p=r+t,n=b);d(F,f,g.lstepbuf,g.lstep+g.totsamp,e,v[g.reqindex]);d(n,p,
g.rstepbuf,g.rstep+g.totsamp,e,v[g.reqindex]);l(g.lstepbuf,g.lstep+g.totsamp,g.loutbuf,g.lout+g.totsamp,e,C[g.reqindex]);l(g.rstepbuf,g.rstep+g.totsamp,g.routbuf,g.rout+g.totsamp,e,C[g.reqindex]);f=g.lout+g.totsamp;F=g.loutbuf;p=g.rout+g.totsamp;n=g.routbuf;for(var D=e%8;0!=D--;)g.lsum+=q(F[f++]),g.rsum+=q(n[p++]);for(D=e/8;0!=D--;)g.lsum+=q(F[f+0])+q(F[f+1])+q(F[f+2])+q(F[f+3])+q(F[f+4])+q(F[f+5])+q(F[f+6])+q(F[f+7]),f+=8,g.rsum+=q(n[p+0])+q(n[p+1])+q(n[p+2])+q(n[p+3])+q(n[p+4])+q(n[p+5])+q(n[p+
6])+q(n[p+7]),p+=8;c-=e;t+=e;g.totsamp+=e;g.totsamp==g.sampleWindow&&(f=10*X.STEPS_per_dB*Math.log10((g.lsum+g.rsum)/g.totsamp*.5+1E-37),f=0>=f?0:0|f,f>=g.A.length&&(f=g.A.length-1),g.A[f]++,g.lsum=g.rsum=0,N.arraycopy(g.loutbuf,g.totsamp,g.loutbuf,0,MAX_ORDER),N.arraycopy(g.routbuf,g.totsamp,g.routbuf,0,MAX_ORDER),N.arraycopy(g.lstepbuf,g.totsamp,g.lstepbuf,0,MAX_ORDER),N.arraycopy(g.rstepbuf,g.totsamp,g.rstepbuf,0,MAX_ORDER),g.totsamp=0);if(g.totsamp>g.sampleWindow)return GAIN_ANALYSIS_ERROR}a<
MAX_ORDER?(N.arraycopy(g.linprebuf,a,g.linprebuf,0,MAX_ORDER-a),N.arraycopy(g.rinprebuf,a,g.rinprebuf,0,MAX_ORDER-a),N.arraycopy(u,h,g.linprebuf,MAX_ORDER-a,a),N.arraycopy(b,r,g.rinprebuf,MAX_ORDER-a,a)):(N.arraycopy(u,h+a-MAX_ORDER,g.linprebuf,0,MAX_ORDER),N.arraycopy(b,r+a-MAX_ORDER,g.rinprebuf,0,MAX_ORDER));return GAIN_ANALYSIS_OK};this.GetTitleGain=function(d){var l;l=d.A;var h=d.A.length,b,r=0;for(b=0;b<h;b++)r+=l[b];if(0==r)l=GAIN_NOT_ENOUGH_SAMPLES;else{r=0|Math.ceil(r*(1-.95));for(b=h;0<b--&&
!(0>=(r-=l[b])););l=64.82-b/X.STEPS_per_dB}for(h=0;h<d.A.length;h++)d.B[h]+=d.A[h],d.A[h]=0;for(h=0;h<MAX_ORDER;h++)d.linprebuf[h]=d.lstepbuf[h]=d.loutbuf[h]=d.rinprebuf[h]=d.rstepbuf[h]=d.routbuf[h]=0;d.totsamp=0;d.lsum=d.rsum=0;return l}}function Ab(){function B(a){this.bits=0|a}function l(a,c,d,b,k,m){c=.5946/c;v(0<a);for(a>>=1;0!=a--;)k[m++]=c>d[b++]?0:1,k[m++]=c>d[b++]?0:1}function q(a,c,d,b,k,m){v(0<a);a>>=1;var x=a%2;for(a>>=1;0!=a--;){var p,e,n,f,h,r,l;p=d[b++]*c;e=d[b++]*c;h=0|p;n=d[b++]*
c;r=0|e;f=d[b++]*c;l=0|n;p+=g.adj43[h];h=0|f;e+=g.adj43[r];k[m++]=0|p;n+=g.adj43[l];k[m++]=0|e;f+=g.adj43[h];k[m++]=0|n;k[m++]=0|f}0!=x&&(p=d[b++]*c,e=d[b++]*c,p+=g.adj43[0|p],e+=g.adj43[0|e],k[m++]=0|p,k[m++]=0|e)}function M(a,c,d,b){var k,m=c,x=k=0;do{var p=a[m++],e=a[m++];k<p&&(k=p);x<e&&(x=e)}while(m<d);k<x&&(k=x);switch(k){case 0:return k;case 1:m=c;c=0;k=u.ht[1].hlen;do x=2*a[m+0]+a[m+1],m+=2,c+=k[x];while(m<d);b.bits+=c;return 1;case 2:case 3:m=c;c=h[k-1];k=0;x=u.ht[c].xlen;p=2==c?u.table23:
u.table56;do e=a[m+0]*x+a[m+1],m+=2,k+=p[e];while(m<d);a=k&65535;k>>=16;k>a&&(k=a,c++);b.bits+=k;return c;case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:m=c;c=h[k-1];var p=x=k=0,e=u.ht[c].xlen,n=u.ht[c].hlen,f=u.ht[c+1].hlen,g=u.ht[c+2].hlen;do{var r=a[m+0]*e+a[m+1],m=m+2;k+=n[r];x+=f[r];p+=g[r]}while(m<d);a=c;k>x&&(k=x,a++);k>p&&(k=p,a=c+2);b.bits+=k;return a;default:if(k>qa.IXMAX_VAL)return b.bits=qa.LARGE_BITS,-1;k-=15;for(m=24;32>m&&!(u.ht[m].linmax>=
k);m++);for(x=m-8;24>x&&!(u.ht[x].linmax>=k);x++);k=x;p=65536*u.ht[k].xlen+u.ht[m].xlen;x=0;do e=a[c++],n=a[c++],0!=e&&(14<e&&(e=15,x+=p),e*=16),0!=n&&(14<n&&(n=15,x+=p),e+=n),x+=u.largetbl[e];while(c<d);a=x&65535;x>>=16;x>a&&(x=a,k=m);b.bits+=x;return k}}function C(a,c,b,p,k,m,x,e){for(var n=c.big_values,f=2;f<d.SBMAX_l+1;f++){var h=a.scalefac_band.l[f];if(h>=n)break;var g=k[f-2]+c.count1bits;if(b.part2_3_length<=g)break;g=new B(g);h=M(p,h,n,g);g=g.bits;b.part2_3_length<=g||(b.assign(c),b.part2_3_length=
g,b.region0_count=m[f-2],b.region1_count=f-2-m[f-2],b.table_select[0]=x[f-2],b.table_select[1]=e[f-2],b.table_select[2]=h)}}var g=null;this.qupvt=null;this.setModules=function(a){g=this.qupvt=a};var W=[[0,0],[0,0],[0,0],[0,0],[0,0],[0,1],[1,1],[1,1],[1,2],[2,2],[2,3],[2,3],[3,4],[3,4],[3,4],[4,5],[4,5],[4,6],[5,6],[5,6],[5,7],[6,7],[6,7]],h=[1,2,5,7,7,10,10,13,13,13,13,13,13,13,13];this.noquant_count_bits=function(a,c,b){var p=c.l3_enc,k=Math.min(576,c.max_nonzero_coeff+2>>1<<1);null!=b&&(b.sfb_count1=
0);for(;1<k&&0==(p[k-1]|p[k-2]);k-=2);c.count1=k;for(var m=0,x=0;3<k;k-=4){var e;if(1<((p[k-1]|p[k-2]|p[k-3]|p[k-4])&2147483647))break;e=2*(2*(2*p[k-4]+p[k-3])+p[k-2])+p[k-1];m+=u.t32l[e];x+=u.t33l[e]}e=m;c.count1table_select=0;m>x&&(e=x,c.count1table_select=1);c.count1bits=e;c.big_values=k;if(0==k)return e;c.block_type==d.SHORT_TYPE?(m=3*a.scalefac_band.s[3],m>c.big_values&&(m=c.big_values),x=c.big_values):c.block_type==d.NORM_TYPE?(v(576>=k),m=c.region0_count=a.bv_scf[k-2],x=c.region1_count=a.bv_scf[k-
1],v(m+x+2<d.SBPSY_l),x=a.scalefac_band.l[m+x+2],m=a.scalefac_band.l[m+1],x<k&&(e=new B(e),c.table_select[2]=M(p,x,k,e),e=e.bits)):(c.region0_count=7,c.region1_count=d.SBMAX_l-1-7-1,m=a.scalefac_band.l[8],x=k,m>x&&(m=x));m=Math.min(m,k);x=Math.min(x,k);v(0<=m);v(0<=x);0<m&&(e=new B(e),c.table_select[0]=M(p,0,m,e),e=e.bits);m<x&&(e=new B(e),c.table_select[1]=M(p,m,x,e),e=e.bits);2==a.use_best_huffman&&(c.part2_3_length=e,best_huffman_divide(a,c),e=c.part2_3_length);if(null!=b&&c.block_type==d.NORM_TYPE){for(p=
0;a.scalefac_band.l[p]<c.big_values;)p++;b.sfb_count1=p}return e};this.count_bits=function(a,c,b,p){var k=b.l3_enc,m=qa.IXMAX_VAL/g.IPOW20(b.global_gain);if(b.xrpow_max>m)return qa.LARGE_BITS;var m=g.IPOW20(b.global_gain),x,e,n=0,f,h=0,r=0,B=0,A=0,E=k,J=0,S=c,U=0;f=null!=p&&b.global_gain==p.global_gain;e=b.block_type==d.SHORT_TYPE?38:21;for(x=0;x<=e;x++){var F=-1;if(f||b.block_type==d.NORM_TYPE)F=b.global_gain-(b.scalefac[x]+(0!=b.preflag?g.pretab[x]:0)<<b.scalefac_scale+1)-8*b.subblock_gain[b.window[x]];
v(0<=b.width[x]);if(f&&p.step[x]==F)0!=h&&(q(h,m,S,U,E,J),h=0),0!=r&&(l(r,m,S,U,E,J),r=0);else{var ja=b.width[x];n+b.width[x]>b.max_nonzero_coeff&&(x=b.max_nonzero_coeff-n+1,Va.fill(k,b.max_nonzero_coeff,576,0),ja=x,0>ja&&(ja=0),x=e+1);0==h&&0==r&&(E=k,J=A,S=c,U=B);null!=p&&0<p.sfb_count1&&x>=p.sfb_count1&&0<p.step[x]&&F>=p.step[x]?(0!=h&&(q(h,m,S,U,E,J),h=0,E=k,J=A,S=c,U=B),r+=ja):(0!=r&&(l(r,m,S,U,E,J),r=0,E=k,J=A,S=c,U=B),h+=ja);if(0>=ja){0!=r&&(l(r,m,S,U,E,J),r=0);0!=h&&(q(h,m,S,U,E,J),h=0);break}}x<=
e&&(A+=b.width[x],B+=b.width[x],n+=b.width[x])}0!=h&&q(h,m,S,U,E,J);0!=r&&l(r,m,S,U,E,J);if(0!=(a.substep_shaping&2))for(m=0,e=.634521682242439/g.IPOW20(b.global_gain+b.scalefac_scale),n=0;n<b.sfbmax;n++)if(f=b.width[n],v(0<=f),0==a.pseudohalf[n])m+=f;else for(h=m,m+=f;h<m;++h)k[h]=c[h]>=e?k[h]:0;return this.noquant_count_bits(a,b,p)};this.best_huffman_divide=function(a,c){var b=new rb,p=c.l3_enc,k=Z(23),m=Z(23),e=Z(23),n=Z(23);if(c.block_type!=d.SHORT_TYPE||1!=a.mode_gr){b.assign(c);if(c.block_type==
d.NORM_TYPE){for(var f=c.big_values,h=0;22>=h;h++)k[h]=qa.LARGE_BITS;for(h=0;16>h;h++){var g=a.scalefac_band.l[h+1];if(g>=f)break;for(var r=0,l=new B(r),q=M(p,0,g,l),r=l.bits,E=0;8>E;E++){var J=a.scalefac_band.l[h+E+2];if(J>=f)break;l=r;l=new B(l);J=M(p,g,J,l);l=l.bits;k[h+E]>l&&(k[h+E]=l,m[h+E]=h,e[h+E]=q,n[h+E]=J)}}C(a,b,c,p,k,m,e,n)}f=b.big_values;if(!(0==f||1<(p[f-2]|p[f-1])||(f=c.count1+2,576<f))){b.assign(c);b.count1=f;g=h=0;for(v(576>=f);f>b.big_values;f-=4)r=2*(2*(2*p[f-4]+p[f-3])+p[f-2])+
p[f-1],h+=u.t32l[r],g+=u.t33l[r];b.big_values=f;b.count1table_select=0;h>g&&(h=g,b.count1table_select=1);b.count1bits=h;b.block_type==d.NORM_TYPE?C(a,b,c,p,k,m,e,n):(b.part2_3_length=h,h=a.scalefac_band.l[8],h>f&&(h=f),0<h&&(k=new B(b.part2_3_length),b.table_select[0]=M(p,0,h,k),b.part2_3_length=k.bits),f>h&&(k=new B(b.part2_3_length),b.table_select[1]=M(p,h,f,k),b.part2_3_length=k.bits),c.part2_3_length>b.part2_3_length&&c.assign(b))}}};var b=[1,1,1,1,8,2,2,2,4,4,4,8,8,8,16,16],r=[1,2,4,8,1,2,4,
8,2,4,8,2,4,8,4,8],a=[0,0,0,0,3,1,1,1,2,2,2,3,3,3,4,4],f=[0,1,2,3,0,1,2,3,1,2,3,1,2,3,2,3];Ab.slen1_tab=a;Ab.slen2_tab=f;this.best_scalefac_store=function(c,p,e,n){var k=n.tt[p][e],m,x,h,l=0;for(m=x=0;m<k.sfbmax;m++){h=k.width[m];v(0<=h);x+=h;for(h=-h;0>h&&0==k.l3_enc[h+x];h++);0==h&&(k.scalefac[m]=l=-2)}if(0==k.scalefac_scale&&0==k.preflag){for(m=x=0;m<k.sfbmax;m++)0<k.scalefac[m]&&(x|=k.scalefac[m]);if(0==(x&1)&&0!=x){for(m=0;m<k.sfbmax;m++)0<k.scalefac[m]&&(k.scalefac[m]>>=1);k.scalefac_scale=
l=1}}if(0==k.preflag&&k.block_type!=d.SHORT_TYPE&&2==c.mode_gr){for(m=11;m<d.SBPSY_l&&!(k.scalefac[m]<g.pretab[m]&&-2!=k.scalefac[m]);m++);if(m==d.SBPSY_l){for(m=11;m<d.SBPSY_l;m++)0<k.scalefac[m]&&(k.scalefac[m]-=g.pretab[m]);k.preflag=l=1}}for(m=0;4>m;m++)n.scfsi[e][m]=0;if(2==c.mode_gr&&1==p&&n.tt[0][e].block_type!=d.SHORT_TYPE&&n.tt[1][e].block_type!=d.SHORT_TYPE){p=n.tt[1][e];x=n.tt[0][e];for(l=0;l<u.scfsi_band.length-1;l++){for(m=u.scfsi_band[l];m<u.scfsi_band[l+1]&&!(x.scalefac[m]!=p.scalefac[m]&&
0<=p.scalefac[m]);m++);if(m==u.scfsi_band[l+1]){for(m=u.scfsi_band[l];m<u.scfsi_band[l+1];m++)p.scalefac[m]=-1;n.scfsi[e][l]=1}}for(m=n=e=0;11>m;m++)-1!=p.scalefac[m]&&(n++,e<p.scalefac[m]&&(e=p.scalefac[m]));for(h=x=0;m<d.SBPSY_l;m++)-1!=p.scalefac[m]&&(h++,x<p.scalefac[m]&&(x=p.scalefac[m]));for(l=0;16>l;l++)e<b[l]&&x<r[l]&&(m=a[l]*n+f[l]*h,p.part2_length>m&&(p.part2_length=m,p.scalefac_compress=l));l=0}for(m=0;m<k.sfbmax;m++)-2==k.scalefac[m]&&(k.scalefac[m]=0);0!=l&&(2==c.mode_gr?this.scale_bitcount(k):
this.scale_bitcount_lsf(c,k))};var F=[0,18,36,54,54,36,54,72,54,72,90,72,90,108,108,126],p=[0,18,36,54,51,35,53,71,52,70,88,69,87,105,104,122],n=[0,10,20,30,33,21,31,41,32,42,52,43,53,63,64,74];this.scale_bitcount=function(a){var c,e,h=0,k=0,m;c=a.scalefac;a:{for(m=0;m<a.sfbmax;++m)if(0>c[m]){m=!1;break a}m=!0}v(m);if(a.block_type==d.SHORT_TYPE)m=F,0!=a.mixed_block_flag&&(m=p);else if(m=n,0==a.preflag){for(e=11;e<d.SBPSY_l&&!(c[e]<g.pretab[e]);e++);if(e==d.SBPSY_l)for(a.preflag=1,e=11;e<d.SBPSY_l;e++)c[e]-=
g.pretab[e]}for(e=0;e<a.sfbdivide;e++)h<c[e]&&(h=c[e]);for(;e<a.sfbmax;e++)k<c[e]&&(k=c[e]);a.part2_length=qa.LARGE_BITS;for(c=0;16>c;c++)h<b[c]&&k<r[c]&&a.part2_length>m[c]&&(a.part2_length=m[c],a.scalefac_compress=c);return a.part2_length==qa.LARGE_BITS};var c=[[15,15,7,7],[15,15,7,0],[7,3,0,0],[15,31,31,0],[7,7,7,0],[3,3,0,0]];this.scale_bitcount_lsf=function(a,b){var p,n,k,m,x,h,f,r=Z(4),l=b.scalefac;p=0!=b.preflag?2:0;for(h=0;4>h;h++)r[h]=0;if(b.block_type==d.SHORT_TYPE){n=1;var w=g.nr_of_sfb_block[p][n];
for(k=f=0;4>k;k++)for(m=w[k]/3,h=0;h<m;h++,f++)for(x=0;3>x;x++)l[3*f+x]>r[k]&&(r[k]=l[3*f+x])}else for(n=0,w=g.nr_of_sfb_block[p][n],k=f=0;4>k;k++)for(m=w[k],h=0;h<m;h++,f++)l[f]>r[k]&&(r[k]=l[f]);m=!1;for(k=0;4>k;k++)r[k]>c[p][k]&&(m=!0);if(!m){b.sfb_partition_table=g.nr_of_sfb_block[p][n];for(k=0;4>k;k++)b.slen[k]=e[r[k]];n=b.slen[0];k=b.slen[1];r=b.slen[2];x=b.slen[3];switch(p){case 0:b.scalefac_compress=(5*n+k<<4)+(r<<2)+x;break;case 1:b.scalefac_compress=400+(5*n+k<<2)+r;break;case 2:b.scalefac_compress=
500+3*n+k;break;default:N.err.printf("intensity stereo not implemented yet\n")}}if(!m)for(v(null!=b.sfb_partition_table),k=b.part2_length=0;4>k;k++)b.part2_length+=b.slen[k]*b.sfb_partition_table[k];return m};var e=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4];this.huffman_init=function(a){for(var c=2;576>=c;c+=2){for(var b=0,p;a.scalefac_band.l[++b]<c;);for(p=W[b][0];a.scalefac_band.l[p+1]>c;)p--;0>p&&(p=W[b][0]);a.bv_scf[c-2]=p;for(p=W[b][1];a.scalefac_band.l[p+a.bv_scf[c-2]+2]>c;)p--;0>p&&(p=W[b][1]);a.bv_scf[c-
1]=p}}}function ra(){function B(a,b,k){for(v(30>k);0<k;){var m;0==D&&(D=8,t++,v(t<I.LAME_MAXMP3BUFFER),v(a.header[a.w_ptr].write_timing>=e),a.header[a.w_ptr].write_timing==e&&(m=a,N.arraycopy(m.header[m.w_ptr].buf,0,c,t,m.sideinfo_len),t+=m.sideinfo_len,e+=8*m.sideinfo_len,m.w_ptr=m.w_ptr+1&T.MAX_HEADER_BUF-1),c[t]=0);m=Math.min(k,D);k-=m;D-=m;v(32>k);v(32>D);c[t]|=b>>k<<D;e+=m}}function l(a,c){var k=a.internal_flags,m;v(0<=c);8<=c&&(B(k,76,8),c-=8);8<=c&&(B(k,65,8),c-=8);8<=c&&(B(k,77,8),c-=8);8<=
c&&(B(k,69,8),c-=8);if(32<=c){var b=p.getLameShortVersion();if(32<=c)for(m=0;m<b.length&&8<=c;++m)c-=8,B(k,b.charAt(m),8)}for(;1<=c;--c)B(k,k.ancillary_flag,1),k.ancillary_flag^=a.disable_reservoir?0:1;v(0==c)}function q(a,c,k){for(var m=a.header[a.h_ptr].ptr;0<k;){var b=Math.min(k,8-(m&7));k-=b;v(32>k);a.header[a.h_ptr].buf[m>>3]|=c>>k<<8-(m&7)-b;m+=b}a.header[a.h_ptr].ptr=m}function M(a,c){a<<=8;for(var k=0;8>k;k++)a<<=1,c<<=1,0!=((c^a)&65536)&&(c^=32773);return c}function C(a,c){var k=u.ht[c.count1table_select+
32],m,b=0,p=c.big_values,e=c.big_values;v(2>c.count1table_select);for(m=(c.count1-c.big_values)/4;0<m;--m){var d=0,n=0,h;h=c.l3_enc[p+0];0!=h&&(n+=8,0>c.xr[e+0]&&d++,v(1>=h));h=c.l3_enc[p+1];0!=h&&(n+=4,d*=2,0>c.xr[e+1]&&d++,v(1>=h));h=c.l3_enc[p+2];0!=h&&(n+=2,d*=2,0>c.xr[e+2]&&d++,v(1>=h));h=c.l3_enc[p+3];0!=h&&(n++,d*=2,0>c.xr[e+3]&&d++,v(1>=h));p+=4;e+=4;B(a,d+k.table[n],k.hlen[n]);b+=k.hlen[n]}return b}function g(a,c,k,m,b){var p=u.ht[c],e=0;v(32>c);if(0==c)return e;for(;k<m;k+=2){var d=0,n=
0,h=p.xlen,f=p.xlen,g=0,E=b.l3_enc[k],J=b.l3_enc[k+1];0!=E&&(0>b.xr[k]&&g++,d--);15<c&&(14<E&&(n=E-15,v(n<=p.linmax),g|=n<<1,n=h,E=15),14<J&&(J-=15,v(J<=p.linmax),g<<=h,g|=J,n+=h,J=15),f=16);0!=J&&(g<<=1,0>b.xr[k+1]&&g++,d--);v(16>(E|J));E=E*f+J;n-=d;d+=p.hlen[E];v(32>=d);v(32>=n);B(a,p.table[E],d);B(a,g,n);e+=d+n}return e}function W(a,c){var k=3*a.scalefac_band.s[3];k>c.big_values&&(k=c.big_values);var b=g(a,c.table_select[0],0,k,c);return b+=g(a,c.table_select[1],k,c.big_values,c)}function h(a,
c){var k,b,p,e;k=c.big_values;v(0<=k&&576>=k);b=c.region0_count+1;v(0<=b);v(b<a.scalefac_band.l.length);p=a.scalefac_band.l[b];b+=c.region1_count+1;v(0<=b);v(b<a.scalefac_band.l.length);e=a.scalefac_band.l[b];p>k&&(p=k);e>k&&(e=k);b=g(a,c.table_select[0],0,p,c);b+=g(a,c.table_select[1],p,e,c);return b+=g(a,c.table_select[2],e,k,c)}function b(){this.total=0}function r(c,b){var k=c.internal_flags,p,d,n,h;h=k.w_ptr;n=k.h_ptr-1;-1==n&&(n=T.MAX_HEADER_BUF-1);p=k.header[n].write_timing-e;b.total=p;0<=p&&
(d=1+n-h,n<h&&(d=1+n-h+T.MAX_HEADER_BUF),p-=8*d*k.sideinfo_len);k=a.getframebits(c);p+=k;b.total+=k;b.total=0!=b.total%8?1+b.total/8:b.total/8;b.total+=t+1;0>p&&N.err.println("strange error flushing buffer ... \n");return p}var a=this,f=null,F=null,p=null,n=null;this.setModules=function(a,c,k,b){f=a;F=c;p=k;n=b};var c=null,e=0,t=0,D=0;this.getframebits=function(a){var c=a.internal_flags,k;k=0!=c.bitrate_index?u.bitrate_table[a.version][c.bitrate_index]:a.brate;v(8<=k&&640>=k);return 8*(0|72E3*(a.version+
1)*k/a.out_samplerate+c.padding)};this.CRC_writeheader=function(a,c){var k;k=M(c[2]&255,65535);k=M(c[3]&255,k);for(var b=6;b<a.sideinfo_len;b++)k=M(c[b]&255,k);c[4]=byte(k>>8);c[5]=byte(k&255)};this.flush_bitstream=function(a){var c=a.internal_flags,k,p,d=c.h_ptr-1;-1==d&&(d=T.MAX_HEADER_BUF-1);k=c.l3_side;0>(p=r(a,new b))||(l(a,p),v(c.header[d].write_timing+this.getframebits(a)==e),c.ResvSize=0,k.main_data_begin=0,c.findReplayGain&&(k=f.GetTitleGain(c.rgdata),v(NEQ(k,X.GAIN_NOT_ENOUGH_SAMPLES)),
c.RadioGain=Math.floor(10*k+.5)|0),c.findPeakSample&&(c.noclipGainChange=Math.ceil(200*Math.log10(c.PeakSample/32767))|0,0<c.noclipGainChange?EQ(a.scale,1)||EQ(a.scale,0)?c.noclipScale=Math.floor(32767/c.PeakSample*100)/100:c.noclipScale=-1:c.noclipScale=-1))};this.add_dummy_byte=function(a,b,k){a=a.internal_flags;for(var p;0<k--;){p=b;var d=8;for(v(30>d);0<d;){var n;0==D&&(D=8,t++,v(t<I.LAME_MAXMP3BUFFER),c[t]=0);n=Math.min(d,D);d-=n;D-=n;v(32>d);v(32>D);c[t]|=p>>d<<D;e+=n}for(p=0;p<T.MAX_HEADER_BUF;++p)a.header[p].write_timing+=
8}};this.format_bitstream=function(a){var c=a.internal_flags,k;k=c.l3_side;var p=this.getframebits(a);l(a,k.resvDrain_pre);var n=a.internal_flags,f,g,D;f=n.l3_side;n.header[n.h_ptr].ptr=0;Va.fill(n.header[n.h_ptr].buf,0,n.sideinfo_len,0);16E3>a.out_samplerate?q(n,4094,12):q(n,4095,12);q(n,a.version,1);q(n,1,2);q(n,a.error_protection?0:1,1);q(n,n.bitrate_index,4);q(n,n.samplerate_index,2);q(n,n.padding,1);q(n,a.extension,1);q(n,a.mode.ordinal(),2);q(n,n.mode_ext,2);q(n,a.copyright,1);q(n,a.original,
1);q(n,a.emphasis,2);a.error_protection&&q(n,0,16);if(1==a.version){v(0<=f.main_data_begin);q(n,f.main_data_begin,9);2==n.channels_out?q(n,f.private_bits,3):q(n,f.private_bits,5);for(D=0;D<n.channels_out;D++)for(g=0;4>g;g++)q(n,f.scfsi[D][g],1);for(g=0;2>g;g++)for(D=0;D<n.channels_out;D++){var t=f.tt[g][D];q(n,t.part2_3_length+t.part2_length,12);q(n,t.big_values/2,9);q(n,t.global_gain,8);q(n,t.scalefac_compress,4);t.block_type!=d.NORM_TYPE?(q(n,1,1),q(n,t.block_type,2),q(n,t.mixed_block_flag,1),14==
t.table_select[0]&&(t.table_select[0]=16),q(n,t.table_select[0],5),14==t.table_select[1]&&(t.table_select[1]=16),q(n,t.table_select[1],5),q(n,t.subblock_gain[0],3),q(n,t.subblock_gain[1],3),q(n,t.subblock_gain[2],3)):(q(n,0,1),14==t.table_select[0]&&(t.table_select[0]=16),q(n,t.table_select[0],5),14==t.table_select[1]&&(t.table_select[1]=16),q(n,t.table_select[1],5),14==t.table_select[2]&&(t.table_select[2]=16),q(n,t.table_select[2],5),v(0<=t.region0_count&&16>t.region0_count),v(0<=t.region1_count&&
8>t.region1_count),q(n,t.region0_count,4),q(n,t.region1_count,3));q(n,t.preflag,1);q(n,t.scalefac_scale,1);q(n,t.count1table_select,1)}}else for(v(0<=f.main_data_begin),q(n,f.main_data_begin,8),q(n,f.private_bits,n.channels_out),D=g=0;D<n.channels_out;D++)t=f.tt[g][D],q(n,t.part2_3_length+t.part2_length,12),q(n,t.big_values/2,9),q(n,t.global_gain,8),q(n,t.scalefac_compress,9),t.block_type!=d.NORM_TYPE?(q(n,1,1),q(n,t.block_type,2),q(n,t.mixed_block_flag,1),14==t.table_select[0]&&(t.table_select[0]=
16),q(n,t.table_select[0],5),14==t.table_select[1]&&(t.table_select[1]=16),q(n,t.table_select[1],5),q(n,t.subblock_gain[0],3),q(n,t.subblock_gain[1],3),q(n,t.subblock_gain[2],3)):(q(n,0,1),14==t.table_select[0]&&(t.table_select[0]=16),q(n,t.table_select[0],5),14==t.table_select[1]&&(t.table_select[1]=16),q(n,t.table_select[1],5),14==t.table_select[2]&&(t.table_select[2]=16),q(n,t.table_select[2],5),v(0<=t.region0_count&&16>t.region0_count),v(0<=t.region1_count&&8>t.region1_count),q(n,t.region0_count,
4),q(n,t.region1_count,3)),q(n,t.scalefac_scale,1),q(n,t.count1table_select,1);a.error_protection&&CRC_writeheader(n,n.header[n.h_ptr].buf);f=n.h_ptr;v(n.header[f].ptr==8*n.sideinfo_len);n.h_ptr=f+1&T.MAX_HEADER_BUF-1;n.header[n.h_ptr].write_timing=n.header[f].write_timing+p;n.h_ptr==n.w_ptr&&N.err.println("Error: MAX_HEADER_BUF too small in bitstream.c \n");var n=8*c.sideinfo_len,w=0,F=a.internal_flags,A=F.l3_side;if(1==a.version)for(f=0;2>f;f++)for(D=0;D<F.channels_out;D++){var E=A.tt[f][D],J=Ab.slen1_tab[E.scalefac_compress],
S=Ab.slen2_tab[E.scalefac_compress];for(g=t=0;g<E.sfbdivide;g++)-1!=E.scalefac[g]&&(B(F,E.scalefac[g],J),t+=J);for(;g<E.sfbmax;g++)-1!=E.scalefac[g]&&(B(F,E.scalefac[g],S),t+=S);v(t==E.part2_length);t=E.block_type==d.SHORT_TYPE?t+W(F,E):t+h(F,E);t+=C(F,E);v(t==E.part2_3_length+E.part2_length);w+=t}else for(D=f=0;D<F.channels_out;D++){var E=A.tt[f][D],U=0;v(null!=E.sfb_partition_table);S=g=t=0;if(E.block_type==d.SHORT_TYPE){for(;4>S;S++)for(var ma=E.sfb_partition_table[S]/3,ja=E.slen[S],J=0;J<ma;J++,
g++)B(F,Math.max(E.scalefac[3*g+0],0),ja),B(F,Math.max(E.scalefac[3*g+1],0),ja),B(F,Math.max(E.scalefac[3*g+2],0),ja),U+=3*ja;t+=W(F,E)}else{for(;4>S;S++)for(ma=E.sfb_partition_table[S],ja=E.slen[S],J=0;J<ma;J++,g++)B(F,Math.max(E.scalefac[g],0),ja),U+=ja;t+=h(F,E)}t+=C(F,E);v(t==E.part2_3_length);v(U==E.part2_length);w+=U+t}n+=w;l(a,k.resvDrain_post);n+=k.resvDrain_post;k.main_data_begin+=(p-n)/8;r(a,new b)!=c.ResvSize&&N.err.println("Internal buffer inconsistency. flushbits <> ResvSize");8*k.main_data_begin!=
c.ResvSize&&(N.err.printf("bit reservoir error: \nl3_side.main_data_begin: %d \nResvoir size:             %d \nresv drain (post)         %d \nresv drain (pre)          %d \nheader and sideinfo:      %d \ndata bits:                %d \ntotal bits:               %d (remainder: %d) \nbitsperframe:             %d \n",8*k.main_data_begin,c.ResvSize,k.resvDrain_post,k.resvDrain_pre,8*c.sideinfo_len,n-k.resvDrain_post-8*c.sideinfo_len,n,n%8,p),N.err.println("This is a fatal error.  It has several possible causes:"),
N.err.println("90%%  LAME compiled with buggy version of gcc using advanced optimizations"),N.err.println(" 9%%  Your system is overclocked"),N.err.println(" 1%%  bug in LAME encoding library"),c.ResvSize=8*k.main_data_begin);v(0==e%8);if(1E9<e){for(a=0;a<T.MAX_HEADER_BUF;++a)c.header[a].write_timing-=e;e=0}return 0};this.copy_buffer=function(a,b,k,p,e){var d=t+1;if(0>=d)return 0;if(0!=p&&d>p)return-1;N.arraycopy(c,0,b,k,d);t=-1;D=0;if(0!=e&&(p=Z(1),p[0]=a.nMusicCRC,n.updateMusicCRC(p,b,k,d),a.nMusicCRC=
p[0],0<d&&(a.VBR_seek_table.nBytesWritten+=d),a.decode_on_the_fly)){p=ya([2,1152]);e=d;for(var h=-1,g;0!=h;)if(h=F.hip_decode1_unclipped(a.hip,b,k,e,p[0],p[1]),e=0,-1==h&&(h=0),0<h){v(1152>=h);if(a.findPeakSample){for(g=0;g<h;g++)p[0][g]>a.PeakSample?a.PeakSample=p[0][g]:-p[0][g]>a.PeakSample&&(a.PeakSample=-p[0][g]);if(1<a.channels_out)for(g=0;g<h;g++)p[1][g]>a.PeakSample?a.PeakSample=p[1][g]:-p[1][g]>a.PeakSample&&(a.PeakSample=-p[1][g])}if(a.findReplayGain&&f.AnalyzeSamples(a.rgdata,p[0],0,p[1],
0,h,a.channels_out)==X.GAIN_ANALYSIS_ERROR)return-6}}return d};this.init_bit_stream_w=function(a){c=new Int8Array(I.LAME_MAXMP3BUFFER);a.h_ptr=a.w_ptr=0;a.header[a.h_ptr].write_timing=0;t=-1;e=D=0}}function Bb(){function d(a,b){var c=a[b+0]&255,c=c<<8|a[b+1]&255,c=c<<8,c=c|a[b+2]&255,c=c<<8;return c|=a[b+3]&255}function l(a,b,c){a[b+0]=c>>24&255;a[b+1]=c>>16&255;a[b+2]=c>>8&255;a[b+3]=c&255}function q(a,b,c){a[b+0]=c>>8&255;a[b+1]=c&255}function M(a,b,c){return 255&(a<<b|c&~(-1<<b))}function C(a,
b){var c=a.internal_flags;b[0]=M(b[0],8,255);b[1]=M(b[1],3,7);b[1]=M(b[1],1,16E3>a.out_samplerate?0:1);b[1]=M(b[1],1,a.version);b[1]=M(b[1],2,1);b[1]=M(b[1],1,a.error_protection?0:1);b[2]=M(b[2],4,c.bitrate_index);b[2]=M(b[2],2,c.samplerate_index);b[2]=M(b[2],1,0);b[2]=M(b[2],1,a.extension);b[3]=M(b[3],2,a.mode.ordinal());b[3]=M(b[3],2,c.mode_ext);b[3]=M(b[3],1,a.copyright);b[3]=M(b[3],1,a.original);b[3]=M(b[3],2,a.emphasis);b[0]=255;var c=b[1]&241,e;e=1==a.version?128:16E3>a.out_samplerate?32:64;
a.VBR==G.vbr_off&&(e=a.brate);e=a.free_format?0:255&16*W.BitrateIndex(e,a.version,a.out_samplerate);b[1]=1==a.version?255&(c|10):255&(c|2);c=b[2]&13;b[2]=255&(e|c)}function g(a,b){return b=b>>8^F[(b^a)&255]}var W,h,b;this.setModules=function(a,n,c){W=a;h=n;b=c};var r=Bb.NUMTOCENTRIES,a=Bb.MAXFRAMESIZE,f=r+4+4+4+4+4+9+1+1+8+1+1+3+1+1+2+4+2+2,F=[0,49345,49537,320,49921,960,640,49729,50689,1728,1920,51009,1280,50625,50305,1088,52225,3264,3456,52545,3840,53185,52865,3648,2560,51905,52097,2880,51457,2496,
2176,51265,55297,6336,6528,55617,6912,56257,55937,6720,7680,57025,57217,8E3,56577,7616,7296,56385,5120,54465,54657,5440,55041,6080,5760,54849,53761,4800,4992,54081,4352,53697,53377,4160,61441,12480,12672,61761,13056,62401,62081,12864,13824,63169,63361,14144,62721,13760,13440,62529,15360,64705,64897,15680,65281,16320,16E3,65089,64001,15040,15232,64321,14592,63937,63617,14400,10240,59585,59777,10560,60161,11200,10880,59969,60929,11968,12160,61249,11520,60865,60545,11328,58369,9408,9600,58689,9984,59329,
59009,9792,8704,58049,58241,9024,57601,8640,8320,57409,40961,24768,24960,41281,25344,41921,41601,25152,26112,42689,42881,26432,42241,26048,25728,42049,27648,44225,44417,27968,44801,28608,28288,44609,43521,27328,27520,43841,26880,43457,43137,26688,30720,47297,47489,31040,47873,31680,31360,47681,48641,32448,32640,48961,32E3,48577,48257,31808,46081,29888,30080,46401,30464,47041,46721,30272,29184,45761,45953,29504,45313,29120,28800,45121,20480,37057,37249,20800,37633,21440,21120,37441,38401,22208,22400,
38721,21760,38337,38017,21568,39937,23744,23936,40257,24320,40897,40577,24128,23040,39617,39809,23360,39169,22976,22656,38977,34817,18624,18816,35137,19200,35777,35457,19008,19968,36545,36737,20288,36097,19904,19584,35905,17408,33985,34177,17728,34561,18368,18048,34369,33281,17088,17280,33601,16640,33217,32897,16448];this.addVbrFrame=function(a){var b=a.internal_flags;a=u.bitrate_table[a.version][b.bitrate_index];v(null!=b.VBR_seek_table.bag);b=b.VBR_seek_table;b.nVbrNumFrames++;b.sum+=a;b.seen++;
if(!(b.seen<b.want)&&(b.pos<b.size&&(b.bag[b.pos]=b.sum,b.pos++,b.seen=0),b.pos==b.size)){for(a=1;a<b.size;a+=2)b.bag[a/2]=b.bag[a];b.want*=2;b.pos/=2}};this.getVbrTag=function(a){var b=new VBRTagData,c=0;b.flags=0;var e=a[c+1]>>3&1,h=a[c+2]>>2&3,f=a[c+3]>>6&3,g=a[c+2]>>4&15,g=u.bitrate_table[e][g];b.samprate=14==a[c+1]>>4?u.samplerate_table[2][h]:u.samplerate_table[e][h];h=c=0!=e?3!=f?c+36:c+21:3!=f?c+21:c+13;if(!(new String(a,h,4(),null)).equals("Xing")&&!(new String(a,h,4(),null)).equals("Info"))return null;
c+=4;b.hId=e;h=b.flags=d(a,c);c+=4;0!=(h&1)&&(b.frames=d(a,c),c+=4);0!=(h&2)&&(b.bytes=d(a,c),c+=4);if(0!=(h&4)){if(null!=b.toc)for(f=0;f<r;f++)b.toc[f]=a[c+f];c+=r}b.vbrScale=-1;0!=(h&8)&&(b.vbrScale=d(a,c),c+=4);b.headersize=72E3*(e+1)*g/b.samprate;c+=21;e=a[c+0]<<4;e+=a[c+1]>>4;g=(a[c+1]&15)<<8;g+=a[c+2]&255;if(0>e||3E3<e)e=-1;if(0>g||3E3<g)g=-1;b.encDelay=e;b.encPadding=g;return b};this.InitVbrTag=function(b){var d=b.internal_flags,c;c=1==b.version?128:16E3>b.out_samplerate?32:64;b.VBR==G.vbr_off&&
(c=b.brate);c=72E3*(b.version+1)*c/b.out_samplerate;var e=d.sideinfo_len+f;d.VBR_seek_table.TotalFrameSize=c;if(c<e||c>a)b.bWriteVbrTag=!1;else for(d.VBR_seek_table.nVbrNumFrames=0,d.VBR_seek_table.nBytesWritten=0,d.VBR_seek_table.sum=0,d.VBR_seek_table.seen=0,d.VBR_seek_table.want=1,d.VBR_seek_table.pos=0,null==d.VBR_seek_table.bag&&(d.VBR_seek_table.bag=new int[400],d.VBR_seek_table.size=400),c=new Int8Array(a),C(b,c),d=d.VBR_seek_table.TotalFrameSize,e=0;e<d;++e)h.add_dummy_byte(b,c[e]&255,1)};
this.updateMusicCRC=function(a,b,c,d){for(var h=0;h<d;++h)a[0]=g(b[c+h],a[0])};this.getLameTagFrame=function(a,d){var c=a.internal_flags;if(!a.bWriteVbrTag||c.Class_ID!=I.LAME_ID||0>=c.VBR_seek_table.pos)return 0;if(d.length<c.VBR_seek_table.TotalFrameSize)return c.VBR_seek_table.TotalFrameSize;Va.fill(d,0,c.VBR_seek_table.TotalFrameSize,0);C(a,d);var e=new Int8Array(r);if(a.free_format)for(var f=1;f<r;++f)e[f]=255&255*f/100;else{var D=c.VBR_seek_table;if(!(0>=D.pos))for(f=1;f<r;++f){var y=0|Math.floor(f/
r*D.pos);y>D.pos-1&&(y=D.pos-1);y=0|256*D.bag[y]/D.sum;255<y&&(y=255);e[f]=255&y}}y=c.sideinfo_len;a.error_protection&&(y-=2);d[y++]=0;d[y++]=0;d[y++]=0;d[y++]=0;l(d,y,15);y+=4;l(d,y,c.VBR_seek_table.nVbrNumFrames);y+=4;D=c.VBR_seek_table.nBytesWritten+c.VBR_seek_table.TotalFrameSize;l(d,y,0|D);y+=4;N.arraycopy(e,0,d,y,e.length);y+=e.length;a.error_protection&&h.CRC_writeheader(c,d);for(var z=0,f=0;f<y;f++)z=g(d[f],z);var e=y,f=z,k=a.internal_flags,y=0,z=a.encoder_delay,m=a.encoder_padding,x=100-
10*a.VBR_q-a.quality,v=b.getLameVeryShortVersion(),F;F=[1,5,3,2,4,0,3];var B=0|(255<a.lowpassfreq/100+.5?255:a.lowpassfreq/100+.5),H=0,w=0,R=a.internal_flags.noise_shaping,A=0,E=0,J=0,S=0,A=0,A=0!=(a.exp_nspsytune&1),J=0!=(a.exp_nspsytune&2),U=!1,ma=!1,ja=a.internal_flags.nogap_total,ua=a.internal_flags.nogap_current,S=a.ATHtype,u=0,M;switch(a.VBR){case vbr_abr:M=a.VBR_mean_bitrate_kbps;break;case vbr_off:M=a.brate;break;default:M=a.VBR_min_bitrate_kbps}F=0+(a.VBR.ordinal()<F.length?F[a.VBR.ordinal()]:
0);k.findReplayGain&&(510<k.RadioGain&&(k.RadioGain=510),-510>k.RadioGain&&(k.RadioGain=-510),w=11264,w=0<=k.RadioGain?w|k.RadioGain:w|512|-k.RadioGain);k.findPeakSample&&(H=Math.abs(0|k.PeakSample/32767*Math.pow(2,23)+.5));-1!=ja&&(0<ua&&(ma=!0),ua<ja-1&&(U=!0));u=S+((A?1:0)<<4)+((J?1:0)<<5)+((U?1:0)<<6)+((ma?1:0)<<7);0>x&&(x=0);switch(a.mode){case MONO:A=0;break;case STEREO:A=1;break;case DUAL_CHANNEL:A=2;break;case JOINT_STEREO:A=a.force_ms?4:3;break;default:A=7}J=32E3>=a.in_samplerate?0:48E3==
a.in_samplerate?2:48E3<a.in_samplerate?3:1;if(a.short_blocks==Ia.short_block_forced||a.short_blocks==Ia.short_block_dispensed||-1==a.lowpassfreq&&-1==a.highpassfreq||a.scale_left<a.scale_right||a.scale_left>a.scale_right||a.disable_reservoir&&320>a.brate||a.noATH||a.ATHonly||0==S||32E3>=a.in_samplerate)E=1;S=R+(A<<2)+(E<<5)+(J<<6);A=k.nMusicCRC;l(d,e+y,x);y+=4;for(k=0;9>k;k++)d[e+y+k]=255&v.charAt(k);y+=9;d[e+y]=255&F;y++;d[e+y]=255&B;y++;l(d,e+y,H);y+=4;q(d,e+y,w);y+=2;q(d,e+y,0);y+=2;d[e+y]=255&
u;y++;d[e+y]=255<=M?255:255&M;y++;d[e+y]=255&z>>4;d[e+y+1]=255&(z<<4)+(m>>8);d[e+y+2]=255&m;y+=3;d[e+y]=255&S;y++;d[e+y++]=0;q(d,e+y,a.preset);y+=2;l(d,e+y,D);y+=4;q(d,e+y,A);y+=2;for(D=0;D<y;D++)f=g(d[e+D],f);q(d,e+y,f);return c.VBR_seek_table.TotalFrameSize};this.putVbrTag=function(b,d){if(0>=b.internal_flags.VBR_seek_table.pos)return-1;d.seek(d.length());if(0==d.length())return-1;d.seek(0);var c=new Int8Array(10);d.readFully(c);c=(new String(c,"ISO-8859-1")).startsWith("ID3")?0:((c[6]&127)<<21|
(c[7]&127)<<14|(c[8]&127)<<7|c[9]&127)+c.length;d.seek(c);var c=new Int8Array(a),e=getLameTagFrame(b,c);if(e>c.length)return-1;if(1>e)return 0;d.write(c,0,e);return 0}}function fa(d,l,q,v){this.xlen=d;this.linmax=l;this.table=q;this.hlen=v}function db(d){this.bits=d}function Ic(){this.setModules=function(d,l){}}function sb(){this.bits=this.over_SSD=this.over_count=this.max_noise=this.tot_noise=this.over_noise=0}function Jc(){this.scale_right=this.scale_left=this.scale=this.out_samplerate=this.in_samplerate=
this.num_channels=this.num_samples=this.class_id=0;this.decode_only=this.bWriteVbrTag=this.analysis=!1;this.quality=0;this.mode=na.STEREO;this.write_id3tag_automatic=this.decode_on_the_fly=this.findReplayGain=this.free_format=this.force_ms=!1;this.error_protection=this.emphasis=this.extension=this.original=this.copyright=this.compression_ratio=this.brate=0;this.disable_reservoir=this.strict_ISO=!1;this.quant_comp_short=this.quant_comp=0;this.experimentalY=!1;this.preset=this.exp_nspsytune=this.experimentalZ=
0;this.VBR=null;this.maskingadjust_short=this.maskingadjust=this.highpasswidth=this.lowpasswidth=this.highpassfreq=this.lowpassfreq=this.VBR_hard_min=this.VBR_max_bitrate_kbps=this.VBR_min_bitrate_kbps=this.VBR_mean_bitrate_kbps=this.VBR_q=this.VBR_q_frac=0;this.noATH=this.ATHshort=this.ATHonly=!1;this.athaa_sensitivity=this.athaa_loudapprox=this.athaa_type=this.ATHlower=this.ATHcurve=this.ATHtype=0;this.short_blocks=null;this.useTemporal=!1;this.msfix=this.interChRatio=0;this.tune=!1;this.lame_allocated_gfp=
this.frameNum=this.framesize=this.encoder_padding=this.encoder_delay=this.version=this.tune_value_a=0;this.internal_flags=null}function Kc(){this.floor=this.decay=this.adjustLimit=this.adjust=this.aaSensitivityP=this.useAdjust=0;this.l=L(d.SBMAX_l);this.s=L(d.SBMAX_s);this.psfb21=L(d.PSFB21);this.psfb12=L(d.PSFB12);this.cb_l=L(d.CBANDS);this.cb_s=L(d.CBANDS);this.eql_w=L(d.BLKSIZE/2)}function Lc(){this.linprebuf=L(2*X.MAX_ORDER);this.linpre=0;this.lstepbuf=L(X.MAX_SAMPLES_PER_WINDOW+X.MAX_ORDER);
this.lstep=0;this.loutbuf=L(X.MAX_SAMPLES_PER_WINDOW+X.MAX_ORDER);this.lout=0;this.rinprebuf=L(2*X.MAX_ORDER);this.rinpre=0;this.rstepbuf=L(X.MAX_SAMPLES_PER_WINDOW+X.MAX_ORDER);this.rstep=0;this.routbuf=L(X.MAX_SAMPLES_PER_WINDOW+X.MAX_ORDER);this.first=this.freqindex=this.rsum=this.lsum=this.totsamp=this.sampleWindow=this.rout=0;this.A=Z(0|X.STEPS_per_dB*X.MAX_dB);this.B=Z(0|X.STEPS_per_dB*X.MAX_dB)}function Mc(B){this.quantize=B;this.iteration_loop=function(l,q,B,C){var g=l.internal_flags,u=L(Ea.SFBMAX),
h=L(576),b=Z(2),r,a,f=g.l3_side;r=new db(0);this.quantize.rv.ResvFrameBegin(l,r);r=r.bits;for(var F=0;F<g.mode_gr;F++)for(a=this.quantize.qupvt.on_pe(l,q,b,r,F,F),g.mode_ext==d.MPG_MD_MS_LR&&(this.quantize.ms_convert(g.l3_side,F),this.quantize.qupvt.reduce_side(b,B[F],r,a)),a=0;a<g.channels_out;a++){var p,n=f.tt[F][a];n.block_type!=d.SHORT_TYPE?(p=0,p=g.PSY.mask_adjust-p):(p=0,p=g.PSY.mask_adjust_short-p);g.masking_lower=Math.pow(10,.1*p);this.quantize.init_outer_loop(g,n);this.quantize.init_xrpow(g,
n,h)&&(this.quantize.qupvt.calc_xmin(l,C[F][a],n,u),this.quantize.outer_loop(l,n,u,h,a,b[a]));this.quantize.iteration_finish_one(g,F,a);v(n.part2_3_length<=T.MAX_BITS_PER_CHANNEL);v(n.part2_3_length<=b[a])}this.quantize.rv.ResvFrameEnd(g,r)}}function za(v,l,q,u){this.l=Z(1+d.SBMAX_l);this.s=Z(1+d.SBMAX_s);this.psfb21=Z(1+d.PSFB21);this.psfb12=Z(1+d.PSFB12);var C=this.l,g=this.s;4==arguments.length&&(this.arrL=arguments[0],this.arrS=arguments[1],this.arr21=arguments[2],this.arr12=arguments[3],N.arraycopy(this.arrL,
0,C,0,Math.min(this.arrL.length,this.l.length)),N.arraycopy(this.arrS,0,g,0,Math.min(this.arrS.length,this.s.length)),N.arraycopy(this.arr21,0,this.psfb21,0,Math.min(this.arr21.length,this.psfb21.length)),N.arraycopy(this.arr12,0,this.psfb12,0,Math.min(this.arr12.length,this.psfb12.length)))}function qa(){function B(a,b){var c=C.ATHformula(b,a);return c=Math.pow(10,(c-100)/10+a.ATHlower)}function l(a){this.s=a}var q=null,u=null,C=null;this.setModules=function(a,b,c){q=a;u=b;C=c};this.IPOW20=function(b){v(0<=
b&&b<qa.Q_MAX);return a[b]};var g=qa.IXMAX_VAL+2,W=qa.Q_MAX,h=qa.Q_MAX2;this.nr_of_sfb_block=[[[6,5,5,5],[9,9,9,9],[6,9,9,9]],[[6,5,7,3],[9,9,12,6],[6,9,12,6]],[[11,10,0,0],[18,18,0,0],[15,18,0,0]],[[7,7,7,0],[12,12,12,0],[6,15,12,0]],[[6,6,6,3],[12,9,9,6],[6,12,9,6]],[[8,8,5,0],[15,12,9,0],[6,18,9,0]]];var b=[0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,2,2,3,3,3,2,0];this.pretab=b;this.sfBandIndex=[new za([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,24,32,42,56,
74,100,132,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new za([0,6,12,18,24,30,36,44,54,66,80,96,114,136,162,194,232,278,332,394,464,540,576],[0,4,8,12,18,26,36,48,62,80,104,136,180,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new za([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,26,36,48,62,80,104,134,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new za([0,4,8,12,16,20,24,30,36,44,52,62,74,90,110,134,162,196,238,288,342,418,576],[0,4,8,12,16,22,30,40,52,66,84,106,
136,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new za([0,4,8,12,16,20,24,30,36,42,50,60,72,88,106,128,156,190,230,276,330,384,576],[0,4,8,12,16,22,28,38,50,64,80,100,126,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new za([0,4,8,12,16,20,24,30,36,44,54,66,82,102,126,156,194,240,296,364,448,550,576],[0,4,8,12,16,22,30,42,58,78,104,138,180,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new za([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,26,36,48,62,80,104,134,174,192],[0,
0,0,0,0,0,0],[0,0,0,0,0,0,0]),new za([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,26,36,48,62,80,104,134,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new za([0,12,24,36,48,60,72,88,108,132,160,192,232,280,336,400,476,566,568,570,572,574,576],[0,8,16,24,36,52,72,96,124,160,162,164,166,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0])];var r=L(W+h+1),a=L(W),f=L(g),F=L(g);this.adj43=F;this.iteration_init=function(b){var n=b.internal_flags,c=n.l3_side;if(0==n.iteration_init_init){n.iteration_init_init=
1;c.main_data_begin=0;for(var c=b.internal_flags.ATH.l,e=b.internal_flags.ATH.psfb21,t=b.internal_flags.ATH.s,D=b.internal_flags.ATH.psfb12,l=b.internal_flags,z=b.out_samplerate,k=0;k<d.SBMAX_l;k++){var m=l.scalefac_band.l[k],x=l.scalefac_band.l[k+1];for(c[k]=lb.MAX_VALUE;m<x;m++){var v=m*z/1152,v=B(b,v);c[k]=Math.min(c[k],v)}}for(k=0;k<d.PSFB21;k++)for(m=l.scalefac_band.psfb21[k],x=l.scalefac_band.psfb21[k+1],e[k]=lb.MAX_VALUE;m<x;m++)v=m*z/1152,v=B(b,v),e[k]=Math.min(e[k],v);for(k=0;k<d.SBMAX_s;k++){m=
l.scalefac_band.s[k];x=l.scalefac_band.s[k+1];for(t[k]=lb.MAX_VALUE;m<x;m++)v=m*z/384,v=B(b,v),t[k]=Math.min(t[k],v);t[k]*=l.scalefac_band.s[k+1]-l.scalefac_band.s[k]}for(k=0;k<d.PSFB12;k++){m=l.scalefac_band.psfb12[k];x=l.scalefac_band.psfb12[k+1];for(D[k]=lb.MAX_VALUE;m<x;m++)v=m*z/384,v=B(b,v),D[k]=Math.min(D[k],v);D[k]*=l.scalefac_band.s[13]-l.scalefac_band.s[12]}if(b.noATH){for(k=0;k<d.SBMAX_l;k++)c[k]=1E-20;for(k=0;k<d.PSFB21;k++)e[k]=1E-20;for(k=0;k<d.SBMAX_s;k++)t[k]=1E-20;for(k=0;k<d.PSFB12;k++)D[k]=
1E-20}l.ATH.floor=10*Math.log10(B(b,-1));f[0]=0;for(c=1;c<g;c++)f[c]=Math.pow(c,4/3);for(c=0;c<g-1;c++)F[c]=c+1-Math.pow(.5*(f[c]+f[c+1]),.75);F[c]=.5;for(c=0;c<W;c++)a[c]=Math.pow(2,-.1875*(c-210));for(c=0;c<=W+h;c++)r[c]=Math.pow(2,.25*(c-210-h));q.huffman_init(n);c=b.exp_nspsytune>>2&63;32<=c&&(c-=64);e=Math.pow(10,c/4/10);c=b.exp_nspsytune>>8&63;32<=c&&(c-=64);t=Math.pow(10,c/4/10);c=b.exp_nspsytune>>14&63;32<=c&&(c-=64);D=Math.pow(10,c/4/10);c=b.exp_nspsytune>>20&63;32<=c&&(c-=64);b=D*Math.pow(10,
c/4/10);for(c=0;c<d.SBMAX_l;c++)l=6>=c?e:13>=c?t:20>=c?D:b,n.nsPsy.longfact[c]=l;for(c=0;c<d.SBMAX_s;c++)l=5>=c?e:10>=c?t:11>=c?D:b,n.nsPsy.shortfact[c]=l}};this.on_pe=function(a,b,c,d,h,f){var g=a.internal_flags,l=0,k=Z(2),l=new db(l),m=u.ResvMaxBits(a,d,l,f),l=l.bits,x=l+m;x>T.MAX_BITS_PER_GRANULE&&(x=T.MAX_BITS_PER_GRANULE);for(f=a=0;f<g.channels_out;++f)c[f]=Math.min(T.MAX_BITS_PER_CHANNEL,l/g.channels_out),k[f]=0|c[f]*b[h][f]/700-c[f],k[f]>3*d/4&&(k[f]=3*d/4),0>k[f]&&(k[f]=0),k[f]+c[f]>T.MAX_BITS_PER_CHANNEL&&
(k[f]=Math.max(0,T.MAX_BITS_PER_CHANNEL-c[f])),a+=k[f];if(a>m)for(f=0;f<g.channels_out;++f)k[f]=m*k[f]/a;for(f=0;f<g.channels_out;++f)c[f]+=k[f],m-=k[f];for(f=a=0;f<g.channels_out;++f)a+=c[f];if(a>T.MAX_BITS_PER_GRANULE){for(f=b=0;f<g.channels_out;++f)c[f]*=T.MAX_BITS_PER_GRANULE,c[f]/=a,b+=c[f];v(b<=T.MAX_BITS_PER_GRANULE)}return x};this.reduce_side=function(a,b,c,d){v(d<=T.MAX_BITS_PER_GRANULE);v(a[0]+a[1]<=T.MAX_BITS_PER_GRANULE);b=.33*(.5-b)/.5;0>b&&(b=0);.5<b&&(b=.5);b=0|.5*b*(a[0]+a[1]);b>T.MAX_BITS_PER_CHANNEL-
a[0]&&(b=T.MAX_BITS_PER_CHANNEL-a[0]);0>b&&(b=0);125<=a[1]&&(125<a[1]-b?(a[0]<c&&(a[0]+=b),a[1]-=b):(a[0]+=a[1]-125,a[1]=125));b=a[0]+a[1];b>d&&(a[0]=d*a[0]/b,a[1]=d*a[1]/b);v(a[0]<=T.MAX_BITS_PER_CHANNEL);v(a[1]<=T.MAX_BITS_PER_CHANNEL);v(a[0]+a[1]<=T.MAX_BITS_PER_GRANULE)};this.athAdjust=function(a,b,c){b=ca.FAST_LOG10_X(b,10);a*=a;var d=0;b-=c;1E-20<a&&(d=1+ca.FAST_LOG10_X(a,10/90.30873362));0>d&&(d=0);b=b*d+(c+90.30873362-94.82444863);return Math.pow(10,.1*b)};this.calc_xmin=function(a,b,c,e){var f=
0,h=a.internal_flags,g,l=0,k=0,m=h.ATH,x=c.xr,r=a.VBR==G.vbr_mtrh?1:0,v=h.masking_lower;if(a.VBR==G.vbr_mtrh||a.VBR==G.vbr_mt)v=1;for(g=0;g<c.psy_lmax;g++){var q,F,w,B,A,E;F=a.VBR==G.vbr_rh||a.VBR==G.vbr_mtrh?athAdjust(m.adjust,m.l[g],m.floor):m.adjust*m.l[g];A=c.width[g];w=F/A;B=2.220446049250313E-16;E=A>>1;q=0;do{var J;J=x[l]*x[l];q+=J;B+=J<w?J:w;l++;J=x[l]*x[l];q+=J;B+=J<w?J:w;l++}while(0<--E);q>F&&k++;g==d.SBPSY_l&&(w=F*h.nsPsy.longfact[g],B<w&&(B=w));0!=r&&(F=B);a.ATHonly||(B=b.en.l[g],0<B&&
(w=q*b.thm.l[g]*v/B,0!=r&&(w*=h.nsPsy.longfact[g]),F<w&&(F=w)));0!=r?e[f++]=F:e[f++]=F*h.nsPsy.longfact[g]}q=575;if(c.block_type!=d.SHORT_TYPE)for(F=576;0!=F--&&ra.EQ(x[F],0);)q=F;c.max_nonzero_coeff=q;for(var S=c.sfb_smin;g<c.psymax;S++,g+=3){var U,C;C=a.VBR==G.vbr_rh||a.VBR==G.vbr_mtrh?athAdjust(m.adjust,m.s[S],m.floor):m.adjust*m.s[S];A=c.width[g];for(U=0;3>U;U++){q=0;E=A>>1;w=C/A;B=2.220446049250313E-16;do J=x[l]*x[l],q+=J,B+=J<w?J:w,l++,J=x[l]*x[l],q+=J,B+=J<w?J:w,l++;while(0<--E);q>C&&k++;S==
d.SBPSY_s&&(w=C*h.nsPsy.shortfact[S],B<w&&(B=w));F=0!=r?B:C;a.ATHonly||a.ATHshort||(B=b.en.s[S][U],0<B&&(w=q*b.thm.s[S][U]*v/B,0!=r&&(w*=h.nsPsy.shortfact[S]),F<w&&(F=w)));0!=r?e[f++]=F:e[f++]=F*h.nsPsy.shortfact[S]}a.useTemporal&&(e[f-3]>e[f-3+1]&&(e[f-3+1]+=(e[f-3]-e[f-3+1])*h.decay),e[f-3+1]>e[f-3+2]&&(e[f-3+2]+=(e[f-3+1]-e[f-3+2])*h.decay))}return k};this.calc_noise_core=function(a,b,c,d){var h=0,g=b.s,l=a.l3_enc;if(g>a.count1)for(;0!=c--;){var r;r=a.xr[g];g++;h+=r*r;r=a.xr[g];g++;h+=r*r}else if(g>
a.big_values){var k=L(2);k[0]=0;for(k[1]=d;0!=c--;)r=Math.abs(a.xr[g])-k[l[g]],g++,h+=r*r,r=Math.abs(a.xr[g])-k[l[g]],g++,h+=r*r}else for(;0!=c--;)r=Math.abs(a.xr[g])-f[l[g]]*d,g++,h+=r*r,r=Math.abs(a.xr[g])-f[l[g]]*d,g++,h+=r*r;b.s=g;return h};this.calc_noise=function(a,d,c,e,f){var h=0,g=0,q,k,m=0,x=0,F=0,B=-20,C=0,H=a.scalefac,w=0;for(q=e.over_SSD=0;q<a.psymax;q++){var u=a.global_gain-(H[w++]+(0!=a.preflag?b[q]:0)<<a.scalefac_scale+1)-8*a.subblock_gain[a.window[q]],A=0;null!=f&&f.step[q]==u?(A=
f.noise[q],C+=a.width[q],c[h++]=A/d[g++],A=f.noise_log[q]):(A=u,v(0<=A+qa.Q_MAX2&&A<qa.Q_MAX),A=r[A+qa.Q_MAX2],k=a.width[q]>>1,C+a.width[q]>a.max_nonzero_coeff&&(k=a.max_nonzero_coeff-C+1,k=0<k?k>>1:0),C=new l(C),A=this.calc_noise_core(a,C,k,A),C=C.s,null!=f&&(f.step[q]=u,f.noise[q]=A),A=c[h++]=A/d[g++],A=ca.FAST_LOG10(Math.max(A,1E-20)),null!=f&&(f.noise_log[q]=A));null!=f&&(f.global_gain=a.global_gain);F+=A;0<A&&(u=Math.max(0|10*A+.5,1),e.over_SSD+=u*u,m++,x+=A);B=Math.max(B,A)}e.over_count=m;e.tot_noise=
F;e.over_noise=x;e.max_noise=B;return m};this.set_pinfo=function(a,f,c,e,h){var g=a.internal_flags,l,r,k,m,x=0==f.scalefac_scale?.5:1,q=f.scalefac,F=L(Ea.SFBMAX),B=L(Ea.SFBMAX),C=new sb;calc_xmin(a,c,f,F);calc_noise(f,F,B,C,null);var w=0;r=f.sfb_lmax;f.block_type!=d.SHORT_TYPE&&0==f.mixed_block_flag&&(r=22);for(l=0;l<r;l++){var u=g.scalefac_band.l[l],A=g.scalefac_band.l[l+1],E=A-u;for(m=0;w<A;w++)m+=f.xr[w]*f.xr[w];m/=E;k=1E15;g.pinfo.en[e][h][l]=k*m;g.pinfo.xfsf[e][h][l]=k*F[l]*B[l]/E;m=0<c.en.l[l]&&
!a.ATHonly?m/c.en.l[l]:0;g.pinfo.thr[e][h][l]=k*Math.max(m*c.thm.l[l],g.ATH.l[l]);g.pinfo.LAMEsfb[e][h][l]=0;0!=f.preflag&&11<=l&&(g.pinfo.LAMEsfb[e][h][l]=-x*b[l]);l<d.SBPSY_l&&(v(0<=q[l]),g.pinfo.LAMEsfb[e][h][l]-=x*q[l])}if(f.block_type==d.SHORT_TYPE)for(r=l,l=f.sfb_smin;l<d.SBMAX_s;l++)for(var u=g.scalefac_band.s[l],A=g.scalefac_band.s[l+1],E=A-u,J=0;3>J;J++){m=0;for(k=u;k<A;k++)m+=f.xr[w]*f.xr[w],w++;m=Math.max(m/E,1E-20);k=1E15;g.pinfo.en_s[e][h][3*l+J]=k*m;g.pinfo.xfsf_s[e][h][3*l+J]=k*F[r]*
B[r]/E;m=0<c.en.s[l][J]?m/c.en.s[l][J]:0;if(a.ATHonly||a.ATHshort)m=0;g.pinfo.thr_s[e][h][3*l+J]=k*Math.max(m*c.thm.s[l][J],g.ATH.s[l]);g.pinfo.LAMEsfb_s[e][h][3*l+J]=-2*f.subblock_gain[J];l<d.SBPSY_s&&(g.pinfo.LAMEsfb_s[e][h][3*l+J]-=x*q[r]);r++}g.pinfo.LAMEqss[e][h]=f.global_gain;g.pinfo.LAMEmainbits[e][h]=f.part2_3_length+f.part2_length;g.pinfo.LAMEsfbits[e][h]=f.part2_length;g.pinfo.over[e][h]=C.over_count;g.pinfo.max_noise[e][h]=10*C.max_noise;g.pinfo.over_noise[e][h]=10*C.over_noise;g.pinfo.tot_noise[e][h]=
10*C.tot_noise;g.pinfo.over_SSD[e][h]=C.over_SSD}}function Nc(){this.sfb_count1=this.global_gain=0;this.step=Z(39);this.noise=L(39);this.noise_log=L(39)}function rb(){this.xr=L(576);this.l3_enc=Z(576);this.scalefac=Z(Ea.SFBMAX);this.mixed_block_flag=this.block_type=this.scalefac_compress=this.global_gain=this.count1=this.big_values=this.part2_3_length=this.xrpow_max=0;this.table_select=Z(3);this.subblock_gain=Z(4);this.sfbdivide=this.psymax=this.sfbmax=this.psy_lmax=this.sfb_smin=this.sfb_lmax=this.part2_length=
this.count1table_select=this.scalefac_scale=this.preflag=this.region1_count=this.region0_count=0;this.width=Z(Ea.SFBMAX);this.window=Z(Ea.SFBMAX);this.count1bits=0;this.sfb_partition_table=null;this.slen=Z(4);this.max_nonzero_coeff=0;var d=this;this.assign=function(l){d.xr=new Float32Array(l.xr);d.l3_enc=new Int32Array(l.l3_enc);d.scalefac=new Int32Array(l.scalefac);d.xrpow_max=l.xrpow_max;d.part2_3_length=l.part2_3_length;d.big_values=l.big_values;d.count1=l.count1;d.global_gain=l.global_gain;d.scalefac_compress=
l.scalefac_compress;d.block_type=l.block_type;d.mixed_block_flag=l.mixed_block_flag;d.table_select=new Int32Array(l.table_select);d.subblock_gain=new Int32Array(l.subblock_gain);d.region0_count=l.region0_count;d.region1_count=l.region1_count;d.preflag=l.preflag;d.scalefac_scale=l.scalefac_scale;d.count1table_select=l.count1table_select;d.part2_length=l.part2_length;d.sfb_lmax=l.sfb_lmax;d.sfb_smin=l.sfb_smin;d.psy_lmax=l.psy_lmax;d.sfbmax=l.sfbmax;d.psymax=l.psymax;d.sfbdivide=l.sfbdivide;d.width=
new Int32Array(l.width);d.window=new Int32Array(l.window);d.count1bits=l.count1bits;d.sfb_partition_table=l.sfb_partition_table.slice(0);d.slen=new Int32Array(l.slen);d.max_nonzero_coeff=l.max_nonzero_coeff}}function Oc(){function B(d){this.ordinal=d}function l(d){for(var b=0;b<d.sfbmax;b++)if(0==d.scalefac[b]+d.subblock_gain[d.window[b]])return!1;return!0}var q;this.rv=null;var u;this.qupvt=null;var C,g=new Ic,W;this.setModules=function(d,b,l,a){q=d;this.rv=u=b;this.qupvt=C=l;W=a;g.setModules(C,
W)};this.ms_convert=function(d,b){for(var g=0;576>g;++g){var a=d.tt[b][0].xr[g],f=d.tt[b][1].xr[g];d.tt[b][0].xr[g]=.5*(a+f)*ca.SQRT2;d.tt[b][1].xr[g]=.5*(a-f)*ca.SQRT2}};this.init_xrpow=function(d,b,g){var a=0,f=0|b.max_nonzero_coeff;v(null!=g);b.xrpow_max=0;v(0<=f&&575>=f);Va.fill(g,f,576,0);for(var l=a=0;l<=f;++l){var p=Math.abs(b.xr[l]),a=a+p;g[l]=Math.sqrt(p*Math.sqrt(p));g[l]>b.xrpow_max&&(b.xrpow_max=g[l])}if(1E-20<a){g=0;0!=(d.substep_shaping&2)&&(g=1);for(f=0;f<b.psymax;f++)d.pseudohalf[f]=
g;return!0}Va.fill(b.l3_enc,0,576,0);return!1};this.init_outer_loop=function(h,b){b.part2_3_length=0;b.big_values=0;b.count1=0;b.global_gain=210;b.scalefac_compress=0;b.table_select[0]=0;b.table_select[1]=0;b.table_select[2]=0;b.subblock_gain[0]=0;b.subblock_gain[1]=0;b.subblock_gain[2]=0;b.subblock_gain[3]=0;b.region0_count=0;b.region1_count=0;b.preflag=0;b.scalefac_scale=0;b.count1table_select=0;b.part2_length=0;b.sfb_lmax=d.SBPSY_l;b.sfb_smin=d.SBPSY_s;b.psy_lmax=h.sfb21_extra?d.SBMAX_l:d.SBPSY_l;
b.psymax=b.psy_lmax;b.sfbmax=b.sfb_lmax;b.sfbdivide=11;for(var g=0;g<d.SBMAX_l;g++)b.width[g]=h.scalefac_band.l[g+1]-h.scalefac_band.l[g],b.window[g]=3;if(b.block_type==d.SHORT_TYPE){var a=L(576);b.sfb_smin=0;b.sfb_lmax=0;0!=b.mixed_block_flag&&(b.sfb_smin=3,b.sfb_lmax=2*h.mode_gr+4);b.psymax=b.sfb_lmax+3*((h.sfb21_extra?d.SBMAX_s:d.SBPSY_s)-b.sfb_smin);b.sfbmax=b.sfb_lmax+3*(d.SBPSY_s-b.sfb_smin);b.sfbdivide=b.sfbmax-18;b.psy_lmax=b.sfb_lmax;var f=h.scalefac_band.l[b.sfb_lmax];N.arraycopy(b.xr,0,
a,0,576);for(g=b.sfb_smin;g<d.SBMAX_s;g++)for(var l=h.scalefac_band.s[g],p=h.scalefac_band.s[g+1],n=0;3>n;n++)for(var c=l;c<p;c++)b.xr[f++]=a[3*c+n];a=b.sfb_lmax;for(g=b.sfb_smin;g<d.SBMAX_s;g++)b.width[a]=b.width[a+1]=b.width[a+2]=h.scalefac_band.s[g+1]-h.scalefac_band.s[g],b.window[a]=0,b.window[a+1]=1,b.window[a+2]=2,a+=3}b.count1bits=0;b.sfb_partition_table=C.nr_of_sfb_block[0][0];b.slen[0]=0;b.slen[1]=0;b.slen[2]=0;b.slen[3]=0;b.max_nonzero_coeff=575;Va.fill(b.scalefac,0);g=h.ATH;a=b.xr;if(b.block_type!=
d.SHORT_TYPE)for(f=!1,l=d.PSFB21-1;0<=l&&!f;l--)for(p=h.scalefac_band.psfb21[l],n=h.scalefac_band.psfb21[l+1],c=C.athAdjust(g.adjust,g.psfb21[l],g.floor),1E-12<h.nsPsy.longfact[21]&&(c*=h.nsPsy.longfact[21]),--n;n>=p;n--)if(Math.abs(a[n])<c)a[n]=0;else{f=!0;break}else for(c=0;3>c;c++)for(f=!1,l=d.PSFB12-1;0<=l&&!f;l--){var p=3*h.scalefac_band.s[12]+(h.scalefac_band.s[13]-h.scalefac_band.s[12])*c+(h.scalefac_band.psfb12[l]-h.scalefac_band.psfb12[0]),n=p+(h.scalefac_band.psfb12[l+1]-h.scalefac_band.psfb12[l]),
e=C.athAdjust(g.adjust,g.psfb12[l],g.floor);1E-12<h.nsPsy.shortfact[12]&&(e*=h.nsPsy.shortfact[12]);for(--n;n>=p;n--)if(Math.abs(a[n])<e)a[n]=0;else{f=!0;break}}};B.BINSEARCH_NONE=new B(0);B.BINSEARCH_UP=new B(1);B.BINSEARCH_DOWN=new B(2);this.trancate_smallspectrums=function(h,b,g,a){var f=L(Ea.SFBMAX);if((0!=(h.substep_shaping&4)||b.block_type!=d.SHORT_TYPE)&&0==(h.substep_shaping&128)){C.calc_noise(b,g,f,new sb,null);for(var l=0;576>l;l++){var p=0;0!=b.l3_enc[l]&&(p=Math.abs(b.xr[l]));a[l]=p}l=
0;p=8;b.block_type==d.SHORT_TYPE&&(p=6);do{var n,c,e,t,q=b.width[p],l=l+q;if(!(1<=f[p]||(Va.sort(a,l-q,q),ra.EQ(a[l-1],0)))){n=(1-f[p])*g[p];t=c=0;do{var v;for(e=1;t+e<q&&!ra.NEQ(a[t+l-q],a[t+l+e-q]);e++);v=a[t+l-q]*a[t+l-q]*e;if(n<v){0!=t&&(c=a[t+l-q-1]);break}n-=v;t+=e}while(t<q);if(!ra.EQ(c,0)){do Math.abs(b.xr[l-q])<=c&&(b.l3_enc[l-q]=0);while(0<--q)}}}while(++p<b.psymax);b.part2_3_length=W.noquant_count_bits(h,b,null)}};this.outer_loop=function(h,b,g,a,f,q){var p=h.internal_flags,n=new rb,c=
L(576),e=L(Ea.SFBMAX),t=new sb,D,y=new Nc,z=9999999,k=!1,m=!1,x=0,Y,u,M=p.CurrentStep[f],H=!1,w=p.OldValue[f];D=B.BINSEARCH_NONE;b.global_gain=w;Y=q-b.part2_length;for(v(0!=M);;){u=W.count_bits(p,a,b,null);if(1==M||u==Y)break;u>Y?(D==B.BINSEARCH_DOWN&&(H=!0),H&&(M/=2),D=B.BINSEARCH_UP,u=M):(D==B.BINSEARCH_UP&&(H=!0),H&&(M/=2),D=B.BINSEARCH_DOWN,u=-M);b.global_gain+=u;0>b.global_gain&&(b.global_gain=0,H=!0);255<b.global_gain&&(b.global_gain=255,H=!0)}v(0<=b.global_gain);for(v(256>b.global_gain);u>
Y&&255>b.global_gain;)b.global_gain++,u=W.count_bits(p,a,b,null);p.CurrentStep[f]=4<=w-b.global_gain?4:2;p.OldValue[f]=b.global_gain;b.part2_3_length=u;if(0==p.noise_shaping)return 100;C.calc_noise(b,g,e,t,y);t.bits=b.part2_3_length;n.assign(b);f=0;for(N.arraycopy(a,0,c,0,576);!k;){do{Y=new sb;H=255;M=0!=(p.substep_shaping&2)?20:3;if(p.sfb21_extra){if(1<e[n.sfbmax])break;if(n.block_type==d.SHORT_TYPE&&(1<e[n.sfbmax+1]||1<e[n.sfbmax+2]))break}w=n;u=a;D=h.internal_flags;for(var R=w,A=e,E=u,J=h.internal_flags,
S=void 0,S=0==R.scalefac_scale?1.2968395546510096:1.6817928305074292,U=0,ma=0;ma<R.sfbmax;ma++)U<A[ma]&&(U=A[ma]);ma=J.noise_shaping_amp;3==ma&&(ma=m?2:1);switch(ma){case 2:break;case 1:U=1<U?Math.pow(U,.5):.95*U;break;default:U=1<U?1:.95*U}for(var ja=0,ma=0;ma<R.sfbmax;ma++){var ua=R.width[ma],ja=ja+ua;if(!(A[ma]<U)){if(0!=(J.substep_shaping&2)&&(J.pseudohalf[ma]=0==J.pseudohalf[ma]?1:0,0==J.pseudohalf[ma]&&2==J.noise_shaping_amp))break;R.scalefac[ma]++;for(ua=-ua;0>ua;ua++)E[ja+ua]*=S,E[ja+ua]>
R.xrpow_max&&(R.xrpow_max=E[ja+ua]);if(2==J.noise_shaping_amp)break}}if(R=l(w))w=!1;else if(R=2==D.mode_gr?W.scale_bitcount(w):W.scale_bitcount_lsf(D,w)){if(1<D.noise_shaping)if(Va.fill(D.pseudohalf,0),0==w.scalefac_scale){R=w;for(E=A=0;E<R.sfbmax;E++){S=R.width[E];J=R.scalefac[E];0!=R.preflag&&(J+=C.pretab[E]);A+=S;if(0!=(J&1))for(J++,S=-S;0>S;S++)u[A+S]*=1.2968395546510096,u[A+S]>R.xrpow_max&&(R.xrpow_max=u[A+S]);R.scalefac[E]=J>>1}R.preflag=0;R.scalefac_scale=1;R=!1}else if(w.block_type==d.SHORT_TYPE&&
0<D.subblock_gain){b:{R=D;A=w;E=void 0;J=A.scalefac;for(E=0;E<A.sfb_lmax;E++)if(16<=J[E]){u=!0;break b}for(S=0;3>S;S++){ma=U=0;for(E=A.sfb_lmax+S;E<A.sfbdivide;E+=3)U<J[E]&&(U=J[E]);for(;E<A.sfbmax;E+=3)ma<J[E]&&(ma=J[E]);if(!(16>U&&8>ma)){if(7<=A.subblock_gain[S]){u=!0;break b}A.subblock_gain[S]++;U=R.scalefac_band.l[A.sfb_lmax];for(E=A.sfb_lmax+S;E<A.sfbmax;E+=3)if(ma=A.width[E],ja=J[E],v(0<=ja),ja-=4>>A.scalefac_scale,0<=ja)J[E]=ja,U+=3*ma;else{J[E]=0;ja=C.IPOW20(210+(ja<<A.scalefac_scale+1));
U+=ma*(S+1);for(ua=-ma;0>ua;ua++)u[U+ua]*=ja,u[U+ua]>A.xrpow_max&&(A.xrpow_max=u[U+ua]);U+=ma*(3-S-1)}ja=C.IPOW20(202);U+=A.width[E]*(S+1);for(ua=-A.width[E];0>ua;ua++)u[U+ua]*=ja,u[U+ua]>A.xrpow_max&&(A.xrpow_max=u[U+ua])}}u=!1}R=u||l(w)}R||(R=2==D.mode_gr?W.scale_bitcount(w):W.scale_bitcount_lsf(D,w));w=!R}else w=!0;if(!w)break;0!=n.scalefac_scale&&(H=254);w=q-n.part2_length;if(0>=w)break;for(;(n.part2_3_length=W.count_bits(p,a,n,y))>w&&n.global_gain<=H;)n.global_gain++;if(n.global_gain>H)break;
if(0==t.over_count){for(;(n.part2_3_length=W.count_bits(p,a,n,y))>z&&n.global_gain<=H;)n.global_gain++;if(n.global_gain>H)break}C.calc_noise(n,g,e,Y,y);Y.bits=n.part2_3_length;D=b.block_type!=d.SHORT_TYPE?h.quant_comp:h.quant_comp_short;H=t;w=Y;R=n;u=e;A=void 0;switch(D){default:case 9:0<H.over_count?(A=w.over_SSD<=H.over_SSD,w.over_SSD==H.over_SSD&&(A=w.bits<H.bits)):A=0>w.max_noise&&10*w.max_noise+w.bits<=10*H.max_noise+H.bits;break;case 0:A=w.over_count<H.over_count||w.over_count==H.over_count&&
w.over_noise<H.over_noise||w.over_count==H.over_count&&ra.EQ(w.over_noise,H.over_noise)&&w.tot_noise<H.tot_noise;break;case 8:D=w;E=1E-37;for(A=0;A<R.psymax;A++)J=u[A],J=ca.FAST_LOG10(.368+.632*J*J*J),E+=J;u=Math.max(1E-20,E);D.max_noise=u;case 1:A=w.max_noise<H.max_noise;break;case 2:A=w.tot_noise<H.tot_noise;break;case 3:A=w.tot_noise<H.tot_noise&&w.max_noise<H.max_noise;break;case 4:A=0>=w.max_noise&&.2<H.max_noise||0>=w.max_noise&&0>H.max_noise&&H.max_noise>w.max_noise-.2&&w.tot_noise<H.tot_noise||
0>=w.max_noise&&0<H.max_noise&&H.max_noise>w.max_noise-.2&&w.tot_noise<H.tot_noise+H.over_noise||0<w.max_noise&&-.05<H.max_noise&&H.max_noise>w.max_noise-.1&&w.tot_noise+w.over_noise<H.tot_noise+H.over_noise||0<w.max_noise&&-.1<H.max_noise&&H.max_noise>w.max_noise-.15&&w.tot_noise+w.over_noise+w.over_noise<H.tot_noise+H.over_noise+H.over_noise;break;case 5:A=w.over_noise<H.over_noise||ra.EQ(w.over_noise,H.over_noise)&&w.tot_noise<H.tot_noise;break;case 6:A=w.over_noise<H.over_noise||ra.EQ(w.over_noise,
H.over_noise)&&(w.max_noise<H.max_noise||ra.EQ(w.max_noise,H.max_noise)&&w.tot_noise<=H.tot_noise);break;case 7:A=w.over_count<H.over_count||w.over_noise<H.over_noise}0==H.over_count&&(A=A&&w.bits<H.bits);D=A?1:0;if(0!=D)z=b.part2_3_length,t=Y,b.assign(n),f=0,N.arraycopy(a,0,c,0,576);else if(0==p.full_outer_loop){if(++f>M&&0==t.over_count)break;if(3==p.noise_shaping_amp&&m&&30<f)break;if(3==p.noise_shaping_amp&&m&&15<n.global_gain-x)break}}while(255>n.global_gain+n.scalefac_scale);3==p.noise_shaping_amp?
m?k=!0:(n.assign(b),N.arraycopy(c,0,a,0,576),f=0,x=n.global_gain,m=!0):k=!0}v(255>=b.global_gain+b.scalefac_scale);h.VBR==G.vbr_rh||h.VBR==G.vbr_mtrh?N.arraycopy(c,0,a,0,576):0!=(p.substep_shaping&1)&&trancate_smallspectrums(p,b,g,a);return t.over_count};this.iteration_finish_one=function(d,b,g){var a=d.l3_side,f=a.tt[b][g];W.best_scalefac_store(d,b,g,a);1==d.use_best_huffman&&W.best_huffman_divide(d,f);u.ResvAdjust(d,f)};this.VBR_encode_granule=function(d,b,g,a,f,l,p){var n=d.internal_flags,c=new rb,
e=L(576),t=p,q=p+1,q=(p+l)/2,y,u=0,k=n.sfb21_extra;v(t<=T.MAX_BITS_PER_CHANNEL);Va.fill(c.l3_enc,0);do v(q>=l),v(q<=p),v(l<=p),n.sfb21_extra=q>t-42?!1:k,y=outer_loop(d,b,g,a,f,q),0>=y?(u=1,q=b.part2_3_length,c.assign(b),N.arraycopy(a,0,e,0,576),p=q-32,y=p-l,q=(p+l)/2):(l=q+32,y=p-l,q=(p+l)/2,0!=u&&(u=2,b.assign(c),N.arraycopy(e,0,a,0,576)));while(12<y);n.sfb21_extra=k;2==u&&N.arraycopy(c.l3_enc,0,b.l3_enc,0,576);v(b.part2_3_length<=t)};this.get_framebits=function(d,b){var g=d.internal_flags;g.bitrate_index=
g.VBR_min_bitrate;var a=q.getframebits(d);g.bitrate_index=1;for(var a=q.getframebits(d),f=1;f<=g.VBR_max_bitrate;f++)g.bitrate_index=f,a=new db(a),b[f]=u.ResvFrameBegin(d,a),a=a.bits};this.VBR_old_prepare=function(g,b,l,a,f,q,p,n,c){var e=g.internal_flags,t;t=0;var v=1,y=0;e.bitrate_index=e.VBR_max_bitrate;var B=u.ResvFrameBegin(g,new db(0))/e.mode_gr;get_framebits(g,q);for(var k=0;k<e.mode_gr;k++){var m=C.on_pe(g,b,n[k],B,k,0);e.mode_ext==d.MPG_MD_MS_LR&&(ms_convert(e.l3_side,k),C.reduce_side(n[k],
l[k],B,m));for(m=0;m<e.channels_out;++m){var x=e.l3_side.tt[k][m];x.block_type!=d.SHORT_TYPE?(t=1.28/(1+Math.exp(3.5-b[k][m]/300))-.05,t=e.PSY.mask_adjust-t):(t=2.56/(1+Math.exp(3.5-b[k][m]/300))-.14,t=e.PSY.mask_adjust_short-t);e.masking_lower=Math.pow(10,.1*t);init_outer_loop(e,x);c[k][m]=C.calc_xmin(g,a[k][m],x,f[k][m]);0!=c[k][m]&&(v=0);p[k][m]=126;y+=n[k][m]}}for(k=0;k<e.mode_gr;k++)for(m=0;m<e.channels_out;m++)y>q[e.VBR_max_bitrate]&&(n[k][m]*=q[e.VBR_max_bitrate],n[k][m]/=y),p[k][m]>n[k][m]&&
(p[k][m]=n[k][m]);return v};this.bitpressure_strategy=function(g,b,l,a){for(var f=0;f<g.mode_gr;f++)for(var q=0;q<g.channels_out;q++){for(var p=g.l3_side.tt[f][q],n=b[f][q],c=0,e=0;e<p.psy_lmax;e++)n[c++]*=1+.029*e*e/d.SBMAX_l/d.SBMAX_l;if(p.block_type==d.SHORT_TYPE)for(e=p.sfb_smin;e<d.SBMAX_s;e++)n[c++]*=1+.029*e*e/d.SBMAX_s/d.SBMAX_s,n[c++]*=1+.029*e*e/d.SBMAX_s/d.SBMAX_s,n[c++]*=1+.029*e*e/d.SBMAX_s/d.SBMAX_s;a[f][q]=0|Math.max(l[f][q],.9*a[f][q])}};this.VBR_new_prepare=function(g,b,l,a,f,q){var p=
g.internal_flags,n=1,c=0,e=0,t;g.free_format?(p.bitrate_index=0,c=new db(c),t=u.ResvFrameBegin(g,c),c=c.bits,f[0]=t):(p.bitrate_index=p.VBR_max_bitrate,c=new db(c),u.ResvFrameBegin(g,c),c=c.bits,get_framebits(g,f),t=f[p.VBR_max_bitrate]);for(f=0;f<p.mode_gr;f++){C.on_pe(g,b,q[f],c,f,0);p.mode_ext==d.MPG_MD_MS_LR&&ms_convert(p.l3_side,f);for(var v=0;v<p.channels_out;++v){var y=p.l3_side.tt[f][v];p.masking_lower=Math.pow(10,.1*p.PSY.mask_adjust);init_outer_loop(p,y);0!=C.calc_xmin(g,l[f][v],y,a[f][v])&&
(n=0);e+=q[f][v]}}for(f=0;f<p.mode_gr;f++)for(v=0;v<p.channels_out;v++)e>t&&(q[f][v]*=t,q[f][v]/=e);return n};this.calc_target_bits=function(g,b,l,a,f,v){var p=g.internal_flags,n=p.l3_side,c,e;p.bitrate_index=p.VBR_max_bitrate;e=new db(0);v[0]=u.ResvFrameBegin(g,e);p.bitrate_index=1;e=q.getframebits(g)-8*p.sideinfo_len;f[0]=e/(p.mode_gr*p.channels_out);e=g.VBR_mean_bitrate_kbps*g.framesize*1E3;0!=(p.substep_shaping&1)&&(e*=1.09);e/=g.out_samplerate;e-=8*p.sideinfo_len;e/=p.mode_gr*p.channels_out;
c=.93+.07*(11-g.compression_ratio)/5.5;.9>c&&(c=.9);1<c&&(c=1);for(g=0;g<p.mode_gr;g++){var t=0;for(f=0;f<p.channels_out;f++){a[g][f]=int(c*e);if(700<b[g][f]){var B=int((b[g][f]-700)/1.4),y=n.tt[g][f];a[g][f]=int(c*e);y.block_type==d.SHORT_TYPE&&B<e/2&&(B=e/2);B>3*e/2?B=3*e/2:0>B&&(B=0);a[g][f]+=B}a[g][f]>T.MAX_BITS_PER_CHANNEL&&(a[g][f]=T.MAX_BITS_PER_CHANNEL);t+=a[g][f]}if(t>T.MAX_BITS_PER_GRANULE)for(f=0;f<p.channels_out;++f)a[g][f]*=T.MAX_BITS_PER_GRANULE,a[g][f]/=t}if(p.mode_ext==d.MPG_MD_MS_LR)for(g=
0;g<p.mode_gr;g++)C.reduce_side(a[g],l[g],e*p.channels_out,T.MAX_BITS_PER_GRANULE);for(g=b=0;g<p.mode_gr;g++)for(f=0;f<p.channels_out;f++)a[g][f]>T.MAX_BITS_PER_CHANNEL&&(a[g][f]=T.MAX_BITS_PER_CHANNEL),b+=a[g][f];if(b>v[0])for(g=0;g<p.mode_gr;g++)for(f=0;f<p.channels_out;f++)a[g][f]*=v[0],a[g][f]/=b}}function Qa(){this.thm=new Wb;this.en=new Wb}function Pc(){function v(b,d,a){for(var g=10,h=d+238-14-286,p=-15;0>p;p++){var n,c,e;n=l[g+-10];c=b[h+-224]*n;e=b[d+224]*n;n=l[g+-9];c+=b[h+-160]*n;e+=b[d+
160]*n;n=l[g+-8];c+=b[h+-96]*n;e+=b[d+96]*n;n=l[g+-7];c+=b[h+-32]*n;e+=b[d+32]*n;n=l[g+-6];c+=b[h+32]*n;e+=b[d+-32]*n;n=l[g+-5];c+=b[h+96]*n;e+=b[d+-96]*n;n=l[g+-4];c+=b[h+160]*n;e+=b[d+-160]*n;n=l[g+-3];c+=b[h+224]*n;e+=b[d+-224]*n;n=l[g+-2];c+=b[d+-256]*n;e-=b[h+256]*n;n=l[g+-1];c+=b[d+-192]*n;e-=b[h+192]*n;n=l[g+0];c+=b[d+-128]*n;e-=b[h+128]*n;n=l[g+1];c+=b[d+-64]*n;e-=b[h+64]*n;n=l[g+2];c+=b[d+0]*n;e-=b[h+0]*n;n=l[g+3];c+=b[d+64]*n;e-=b[h+-64]*n;n=l[g+4];c+=b[d+128]*n;e-=b[h+-128]*n;n=l[g+5];
c+=b[d+192]*n;e-=b[h+-192]*n;c*=l[g+6];n=e-c;a[30+2*p]=e+c;a[31+2*p]=l[g+7]*n;g+=18;d--;h++}e=b[d+-16]*l[g+-10];c=b[d+-32]*l[g+-2];e+=(b[d+-48]-b[d+16])*l[g+-9];c+=b[d+-96]*l[g+-1];e+=(b[d+-80]+b[d+48])*l[g+-8];c+=b[d+-160]*l[g+0];e+=(b[d+-112]-b[d+80])*l[g+-7];c+=b[d+-224]*l[g+1];e+=(b[d+-144]+b[d+112])*l[g+-6];c-=b[d+32]*l[g+2];e+=(b[d+-176]-b[d+144])*l[g+-5];c-=b[d+96]*l[g+3];e+=(b[d+-208]+b[d+176])*l[g+-4];c-=b[d+160]*l[g+4];e+=(b[d+-240]-b[d+208])*l[g+-3];c-=b[d+224];b=c-e;d=c+e;e=a[14];c=a[15]-
e;a[31]=d+e;a[30]=b+c;a[15]=b-c;a[14]=d-e;c=a[28]-a[0];a[0]+=a[28];a[28]=c*l[g+-36+7];c=a[29]-a[1];a[1]+=a[29];a[29]=c*l[g+-36+7];c=a[26]-a[2];a[2]+=a[26];a[26]=c*l[g+-72+7];c=a[27]-a[3];a[3]+=a[27];a[27]=c*l[g+-72+7];c=a[24]-a[4];a[4]+=a[24];a[24]=c*l[g+-108+7];c=a[25]-a[5];a[5]+=a[25];a[25]=c*l[g+-108+7];c=a[22]-a[6];a[6]+=a[22];a[22]=c*ca.SQRT2;c=a[23]-a[7];a[7]+=a[23];a[23]=c*ca.SQRT2-a[7];a[7]-=a[6];a[22]-=a[7];a[23]-=a[22];c=a[6];a[6]=a[31]-c;a[31]+=c;c=a[7];a[7]=a[30]-c;a[30]+=c;c=a[22];a[22]=
a[15]-c;a[15]+=c;c=a[23];a[23]=a[14]-c;a[14]+=c;c=a[20]-a[8];a[8]+=a[20];a[20]=c*l[g+-180+7];c=a[21]-a[9];a[9]+=a[21];a[21]=c*l[g+-180+7];c=a[18]-a[10];a[10]+=a[18];a[18]=c*l[g+-216+7];c=a[19]-a[11];a[11]+=a[19];a[19]=c*l[g+-216+7];c=a[16]-a[12];a[12]+=a[16];a[16]=c*l[g+-252+7];c=a[17]-a[13];a[13]+=a[17];a[17]=c*l[g+-252+7];c=-a[20]+a[24];a[20]+=a[24];a[24]=c*l[g+-216+7];c=-a[21]+a[25];a[21]+=a[25];a[25]=c*l[g+-216+7];c=a[4]-a[8];a[4]+=a[8];a[8]=c*l[g+-216+7];c=a[5]-a[9];a[5]+=a[9];a[9]=c*l[g+-216+
7];c=a[0]-a[12];a[0]+=a[12];a[12]=c*l[g+-72+7];c=a[1]-a[13];a[1]+=a[13];a[13]=c*l[g+-72+7];c=a[16]-a[28];a[16]+=a[28];a[28]=c*l[g+-72+7];c=-a[17]+a[29];a[17]+=a[29];a[29]=c*l[g+-72+7];c=ca.SQRT2*(a[2]-a[10]);a[2]+=a[10];a[10]=c;c=ca.SQRT2*(a[3]-a[11]);a[3]+=a[11];a[11]=c;c=ca.SQRT2*(-a[18]+a[26]);a[18]+=a[26];a[26]=c-a[18];c=ca.SQRT2*(-a[19]+a[27]);a[19]+=a[27];a[27]=c-a[19];c=a[2];a[19]-=a[3];a[3]-=c;a[2]=a[31]-c;a[31]+=c;c=a[3];a[11]-=a[19];a[18]-=c;a[3]=a[30]-c;a[30]+=c;c=a[18];a[27]-=a[11];a[19]-=
c;a[18]=a[15]-c;a[15]+=c;c=a[19];a[10]-=c;a[19]=a[14]-c;a[14]+=c;c=a[10];a[11]-=c;a[10]=a[23]-c;a[23]+=c;c=a[11];a[26]-=c;a[11]=a[22]-c;a[22]+=c;c=a[26];a[27]-=c;a[26]=a[7]-c;a[7]+=c;c=a[27];a[27]=a[6]-c;a[6]+=c;c=ca.SQRT2*(a[0]-a[4]);a[0]+=a[4];a[4]=c;c=ca.SQRT2*(a[1]-a[5]);a[1]+=a[5];a[5]=c;c=ca.SQRT2*(a[16]-a[20]);a[16]+=a[20];a[20]=c;c=ca.SQRT2*(a[17]-a[21]);a[17]+=a[21];a[21]=c;c=-ca.SQRT2*(a[8]-a[12]);a[8]+=a[12];a[12]=c-a[8];c=-ca.SQRT2*(a[9]-a[13]);a[9]+=a[13];a[13]=c-a[9];c=-ca.SQRT2*(a[25]-
a[29]);a[25]+=a[29];a[29]=c-a[25];c=-ca.SQRT2*(a[24]+a[28]);a[24]-=a[28];a[28]=c-a[24];c=a[24]-a[16];a[24]=c;c=a[20]-c;a[20]=c;c=a[28]-c;a[28]=c;c=a[25]-a[17];a[25]=c;c=a[21]-c;a[21]=c;c=a[29]-c;a[29]=c;c=a[17]-a[1];a[17]=c;c=a[9]-c;a[9]=c;c=a[25]-c;a[25]=c;c=a[5]-c;a[5]=c;c=a[21]-c;a[21]=c;c=a[13]-c;a[13]=c;c=a[29]-c;a[29]=c;c=a[1]-a[0];a[1]=c;c=a[16]-c;a[16]=c;c=a[17]-c;a[17]=c;c=a[8]-c;a[8]=c;c=a[9]-c;a[9]=c;c=a[24]-c;a[24]=c;c=a[25]-c;a[25]=c;c=a[4]-c;a[4]=c;c=a[5]-c;a[5]=c;c=a[20]-c;a[20]=c;
c=a[21]-c;a[21]=c;c=a[12]-c;a[12]=c;c=a[13]-c;a[13]=c;c=a[28]-c;a[28]=c;c=a[29]-c;a[29]=c;c=a[0];a[0]+=a[31];a[31]-=c;c=a[1];a[1]+=a[30];a[30]-=c;c=a[16];a[16]+=a[15];a[15]-=c;c=a[17];a[17]+=a[14];a[14]-=c;c=a[8];a[8]+=a[23];a[23]-=c;c=a[9];a[9]+=a[22];a[22]-=c;c=a[24];a[24]+=a[7];a[7]-=c;c=a[25];a[25]+=a[6];a[6]-=c;c=a[4];a[4]+=a[27];a[27]-=c;c=a[5];a[5]+=a[26];a[26]-=c;c=a[20];a[20]+=a[11];a[11]-=c;c=a[21];a[21]+=a[10];a[10]-=c;c=a[12];a[12]+=a[19];a[19]-=c;c=a[13];a[13]+=a[18];a[18]-=c;c=a[28];
a[28]+=a[3];a[3]-=c;c=a[29];a[29]+=a[2];a[2]-=c}var l=[-.1482523854003001,32.308141959636465,296.40344946382766,883.1344870032432,11113.947376231741,1057.2713659324597,305.7402417275812,30.825928907280012,3.8533188138216365,59.42900443849514,709.5899960123345,5281.91112291017,-5829.66483675846,-817.6293103748613,-76.91656988279972,-4.594269939176596,.9063471690191471,.1960342806591213,-.15466694054279598,34.324387823855965,301.8067566458425,817.599602898885,11573.795901679885,1181.2520595540152,321.59731579894424,
31.232021761053772,3.7107095756221318,53.650946155329365,684.167428119626,5224.56624370173,-6366.391851890084,-908.9766368219582,-89.83068876699639,-5.411397422890401,.8206787908286602,.3901806440322567,-.16070888947830023,36.147034243915876,304.11815768187864,732.7429163887613,11989.60988270091,1300.012278487897,335.28490093152146,31.48816102859945,3.373875931311736,47.232241542899175,652.7371796173471,5132.414255594984,-6909.087078780055,-1001.9990371107289,-103.62185754286375,-6.104916304710272,
.7416505462720353,.5805693545089249,-.16636367662261495,37.751650073343995,303.01103387567713,627.9747488785183,12358.763425278165,1412.2779918482834,346.7496836825721,31.598286663170416,3.1598635433980946,40.57878626349686,616.1671130880391,5007.833007176154,-7454.040671756168,-1095.7960341867115,-118.24411666465777,-6.818469345853504,.6681786379192989,.7653668647301797,-.1716176790982088,39.11551877123304,298.3413246578966,503.5259106886539,12679.589408408976,1516.5821921214542,355.9850766329023,
31.395241710249053,2.9164211881972335,33.79716964664243,574.8943997801362,4853.234992253242,-7997.57021486075,-1189.7624067269965,-133.6444792601766,-7.7202770609839915,.5993769336819237,.9427934736519954,-.17645823955292173,40.21879108166477,289.9982036694474,359.3226160751053,12950.259102786438,1612.1013903507662,362.85067106591504,31.045922092242872,2.822222032597987,26.988862316190684,529.8996541764288,4671.371946949588,-8535.899136645805,-1282.5898586244496,-149.58553632943463,-8.643494270763135,
.5345111359507916,1.111140466039205,-.36174739330527045,41.04429910497807,277.5463268268618,195.6386023135583,13169.43812144731,1697.6433561479398,367.40983966190305,30.557037410382826,2.531473372857427,20.070154905927314,481.50208566532336,4464.970341588308,-9065.36882077239,-1373.62841526722,-166.1660487028118,-9.58289321133207,.4729647758913199,1.268786568327291,-.36970682634889585,41.393213350082036,261.2935935556502,12.935476055240873,13336.131683328815,1772.508612059496,369.76534388639965,29.751323653701338,
2.4023193045459172,13.304795348228817,430.5615775526625,4237.0568611071185,-9581.931701634761,-1461.6913552409758,-183.12733958476446,-10.718010163869403,.41421356237309503,1.414213562373095,-.37677560326535325,41.619486213528496,241.05423794991074,-187.94665032361226,13450.063605744153,1836.153896465782,369.4908799925761,29.001847876923147,2.0714759319987186,6.779591200894186,377.7767837205709,3990.386575512536,-10081.709459700915,-1545.947424837898,-200.3762958015653,-11.864482073055006,.3578057213145241,
1.546020906725474,-.3829366947518991,41.1516456456653,216.47684307105183,-406.1569483347166,13511.136535077321,1887.8076599260432,367.3025214564151,28.136213436723654,1.913880671464418,.3829366947518991,323.85365704338597,3728.1472257487526,-10561.233882199509,-1625.2025997821418,-217.62525175416,-13.015432208941645,.3033466836073424,1.66293922460509,-.5822628872992417,40.35639251440489,188.20071124269245,-640.2706748618148,13519.21490106562,1927.6022433578062,362.8197642637487,26.968821921868447,
1.7463817695935329,-5.62650678237171,269.3016715297017,3453.386536448852,-11016.145278780888,-1698.6569643425091,-234.7658734267683,-14.16351421663124,.2504869601913055,1.76384252869671,-.5887180101749253,39.23429103868072,155.76096234403798,-889.2492977967378,13475.470561874661,1955.0535223723712,356.4450994756727,25.894952980042156,1.5695032905781554,-11.181939564328772,214.80884394039484,3169.1640829158237,-11443.321309975563,-1765.1588461316153,-251.68908574481912,-15.49755935939164,.198912367379658,
1.847759065022573,-.7912582233652842,37.39369355329111,119.699486012458,-1151.0956593239027,13380.446257078214,1970.3952110853447,348.01959814116185,24.731487364283044,1.3850130831637748,-16.421408865300393,161.05030052864092,2878.3322807850063,-11838.991423510031,-1823.985884688674,-268.2854986386903,-16.81724543849939,.1483359875383474,1.913880671464418,-.7960642926861912,35.2322109610459,80.01928065061526,-1424.0212633405113,13235.794061869668,1973.804052543835,337.9908651258184,23.289159354463873,
1.3934255946442087,-21.099669467133474,108.48348407242611,2583.700758091299,-12199.726194855148,-1874.2780658979746,-284.2467154529415,-18.11369784385905,.09849140335716425,1.961570560806461,-.998795456205172,32.56307803611191,36.958364584370486,-1706.075448829146,13043.287458812016,1965.3831106103316,326.43182772364605,22.175018750622293,1.198638339011324,-25.371248002043963,57.53505923036915,2288.41886619975,-12522.674544337233,-1914.8400385312243,-299.26241273417224,-19.37805630698734,.04912684976946725,
1.990369453344394,.0178904535*ca.SQRT2/2.384E-6,.008938074*ca.SQRT2/2.384E-6,.0015673635*ca.SQRT2/2.384E-6,.001228571*ca.SQRT2/2.384E-6,4.856585E-4*ca.SQRT2/2.384E-6,1.09434E-4*ca.SQRT2/2.384E-6,5.0783E-5*ca.SQRT2/2.384E-6,6.914E-6*ca.SQRT2/2.384E-6,12804.797818791945,1945.5515939597317,313.4244966442953,20.801593959731544,1995.1556208053692,9.000838926174497,-29.20218120805369],q=[[2.382191739347913E-13,6.423305872147834E-13,9.400849094049688E-13,1.122435026096556E-12,1.183840321267481E-12,1.122435026096556E-12,
9.40084909404969E-13,6.423305872147839E-13,2.382191739347918E-13,5.456116108943412E-12,4.878985199565852E-12,4.240448995017367E-12,3.559909094758252E-12,2.858043359288075E-12,2.156177623817898E-12,1.475637723558783E-12,8.371015190102974E-13,2.599706096327376E-13,-5.456116108943412E-12,-4.878985199565852E-12,-4.240448995017367E-12,-3.559909094758252E-12,-2.858043359288076E-12,-2.156177623817898E-12,-1.475637723558783E-12,-8.371015190102975E-13,-2.599706096327376E-13,-2.382191739347923E-13,-6.423305872147843E-13,
-9.400849094049696E-13,-1.122435026096556E-12,-1.183840321267481E-12,-1.122435026096556E-12,-9.400849094049694E-13,-6.42330587214784E-13,-2.382191739347918E-13],[2.382191739347913E-13,6.423305872147834E-13,9.400849094049688E-13,1.122435026096556E-12,1.183840321267481E-12,1.122435026096556E-12,9.400849094049688E-13,6.423305872147841E-13,2.382191739347918E-13,5.456116108943413E-12,4.878985199565852E-12,4.240448995017367E-12,3.559909094758253E-12,2.858043359288075E-12,2.156177623817898E-12,1.475637723558782E-12,
8.371015190102975E-13,2.599706096327376E-13,-5.461314069809755E-12,-4.921085770524055E-12,-4.343405037091838E-12,-3.732668368707687E-12,-3.093523840190885E-12,-2.430835727329465E-12,-1.734679010007751E-12,-9.74825365660928E-13,-2.797435120168326E-13,0,0,0,0,0,0,-2.283748241799531E-13,-4.037858874020686E-13,-2.146547464825323E-13],[.1316524975873958,.414213562373095,.7673269879789602,1.091308501069271,1.303225372841206,1.56968557711749,1.920982126971166,2.414213562373094,3.171594802363212,4.510708503662055,
7.595754112725146,22.90376554843115,.984807753012208,.6427876096865394,.3420201433256688,.9396926207859084,-.1736481776669303,-.7660444431189779,.8660254037844387,.5,-.5144957554275265,-.4717319685649723,-.3133774542039019,-.1819131996109812,-.09457419252642064,-.04096558288530405,-.01419856857247115,-.003699974673760037,.8574929257125442,.8817419973177052,.9496286491027329,.9833145924917901,.9955178160675857,.9991605581781475,.999899195244447,.9999931550702802],[0,0,0,0,0,0,2.283748241799531E-13,
4.037858874020686E-13,2.146547464825323E-13,5.461314069809755E-12,4.921085770524055E-12,4.343405037091838E-12,3.732668368707687E-12,3.093523840190885E-12,2.430835727329466E-12,1.734679010007751E-12,9.74825365660928E-13,2.797435120168326E-13,-5.456116108943413E-12,-4.878985199565852E-12,-4.240448995017367E-12,-3.559909094758253E-12,-2.858043359288075E-12,-2.156177623817898E-12,-1.475637723558782E-12,-8.371015190102975E-13,-2.599706096327376E-13,-2.382191739347913E-13,-6.423305872147834E-13,-9.400849094049688E-13,
-1.122435026096556E-12,-1.183840321267481E-12,-1.122435026096556E-12,-9.400849094049688E-13,-6.423305872147841E-13,-2.382191739347918E-13]],u=q[d.SHORT_TYPE],C=q[d.SHORT_TYPE],g=q[d.SHORT_TYPE],W=q[d.SHORT_TYPE],h=[0,1,16,17,8,9,24,25,4,5,20,21,12,13,28,29,2,3,18,19,10,11,26,27,6,7,22,23,14,15,30,31];this.mdct_sub48=function(b,l,a){for(var f=286,F=0;F<b.channels_out;F++){for(var p=0;p<b.mode_gr;p++){for(var n,c=b.l3_side.tt[p][F],e=c.xr,t=0,D=b.sb_sample[F][1-p],y=0,z=0;9>z;z++)for(v(l,f,D[y]),v(l,
f+32,D[y+1]),y+=2,f+=64,n=1;32>n;n+=2)D[y-1][n]*=-1;for(n=0;32>n;n++,t+=18){var D=c.block_type,y=b.sb_sample[F][p],k=b.sb_sample[F][1-p];0!=c.mixed_block_flag&&2>n&&(D=0);if(1E-12>b.amp_filter[n])Va.fill(e,t+0,t+18,0);else{if(1>b.amp_filter[n])for(z=0;18>z;z++)k[z][h[n]]*=b.amp_filter[n];if(D==d.SHORT_TYPE){for(z=-3;0>z;z++){var m=q[d.SHORT_TYPE][z+3];e[t+3*z+9]=y[9+z][h[n]]*m-y[8-z][h[n]];e[t+3*z+18]=y[14-z][h[n]]*m+y[15+z][h[n]];e[t+3*z+10]=y[15+z][h[n]]*m-y[14-z][h[n]];e[t+3*z+19]=k[2-z][h[n]]*
m+k[3+z][h[n]];e[t+3*z+11]=k[3+z][h[n]]*m-k[2-z][h[n]];e[t+3*z+20]=k[8-z][h[n]]*m+k[9+z][h[n]]}z=e;y=t;for(m=0;3>m;m++){var x,Y,ea,G,H;ea=z[y+6]*q[d.SHORT_TYPE][0]-z[y+15];k=z[y+0]*q[d.SHORT_TYPE][2]-z[y+9];x=ea+k;Y=ea-k;ea=z[y+15]*q[d.SHORT_TYPE][0]+z[y+6];k=z[y+9]*q[d.SHORT_TYPE][2]+z[y+0];G=ea+k;H=-ea+k;k=2.069978111953089E-11*(z[y+3]*q[d.SHORT_TYPE][1]-z[y+12]);ea=2.069978111953089E-11*(z[y+12]*q[d.SHORT_TYPE][1]+z[y+3]);z[y+0]=1.90752519173728E-11*x+k;z[y+15]=1.90752519173728E-11*-G+ea;Y*=1.6519652744032674E-11;
G=9.537625958686404E-12*G+ea;z[y+3]=Y-G;z[y+6]=Y+G;x=9.537625958686404E-12*x-k;H*=1.6519652744032674E-11;z[y+9]=x+H;z[y+12]=x-H;y++}}else{m=L(18);for(z=-9;0>z;z++)x=q[D][z+27]*k[z+9][h[n]]+q[D][z+36]*k[8-z][h[n]],Y=q[D][z+9]*y[z+9][h[n]]-q[D][z+18]*y[8-z][h[n]],m[z+9]=x-Y*u[3+z+9],m[z+18]=x*u[3+z+9]+Y;var z=e,y=t,w=H=G=ea=Y=x=k=void 0,R=void 0,A=void 0,E=void 0;Y=m[17]-m[9];G=m[15]-m[11];H=m[14]-m[12];w=m[0]+m[8];R=m[1]+m[7];A=m[2]+m[6];E=m[3]+m[5];z[y+17]=w+A-E-(R-m[4]);x=(w+A-E)*C[19]+(R-m[4]);
k=(Y-G-H)*C[18];z[y+5]=k+x;z[y+6]=k-x;ea=(m[16]-m[10])*C[18];R=R*C[19]+m[4];k=Y*C[12]+ea+G*C[13]+H*C[14];x=-w*C[16]+R-A*C[17]+E*C[15];z[y+1]=k+x;z[y+2]=k-x;k=Y*C[13]-ea-G*C[14]+H*C[12];x=-w*C[17]+R-A*C[15]+E*C[16];z[y+9]=k+x;z[y+10]=k-x;k=Y*C[14]-ea+G*C[12]-H*C[13];x=w*C[15]-R+A*C[16]-E*C[17];z[y+13]=k+x;z[y+14]=k-x;E=A=R=w=H=G=ea=Y=void 0;Y=m[8]-m[0];G=m[6]-m[2];H=m[5]-m[3];w=m[17]+m[9];R=m[16]+m[10];A=m[15]+m[11];E=m[14]+m[12];z[y+0]=w+A+E+(R+m[13]);k=(w+A+E)*C[19]-(R+m[13]);x=(Y-G+H)*C[18];z[y+
11]=k+x;z[y+12]=k-x;ea=(m[7]-m[1])*C[18];R=m[13]-R*C[19];k=w*C[15]-R+A*C[16]+E*C[17];x=Y*C[14]+ea+G*C[12]+H*C[13];z[y+3]=k+x;z[y+4]=k-x;k=-w*C[17]+R-A*C[15]-E*C[16];x=Y*C[13]+ea-G*C[14]-H*C[12];z[y+7]=k+x;z[y+8]=k-x;k=-w*C[16]+R-A*C[17]-E*C[15];x=Y*C[12]-ea+G*C[13]-H*C[14];z[y+15]=k+x;z[y+16]=k-x}}if(D!=d.SHORT_TYPE&&0!=n)for(z=7;0<=z;--z)D=e[t+z]*g[20+z]+e[t+-1-z]*W[28+z],y=e[t+z]*W[28+z]-e[t+-1-z]*g[20+z],e[t+-1-z]=D,e[t+z]=y}}l=a;f=286;if(1==b.mode_gr)for(p=0;18>p;p++)N.arraycopy(b.sb_sample[F][1][p],
0,b.sb_sample[F][0][p],0,32)}}}function d(){var u=d.FFTOFFSET,l=d.MPG_MD_MS_LR,q=null,M=this.psy=null,C=null,g=null;this.setModules=function(d,b,l,a){q=d;M=this.psy=b;C=a;g=l};var W=new Pc;this.lame_encode_mp3_frame=function(h,b,r,a,f,F){var p=kc([2,2]);p[0][0]=new Qa;p[0][1]=new Qa;p[1][0]=new Qa;p[1][1]=new Qa;var n=kc([2,2]);n[0][0]=new Qa;n[0][1]=new Qa;n[1][0]=new Qa;n[1][1]=new Qa;var c=[null,null],e=h.internal_flags,t=ya([2,4]),D=[.5,.5],y=[[0,0],[0,0]],z=[[0,0],[0,0]];c[0]=b;c[1]=r;if(0==
e.lame_encode_frame_init){b=h.internal_flags;var k,m;if(0==b.lame_encode_frame_init){r=L(2014);var x=L(2014);b.lame_encode_frame_init=1;for(m=k=0;k<286+576*(1+b.mode_gr);++k)k<576*b.mode_gr?(r[k]=0,2==b.channels_out&&(x[k]=0)):(r[k]=c[0][m],2==b.channels_out&&(x[k]=c[1][m]),++m);for(m=0;m<b.mode_gr;m++)for(k=0;k<b.channels_out;k++)b.l3_side.tt[m][k].block_type=d.SHORT_TYPE;W.mdct_sub48(b,r,x);v(576>=d.FFTOFFSET);v(b.mf_size>=d.BLKSIZE+h.framesize-d.FFTOFFSET);v(b.mf_size>=512+h.framesize-32)}}e.padding=
0;0>(e.slot_lag-=e.frac_SpF)&&(e.slot_lag+=h.out_samplerate,e.padding=1);if(0!=e.psymodel)for(x=[null,null],k=0,m=Z(2),r=0;r<e.mode_gr;r++){for(b=0;b<e.channels_out;b++)x[b]=c[b],k=576+576*r-d.FFTOFFSET;b=h.VBR==G.vbr_mtrh||h.VBR==G.vbr_mt?M.L3psycho_anal_vbr(h,x,k,r,p,n,y[r],z[r],t[r],m):M.L3psycho_anal_ns(h,x,k,r,p,n,y[r],z[r],t[r],m);if(0!=b)return-4;h.mode==na.JOINT_STEREO&&(D[r]=t[r][2]+t[r][3],0<D[r]&&(D[r]=t[r][3]/D[r]));for(b=0;b<e.channels_out;b++){var Y=e.l3_side.tt[r][b];Y.block_type=m[b];
Y.mixed_block_flag=0}}else for(r=0;r<e.mode_gr;r++)for(b=0;b<e.channels_out;b++)e.l3_side.tt[r][b].block_type=NORM_TYPE,e.l3_side.tt[r][b].mixed_block_flag=0,z[r][b]=y[r][b]=700;0==e.ATH.useAdjust?e.ATH.adjust=1:(b=e.loudness_sq[0][0],t=e.loudness_sq[1][0],2==e.channels_out?(b+=e.loudness_sq[0][1],t+=e.loudness_sq[1][1]):(b+=b,t+=t),2==e.mode_gr&&(b=Math.max(b,t)),b=.5*b*e.ATH.aaSensitivityP,.03125<b?(1<=e.ATH.adjust?e.ATH.adjust=1:e.ATH.adjust<e.ATH.adjustLimit&&(e.ATH.adjust=e.ATH.adjustLimit),
e.ATH.adjustLimit=1):(t=31.98*b+6.25E-4,e.ATH.adjust>=t?(e.ATH.adjust*=.075*t+.925,e.ATH.adjust<t&&(e.ATH.adjust=t)):e.ATH.adjustLimit>=t?e.ATH.adjust=t:e.ATH.adjust<e.ATH.adjustLimit&&(e.ATH.adjust=e.ATH.adjustLimit),e.ATH.adjustLimit=t));W.mdct_sub48(e,c[0],c[1]);e.mode_ext=d.MPG_MD_LR_LR;if(h.force_ms)e.mode_ext=d.MPG_MD_MS_LR;else if(h.mode==na.JOINT_STEREO){for(r=x=t=0;r<e.mode_gr;r++)for(b=0;b<e.channels_out;b++)t+=z[r][b],x+=y[r][b];t<=1*x&&(t=e.l3_side.tt[0],b=e.l3_side.tt[e.mode_gr-1],t[0].block_type==
t[1].block_type&&b[0].block_type==b[1].block_type&&(e.mode_ext=d.MPG_MD_MS_LR))}e.mode_ext==l&&(p=n,y=z);if(h.analysis&&null!=e.pinfo)for(r=0;r<e.mode_gr;r++)for(b=0;b<e.channels_out;b++)e.pinfo.ms_ratio[r]=e.ms_ratio[r],e.pinfo.ms_ener_ratio[r]=D[r],e.pinfo.blocktype[r][b]=e.l3_side.tt[r][b].block_type,e.pinfo.pe[r][b]=y[r][b],N.arraycopy(e.l3_side.tt[r][b].xr,0,e.pinfo.xr[r][b],0,576),e.mode_ext==l&&(e.pinfo.ers[r][b]=e.pinfo.ers[r][b+2],N.arraycopy(e.pinfo.energy[r][b+2],0,e.pinfo.energy[r][b],
0,e.pinfo.energy[r][b].length));if(h.VBR==G.vbr_off||h.VBR==G.vbr_abr){for(n=0;18>n;n++)e.nsPsy.pefirbuf[n]=e.nsPsy.pefirbuf[n+1];for(r=z=0;r<e.mode_gr;r++)for(b=0;b<e.channels_out;b++)z+=y[r][b];e.nsPsy.pefirbuf[18]=z;z=e.nsPsy.pefirbuf[9];for(n=0;9>n;n++)z+=(e.nsPsy.pefirbuf[n]+e.nsPsy.pefirbuf[18-n])*d.fircoef[n];z=3350*e.mode_gr*e.channels_out/z;for(r=0;r<e.mode_gr;r++)for(b=0;b<e.channels_out;b++)y[r][b]*=z}e.iteration_loop.iteration_loop(h,y,D,p);q.format_bitstream(h);a=q.copy_buffer(e,a,f,
F,1);h.bWriteVbrTag&&C.addVbrFrame(h);if(h.analysis&&null!=e.pinfo){for(b=0;b<e.channels_out;b++){for(f=0;f<u;f++)e.pinfo.pcmdata[b][f]=e.pinfo.pcmdata[b][f+h.framesize];for(f=u;1600>f;f++)e.pinfo.pcmdata[b][f]=c[b][f-u]}g.set_frame_pinfo(h,p)}v(0<=e.bitrate_index&&16>e.bitrate_index);v(0<=e.mode_ext&&4>e.mode_ext);e.bitrate_stereoMode_Hist[e.bitrate_index][4]++;e.bitrate_stereoMode_Hist[15][4]++;2==e.channels_out&&(e.bitrate_stereoMode_Hist[e.bitrate_index][e.mode_ext]++,e.bitrate_stereoMode_Hist[15][e.mode_ext]++);
for(h=0;h<e.mode_gr;++h)for(c=0;c<e.channels_out;++c)f=e.l3_side.tt[h][c].block_type|0,0!=e.l3_side.tt[h][c].mixed_block_flag&&(f=4),e.bitrate_blockType_Hist[e.bitrate_index][f]++,e.bitrate_blockType_Hist[e.bitrate_index][5]++,e.bitrate_blockType_Hist[15][f]++,e.bitrate_blockType_Hist[15][5]++;return a}}function Qc(){this.size=this.pos=this.want=this.seen=this.sum=0;this.bag=null;this.TotalFrameSize=this.nBytesWritten=this.nVbrNumFrames=0}function Rc(){this.last_en_subshort=ya([4,9]);this.lastAttacks=
Z(4);this.pefirbuf=L(19);this.longfact=L(d.SBMAX_l);this.shortfact=L(d.SBMAX_s);this.attackthre_s=this.attackthre=0}function Sc(){this.tt=[[null,null],[null,null]];this.resvDrain_post=this.resvDrain_pre=this.private_bits=this.main_data_begin=0;this.scfsi=[Z(4),Z(4)];for(var d=0;2>d;d++)for(var l=0;2>l;l++)this.tt[d][l]=new rb}function Wb(){this.l=L(d.SBMAX_l);this.s=ya([d.SBMAX_s,3]);var v=this;this.assign=function(l){N.arraycopy(l.l,0,v.l,0,d.SBMAX_l);for(var q=0;q<d.SBMAX_s;q++)for(var u=0;3>u;u++)v.s[q][u]=
l.s[q][u]}}function T(){function v(){this.ptr=this.write_timing=0;this.buf=new Int8Array(40)}this.fill_buffer_resample_init=this.iteration_init_init=this.lame_encode_frame_init=this.Class_ID=0;this.mfbuf=ya([2,T.MFSIZE]);this.full_outer_loop=this.use_best_huffman=this.subblock_gain=this.noise_shaping_stop=this.psymodel=this.substep_shaping=this.noise_shaping_amp=this.noise_shaping=this.highpass2=this.highpass1=this.lowpass2=this.lowpass1=this.mode_ext=this.samplerate_index=this.bitrate_index=this.VBR_max_bitrate=
this.VBR_min_bitrate=this.mf_size=this.mf_samples_to_encode=this.resample_ratio=this.channels_out=this.channels_in=this.mode_gr=0;this.l3_side=new Sc;this.ms_ratio=L(2);this.slot_lag=this.frac_SpF=this.padding=0;this.tag_spec=null;this.nMusicCRC=0;this.OldValue=Z(2);this.CurrentStep=Z(2);this.masking_lower=0;this.bv_scf=Z(576);this.pseudohalf=Z(Ea.SFBMAX);this.sfb21_extra=!1;this.inbuf_old=Array(2);this.blackfilt=Array(2*T.BPC+1);this.itime=new Float64Array(2);this.sideinfo_len=0;this.sb_sample=ya([2,
2,18,d.SBLIMIT]);this.amp_filter=L(32);this.header=Array(T.MAX_HEADER_BUF);this.ResvMax=this.ResvSize=this.ancillary_flag=this.w_ptr=this.h_ptr=0;this.scalefac_band=new za;this.minval_l=L(d.CBANDS);this.minval_s=L(d.CBANDS);this.nb_1=ya([4,d.CBANDS]);this.nb_2=ya([4,d.CBANDS]);this.nb_s1=ya([4,d.CBANDS]);this.nb_s2=ya([4,d.CBANDS]);this.s3_ll=this.s3_ss=null;this.decay=0;this.thm=Array(4);this.en=Array(4);this.tot_ener=L(4);this.loudness_sq=ya([2,2]);this.loudness_sq_save=L(2);this.mld_l=L(d.SBMAX_l);
this.mld_s=L(d.SBMAX_s);this.bm_l=Z(d.SBMAX_l);this.bo_l=Z(d.SBMAX_l);this.bm_s=Z(d.SBMAX_s);this.bo_s=Z(d.SBMAX_s);this.npart_s=this.npart_l=0;this.s3ind=kb([d.CBANDS,2]);this.s3ind_s=kb([d.CBANDS,2]);this.numlines_s=Z(d.CBANDS);this.numlines_l=Z(d.CBANDS);this.rnumlines_l=L(d.CBANDS);this.mld_cb_l=L(d.CBANDS);this.mld_cb_s=L(d.CBANDS);this.numlines_l_num1=this.numlines_s_num1=0;this.pe=L(4);this.ms_ener_ratio_old=this.ms_ratio_l_old=this.ms_ratio_s_old=0;this.blocktype_old=Z(2);this.nsPsy=new Rc;
this.VBR_seek_table=new Qc;this.PSY=this.ATH=null;this.nogap_current=this.nogap_total=0;this.findPeakSample=this.findReplayGain=this.decode_on_the_fly=!0;this.AudiophileGain=this.RadioGain=this.PeakSample=0;this.rgdata=null;this.noclipScale=this.noclipGainChange=0;this.bitrate_stereoMode_Hist=kb([16,5]);this.bitrate_blockType_Hist=kb([16,6]);this.hip=this.pinfo=null;this.in_buffer_nsamples=0;this.iteration_loop=this.in_buffer_1=this.in_buffer_0=null;for(var l=0;l<this.en.length;l++)this.en[l]=new Wb;
for(l=0;l<this.thm.length;l++)this.thm[l]=new Wb;for(l=0;l<this.header.length;l++)this.header[l]=new v}function Tc(){function v(d,l,h){var b=0,q,a,f;h<<=1;var C=l+h;q=4;do{var p,n,c,e,t,B,y;y=q>>1;e=q;t=q<<1;B=t+e;q=t<<1;a=l;f=a+y;do{var z,k,m,x;k=d[a+0]-d[a+e];z=d[a+0]+d[a+e];x=d[a+t]-d[a+B];m=d[a+t]+d[a+B];d[a+t]=z-m;d[a+0]=z+m;d[a+B]=k-x;d[a+e]=k+x;k=d[f+0]-d[f+e];z=d[f+0]+d[f+e];x=ca.SQRT2*d[f+B];m=ca.SQRT2*d[f+t];d[f+t]=z-m;d[f+0]=z+m;d[f+B]=k-x;d[f+e]=k+x;f+=q;a+=q}while(a<C);n=u[b+0];p=u[b+
1];for(c=1;c<y;c++){var Y,ea;Y=1-2*p*p;ea=2*p*n;a=l+c;f=l+e-c;do{var G,H,w,R,A;G=ea*d[a+e]-Y*d[f+e];m=Y*d[a+e]+ea*d[f+e];k=d[a+0]-m;z=d[a+0]+m;w=d[f+0]-G;H=d[f+0]+G;G=ea*d[a+B]-Y*d[f+B];m=Y*d[a+B]+ea*d[f+B];x=d[a+t]-m;m=d[a+t]+m;A=d[f+t]-G;R=d[f+t]+G;G=p*m-n*A;m=n*m+p*A;d[a+t]=z-m;d[a+0]=z+m;d[f+B]=w-G;d[f+e]=w+G;G=n*R-p*x;m=p*R+n*x;d[f+t]=H-m;d[f+0]=H+m;d[a+B]=k-G;d[a+e]=k+G;f+=q;a+=q}while(a<C);Y=n;n=Y*u[b+0]-p*u[b+1];p=Y*u[b+1]+p*u[b+0]}b+=2}while(q<h)}var l=L(d.BLKSIZE),q=L(d.BLKSIZE_s/2),u=[.9238795325112867,
.3826834323650898,.9951847266721969,.0980171403295606,.9996988186962042,.02454122852291229,.9999811752826011,.006135884649154475],C=[0,128,64,192,32,160,96,224,16,144,80,208,48,176,112,240,8,136,72,200,40,168,104,232,24,152,88,216,56,184,120,248,4,132,68,196,36,164,100,228,20,148,84,212,52,180,116,244,12,140,76,204,44,172,108,236,28,156,92,220,60,188,124,252,2,130,66,194,34,162,98,226,18,146,82,210,50,178,114,242,10,138,74,202,42,170,106,234,26,154,90,218,58,186,122,250,6,134,70,198,38,166,102,230,
22,150,86,214,54,182,118,246,14,142,78,206,46,174,110,238,30,158,94,222,62,190,126,254];this.fft_short=function(g,l,h,b,r){for(g=0;3>g;g++){var a=d.BLKSIZE_s/2,f=65535&192*(g+1),u=d.BLKSIZE_s/8-1;do{var p,n,c,e,t,D=C[u<<2]&255;p=q[D]*b[h][r+D+f];t=q[127-D]*b[h][r+D+f+128];n=p-t;p+=t;c=q[D+64]*b[h][r+D+f+64];t=q[63-D]*b[h][r+D+f+192];e=c-t;c+=t;a-=4;l[g][a+0]=p+c;l[g][a+2]=p-c;l[g][a+1]=n+e;l[g][a+3]=n-e;p=q[D+1]*b[h][r+D+f+1];t=q[126-D]*b[h][r+D+f+129];n=p-t;p+=t;c=q[D+65]*b[h][r+D+f+65];t=q[62-D]*
b[h][r+D+f+193];e=c-t;c+=t;l[g][a+d.BLKSIZE_s/2+0]=p+c;l[g][a+d.BLKSIZE_s/2+2]=p-c;l[g][a+d.BLKSIZE_s/2+1]=n+e;l[g][a+d.BLKSIZE_s/2+3]=n-e}while(0<=--u);v(l[g],a,d.BLKSIZE_s/2)}};this.fft_long=function(g,q,h,b,r){g=d.BLKSIZE/8-1;var a=d.BLKSIZE/2;do{var f,u,p,n,c,e=C[g]&255;f=l[e]*b[h][r+e];c=l[e+512]*b[h][r+e+512];u=f-c;f+=c;p=l[e+256]*b[h][r+e+256];c=l[e+768]*b[h][r+e+768];n=p-c;p+=c;a-=4;q[a+0]=f+p;q[a+2]=f-p;q[a+1]=u+n;q[a+3]=u-n;f=l[e+1]*b[h][r+e+1];c=l[e+513]*b[h][r+e+513];u=f-c;f+=c;p=l[e+
257]*b[h][r+e+257];c=l[e+769]*b[h][r+e+769];n=p-c;p+=c;q[a+d.BLKSIZE/2+0]=f+p;q[a+d.BLKSIZE/2+2]=f-p;q[a+d.BLKSIZE/2+1]=u+n;q[a+d.BLKSIZE/2+3]=u-n}while(0<=--g);v(q,a,d.BLKSIZE/2)};this.init_fft=function(g){for(g=0;g<d.BLKSIZE;g++)l[g]=.42-.5*Math.cos(2*Math.PI*(g+.5)/d.BLKSIZE)+.08*Math.cos(4*Math.PI*(g+.5)/d.BLKSIZE);for(g=0;g<d.BLKSIZE_s/2;g++)q[g]=.5*(1-Math.cos(2*Math.PI*(g+.5)/d.BLKSIZE_s))}}function Xb(){function u(a,b){for(var k=0,c=0;c<d.BLKSIZE/2;++c)k+=a[c]*b.ATH.eql_w[c];return k*=D}function l(a,
b,c,d,e,m){var g;if(b>a)if(b<a*z)g=b/a;else return a+b;else{if(a>=b*z)return a+b;g=a/b}v(0<=a);v(0<=b);a+=b;if(6>=d+3){if(g>=y)return a;d=0|ca.FAST_LOG10_X(g,16);return a*Y[d]}d=0|ca.FAST_LOG10_X(g,16);b=0!=m?e.ATH.cb_s[c]*e.ATH.adjust:e.ATH.cb_l[c]*e.ATH.adjust;v(0<=b);return a<k*b?a>b?(c=1,13>=d&&(c=ea[d]),b=ca.FAST_LOG10_X(a/b,10/15),a*((x[d]-c)*b+c)):13<d?a:a*ea[d]:a*x[d]}function q(a,b,k){var c;0>a&&(a=0);0>b&&(b=0);if(0>=a)return b;if(0>=b)return a;c=b>a?b/a:a/b;if(-2<=k&&2>=k){if(c>=y)return a+
b;k=0|ca.FAST_LOG10_X(c,16);return(a+b)*I[k]}if(c<z)return a+b;a<b&&(a=b);return a}function M(a,b,k,c,e){var m,g,f=0,l=0;for(m=g=0;m<d.SBMAX_s;++g,++m){for(var h=a.bo_s[m],n=a.npart_s,h=h<n?h:n;g<h;)v(0<=b[g]),v(0<=k[g]),f+=b[g],l+=k[g],g++;a.en[c].s[m][e]=f;a.thm[c].s[m][e]=l;if(g>=n){++m;break}v(0<=b[g]);v(0<=k[g]);l=a.PSY.bo_s_weight[m];n=1-l;f=l*b[g];l*=k[g];a.en[c].s[m][e]+=f;a.thm[c].s[m][e]+=l;f=n*b[g];l=n*k[g]}for(;m<d.SBMAX_s;++m)a.en[c].s[m][e]=0,a.thm[c].s[m][e]=0}function C(a,b,k,c){var e,
m,g=0,f=0;for(e=m=0;e<d.SBMAX_l;++m,++e){for(var l=a.bo_l[e],h=a.npart_l,l=l<h?l:h;m<l;)v(0<=b[m]),v(0<=k[m]),g+=b[m],f+=k[m],m++;a.en[c].l[e]=g;a.thm[c].l[e]=f;if(m>=h){++e;break}v(0<=b[m]);v(0<=k[m]);f=a.PSY.bo_l_weight[e];h=1-f;g=f*b[m];f*=k[m];a.en[c].l[e]+=g;a.thm[c].l[e]+=f;g=h*b[m];f=h*k[m]}for(;e<d.SBMAX_l;++e)a.en[c].l[e]=0,a.thm[c].l[e]=0}function g(a,b,c){return 1<=c?a:0>=c?b:0<b?Math.pow(a/b,c)*b:0}function W(a,b){for(var c=309.07,k=0;k<d.SBMAX_s-1;k++)for(var e=0;3>e;e++){var m=a.thm.s[k][e];
v(k<H.length);if(0<m){var m=m*b,g=a.en.s[k][e];g>m&&(g>1E10*m?c+=23.02585092994046*H[k]:(v(0<m),c+=H[k]*ca.FAST_LOG10(g/m)))}}return c}function h(a,b){for(var c=281.0575,k=0;k<d.SBMAX_l-1;k++){var m=a.thm.l[k];v(k<w.length);if(0<m){var m=m*b,e=a.en.l[k];e>m&&(e>1E10*m?c+=23.02585092994046*w[k]:(v(0<m),c+=w[k]*ca.FAST_LOG10(e/m)))}}return c}function b(a,b,c,k,d){var m,e;for(m=e=0;m<a.npart_l;++m){var g=0,f=0,l;for(l=0;l<a.numlines_l[m];++l,++e){var h=b[e];v(0<=h);g+=h;f<h&&(f=h)}c[m]=g;k[m]=f;d[m]=
g*a.rnumlines_l[m];v(0<=a.rnumlines_l[m]);v(0<=g);v(0<=c[m]);v(0<=k[m]);v(0<=d[m])}}function r(a,b,c,k){var d=m.length-1,e=0,g=c[e]+c[e+1];v(0<=g);if(0<g){var f=b[e];f<b[e+1]&&(f=b[e+1]);v(0<a.numlines_l[e]+a.numlines_l[e+1]-1);g=20*(2*f-g)/(g*(a.numlines_l[e]+a.numlines_l[e+1]-1));g|=0;g>d&&(g=d);k[e]=g}else k[e]=0;for(e=1;e<a.npart_l-1;e++)g=c[e-1]+c[e]+c[e+1],v(0<=g),0<g?(f=b[e-1],f<b[e]&&(f=b[e]),f<b[e+1]&&(f=b[e+1]),v(0<a.numlines_l[e-1]+a.numlines_l[e]+a.numlines_l[e+1]-1),g=20*(3*f-g)/(g*(a.numlines_l[e-
1]+a.numlines_l[e]+a.numlines_l[e+1]-1)),g|=0,g>d&&(g=d),k[e]=g):k[e]=0;v(0<e);v(e==a.npart_l-1);g=c[e-1]+c[e];v(0<=g);0<g?(f=b[e-1],f<b[e]&&(f=b[e]),v(0<a.numlines_l[e-1]+a.numlines_l[e]-1),g=20*(2*f-g)/(g*(a.numlines_l[e-1]+a.numlines_l[e]-1)),g|=0,g>d&&(g=d),k[e]=g):k[e]=0;v(e==a.npart_l-1)}function a(a,b,c,k,d,e,m){var g=2*e;d=0<e?Math.pow(10,d):1;for(var f,l,h=0;h<m;++h){var n=a[2][h],p=a[3][h],x=b[0][h],q=b[1][h],t=b[2][h],u=b[3][h];x<=1.58*q&&q<=1.58*x?(f=c[h]*n,l=Math.max(t,Math.min(u,c[h]*
p)),f=Math.max(u,Math.min(t,f))):(l=t,f=u);0<e&&(u=k[h]*d,x=Math.min(Math.max(x,u),Math.max(q,u)),t=Math.max(l,u),u=Math.max(f,u),q=t+u,0<q&&x*g<q&&(x=x*g/q,t*=x,u*=x,v(0<q)),l=Math.min(t,l),f=Math.min(u,f));l>n&&(l=n);f>p&&(f=p);b[2][h]=l;b[3][h]=f}}function f(a,b){var c;c=0<=a?27*-a:a*b;return-72>=c?0:Math.exp(.2302585093*c)}function F(a){0>a&&(a=0);a*=.001;return 13*Math.atan(.76*a)+3.5*Math.atan(a*a/56.25)}function p(a,b,c,k,e,m,g,f,l,h,n,p){var x=L(d.CBANDS+1),q=f/(15<p?1152:384),t=Z(d.HBLKSIZE),
u;f/=l;var r=0,w=0;for(u=0;u<d.CBANDS;u++){var A,y;A=F(f*r);x[u]=f*r;for(y=r;.34>F(f*y)-A&&y<=l/2;y++);a[u]=y-r;for(w=u+1;r<y;)v(r<d.HBLKSIZE),t[r++]=u;if(r>l/2){r=l/2;++u;break}}v(u<d.CBANDS);x[u]=f*r;for(r=0;r<p;r++)u=h[r],A=h[r+1],u=0|Math.floor(.5+n*(u-.5)),0>u&&(u=0),y=0|Math.floor(.5+n*(A-.5)),y>l/2&&(y=l/2),c[r]=(t[u]+t[y])/2,b[r]=t[y],g[r]=(q*A-x[b[r]])/(x[b[r]+1]-x[b[r]]),0>g[r]?g[r]=0:1<g[r]&&(g[r]=1),A=F(f*h[r]*n),A=Math.min(A,15.5)/15.5,m[r]=Math.pow(10,1.25*(1-Math.cos(Math.PI*A))-2.5);
for(b=r=0;b<w;b++)c=a[b],A=F(f*r),m=F(f*(r+c-1)),k[b]=.5*(A+m),A=F(f*(r-.5)),m=F(f*(r+c-.5)),e[b]=m-A,r+=c;return w}function n(a,b,c,k,e,m){var g=ya([d.CBANDS,d.CBANDS]),l=0;if(m)for(var h=0;h<b;h++)for(m=0;m<b;m++){var n;var p=n=void 0,p=n=void 0;n=c[h]-c[m];n=0<=n?3*n:1.5*n;.5<=n&&2.5>=n?(p=n-.5,p=8*(p*p-2*p)):p=0;n+=.474;n=15.811389+7.5*n-17.5*Math.sqrt(1+n*n);-60>=n?n=0:(n=Math.exp(.2302585093*(p+n)),n/=.6609193);p=n*k[m];g[h][m]=p*e[h]}else for(m=0;m<b;m++){n=15+Math.min(21/c[m],12);var x;var h=
n,q=p=0;x=0;var t=q=void 0;for(x=0;1E-20<f(x,h);--x);q=x;for(t=0;1E-12<Math.abs(t-q);)x=(t+q)/2,0<f(x,h)?t=x:q=x;p=q;for(x=0;1E-20<f(x,h);x+=1);q=0;for(t=x;1E-12<Math.abs(t-q);)x=(t+q)/2,0<f(x,h)?q=x:t=x;for(var q=t,t=0,v=void 0,v=0;1E3>=v;++v)x=p+v*(q-p)/1E3,x=f(x,h),t+=x;x=1001/(t*(q-p));for(h=0;h<b;h++)p=x*f(c[h]-c[m],n)*k[m],g[h][m]=p*e[h]}for(h=0;h<b;h++){for(m=0;m<b&&!(0<g[h][m]);m++);a[h][0]=m;for(m=b-1;0<m&&!(0<g[h][m]);m--);a[h][1]=m;l+=a[h][1]-a[h][0]+1}c=L(l);for(h=k=0;h<b;h++)for(m=a[h][0];m<=
a[h][1];m++)c[k++]=g[h][m];return c}function c(a){a=F(a);a=Math.min(a,15.5)/15.5;return Math.pow(10,1.25*(1-Math.cos(Math.PI*a))-2.5)}function e(a,b){-.3>a&&(a=3410);a=Math.max(.1,a/1E3);return 3.64*Math.pow(a,-.8)-6.8*Math.exp(-.6*Math.pow(a-3.4,2))+6*Math.exp(-.15*Math.pow(a-8.7,2))+.001*(.6+.04*b)*Math.pow(a,4)}var t=new Tc,D=1/217621504/(d.BLKSIZE/2),y,z,k,m=[1,.79433,.63096,.63096,.63096,.63096,.63096,.25119,.11749],x=[3.3246*3.3246,3.23837*3.23837,9.9500500969,9.0247369744,8.1854926609,7.0440875649,
2.46209*2.46209,2.284*2.284,4.4892710641,1.96552*1.96552,1.82335*1.82335,1.69146*1.69146,2.4621061921,2.1508568964,1.37074*1.37074,1.31036*1.31036,1.5691069696,1.4555939904,1.16203*1.16203,1.2715945225,1.09428*1.09428,1.0659*1.0659,1.0779838276,1.0382591025,1],Y=[1.7782755904,1.35879*1.35879,1.38454*1.38454,1.39497*1.39497,1.40548*1.40548,1.3537*1.3537,1.6999465924,1.22321*1.22321,1.3169398564,1],ea=[5.5396212496,2.29259*2.29259,4.9868695969,2.12675*2.12675,2.02545*2.02545,1.87894*1.87894,1.74303*
1.74303,1.61695*1.61695,2.2499700001,1.39148*1.39148,1.29083*1.29083,1.19746*1.19746,1.2339655056,1.0779838276],I=[1.7782755904,1.35879*1.35879,1.38454*1.38454,1.39497*1.39497,1.40548*1.40548,1.3537*1.3537,1.6999465924,1.22321*1.22321,1.3169398564,1],H=[11.8,13.6,17.2,32,46.5,51.3,57.5,67.1,71.5,84.6,97.6,130],w=[6.8,5.8,5.8,6.4,6.5,9.9,12.1,14.4,15,18.9,21.6,26.9,34.2,40.2,46.8,56.5,60.7,73.9,85.7,93.4,126.1],R=[-1.730326E-17,-.01703172,-1.349528E-17,.0418072,-6.73278E-17,-.0876324,-3.0835E-17,.1863476,
-1.104424E-16,-.627638];this.L3psycho_anal_ns=function(a,c,k,e,f,n,p,x,q,A){var w=a.internal_flags,y=ya([2,d.BLKSIZE]),z=ya([2,3,d.BLKSIZE_s]),Y=L(d.CBANDS+1),D=L(d.CBANDS+1),H=L(d.CBANDS+2),F=Z(2),ea=Z(2),I,Q,N,K,T,fa,X,oa,qa=ya([2,576]),V,ra=Z(d.CBANDS+2),O=Z(d.CBANDS+2);Va.fill(O,0);I=w.channels_out;a.mode==na.JOINT_STEREO&&(I=4);V=a.VBR==G.vbr_off?0==w.ResvMax?0:w.ResvSize/w.ResvMax*.5:a.VBR==G.vbr_rh||a.VBR==G.vbr_mtrh||a.VBR==G.vbr_mt?.6:1;for(Q=0;Q<w.channels_out;Q++){var Ea=c[Q],za=k+576-
350-21+192;v(10==R.length);for(K=0;576>K;K++){var Ra,rc;Ra=Ea[za+K+10];for(T=rc=0;9>T;T+=2)Ra+=R[T]*(Ea[za+K+T]+Ea[za+K+21-T]),rc+=R[T+1]*(Ea[za+K+T+1]+Ea[za+K+21-T-1]);qa[Q][K]=Ra+rc}f[e][Q].en.assign(w.en[Q]);f[e][Q].thm.assign(w.thm[Q]);2<I&&(n[e][Q].en.assign(w.en[Q+2]),n[e][Q].thm.assign(w.thm[Q+2]))}for(Q=0;Q<I;Q++){var sa=L(12),Ja=[0,0,0,0],Da=L(12),xc=1,Qa,kb=L(d.CBANDS),db=L(d.CBANDS),ta=[0,0,0,0],lb=L(d.HBLKSIZE),Wa=ya([3,d.HBLKSIZE_s]);v(w.npart_s<=d.CBANDS);v(w.npart_l<=d.CBANDS);for(K=
0;3>K;K++)sa[K]=w.nsPsy.last_en_subshort[Q][K+6],v(0<w.nsPsy.last_en_subshort[Q][K+4]),Da[K]=sa[K]/w.nsPsy.last_en_subshort[Q][K+4],Ja[0]+=sa[K];if(2==Q)for(K=0;576>K;K++){var yc,Kb;yc=qa[0][K];Kb=qa[1][K];qa[0][K]=yc+Kb;qa[1][K]=yc-Kb}var Dc=qa[Q&1],Lb=0;for(K=0;9>K;K++){for(var Ab=Lb+64,Fa=1;Lb<Ab;Lb++)Fa<Math.abs(Dc[Lb])&&(Fa=Math.abs(Dc[Lb]));w.nsPsy.last_en_subshort[Q][K]=sa[K+3]=Fa;Ja[1+K/3]+=Fa;Fa>sa[K+3-2]?(v(0<sa[K+3-2]),Fa/=sa[K+3-2]):sa[K+3-2]>10*Fa?(v(0<Fa),Fa=sa[K+3-2]/(10*Fa)):Fa=0;
Da[K+3]=Fa}if(a.analysis){var Tb=Da[0];for(K=1;12>K;K++)Tb<Da[K]&&(Tb=Da[K]);w.pinfo.ers[e][Q]=w.pinfo.ers_save[Q];w.pinfo.ers_save[Q]=Tb}Qa=3==Q?w.nsPsy.attackthre_s:w.nsPsy.attackthre;for(K=0;12>K;K++)0==ta[K/3]&&Da[K]>Qa&&(ta[K/3]=K%3+1);for(K=1;4>K;K++){var P;Ja[K-1]>Ja[K]?(v(0<Ja[K]),P=Ja[K-1]/Ja[K]):(v(0<Ja[K-1]),P=Ja[K]/Ja[K-1]);1.7>P&&(ta[K]=0,1==K&&(ta[0]=0))}0!=ta[0]&&0!=w.nsPsy.lastAttacks[Q]&&(ta[0]=0);if(3==w.nsPsy.lastAttacks[Q]||0!=ta[0]+ta[1]+ta[2]+ta[3])xc=0,0!=ta[1]&&0!=ta[0]&&(ta[1]=
0),0!=ta[2]&&0!=ta[1]&&(ta[2]=0),0!=ta[3]&&0!=ta[2]&&(ta[3]=0);2>Q?ea[Q]=xc:0==xc&&(ea[0]=ea[1]=0);q[Q]=w.tot_ener[Q];var $a=a,tb=lb,ab=Wa,ub=y,Xa=Q&1,Sa=z,Ta=Q&1,vb=e,ha=Q,Bb=c,lc=k,bb=$a.internal_flags;if(2>ha)t.fft_long(bb,ub[Xa],ha,Bb,lc),t.fft_short(bb,Sa[Ta],ha,Bb,lc);else if(2==ha){for(var ga=d.BLKSIZE-1;0<=ga;--ga){var Mb=ub[Xa+0][ga],Cb=ub[Xa+1][ga];ub[Xa+0][ga]=(Mb+Cb)*ca.SQRT2*.5;ub[Xa+1][ga]=(Mb-Cb)*ca.SQRT2*.5}for(var Ka=2;0<=Ka;--Ka)for(ga=d.BLKSIZE_s-1;0<=ga;--ga)Mb=Sa[Ta+0][Ka][ga],
Cb=Sa[Ta+1][Ka][ga],Sa[Ta+0][Ka][ga]=(Mb+Cb)*ca.SQRT2*.5,Sa[Ta+1][Ka][ga]=(Mb-Cb)*ca.SQRT2*.5}tb[0]=ub[Xa+0][0];tb[0]*=tb[0];for(ga=d.BLKSIZE/2-1;0<=ga;--ga){var Db=ub[Xa+0][d.BLKSIZE/2-ga],va=ub[Xa+0][d.BLKSIZE/2+ga];tb[d.BLKSIZE/2-ga]=.5*(Db*Db+va*va)}for(Ka=2;0<=Ka;--Ka)for(ab[Ka][0]=Sa[Ta+0][Ka][0],ab[Ka][0]*=ab[Ka][0],ga=d.BLKSIZE_s/2-1;0<=ga;--ga)Db=Sa[Ta+0][Ka][d.BLKSIZE_s/2-ga],va=Sa[Ta+0][Ka][d.BLKSIZE_s/2+ga],ab[Ka][d.BLKSIZE_s/2-ga]=.5*(Db*Db+va*va);for(var mc=0,ga=11;ga<d.HBLKSIZE;ga++)mc+=
tb[ga];bb.tot_ener[ha]=mc;if($a.analysis){for(ga=0;ga<d.HBLKSIZE;ga++)bb.pinfo.energy[vb][ha][ga]=bb.pinfo.energy_save[ha][ga],bb.pinfo.energy_save[ha][ga]=tb[ga];bb.pinfo.pe[vb][ha]=bb.pe[ha]}2==$a.athaa_loudapprox&&2>ha&&(bb.loudness_sq[vb][ha]=bb.loudness_sq_save[ha],bb.loudness_sq_save[ha]=u(tb,bb));b(w,lb,Y,kb,db);r(w,kb,db,ra);for(oa=0;3>oa;oa++){for(var wb,pa,Eb=Wa,Ub=D,Vb=H,mb=Q,ka=oa,La=a.internal_flags,Ma=void 0,ia=void 0,ia=Ma=0;ia<La.npart_s;++ia){for(var Yb=0,rb=0,nb=La.numlines_s[ia],
sb=0;sb<nb;++sb,++Ma){var Fb=Eb[ka][Ma],Yb=Yb+Fb;rb<Fb&&(rb=Fb)}Ub[ia]=Yb}v(ia==La.npart_s);v(129==Ma);for(Ma=ia=0;ia<La.npart_s;ia++){var xb=La.s3ind_s[ia][0],Nb=La.s3_ss[Ma++]*Ub[xb];for(++xb;xb<=La.s3ind_s[ia][1];)Nb+=La.s3_ss[Ma]*Ub[xb],++Ma,++xb;var Zb=2*La.nb_s1[mb][ia];Vb[ia]=Math.min(Nb,Zb);La.blocktype_old[mb&1]==d.SHORT_TYPE&&(Zb=16*La.nb_s2[mb][ia],Vb[ia]=Math.min(Zb,Vb[ia]));La.nb_s2[mb][ia]=La.nb_s1[mb][ia];La.nb_s1[mb][ia]=Nb;v(0<=Vb[ia])}for(;ia<=d.CBANDS;++ia)Ub[ia]=0,Vb[ia]=0;M(w,
D,H,Q,oa);for(X=0;X<d.SBMAX_s;X++){pa=w.thm[Q].s[X][oa];pa*=.8;if(2<=ta[oa]||1==ta[oa+1]){var Gb=0!=oa?oa-1:2,Fa=g(w.thm[Q].s[X][Gb],pa,.6*V);pa=Math.min(pa,Fa)}if(1==ta[oa])Gb=0!=oa?oa-1:2,Fa=g(w.thm[Q].s[X][Gb],pa,.3*V),pa=Math.min(pa,Fa);else if(0!=oa&&3==ta[oa-1]||0==oa&&3==w.nsPsy.lastAttacks[Q])Gb=2!=oa?oa+1:0,Fa=g(w.thm[Q].s[X][Gb],pa,.3*V),pa=Math.min(pa,Fa);wb=sa[3*oa+3]+sa[3*oa+4]+sa[3*oa+5];6*sa[3*oa+5]<wb&&(pa*=.5,6*sa[3*oa+4]<wb&&(pa*=.5));w.thm[Q].s[X][oa]=pa}}w.nsPsy.lastAttacks[Q]=
ta[2];for(N=fa=0;N<w.npart_l;N++){for(var ob=w.s3ind[N][0],$b=Y[ob]*m[ra[ob]],eb=w.s3_ll[fa++]*$b;++ob<=w.s3ind[N][1];)$b=Y[ob]*m[ra[ob]],eb=l(eb,w.s3_ll[fa++]*$b,ob,ob-N,w,0);eb*=.158489319246111;H[N]=w.blocktype_old[Q&1]==d.SHORT_TYPE?eb:g(Math.min(eb,Math.min(2*w.nb_1[Q][N],16*w.nb_2[Q][N])),eb,V);w.nb_2[Q][N]=w.nb_1[Q][N];w.nb_1[Q][N]=eb}for(;N<=d.CBANDS;++N)Y[N]=0,H[N]=0;C(w,Y,H,Q)}if((a.mode==na.STEREO||a.mode==na.JOINT_STEREO)&&0<a.interChRatio){var la=a.interChRatio,Na=a.internal_flags;if(1<
Na.channels_out){for(var Ga=0;Ga<d.SBMAX_l;Ga++){var Ob=Na.thm[0].l[Ga],ac=Na.thm[1].l[Ga];Na.thm[0].l[Ga]+=ac*la;Na.thm[1].l[Ga]+=Ob*la}for(Ga=0;Ga<d.SBMAX_s;Ga++)for(var Ba=0;3>Ba;Ba++)Ob=Na.thm[0].s[Ga][Ba],ac=Na.thm[1].s[Ga][Ba],Na.thm[0].s[Ga][Ba]+=ac*la,Na.thm[1].s[Ga][Ba]+=Ob*la}}if(a.mode==na.JOINT_STEREO){for(var Pb,da=0;da<d.SBMAX_l;da++)if(!(w.thm[0].l[da]>1.58*w.thm[1].l[da]||w.thm[1].l[da]>1.58*w.thm[0].l[da])){var Ya=w.mld_l[da]*w.en[3].l[da],nc=Math.max(w.thm[2].l[da],Math.min(w.thm[3].l[da],
Ya)),Ya=w.mld_l[da]*w.en[2].l[da],Za=Math.max(w.thm[3].l[da],Math.min(w.thm[2].l[da],Ya));w.thm[2].l[da]=nc;w.thm[3].l[da]=Za}for(da=0;da<d.SBMAX_s;da++)for(var Ua=0;3>Ua;Ua++)w.thm[0].s[da][Ua]>1.58*w.thm[1].s[da][Ua]||w.thm[1].s[da][Ua]>1.58*w.thm[0].s[da][Ua]||(Ya=w.mld_s[da]*w.en[3].s[da][Ua],nc=Math.max(w.thm[2].s[da][Ua],Math.min(w.thm[3].s[da][Ua],Ya)),Ya=w.mld_s[da]*w.en[2].s[da][Ua],Za=Math.max(w.thm[3].s[da][Ua],Math.min(w.thm[2].s[da][Ua],Ya)),w.thm[2].s[da][Ua]=nc,w.thm[3].s[da][Ua]=Za);
Pb=a.msfix;if(0<Math.abs(Pb)){for(var Qb=Pb,fc=Qb,bc=Math.pow(10,a.ATHlower*w.ATH.adjust),Qb=2*Qb,fc=2*fc,xa=0;xa<d.SBMAX_l;xa++){var ib,wa,Oa,pb;pb=w.ATH.cb_l[w.bm_l[xa]]*bc;ib=Math.min(Math.max(w.thm[0].l[xa],pb),Math.max(w.thm[1].l[xa],pb));wa=Math.max(w.thm[2].l[xa],pb);Oa=Math.max(w.thm[3].l[xa],pb);if(ib*Qb<wa+Oa){var Aa=ib*fc/(wa+Oa);wa*=Aa;Oa*=Aa;v(0<wa+Oa)}w.thm[2].l[xa]=Math.min(wa,w.thm[2].l[xa]);w.thm[3].l[xa]=Math.min(Oa,w.thm[3].l[xa])}bc*=d.BLKSIZE_s/d.BLKSIZE;for(xa=0;xa<d.SBMAX_s;xa++)for(var cb=
0;3>cb;cb++)pb=w.ATH.cb_s[w.bm_s[xa]]*bc,ib=Math.min(Math.max(w.thm[0].s[xa][cb],pb),Math.max(w.thm[1].s[xa][cb],pb)),wa=Math.max(w.thm[2].s[xa][cb],pb),Oa=Math.max(w.thm[3].s[xa][cb],pb),ib*Qb<wa+Oa&&(Aa=ib*Qb/(wa+Oa),wa*=Aa,Oa*=Aa,v(0<wa+Oa)),w.thm[2].s[xa][cb]=Math.min(w.thm[2].s[xa][cb],wa),w.thm[3].s[xa][cb]=Math.min(w.thm[3].s[xa][cb],Oa)}}var fb=a.internal_flags;a.short_blocks!=Ia.short_block_coupled||0!=ea[0]&&0!=ea[1]||(ea[0]=ea[1]=0);for(var Ca=0;Ca<fb.channels_out;Ca++)F[Ca]=d.NORM_TYPE,
a.short_blocks==Ia.short_block_dispensed&&(ea[Ca]=1),a.short_blocks==Ia.short_block_forced&&(ea[Ca]=0),0!=ea[Ca]?(v(fb.blocktype_old[Ca]!=d.START_TYPE),fb.blocktype_old[Ca]==d.SHORT_TYPE&&(F[Ca]=d.STOP_TYPE)):(F[Ca]=d.SHORT_TYPE,fb.blocktype_old[Ca]==d.NORM_TYPE&&(fb.blocktype_old[Ca]=d.START_TYPE),fb.blocktype_old[Ca]==d.STOP_TYPE&&(fb.blocktype_old[Ca]=d.SHORT_TYPE)),A[Ca]=fb.blocktype_old[Ca],fb.blocktype_old[Ca]=F[Ca];for(Q=0;Q<I;Q++){var gb,aa=0,Hb,Ib;if(1<Q){gb=x;aa=-2;Hb=d.NORM_TYPE;if(A[0]==
d.SHORT_TYPE||A[1]==d.SHORT_TYPE)Hb=d.SHORT_TYPE;Ib=n[e][Q-2]}else gb=p,aa=0,Hb=A[Q],Ib=f[e][Q];gb[aa+Q]=Hb==d.SHORT_TYPE?W(Ib,w.masking_lower):h(Ib,w.masking_lower);a.analysis&&(w.pinfo.pe[e][Q]=gb[aa+Q])}return 0};var A=[-1.730326E-17,-.01703172,-1.349528E-17,.0418072,-6.73278E-17,-.0876324,-3.0835E-17,.1863476,-1.104424E-16,-.627638];this.L3psycho_anal_vbr=function(c,k,e,f,l,n,p,x,w,y){for(var z=c.internal_flags,Y,D,H=L(d.HBLKSIZE),F=ya([3,d.HBLKSIZE_s]),ea=ya([2,d.BLKSIZE]),G=ya([2,3,d.BLKSIZE_s]),
R=ya([4,d.CBANDS]),N=ya([4,d.CBANDS]),Q=ya([4,3]),I=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],K=Z(2),T=c.mode==na.JOINT_STEREO?4:z.channels_out,oa=ya([2,576]),X=c.internal_flags,fa=X.channels_out,qa=c.mode==na.JOINT_STEREO?4:fa,V=0;V<fa;V++){firbuf=k[V];var ra=e+576-350-21+192;v(10==A.length);for(var O=0;576>O;O++){var Da,Ea;Da=firbuf[ra+O+10];for(var Ra=Ea=0;9>Ra;Ra+=2)Da+=A[Ra]*(firbuf[ra+O+Ra]+firbuf[ra+O+21-Ra]),Ea+=A[Ra+1]*(firbuf[ra+O+Ra+1]+firbuf[ra+O+21-Ra-1]);oa[V][O]=Da+Ea}l[f][V].en.assign(X.en[V]);
l[f][V].thm.assign(X.thm[V]);2<qa&&(n[f][V].en.assign(X.en[V+2]),n[f][V].thm.assign(X.thm[V+2]))}for(V=0;V<qa;V++){var za=L(12),sa=L(12),Ja=[0,0,0,0],Va=oa[V&1],Qa=0,kb=3==V?X.nsPsy.attackthre_s:X.nsPsy.attackthre,db=1;if(2==V)for(O=0,Ra=576;0<Ra;++O,--Ra){var lb=oa[0][O],ta=oa[1][O];oa[0][O]=lb+ta;oa[1][O]=lb-ta}for(O=0;3>O;O++)sa[O]=X.nsPsy.last_en_subshort[V][O+6],v(0<X.nsPsy.last_en_subshort[V][O+4]),za[O]=sa[O]/X.nsPsy.last_en_subshort[V][O+4],Ja[0]+=sa[O];for(O=0;9>O;O++){for(var Bb=Qa+64,Wa=
1;Qa<Bb;Qa++)Wa<Math.abs(Va[Qa])&&(Wa=Math.abs(Va[Qa]));X.nsPsy.last_en_subshort[V][O]=sa[O+3]=Wa;Ja[1+O/3]+=Wa;Wa>sa[O+3-2]?(v(0<sa[O+3-2]),Wa/=sa[O+3-2]):sa[O+3-2]>10*Wa?(v(0<Wa),Wa=sa[O+3-2]/(10*Wa)):Wa=0;za[O+3]=Wa}for(O=0;3>O;++O){var Ab=sa[3*O+3]+sa[3*O+4]+sa[3*O+5],Kb=1;6*sa[3*O+5]<Ab&&(Kb*=.5,6*sa[3*O+4]<Ab&&(Kb*=.5));Q[V][O]=Kb}if(c.analysis){for(var rb=za[0],O=1;12>O;O++)rb<za[O]&&(rb=za[O]);X.pinfo.ers[f][V]=X.pinfo.ers_save[V];X.pinfo.ers_save[V]=rb}for(O=0;12>O;O++)0==I[V][O/3]&&za[O]>
kb&&(I[V][O/3]=O%3+1);for(O=1;4>O;O++){var Lb=Ja[O-1],sb=Ja[O];4E4>Math.max(Lb,sb)&&Lb<1.7*sb&&sb<1.7*Lb&&(1==O&&I[V][0]<=I[V][O]&&(I[V][0]=0),I[V][O]=0)}I[V][0]<=X.nsPsy.lastAttacks[V]&&(I[V][0]=0);if(3==X.nsPsy.lastAttacks[V]||0!=I[V][0]+I[V][1]+I[V][2]+I[V][3])db=0,0!=I[V][1]&&0!=I[V][0]&&(I[V][1]=0),0!=I[V][2]&&0!=I[V][1]&&(I[V][2]=0),0!=I[V][3]&&0!=I[V][2]&&(I[V][3]=0);2>V?K[V]=db:0==db&&(K[0]=K[1]=0);w[V]=X.tot_ener[V]}var Fa=c.internal_flags;c.short_blocks!=Ia.short_block_coupled||0!=K[0]&&
0!=K[1]||(K[0]=K[1]=0);for(var Tb=0;Tb<Fa.channels_out;Tb++)c.short_blocks==Ia.short_block_dispensed&&(K[Tb]=1),c.short_blocks==Ia.short_block_forced&&(K[Tb]=0);for(var P=0;P<T;P++){var $a=P&1;Y=ea;var tb=c,ab=P,ub=f,Xa=H,Sa=Y,Ta=$a,vb=tb.internal_flags;if(2>ab)t.fft_long(vb,Sa[Ta],ab,k,e);else if(2==ab)for(var ha=d.BLKSIZE-1;0<=ha;--ha){var Wb=Sa[Ta+0][ha],lc=Sa[Ta+1][ha];Sa[Ta+0][ha]=(Wb+lc)*ca.SQRT2*.5;Sa[Ta+1][ha]=(Wb-lc)*ca.SQRT2*.5}Xa[0]=Sa[Ta+0][0];Xa[0]*=Xa[0];for(ha=d.BLKSIZE/2-1;0<=ha;--ha){var bb=
Sa[Ta+0][d.BLKSIZE/2-ha],ga=Sa[Ta+0][d.BLKSIZE/2+ha];Xa[d.BLKSIZE/2-ha]=.5*(bb*bb+ga*ga)}for(var Mb=0,ha=11;ha<d.HBLKSIZE;ha++)Mb+=Xa[ha];vb.tot_ener[ab]=Mb;if(tb.analysis){for(ha=0;ha<d.HBLKSIZE;ha++)vb.pinfo.energy[ub][ab][ha]=vb.pinfo.energy_save[ab][ha],vb.pinfo.energy_save[ab][ha]=Xa[ha];vb.pinfo.pe[ub][ab]=vb.pe[ab]}var Cb=P,Ka=H,Db=c.internal_flags;2==c.athaa_loudapprox&&2>Cb&&(Db.loudness_sq[f][Cb]=Db.loudness_sq_save[Cb],Db.loudness_sq_save[Cb]=u(Ka,Db));if(0!=K[$a]){var va=z,mc=H,wb=R[P],
pa=N[P],Eb=P,Ub=L(d.CBANDS),Vb=L(d.CBANDS),mb=Z(d.CBANDS+2),ka=void 0;b(va,mc,wb,Ub,Vb);r(va,Ub,Vb,mb);for(var La=0,ka=0;ka<va.npart_l;ka++){var Ma,ia,Yb,jc,nb=va.s3ind[ka][0],kc=va.s3ind[ka][1],Fb=0,xb=0,Fb=mb[nb],xb=xb+1;ia=va.s3_ll[La]*wb[nb]*m[mb[nb]];++La;for(++nb;nb<=kc;)Fb+=mb[nb],xb+=1,Ma=va.s3_ll[La]*wb[nb]*m[mb[nb]],ia=jc=q(ia,Ma,nb-ka),++La,++nb;Fb=(1+2*Fb)/(2*xb);Yb=.5*m[Fb];ia*=Yb;if(va.blocktype_old[Eb&1]==d.SHORT_TYPE){var Nb=2*va.nb_1[Eb][ka];pa[ka]=0<Nb?Math.min(ia,Nb):Math.min(ia,
.3*wb[ka])}else{var Zb=16*va.nb_2[Eb][ka],Gb=2*va.nb_1[Eb][ka];0>=Zb&&(Zb=ia);0>=Gb&&(Gb=ia);Nb=va.blocktype_old[Eb&1]==d.NORM_TYPE?Math.min(Gb,Zb):Gb;pa[ka]=Math.min(ia,Nb)}va.nb_2[Eb][ka]=va.nb_1[Eb][ka];va.nb_1[Eb][ka]=ia;Ma=Ub[ka];Ma*=va.minval_l[ka];Ma*=Yb;pa[ka]>Ma&&(pa[ka]=Ma);1<va.masking_lower&&(pa[ka]*=va.masking_lower);pa[ka]>wb[ka]&&(pa[ka]=wb[ka]);1>va.masking_lower&&(pa[ka]*=va.masking_lower);v(0<=pa[ka])}for(;ka<d.CBANDS;++ka)wb[ka]=0,pa[ka]=0}else for(var ob=z,$b=P,eb=0;eb<ob.npart_l;eb++)ob.nb_2[$b][eb]=
ob.nb_1[$b][eb],ob.nb_1[$b][eb]=0}2==K[0]+K[1]&&c.mode==na.JOINT_STEREO&&a(R,N,z.mld_cb_l,z.ATH.cb_l,c.ATHlower*z.ATH.adjust,c.msfix,z.npart_l);for(P=0;P<T;P++)$a=P&1,0!=K[$a]&&C(z,R[P],N[P],P);for(var la=0;3>la;la++){for(P=0;P<T;++P)if($a=P&1,0!=K[$a]){var Na=z,Ga=P;if(0==la)for(var Ob=0;Ob<Na.npart_s;Ob++)Na.nb_s2[Ga][Ob]=Na.nb_s1[Ga][Ob],Na.nb_s1[Ga][Ob]=0}else{D=G;var ac=P,Ba=la,Pb=F,da=D,Ya=$a,nc=c.internal_flags;0==Ba&&2>ac&&t.fft_short(nc,da[Ya],ac,k,e);if(2==ac)for(var Za=d.BLKSIZE_s-1;0<=
Za;--Za){var Ua=da[Ya+0][Ba][Za],Qb=da[Ya+1][Ba][Za];da[Ya+0][Ba][Za]=(Ua+Qb)*ca.SQRT2*.5;da[Ya+1][Ba][Za]=(Ua-Qb)*ca.SQRT2*.5}Pb[Ba][0]=da[Ya+0][Ba][0];Pb[Ba][0]*=Pb[Ba][0];for(Za=d.BLKSIZE_s/2-1;0<=Za;--Za){var fc=da[Ya+0][Ba][d.BLKSIZE_s/2-Za],bc=da[Ya+0][Ba][d.BLKSIZE_s/2+Za];Pb[Ba][d.BLKSIZE_s/2-Za]=.5*(fc*fc+bc*bc)}for(var xa=F,ib=R[P],wa=N[P],Oa=P,pb=la,Aa=c.internal_flags,cb=new float[d.CBANDS],fb=L(d.CBANDS),Ca=void 0,gb=void 0,aa=void 0,Hb=new int[d.CBANDS],aa=gb=0;aa<Aa.npart_s;++aa){for(var Ib=
0,Xb=0,zc=Aa.numlines_s[aa],Ca=0;Ca<zc;++Ca,++gb){var Ac=xa[pb][gb],Ib=Ib+Ac;Xb<Ac&&(Xb=Ac)}ib[aa]=Ib;v(0<=Ib);cb[aa]=Xb;v(0<zc);fb[aa]=Ib/zc;v(0<=fb[aa])}v(aa==Aa.npart_s);for(v(129==gb);aa<d.CBANDS;++aa)cb[aa]=0,fb[aa]=0;var Pa=Aa,yb=cb,cc=fb,gc=Hb,hc=m.length-1,ba=0,Ha=cc[ba]+cc[ba+1];v(0<=Ha);if(0<Ha){var jb=yb[ba];jb<yb[ba+1]&&(jb=yb[ba+1]);v(0<Pa.numlines_s[ba]+Pa.numlines_s[ba+1]-1);var Ha=20*(2*jb-Ha)/(Ha*(Pa.numlines_s[ba]+Pa.numlines_s[ba+1]-1)),zb=0|Ha;zb>hc&&(zb=hc);gc[ba]=zb}else gc[ba]=
0;for(ba=1;ba<Pa.npart_s-1;ba++)Ha=cc[ba-1]+cc[ba]+cc[ba+1],v(ba+1<Pa.npart_s),v(0<=Ha),0<Ha?(jb=yb[ba-1],jb<yb[ba]&&(jb=yb[ba]),jb<yb[ba+1]&&(jb=yb[ba+1]),v(0<Pa.numlines_s[ba-1]+Pa.numlines_s[ba]+Pa.numlines_s[ba+1]-1),Ha=20*(3*jb-Ha)/(Ha*(Pa.numlines_s[ba-1]+Pa.numlines_s[ba]+Pa.numlines_s[ba+1]-1)),zb=0|Ha,zb>hc&&(zb=hc),gc[ba]=zb):gc[ba]=0;v(0<ba);v(ba==Pa.npart_s-1);Ha=cc[ba-1]+cc[ba];v(0<=Ha);0<Ha?(jb=yb[ba-1],jb<yb[ba]&&(jb=yb[ba]),v(0<Pa.numlines_s[ba-1]+Pa.numlines_s[ba]-1),Ha=20*(2*jb-
Ha)/(Ha*(Pa.numlines_s[ba-1]+Pa.numlines_s[ba]-1)),zb=0|Ha,zb>hc&&(zb=hc),gc[ba]=zb):gc[ba]=0;v(ba==Pa.npart_s-1);for(gb=aa=0;aa<Aa.npart_s;aa++){var Jb=Aa.s3ind_s[aa][0],qc=Aa.s3ind_s[aa][1],ic,sc,Rb,dc,Bc;ic=Hb[Jb];sc=1;dc=Aa.s3_ss[gb]*ib[Jb]*m[Hb[Jb]];++gb;for(++Jb;Jb<=qc;)ic+=Hb[Jb],sc+=1,Rb=Aa.s3_ss[gb]*ib[Jb]*m[Hb[Jb]],dc=q(dc,Rb,Jb-aa),++gb,++Jb;ic=(1+2*ic)/(2*sc);Bc=.5*m[ic];dc*=Bc;wa[aa]=dc;Aa.nb_s2[Oa][aa]=Aa.nb_s1[Oa][aa];Aa.nb_s1[Oa][aa]=dc;Rb=cb[aa];Rb*=Aa.minval_s[aa];Rb*=Bc;wa[aa]>
Rb&&(wa[aa]=Rb);1<Aa.masking_lower&&(wa[aa]*=Aa.masking_lower);wa[aa]>ib[aa]&&(wa[aa]=ib[aa]);1>Aa.masking_lower&&(wa[aa]*=Aa.masking_lower);v(0<=wa[aa])}for(;aa<d.CBANDS;++aa)ib[aa]=0,wa[aa]=0}0==K[0]+K[1]&&c.mode==na.JOINT_STEREO&&a(R,N,z.mld_cb_s,z.ATH.cb_s,c.ATHlower*z.ATH.adjust,c.msfix,z.npart_s);for(P=0;P<T;++P)$a=P&1,0==K[$a]&&M(z,R[P],N[P],P,la)}for(P=0;P<T;P++)if($a=P&1,0==K[$a])for(var ec=0;ec<d.SBMAX_s;ec++){for(var Ec=L(3),la=0;3>la;la++){var hb=z.thm[P].s[ec][la],hb=.8*hb;if(2<=I[P][la]||
1==I[P][la+1])var oc=0!=la?la-1:2,pc=g(z.thm[P].s[ec][oc],hb,.36),hb=Math.min(hb,pc);else if(1==I[P][la])oc=0!=la?la-1:2,pc=g(z.thm[P].s[ec][oc],hb,.18),hb=Math.min(hb,pc);else if(0!=la&&3==I[P][la-1]||0==la&&3==z.nsPsy.lastAttacks[P])oc=2!=la?la+1:0,pc=g(z.thm[P].s[ec][oc],hb,.18),hb=Math.min(hb,pc);hb*=Q[P][la];Ec[la]=hb}for(la=0;3>la;la++)z.thm[P].s[ec][la]=Ec[la]}for(P=0;P<T;P++)z.nsPsy.lastAttacks[P]=I[P][2];for(var Sb=c.internal_flags,qb=0;qb<Sb.channels_out;qb++){var Cc=d.NORM_TYPE;0!=K[qb]?
(v(Sb.blocktype_old[qb]!=d.START_TYPE),Sb.blocktype_old[qb]==d.SHORT_TYPE&&(Cc=d.STOP_TYPE)):(Cc=d.SHORT_TYPE,Sb.blocktype_old[qb]==d.NORM_TYPE&&(Sb.blocktype_old[qb]=d.START_TYPE),Sb.blocktype_old[qb]==d.STOP_TYPE&&(Sb.blocktype_old[qb]=d.SHORT_TYPE));y[qb]=Sb.blocktype_old[qb];Sb.blocktype_old[qb]=Cc}for(P=0;P<T;P++){var tc,uc,vc,wc;if(1<P){tc=x;uc=-2;vc=d.NORM_TYPE;if(y[0]==d.SHORT_TYPE||y[1]==d.SHORT_TYPE)vc=d.SHORT_TYPE;wc=n[f][P-2]}else tc=p,uc=0,vc=y[P],wc=l[f][P];tc[uc+P]=vc==d.SHORT_TYPE?
W(wc,z.masking_lower):h(wc,z.masking_lower);c.analysis&&(z.pinfo.pe[f][P]=tc[uc+P])}return 0};this.psymodel_init=function(a){var b=a.internal_flags,e,m=!0,g=13,f=0,h=0,l=-8.25,x=-4.5,q=L(d.CBANDS),w=L(d.CBANDS),u=L(d.CBANDS),r=a.out_samplerate;switch(a.experimentalZ){default:case 0:m=!0;break;case 1:m=a.VBR==G.vbr_mtrh||a.VBR==G.vbr_mt?!1:!0;break;case 2:m=!1;break;case 3:g=8,f=-1.75,h=-.0125,l=-8.25,x=-2.25}b.ms_ener_ratio_old=.25;b.blocktype_old[0]=b.blocktype_old[1]=d.NORM_TYPE;for(e=0;4>e;++e){for(var A=
0;A<d.CBANDS;++A)b.nb_1[e][A]=1E20,b.nb_2[e][A]=1E20,b.nb_s1[e][A]=b.nb_s2[e][A]=1;for(var B=0;B<d.SBMAX_l;B++)b.en[e].l[B]=1E20,b.thm[e].l[B]=1E20;for(A=0;3>A;++A){for(B=0;B<d.SBMAX_s;B++)b.en[e].s[B][A]=1E20,b.thm[e].s[B][A]=1E20;b.nsPsy.lastAttacks[e]=0}for(A=0;9>A;A++)b.nsPsy.last_en_subshort[e][A]=10}b.loudness_sq_save[0]=b.loudness_sq_save[1]=0;b.npart_l=p(b.numlines_l,b.bo_l,b.bm_l,q,w,b.mld_l,b.PSY.bo_l_weight,r,d.BLKSIZE,b.scalefac_band.l,d.BLKSIZE/1152,d.SBMAX_l);v(b.npart_l<d.CBANDS);for(e=
0;e<b.npart_l;e++)B=f,q[e]>=g&&(B=h*(q[e]-g)/(24-g)+f*(24-q[e])/(24-g)),u[e]=Math.pow(10,B/10),b.rnumlines_l[e]=0<b.numlines_l[e]?1/b.numlines_l[e]:0;b.s3_ll=n(b.s3ind,b.npart_l,q,w,u,m);for(e=A=0;e<b.npart_l;e++){h=lb.MAX_VALUE;for(B=0;B<b.numlines_l[e];B++,A++)f=r*A/(1E3*d.BLKSIZE),f=this.ATHformula(1E3*f,a)-20,f=Math.pow(10,.1*f),f*=b.numlines_l[e],h>f&&(h=f);b.ATH.cb_l[e]=h;h=-20+20*q[e]/10;6<h&&(h=100);-15>h&&(h=-15);h-=8;b.minval_l[e]=Math.pow(10,h/10)*b.numlines_l[e]}b.npart_s=p(b.numlines_s,
b.bo_s,b.bm_s,q,w,b.mld_s,b.PSY.bo_s_weight,r,d.BLKSIZE_s,b.scalefac_band.s,d.BLKSIZE_s/384,d.SBMAX_s);v(b.npart_s<d.CBANDS);for(e=A=0;e<b.npart_s;e++){B=l;q[e]>=g&&(B=x*(q[e]-g)/(24-g)+l*(24-q[e])/(24-g));u[e]=Math.pow(10,B/10);h=lb.MAX_VALUE;for(B=0;B<b.numlines_s[e];B++,A++)f=r*A/(1E3*d.BLKSIZE_s),f=this.ATHformula(1E3*f,a)-20,f=Math.pow(10,.1*f),f*=b.numlines_s[e],h>f&&(h=f);b.ATH.cb_s[e]=h;h=-7+7*q[e]/12;12<q[e]&&(h*=1+3.1*Math.log(1+h));12>q[e]&&(h*=1+2.3*Math.log(1-h));-15>h&&(h=-15);h-=8;
b.minval_s[e]=Math.pow(10,h/10)*b.numlines_s[e]}b.s3_ss=n(b.s3ind_s,b.npart_s,q,w,u,m);y=Math.pow(10,.5625);z=Math.pow(10,1.5);k=Math.pow(10,1.5);t.init_fft(b);b.decay=Math.exp(-2.302585092994046/(.01*r/192));e=3.5;0!=(a.exp_nspsytune&2)&&(e=1);0<Math.abs(a.msfix)&&(e=a.msfix);a.msfix=e;for(m=0;m<b.npart_l;m++)b.s3ind[m][1]>b.npart_l-1&&(b.s3ind[m][1]=b.npart_l-1);b.ATH.decay=Math.pow(10,576*b.mode_gr/r*-1.2);b.ATH.adjust=.01;b.ATH.adjustLimit=1;v(b.bo_l[d.SBMAX_l-1]<=b.npart_l);v(b.bo_s[d.SBMAX_s-
1]<=b.npart_s);if(-1!=a.ATHtype){A=a.out_samplerate/d.BLKSIZE;for(e=f=m=0;e<d.BLKSIZE/2;++e)f+=A,b.ATH.eql_w[e]=1/Math.pow(10,this.ATHformula(f,a)/10),m+=b.ATH.eql_w[e];m=1/m;for(e=d.BLKSIZE/2;0<=--e;)b.ATH.eql_w[e]*=m}for(m=A=0;m<b.npart_s;++m)for(e=0;e<b.numlines_s[m];++e)++A;v(129==A);for(m=A=0;m<b.npart_l;++m)for(e=0;e<b.numlines_l[m];++e)++A;v(513==A);for(e=A=0;e<b.npart_l;e++)f=r*(A+b.numlines_l[e]/2)/(1*d.BLKSIZE),b.mld_cb_l[e]=c(f),A+=b.numlines_l[e];for(;e<d.CBANDS;++e)b.mld_cb_l[e]=1;for(e=
A=0;e<b.npart_s;e++)f=r*(A+b.numlines_s[e]/2)/(1*d.BLKSIZE_s),b.mld_cb_s[e]=c(f),A+=b.numlines_s[e];for(;e<d.CBANDS;++e)b.mld_cb_s[e]=1;return 0};this.ATHformula=function(a,b){var c;switch(b.ATHtype){case 0:c=e(a,9);break;case 1:c=e(a,-1);break;case 2:c=e(a,0);break;case 3:c=e(a,1)+6;break;case 4:c=e(a,b.ATHcurve);break;default:c=e(a,0)}return c}}function I(){function B(){this.mask_adjust_short=this.mask_adjust=0;this.bo_l_weight=L(d.SBMAX_l);this.bo_s_weight=L(d.SBMAX_s)}function l(){this.lowerlimit=
0}function q(a,b){this.lowpass=b}function M(a){return 1<a?0:0>=a?1:Math.cos(Math.PI/2*a)}function C(a,b){switch(a){case 44100:return b.version=1,0;case 48E3:return b.version=1;case 32E3:return b.version=1,2;case 22050:return b.version=0;case 24E3:return b.version=0,1;case 16E3:return b.version=0,2;case 11025:return b.version=0;case 12E3:return b.version=0,1;case 8E3:return b.version=0,2;default:return b.version=0,-1}}function g(a,b,c){16E3>c&&(b=2);c=u.bitrate_table[b][1];for(var d=2;14>=d;d++)0<
u.bitrate_table[b][d]&&Math.abs(u.bitrate_table[b][d]-a)<Math.abs(c-a)&&(c=u.bitrate_table[b][d]);return c}function W(a,b,c){16E3>c&&(b=2);for(c=0;14>=c;c++)if(0<u.bitrate_table[b][c]&&u.bitrate_table[b][c]==a)return c;return-1}function h(a,b){var c=[new q(8,2E3),new q(16,3700),new q(24,3900),new q(32,5500),new q(40,7E3),new q(48,7500),new q(56,1E4),new q(64,11E3),new q(80,13500),new q(96,15100),new q(112,15600),new q(128,17E3),new q(160,17500),new q(192,18600),new q(224,19400),new q(256,19700),new q(320,
20500)],d=f.nearestBitrateFullIndex(b);a.lowerlimit=c[d].lowpass}function b(a){var b=d.BLKSIZE+a.framesize-d.FFTOFFSET,b=Math.max(b,512+a.framesize-32);v(T.MFSIZE>=b);return b}function r(c,e,g,h,l,n,q){var w=c.internal_flags,t=0,r,u,y=[null,null],B=[null,null];if(4294479419!=w.Class_ID)return-3;if(0==h)return 0;r=p.copy_buffer(w,l,n,q,0);if(0>r)return r;n+=r;t+=r;B[0]=e;B[1]=g;if(ra.NEQ(c.scale,0)&&ra.NEQ(c.scale,1))for(r=0;r<h;++r)B[0][r]*=c.scale,2==w.channels_out&&(B[1][r]*=c.scale);if(ra.NEQ(c.scale_left,
0)&&ra.NEQ(c.scale_left,1))for(r=0;r<h;++r)B[0][r]*=c.scale_left;if(ra.NEQ(c.scale_right,0)&&ra.NEQ(c.scale_right,1))for(r=0;r<h;++r)B[1][r]*=c.scale_right;if(2==c.num_channels&&1==w.channels_out)for(r=0;r<h;++r)B[0][r]=.5*(B[0][r]+B[1][r]),B[1][r]=0;e=b(c);y[0]=w.mfbuf[0];y[1]=w.mfbuf[1];for(g=0;0<h;){var z=[null,null];r=u=0;z[0]=B[0];z[1]=B[1];r=new a;var C=c;u=y;var D=g,G=h,M=r,I=C.internal_flags;if(.9999>I.resample_ratio||1.0001<I.resample_ratio)for(var L=0;L<I.channels_out;L++){var N=new NumUsed;
M.n_out=fill_buffer_resample(C,u[L],I.mf_size,C.framesize,z[L],D,G,N,L);M.n_in=N.num_used}else for(M.n_out=Math.min(C.framesize,G),M.n_in=M.n_out,C=0;C<M.n_out;++C)u[0][I.mf_size+C]=z[0][D+C],2==I.channels_out&&(u[1][I.mf_size+C]=z[1][D+C]);u=r.n_in;r=r.n_out;if(w.findReplayGain&&!w.decode_on_the_fly&&F.AnalyzeSamples(w.rgdata,y[0],w.mf_size,y[1],w.mf_size,r,w.channels_out)==X.GAIN_ANALYSIS_ERROR)return-6;h-=u;g+=u;w.mf_size+=r;v(w.mf_size<=T.MFSIZE);1>w.mf_samples_to_encode&&(w.mf_samples_to_encode=
d.ENCDELAY+d.POSTDELAY);w.mf_samples_to_encode+=r;if(w.mf_size>=e){u=q-t;0==q&&(u=0);r=c;u=f.enc.lame_encode_mp3_frame(r,y[0],y[1],l,n,u);r.frameNum++;r=u;if(0>r)return r;n+=r;t+=r;w.mf_size-=c.framesize;w.mf_samples_to_encode-=c.framesize;for(u=0;u<w.channels_out;u++)for(r=0;r<w.mf_size;r++)y[u][r]=y[u][r+c.framesize]}}v(0==h);return t}function a(){this.n_out=this.n_in=0}var f=this;I.V9=410;I.V8=420;I.V7=430;I.V6=440;I.V5=450;I.V4=460;I.V3=470;I.V2=480;I.V1=490;I.V0=500;I.R3MIX=1E3;I.STANDARD=1001;
I.EXTREME=1002;I.INSANE=1003;I.STANDARD_FAST=1004;I.EXTREME_FAST=1005;I.MEDIUM=1006;I.MEDIUM_FAST=1007;I.LAME_MAXMP3BUFFER=147456;var F,p,n,c,e,t=new Xb,D,y,z;this.enc=new d;this.setModules=function(a,b,d,g,f,h,l,q,r){F=a;p=b;n=d;c=g;e=f;D=h;y=q;z=r;this.enc.setModules(p,t,c,D)};this.lame_init=function(){var a=new Jc,b;a.class_id=4294479419;b=a.internal_flags=new T;a.mode=na.NOT_SET;a.original=1;a.in_samplerate=44100;a.num_channels=2;a.num_samples=-1;a.bWriteVbrTag=!0;a.quality=-1;a.short_blocks=
null;b.subblock_gain=-1;a.lowpassfreq=0;a.highpassfreq=0;a.lowpasswidth=-1;a.highpasswidth=-1;a.VBR=G.vbr_off;a.VBR_q=4;a.ATHcurve=-1;a.VBR_mean_bitrate_kbps=128;a.VBR_min_bitrate_kbps=0;a.VBR_max_bitrate_kbps=0;a.VBR_hard_min=0;b.VBR_min_bitrate=1;b.VBR_max_bitrate=13;a.quant_comp=-1;a.quant_comp_short=-1;a.msfix=-1;b.resample_ratio=1;b.OldValue[0]=180;b.OldValue[1]=180;b.CurrentStep[0]=4;b.CurrentStep[1]=4;b.masking_lower=1;b.nsPsy.attackthre=-1;b.nsPsy.attackthre_s=-1;a.scale=-1;a.athaa_type=-1;
a.ATHtype=-1;a.athaa_loudapprox=-1;a.athaa_sensitivity=0;a.useTemporal=null;a.interChRatio=-1;b.mf_samples_to_encode=d.ENCDELAY+d.POSTDELAY;a.encoder_padding=0;b.mf_size=d.ENCDELAY-d.MDCTDELAY;a.findReplayGain=!1;a.decode_on_the_fly=!1;b.decode_on_the_fly=!1;b.findReplayGain=!1;b.findPeakSample=!1;b.RadioGain=0;b.AudiophileGain=0;b.noclipGainChange=0;b.noclipScale=-1;a.preset=0;a.write_id3tag_automatic=!0;a.lame_allocated_gfp=1;return a};this.nearestBitrateFullIndex=function(a){for(var b=[8,16,24,
32,40,48,56,64,80,96,112,128,160,192,224,256,320],c=0,d=0,e=0,g=0,g=b[16],e=16,d=b[16],c=16,f=0;16>f;f++)if(Math.max(a,b[f+1])!=a){g=b[f+1];e=f+1;d=b[f];c=f;break}return g-a>a-d?c:e};this.lame_init_params=function(a){var b=a.internal_flags;b.Class_ID=0;null==b.ATH&&(b.ATH=new Kc);null==b.PSY&&(b.PSY=new B);null==b.rgdata&&(b.rgdata=new Lc);b.channels_in=a.num_channels;1==b.channels_in&&(a.mode=na.MONO);b.channels_out=a.mode==na.MONO?1:2;b.mode_ext=d.MPG_MD_MS_LR;a.mode==na.MONO&&(a.force_ms=!1);a.VBR==
G.vbr_off&&128!=a.VBR_mean_bitrate_kbps&&0==a.brate&&(a.brate=a.VBR_mean_bitrate_kbps);a.VBR!=G.vbr_off&&a.VBR!=G.vbr_mtrh&&a.VBR!=G.vbr_mt&&(a.free_format=!1);a.VBR==G.vbr_off&&0==a.brate&&ra.EQ(a.compression_ratio,0)&&(a.compression_ratio=11.025);a.VBR==G.vbr_off&&0<a.compression_ratio&&(0==a.out_samplerate&&(a.out_samplerate=map2MP3Frequency(int(.97*a.in_samplerate))),a.brate=0|16*a.out_samplerate*b.channels_out/(1E3*a.compression_ratio),b.samplerate_index=C(a.out_samplerate,a),a.free_format||
(a.brate=g(a.brate,a.version,a.out_samplerate)));0!=a.out_samplerate&&(16E3>a.out_samplerate?(a.VBR_mean_bitrate_kbps=Math.max(a.VBR_mean_bitrate_kbps,8),a.VBR_mean_bitrate_kbps=Math.min(a.VBR_mean_bitrate_kbps,64)):32E3>a.out_samplerate?(a.VBR_mean_bitrate_kbps=Math.max(a.VBR_mean_bitrate_kbps,8),a.VBR_mean_bitrate_kbps=Math.min(a.VBR_mean_bitrate_kbps,160)):(a.VBR_mean_bitrate_kbps=Math.max(a.VBR_mean_bitrate_kbps,32),a.VBR_mean_bitrate_kbps=Math.min(a.VBR_mean_bitrate_kbps,320)));if(0==a.lowpassfreq){var f=
16E3;switch(a.VBR){case G.vbr_off:f=new l;h(f,a.brate);f=f.lowerlimit;break;case G.vbr_abr:f=new l;h(f,a.VBR_mean_bitrate_kbps);f=f.lowerlimit;break;case G.vbr_rh:var q=[19500,19E3,18600,18E3,17500,16E3,15600,14900,12500,1E4,3950];if(0<=a.VBR_q&&9>=a.VBR_q)var f=q[a.VBR_q],q=q[a.VBR_q+1],r=a.VBR_q_frac,f=linear_int(f,q,r);else f=19500;break;default:q=[19500,19E3,18500,18E3,17500,16500,15500,14500,12500,9500,3950],0<=a.VBR_q&&9>=a.VBR_q?(f=q[a.VBR_q],q=q[a.VBR_q+1],r=a.VBR_q_frac,f=linear_int(f,q,
r)):f=19500}a.mode!=na.MONO||a.VBR!=G.vbr_off&&a.VBR!=G.vbr_abr||(f*=1.5);a.lowpassfreq=f|0}0==a.out_samplerate&&(2*a.lowpassfreq>a.in_samplerate&&(a.lowpassfreq=a.in_samplerate/2),f=a.lowpassfreq|0,q=a.in_samplerate,r=44100,48E3<=q?r=48E3:44100<=q?r=44100:32E3<=q?r=32E3:24E3<=q?r=24E3:22050<=q?r=22050:16E3<=q?r=16E3:12E3<=q?r=12E3:11025<=q?r=11025:8E3<=q&&(r=8E3),-1==f?f=r:(15960>=f&&(r=44100),15250>=f&&(r=32E3),11220>=f&&(r=24E3),9970>=f&&(r=22050),7230>=f&&(r=16E3),5420>=f&&(r=12E3),4510>=f&&(r=
11025),3970>=f&&(r=8E3),f=q<r?44100<q?48E3:32E3<q?44100:24E3<q?32E3:22050<q?24E3:16E3<q?22050:12E3<q?16E3:11025<q?12E3:8E3<q?11025:8E3:r),a.out_samplerate=f);a.lowpassfreq=Math.min(20500,a.lowpassfreq);a.lowpassfreq=Math.min(a.out_samplerate/2,a.lowpassfreq);a.VBR==G.vbr_off&&(a.compression_ratio=16*a.out_samplerate*b.channels_out/(1E3*a.brate));a.VBR==G.vbr_abr&&(a.compression_ratio=16*a.out_samplerate*b.channels_out/(1E3*a.VBR_mean_bitrate_kbps));a.bWriteVbrTag||(a.findReplayGain=!1,a.decode_on_the_fly=
!1,b.findPeakSample=!1);b.findReplayGain=a.findReplayGain;b.decode_on_the_fly=a.decode_on_the_fly;b.decode_on_the_fly&&(b.findPeakSample=!0);if(b.findReplayGain&&F.InitGainAnalysis(b.rgdata,a.out_samplerate)==X.INIT_GAIN_ANALYSIS_ERROR)return a.internal_flags=null,-6;b.decode_on_the_fly&&!a.decode_only&&(null!=b.hip&&z.hip_decode_exit(b.hip),b.hip=z.hip_decode_init());b.mode_gr=24E3>=a.out_samplerate?1:2;a.framesize=576*b.mode_gr;a.encoder_delay=d.ENCDELAY;b.resample_ratio=a.in_samplerate/a.out_samplerate;
switch(a.VBR){case G.vbr_mt:case G.vbr_rh:case G.vbr_mtrh:a.compression_ratio=[5.7,6.5,7.3,8.2,10,11.9,13,14,15,16.5][a.VBR_q];break;case G.vbr_abr:a.compression_ratio=16*a.out_samplerate*b.channels_out/(1E3*a.VBR_mean_bitrate_kbps);break;default:a.compression_ratio=16*a.out_samplerate*b.channels_out/(1E3*a.brate)}a.mode==na.NOT_SET&&(a.mode=na.JOINT_STEREO);0<a.highpassfreq?(b.highpass1=2*a.highpassfreq,b.highpass2=0<=a.highpasswidth?2*(a.highpassfreq+a.highpasswidth):2*a.highpassfreq,b.highpass1/=
a.out_samplerate,b.highpass2/=a.out_samplerate):(b.highpass1=0,b.highpass2=0);0<a.lowpassfreq?(b.lowpass2=2*a.lowpassfreq,0<=a.lowpasswidth?(b.lowpass1=2*(a.lowpassfreq-a.lowpasswidth),0>b.lowpass1&&(b.lowpass1=0)):b.lowpass1=2*a.lowpassfreq,b.lowpass1/=a.out_samplerate,b.lowpass2/=a.out_samplerate):(b.lowpass1=0,b.lowpass2=0);var f=a.internal_flags,I=32,H=-1;if(0<f.lowpass1){for(var w=999,q=0;31>=q;q++)r=q/31,r>=f.lowpass2&&(I=Math.min(I,q)),f.lowpass1<r&&r<f.lowpass2&&(w=Math.min(w,q));f.lowpass1=
999==w?(I-.75)/31:(w-.75)/31;f.lowpass2=I/31}0<f.highpass2&&f.highpass2<.75/31*.9&&(f.highpass1=0,f.highpass2=0,N.err.println("Warning: highpass filter disabled.  highpass frequency too small\n"));if(0<f.highpass2){I=-1;for(q=0;31>=q;q++)r=q/31,r<=f.highpass1&&(H=Math.max(H,q)),f.highpass1<r&&r<f.highpass2&&(I=Math.max(I,q));f.highpass1=H/31;f.highpass2=-1==I?(H+.75)/31:(I+.75)/31}for(q=0;32>q;q++)r=q/31,H=f.highpass2>f.highpass1?M((f.highpass2-r)/(f.highpass2-f.highpass1+1E-20)):1,r=f.lowpass2>f.lowpass1?
M((r-f.lowpass1)/(f.lowpass2-f.lowpass1+1E-20)):1,f.amp_filter[q]=H*r;b.samplerate_index=C(a.out_samplerate,a);if(0>b.samplerate_index)return a.internal_flags=null,-1;if(a.VBR==G.vbr_off)if(a.free_format)b.bitrate_index=0;else{if(a.brate=g(a.brate,a.version,a.out_samplerate),b.bitrate_index=W(a.brate,a.version,a.out_samplerate),0>=b.bitrate_index)return a.internal_flags=null,-1}else b.bitrate_index=1;a.analysis&&(a.bWriteVbrTag=!1);null!=b.pinfo&&(a.bWriteVbrTag=!1);p.init_bit_stream_w(b);f=b.samplerate_index+
3*a.version+6*(16E3>a.out_samplerate?1:0);for(q=0;q<d.SBMAX_l+1;q++)b.scalefac_band.l[q]=c.sfBandIndex[f].l[q];for(q=0;q<d.PSFB21+1;q++)r=(b.scalefac_band.l[22]-b.scalefac_band.l[21])/d.PSFB21,r=b.scalefac_band.l[21]+q*r,b.scalefac_band.psfb21[q]=r;b.scalefac_band.psfb21[d.PSFB21]=576;for(q=0;q<d.SBMAX_s+1;q++)b.scalefac_band.s[q]=c.sfBandIndex[f].s[q];for(q=0;q<d.PSFB12+1;q++)r=(b.scalefac_band.s[13]-b.scalefac_band.s[12])/d.PSFB12,r=b.scalefac_band.s[12]+q*r,b.scalefac_band.psfb12[q]=r;b.scalefac_band.psfb12[d.PSFB12]=
192;b.sideinfo_len=1==a.version?1==b.channels_out?21:36:1==b.channels_out?13:21;a.error_protection&&(b.sideinfo_len+=2);f=a.internal_flags;a.frameNum=0;a.write_id3tag_automatic&&y.id3tag_write_v2(a);f.bitrate_stereoMode_Hist=kb([16,5]);f.bitrate_blockType_Hist=kb([16,6]);f.PeakSample=0;a.bWriteVbrTag&&D.InitVbrTag(a);b.Class_ID=4294479419;for(f=0;19>f;f++)b.nsPsy.pefirbuf[f]=700*b.mode_gr*b.channels_out;-1==a.ATHtype&&(a.ATHtype=4);v(9>=a.VBR_q);v(0<=a.VBR_q);switch(a.VBR){case G.vbr_mt:a.VBR=G.vbr_mtrh;
case G.vbr_mtrh:null==a.useTemporal&&(a.useTemporal=!1);n.apply_preset(a,500-10*a.VBR_q,0);0>a.quality&&(a.quality=LAME_DEFAULT_QUALITY);5>a.quality&&(a.quality=0);5<a.quality&&(a.quality=5);b.PSY.mask_adjust=a.maskingadjust;b.PSY.mask_adjust_short=a.maskingadjust_short;b.sfb21_extra=a.experimentalY?!1:44E3<a.out_samplerate;b.iteration_loop=new VBRNewIterationLoop(e);break;case G.vbr_rh:n.apply_preset(a,500-10*a.VBR_q,0);b.PSY.mask_adjust=a.maskingadjust;b.PSY.mask_adjust_short=a.maskingadjust_short;
b.sfb21_extra=a.experimentalY?!1:44E3<a.out_samplerate;6<a.quality&&(a.quality=6);0>a.quality&&(a.quality=LAME_DEFAULT_QUALITY);b.iteration_loop=new VBROldIterationLoop(e);break;default:b.sfb21_extra=!1,0>a.quality&&(a.quality=LAME_DEFAULT_QUALITY),f=a.VBR,f==G.vbr_off&&(a.VBR_mean_bitrate_kbps=a.brate),n.apply_preset(a,a.VBR_mean_bitrate_kbps,0),a.VBR=f,b.PSY.mask_adjust=a.maskingadjust,b.PSY.mask_adjust_short=a.maskingadjust_short,b.iteration_loop=f==G.vbr_off?new Mc(e):new ABRIterationLoop(e)}v(0<=
a.scale);if(a.VBR!=G.vbr_off){b.VBR_min_bitrate=1;b.VBR_max_bitrate=14;16E3>a.out_samplerate&&(b.VBR_max_bitrate=8);if(0!=a.VBR_min_bitrate_kbps&&(a.VBR_min_bitrate_kbps=g(a.VBR_min_bitrate_kbps,a.version,a.out_samplerate),b.VBR_min_bitrate=W(a.VBR_min_bitrate_kbps,a.version,a.out_samplerate),0>b.VBR_min_bitrate)||0!=a.VBR_max_bitrate_kbps&&(a.VBR_max_bitrate_kbps=g(a.VBR_max_bitrate_kbps,a.version,a.out_samplerate),b.VBR_max_bitrate=W(a.VBR_max_bitrate_kbps,a.version,a.out_samplerate),0>b.VBR_max_bitrate))return-1;
a.VBR_min_bitrate_kbps=u.bitrate_table[a.version][b.VBR_min_bitrate];a.VBR_max_bitrate_kbps=u.bitrate_table[a.version][b.VBR_max_bitrate];a.VBR_mean_bitrate_kbps=Math.min(u.bitrate_table[a.version][b.VBR_max_bitrate],a.VBR_mean_bitrate_kbps);a.VBR_mean_bitrate_kbps=Math.max(u.bitrate_table[a.version][b.VBR_min_bitrate],a.VBR_mean_bitrate_kbps)}a.tune&&(b.PSY.mask_adjust+=a.tune_value_a,b.PSY.mask_adjust_short+=a.tune_value_a);f=a.internal_flags;switch(a.quality){default:case 9:f.psymodel=0;f.noise_shaping=
0;f.noise_shaping_amp=0;f.noise_shaping_stop=0;f.use_best_huffman=0;f.full_outer_loop=0;break;case 8:a.quality=7;case 7:f.psymodel=1;f.noise_shaping=0;f.noise_shaping_amp=0;f.noise_shaping_stop=0;f.use_best_huffman=0;f.full_outer_loop=0;break;case 6:f.psymodel=1;0==f.noise_shaping&&(f.noise_shaping=1);f.noise_shaping_amp=0;f.noise_shaping_stop=0;-1==f.subblock_gain&&(f.subblock_gain=1);f.use_best_huffman=0;f.full_outer_loop=0;break;case 5:f.psymodel=1;0==f.noise_shaping&&(f.noise_shaping=1);f.noise_shaping_amp=
0;f.noise_shaping_stop=0;-1==f.subblock_gain&&(f.subblock_gain=1);f.use_best_huffman=0;f.full_outer_loop=0;break;case 4:f.psymodel=1;0==f.noise_shaping&&(f.noise_shaping=1);f.noise_shaping_amp=0;f.noise_shaping_stop=0;-1==f.subblock_gain&&(f.subblock_gain=1);f.use_best_huffman=1;f.full_outer_loop=0;break;case 3:f.psymodel=1;0==f.noise_shaping&&(f.noise_shaping=1);f.noise_shaping_amp=1;f.noise_shaping_stop=1;-1==f.subblock_gain&&(f.subblock_gain=1);f.use_best_huffman=1;f.full_outer_loop=0;break;case 2:f.psymodel=
1;0==f.noise_shaping&&(f.noise_shaping=1);0==f.substep_shaping&&(f.substep_shaping=2);f.noise_shaping_amp=1;f.noise_shaping_stop=1;-1==f.subblock_gain&&(f.subblock_gain=1);f.use_best_huffman=1;f.full_outer_loop=0;break;case 1:f.psymodel=1;0==f.noise_shaping&&(f.noise_shaping=1);0==f.substep_shaping&&(f.substep_shaping=2);f.noise_shaping_amp=2;f.noise_shaping_stop=1;-1==f.subblock_gain&&(f.subblock_gain=1);f.use_best_huffman=1;f.full_outer_loop=0;break;case 0:f.psymodel=1,0==f.noise_shaping&&(f.noise_shaping=
1),0==f.substep_shaping&&(f.substep_shaping=2),f.noise_shaping_amp=2,f.noise_shaping_stop=1,-1==f.subblock_gain&&(f.subblock_gain=1),f.use_best_huffman=1,f.full_outer_loop=0}v(0<=a.scale);b.ATH.useAdjust=0>a.athaa_type?3:a.athaa_type;b.ATH.aaSensitivityP=Math.pow(10,a.athaa_sensitivity/-10);null==a.short_blocks&&(a.short_blocks=Ia.short_block_allowed);a.short_blocks!=Ia.short_block_allowed||a.mode!=na.JOINT_STEREO&&a.mode!=na.STEREO||(a.short_blocks=Ia.short_block_coupled);0>a.quant_comp&&(a.quant_comp=
1);0>a.quant_comp_short&&(a.quant_comp_short=0);0>a.msfix&&(a.msfix=0);a.exp_nspsytune|=1;0>a.internal_flags.nsPsy.attackthre&&(a.internal_flags.nsPsy.attackthre=Xb.NSATTACKTHRE);0>a.internal_flags.nsPsy.attackthre_s&&(a.internal_flags.nsPsy.attackthre_s=Xb.NSATTACKTHRE_S);v(0<=a.scale);0>a.scale&&(a.scale=1);0>a.ATHtype&&(a.ATHtype=4);0>a.ATHcurve&&(a.ATHcurve=4);0>a.athaa_loudapprox&&(a.athaa_loudapprox=2);0>a.interChRatio&&(a.interChRatio=0);null==a.useTemporal&&(a.useTemporal=!0);b.slot_lag=b.frac_SpF=
0;a.VBR==G.vbr_off&&(b.slot_lag=b.frac_SpF=72E3*(a.version+1)*a.brate%a.out_samplerate|0);c.iteration_init(a);t.psymodel_init(a);v(0<=a.scale);return 0};this.lame_encode_flush=function(a,c,e,f){var g=a.internal_flags,h=qc([2,1152]),l=0,n,q,r=g.mf_samples_to_encode-d.POSTDELAY,t=b(a);if(1>g.mf_samples_to_encode)return 0;n=0;a.in_samplerate!=a.out_samplerate&&(r+=16*a.out_samplerate/a.in_samplerate);q=a.framesize-r%a.framesize;576>q&&(q+=a.framesize);a.encoder_padding=q;for(q=(r+q)/a.framesize;0<q&&
0<=l;){var u=t-g.mf_size,r=a.frameNum,u=u*a.in_samplerate,u=u/a.out_samplerate;1152<u&&(u=1152);1>u&&(u=1);l=f-n;0==f&&(l=0);l=this.lame_encode_buffer(a,h[0],h[1],u,c,e,l);e+=l;n+=l;q-=r!=a.frameNum?1:0}g.mf_samples_to_encode=0;if(0>l)return l;l=f-n;0==f&&(l=0);p.flush_bitstream(a);l=p.copy_buffer(g,c,e,l,1);if(0>l)return l;e+=l;n+=l;l=f-n;0==f&&(l=0);if(a.write_id3tag_automatic){y.id3tag_write_v1(a);l=p.copy_buffer(g,c,e,l,0);if(0>l)return l;n+=l}return n};this.lame_encode_buffer=function(a,b,c,
d,e,f,g){var h=a.internal_flags,l=[null,null];if(4294479419!=h.Class_ID)return-3;if(0==d)return 0;if(null==h.in_buffer_0||h.in_buffer_nsamples<d)h.in_buffer_0=L(d),h.in_buffer_1=L(d),h.in_buffer_nsamples=d;l[0]=h.in_buffer_0;l[1]=h.in_buffer_1;for(var n=0;n<d;n++)l[0][n]=b[n],1<h.channels_in&&(l[1][n]=c[n]);return r(a,l[0],l[1],d,e,f,g)}}function Uc(){this.setModules=function(d,l){}}function Vc(){this.setModules=function(d,l,q){}}function Wc(){}function Xc(){this.setModules=function(d,l){}}function Da(){this.sampleRate=
this.channels=this.dataLen=this.dataOffset=0}function jc(d){return d.charCodeAt(0)<<24|d.charCodeAt(1)<<16|d.charCodeAt(2)<<8|d.charCodeAt(3)}var Va={fill:function(d,l,q,u){if(2==arguments.length)for(var v=0;v<d.length;v++)d[v]=arguments[1];else for(v=l;v<q;v++)d[v]=u}},N={arraycopy:function(d,l,q,u,v){for(v=l+v;l<v;)q[u++]=d[l++]}},ca={SQRT2:1.4142135623730951,FAST_LOG10:function(d){return Math.log10(d)},FAST_LOG10_X:function(d,l){return Math.log10(d)*l}};Ia.short_block_allowed=new Ia(0);Ia.short_block_coupled=
new Ia(1);Ia.short_block_dispensed=new Ia(2);Ia.short_block_forced=new Ia(3);var lb={MAX_VALUE:3.4028235E38};G.vbr_off=new G(0);G.vbr_mt=new G(1);G.vbr_rh=new G(2);G.vbr_abr=new G(3);G.vbr_mtrh=new G(4);G.vbr_default=G.vbr_mtrh;var v=function(d){console.assert(d)};na.STEREO=new na(0);na.JOINT_STEREO=new na(1);na.DUAL_CHANNEL=new na(2);na.MONO=new na(3);na.NOT_SET=new na(4);X.STEPS_per_dB=100;X.MAX_dB=120;X.GAIN_NOT_ENOUGH_SAMPLES=-24601;X.GAIN_ANALYSIS_ERROR=0;X.GAIN_ANALYSIS_OK=1;X.INIT_GAIN_ANALYSIS_ERROR=
0;X.INIT_GAIN_ANALYSIS_OK=1;X.YULE_ORDER=10;X.MAX_ORDER=X.YULE_ORDER;ra.EQ=function(d,l){return Math.abs(d)>Math.abs(l)?Math.abs(d-l)<=1E-6*Math.abs(d):Math.abs(d-l)<=1E-6*Math.abs(l)};ra.NEQ=function(d,l){return!ra.EQ(d,l)};Bb.NUMTOCENTRIES=100;Bb.MAXFRAMESIZE=2880;var u={t1HB:[1,1,1,0],t2HB:[1,2,1,3,1,1,3,2,0],t3HB:[3,2,1,1,1,1,3,2,0],t5HB:[1,2,6,5,3,1,4,4,7,5,7,1,6,1,1,0],t6HB:[7,3,5,1,6,2,3,2,5,4,4,1,3,3,2,0],t7HB:[1,2,10,19,16,10,3,3,7,10,5,3,11,4,13,17,8,4,12,11,18,15,11,2,7,6,9,14,3,1,6,4,
5,3,2,0],t8HB:[3,4,6,18,12,5,5,1,2,16,9,3,7,3,5,14,7,3,19,17,15,13,10,4,13,5,8,11,5,1,12,4,4,1,1,0],t9HB:[7,5,9,14,15,7,6,4,5,5,6,7,7,6,8,8,8,5,15,6,9,10,5,1,11,7,9,6,4,1,14,4,6,2,6,0],t10HB:[1,2,10,23,35,30,12,17,3,3,8,12,18,21,12,7,11,9,15,21,32,40,19,6,14,13,22,34,46,23,18,7,20,19,33,47,27,22,9,3,31,22,41,26,21,20,5,3,14,13,10,11,16,6,5,1,9,8,7,8,4,4,2,0],t11HB:[3,4,10,24,34,33,21,15,5,3,4,10,32,17,11,10,11,7,13,18,30,31,20,5,25,11,19,59,27,18,12,5,35,33,31,58,30,16,7,5,28,26,32,19,17,15,8,14,
14,12,9,13,14,9,4,1,11,4,6,6,6,3,2,0],t12HB:[9,6,16,33,41,39,38,26,7,5,6,9,23,16,26,11,17,7,11,14,21,30,10,7,17,10,15,12,18,28,14,5,32,13,22,19,18,16,9,5,40,17,31,29,17,13,4,2,27,12,11,15,10,7,4,1,27,12,8,12,6,3,1,0],t13HB:[1,5,14,21,34,51,46,71,42,52,68,52,67,44,43,19,3,4,12,19,31,26,44,33,31,24,32,24,31,35,22,14,15,13,23,36,59,49,77,65,29,40,30,40,27,33,42,16,22,20,37,61,56,79,73,64,43,76,56,37,26,31,25,14,35,16,60,57,97,75,114,91,54,73,55,41,48,53,23,24,58,27,50,96,76,70,93,84,77,58,79,29,74,49,
41,17,47,45,78,74,115,94,90,79,69,83,71,50,59,38,36,15,72,34,56,95,92,85,91,90,86,73,77,65,51,44,43,42,43,20,30,44,55,78,72,87,78,61,46,54,37,30,20,16,53,25,41,37,44,59,54,81,66,76,57,54,37,18,39,11,35,33,31,57,42,82,72,80,47,58,55,21,22,26,38,22,53,25,23,38,70,60,51,36,55,26,34,23,27,14,9,7,34,32,28,39,49,75,30,52,48,40,52,28,18,17,9,5,45,21,34,64,56,50,49,45,31,19,12,15,10,7,6,3,48,23,20,39,36,35,53,21,16,23,13,10,6,1,4,2,16,15,17,27,25,20,29,11,17,12,16,8,1,1,0,1],t15HB:[7,12,18,53,47,76,124,108,
89,123,108,119,107,81,122,63,13,5,16,27,46,36,61,51,42,70,52,83,65,41,59,36,19,17,15,24,41,34,59,48,40,64,50,78,62,80,56,33,29,28,25,43,39,63,55,93,76,59,93,72,54,75,50,29,52,22,42,40,67,57,95,79,72,57,89,69,49,66,46,27,77,37,35,66,58,52,91,74,62,48,79,63,90,62,40,38,125,32,60,56,50,92,78,65,55,87,71,51,73,51,70,30,109,53,49,94,88,75,66,122,91,73,56,42,64,44,21,25,90,43,41,77,73,63,56,92,77,66,47,67,48,53,36,20,71,34,67,60,58,49,88,76,67,106,71,54,38,39,23,15,109,53,51,47,90,82,58,57,48,72,57,41,
23,27,62,9,86,42,40,37,70,64,52,43,70,55,42,25,29,18,11,11,118,68,30,55,50,46,74,65,49,39,24,16,22,13,14,7,91,44,39,38,34,63,52,45,31,52,28,19,14,8,9,3,123,60,58,53,47,43,32,22,37,24,17,12,15,10,2,1,71,37,34,30,28,20,17,26,21,16,10,6,8,6,2,0],t16HB:[1,5,14,44,74,63,110,93,172,149,138,242,225,195,376,17,3,4,12,20,35,62,53,47,83,75,68,119,201,107,207,9,15,13,23,38,67,58,103,90,161,72,127,117,110,209,206,16,45,21,39,69,64,114,99,87,158,140,252,212,199,387,365,26,75,36,68,65,115,101,179,164,155,264,246,
226,395,382,362,9,66,30,59,56,102,185,173,265,142,253,232,400,388,378,445,16,111,54,52,100,184,178,160,133,257,244,228,217,385,366,715,10,98,48,91,88,165,157,148,261,248,407,397,372,380,889,884,8,85,84,81,159,156,143,260,249,427,401,392,383,727,713,708,7,154,76,73,141,131,256,245,426,406,394,384,735,359,710,352,11,139,129,67,125,247,233,229,219,393,743,737,720,885,882,439,4,243,120,118,115,227,223,396,746,742,736,721,712,706,223,436,6,202,224,222,218,216,389,386,381,364,888,443,707,440,437,1728,4,
747,211,210,208,370,379,734,723,714,1735,883,877,876,3459,865,2,377,369,102,187,726,722,358,711,709,866,1734,871,3458,870,434,0,12,10,7,11,10,17,11,9,13,12,10,7,5,3,1,3],t24HB:[15,13,46,80,146,262,248,434,426,669,653,649,621,517,1032,88,14,12,21,38,71,130,122,216,209,198,327,345,319,297,279,42,47,22,41,74,68,128,120,221,207,194,182,340,315,295,541,18,81,39,75,70,134,125,116,220,204,190,178,325,311,293,271,16,147,72,69,135,127,118,112,210,200,188,352,323,306,285,540,14,263,66,129,126,119,114,214,202,
192,180,341,317,301,281,262,12,249,123,121,117,113,215,206,195,185,347,330,308,291,272,520,10,435,115,111,109,211,203,196,187,353,332,313,298,283,531,381,17,427,212,208,205,201,193,186,177,169,320,303,286,268,514,377,16,335,199,197,191,189,181,174,333,321,305,289,275,521,379,371,11,668,184,183,179,175,344,331,314,304,290,277,530,383,373,366,10,652,346,171,168,164,318,309,299,287,276,263,513,375,368,362,6,648,322,316,312,307,302,292,284,269,261,512,376,370,364,359,4,620,300,296,294,288,282,273,266,
515,380,374,369,365,361,357,2,1033,280,278,274,267,264,259,382,378,372,367,363,360,358,356,0,43,20,19,17,15,13,11,9,7,6,4,7,5,3,1,3],t32HB:[1,10,8,20,12,20,16,32,14,12,24,0,28,16,24,16],t33HB:[15,28,26,48,22,40,36,64,14,24,20,32,12,16,8,0],t1l:[1,4,3,5],t2l:[1,4,7,4,5,7,6,7,8],t3l:[2,3,7,4,4,7,6,7,8],t5l:[1,4,7,8,4,5,8,9,7,8,9,10,8,8,9,10],t6l:[3,4,6,8,4,4,6,7,5,6,7,8,7,7,8,9],t7l:[1,4,7,9,9,10,4,6,8,9,9,10,7,7,9,10,10,11,8,9,10,11,11,11,8,9,10,11,11,12,9,10,11,12,12,12],t8l:[2,4,7,9,9,10,4,4,6,10,
10,10,7,6,8,10,10,11,9,10,10,11,11,12,9,9,10,11,12,12,10,10,11,11,13,13],t9l:[3,4,6,7,9,10,4,5,6,7,8,10,5,6,7,8,9,10,7,7,8,9,9,10,8,8,9,9,10,11,9,9,10,10,11,11],t10l:[1,4,7,9,10,10,10,11,4,6,8,9,10,11,10,10,7,8,9,10,11,12,11,11,8,9,10,11,12,12,11,12,9,10,11,12,12,12,12,12,10,11,12,12,13,13,12,13,9,10,11,12,12,12,13,13,10,10,11,12,12,13,13,13],t11l:[2,4,6,8,9,10,9,10,4,5,6,8,10,10,9,10,6,7,8,9,10,11,10,10,8,8,9,11,10,12,10,11,9,10,10,11,11,12,11,12,9,10,11,12,12,13,12,13,9,9,9,10,11,12,12,12,9,9,10,
11,12,12,12,12],t12l:[4,4,6,8,9,10,10,10,4,5,6,7,9,9,10,10,6,6,7,8,9,10,9,10,7,7,8,8,9,10,10,10,8,8,9,9,10,10,10,11,9,9,10,10,10,11,10,11,9,9,9,10,10,11,11,12,10,10,10,11,11,11,11,12],t13l:[1,5,7,8,9,10,10,11,10,11,12,12,13,13,14,14,4,6,8,9,10,10,11,11,11,11,12,12,13,14,14,14,7,8,9,10,11,11,12,12,11,12,12,13,13,14,15,15,8,9,10,11,11,12,12,12,12,13,13,13,13,14,15,15,9,9,11,11,12,12,13,13,12,13,13,14,14,15,15,16,10,10,11,12,12,12,13,13,13,13,14,13,15,15,16,16,10,11,12,12,13,13,13,13,13,14,14,14,15,
15,16,16,11,11,12,13,13,13,14,14,14,14,15,15,15,16,18,18,10,10,11,12,12,13,13,14,14,14,14,15,15,16,17,17,11,11,12,12,13,13,13,15,14,15,15,16,16,16,18,17,11,12,12,13,13,14,14,15,14,15,16,15,16,17,18,19,12,12,12,13,14,14,14,14,15,15,15,16,17,17,17,18,12,13,13,14,14,15,14,15,16,16,17,17,17,18,18,18,13,13,14,15,15,15,16,16,16,16,16,17,18,17,18,18,14,14,14,15,15,15,17,16,16,19,17,17,17,19,18,18,13,14,15,16,16,16,17,16,17,17,18,18,21,20,21,18],t15l:[3,5,6,8,8,9,10,10,10,11,11,12,12,12,13,14,5,5,7,8,9,9,
10,10,10,11,11,12,12,12,13,13,6,7,7,8,9,9,10,10,10,11,11,12,12,13,13,13,7,8,8,9,9,10,10,11,11,11,12,12,12,13,13,13,8,8,9,9,10,10,11,11,11,11,12,12,12,13,13,13,9,9,9,10,10,10,11,11,11,11,12,12,13,13,13,14,10,9,10,10,10,11,11,11,11,12,12,12,13,13,14,14,10,10,10,11,11,11,11,12,12,12,12,12,13,13,13,14,10,10,10,11,11,11,11,12,12,12,12,13,13,14,14,14,10,10,11,11,11,11,12,12,12,13,13,13,13,14,14,14,11,11,11,11,12,12,12,12,12,13,13,13,13,14,15,14,11,11,11,11,12,12,12,12,13,13,13,13,14,14,14,15,12,12,11,12,
12,12,13,13,13,13,13,13,14,14,15,15,12,12,12,12,12,13,13,13,13,14,14,14,14,14,15,15,13,13,13,13,13,13,13,13,14,14,14,14,15,15,14,15,13,13,13,13,13,13,13,14,14,14,14,14,15,15,15,15],t16_5l:[1,5,7,9,10,10,11,11,12,12,12,13,13,13,14,11,4,6,8,9,10,11,11,11,12,12,12,13,14,13,14,11,7,8,9,10,11,11,12,12,13,12,13,13,13,14,14,12,9,9,10,11,11,12,12,12,13,13,14,14,14,15,15,13,10,10,11,11,12,12,13,13,13,14,14,14,15,15,15,12,10,10,11,11,12,13,13,14,13,14,14,15,15,15,16,13,11,11,11,12,13,13,13,13,14,14,14,14,15,
15,16,13,11,11,12,12,13,13,13,14,14,15,15,15,15,17,17,13,11,12,12,13,13,13,14,14,15,15,15,15,16,16,16,13,12,12,12,13,13,14,14,15,15,15,15,16,15,16,15,14,12,13,12,13,14,14,14,14,15,16,16,16,17,17,16,13,13,13,13,13,14,14,15,16,16,16,16,16,16,15,16,14,13,14,14,14,14,15,15,15,15,17,16,16,16,16,18,14,15,14,14,14,15,15,16,16,16,18,17,17,17,19,17,14,14,15,13,14,16,16,15,16,16,17,18,17,19,17,16,14,11,11,11,12,12,13,13,13,14,14,14,14,14,14,14,12],t16l:[1,5,7,9,10,10,11,11,12,12,12,13,13,13,14,10,4,6,8,9,10,
11,11,11,12,12,12,13,14,13,14,10,7,8,9,10,11,11,12,12,13,12,13,13,13,14,14,11,9,9,10,11,11,12,12,12,13,13,14,14,14,15,15,12,10,10,11,11,12,12,13,13,13,14,14,14,15,15,15,11,10,10,11,11,12,13,13,14,13,14,14,15,15,15,16,12,11,11,11,12,13,13,13,13,14,14,14,14,15,15,16,12,11,11,12,12,13,13,13,14,14,15,15,15,15,17,17,12,11,12,12,13,13,13,14,14,15,15,15,15,16,16,16,12,12,12,12,13,13,14,14,15,15,15,15,16,15,16,15,13,12,13,12,13,14,14,14,14,15,16,16,16,17,17,16,12,13,13,13,13,14,14,15,16,16,16,16,16,16,15,
16,13,13,14,14,14,14,15,15,15,15,17,16,16,16,16,18,13,15,14,14,14,15,15,16,16,16,18,17,17,17,19,17,13,14,15,13,14,16,16,15,16,16,17,18,17,19,17,16,13,10,10,10,11,11,12,12,12,13,13,13,13,13,13,13,10],t24l:[4,5,7,8,9,10,10,11,11,12,12,12,12,12,13,10,5,6,7,8,9,10,10,11,11,11,12,12,12,12,12,10,7,7,8,9,9,10,10,11,11,11,11,12,12,12,13,9,8,8,9,9,10,10,10,11,11,11,11,12,12,12,12,9,9,9,9,10,10,10,10,11,11,11,12,12,12,12,13,9,10,9,10,10,10,10,11,11,11,11,12,12,12,12,12,9,10,10,10,10,10,11,11,11,11,12,12,12,
12,12,13,9,11,10,10,10,11,11,11,11,12,12,12,12,12,13,13,10,11,11,11,11,11,11,11,11,11,12,12,12,12,13,13,10,11,11,11,11,11,11,11,12,12,12,12,12,13,13,13,10,12,11,11,11,11,12,12,12,12,12,12,13,13,13,13,10,12,12,11,11,11,12,12,12,12,12,12,13,13,13,13,10,12,12,12,12,12,12,12,12,12,12,13,13,13,13,13,10,12,12,12,12,12,12,12,12,13,13,13,13,13,13,13,10,13,12,12,12,12,12,12,13,13,13,13,13,13,13,13,10,9,9,9,9,9,9,9,9,9,9,9,10,10,10,10,6],t32l:[1,5,5,7,5,8,7,9,5,7,7,9,7,9,9,10],t33l:[4,5,5,6,5,6,6,7,5,6,6,7,
6,7,7,8]};u.ht=[new fa(0,0,null,null),new fa(2,0,u.t1HB,u.t1l),new fa(3,0,u.t2HB,u.t2l),new fa(3,0,u.t3HB,u.t3l),new fa(0,0,null,null),new fa(4,0,u.t5HB,u.t5l),new fa(4,0,u.t6HB,u.t6l),new fa(6,0,u.t7HB,u.t7l),new fa(6,0,u.t8HB,u.t8l),new fa(6,0,u.t9HB,u.t9l),new fa(8,0,u.t10HB,u.t10l),new fa(8,0,u.t11HB,u.t11l),new fa(8,0,u.t12HB,u.t12l),new fa(16,0,u.t13HB,u.t13l),new fa(0,0,null,u.t16_5l),new fa(16,0,u.t15HB,u.t15l),new fa(1,1,u.t16HB,u.t16l),new fa(2,3,u.t16HB,u.t16l),new fa(3,7,u.t16HB,u.t16l),
new fa(4,15,u.t16HB,u.t16l),new fa(6,63,u.t16HB,u.t16l),new fa(8,255,u.t16HB,u.t16l),new fa(10,1023,u.t16HB,u.t16l),new fa(13,8191,u.t16HB,u.t16l),new fa(4,15,u.t24HB,u.t24l),new fa(5,31,u.t24HB,u.t24l),new fa(6,63,u.t24HB,u.t24l),new fa(7,127,u.t24HB,u.t24l),new fa(8,255,u.t24HB,u.t24l),new fa(9,511,u.t24HB,u.t24l),new fa(11,2047,u.t24HB,u.t24l),new fa(13,8191,u.t24HB,u.t24l),new fa(0,0,u.t32HB,u.t32l),new fa(0,0,u.t33HB,u.t33l)];u.largetbl=[65540,327685,458759,589832,655369,655370,720906,720907,
786443,786444,786444,851980,851980,851980,917517,655370,262149,393222,524295,589832,655369,720906,720906,720907,786443,786443,786444,851980,917516,851980,917516,655370,458759,524295,589832,655369,720905,720906,786442,786443,851979,786443,851979,851980,851980,917516,917517,720905,589832,589832,655369,720905,720906,786442,786442,786443,851979,851979,917515,917516,917516,983052,983052,786441,655369,655369,720905,720906,786442,786442,851978,851979,851979,917515,917516,917516,983052,983052,983053,720905,
655370,655369,720906,720906,786442,851978,851979,917515,851979,917515,917516,983052,983052,983052,1048588,786441,720906,720906,720906,786442,851978,851979,851979,851979,917515,917516,917516,917516,983052,983052,1048589,786441,720907,720906,786442,786442,851979,851979,851979,917515,917516,983052,983052,983052,983052,1114125,1114125,786442,720907,786443,786443,851979,851979,851979,917515,917515,983051,983052,983052,983052,1048588,1048589,1048589,786442,786443,786443,786443,851979,851979,917515,917515,
983052,983052,983052,983052,1048588,983053,1048589,983053,851978,786444,851979,786443,851979,917515,917516,917516,917516,983052,1048588,1048588,1048589,1114125,1114125,1048589,786442,851980,851980,851979,851979,917515,917516,983052,1048588,1048588,1048588,1048588,1048589,1048589,983053,1048589,851978,851980,917516,917516,917516,917516,983052,983052,983052,983052,1114124,1048589,1048589,1048589,1048589,1179661,851978,983052,917516,917516,917516,983052,983052,1048588,1048588,1048589,1179661,1114125,
1114125,1114125,1245197,1114125,851978,917517,983052,851980,917516,1048588,1048588,983052,1048589,1048589,1114125,1179661,1114125,1245197,1114125,1048589,851978,655369,655369,655369,720905,720905,786441,786441,786441,851977,851977,851977,851978,851978,851978,851978,655366];u.table23=[65538,262147,458759,262148,327684,458759,393222,458759,524296];u.table56=[65539,262148,458758,524296,262148,327684,524294,589831,458757,524294,589831,655368,524295,524295,589832,655369];u.bitrate_table=[[0,8,16,24,32,
40,48,56,64,80,96,112,128,144,160,-1],[0,32,40,48,56,64,80,96,112,128,160,192,224,256,320,-1],[0,8,16,24,32,40,48,56,64,-1,-1,-1,-1,-1,-1,-1]];u.samplerate_table=[[22050,24E3,16E3,-1],[44100,48E3,32E3,-1],[11025,12E3,8E3,-1]];u.scfsi_band=[0,6,11,16,21];qa.Q_MAX=257;qa.Q_MAX2=116;qa.LARGE_BITS=1E5;qa.IXMAX_VAL=8206;var Ea={};Ea.SFBMAX=3*d.SBMAX_s;d.ENCDELAY=576;d.POSTDELAY=1152;d.MDCTDELAY=48;d.FFTOFFSET=224+d.MDCTDELAY;d.DECDELAY=528;d.SBLIMIT=32;d.CBANDS=64;d.SBPSY_l=21;d.SBPSY_s=12;d.SBMAX_l=22;
d.SBMAX_s=13;d.PSFB21=6;d.PSFB12=6;d.BLKSIZE=1024;d.HBLKSIZE=d.BLKSIZE/2+1;d.BLKSIZE_s=256;d.HBLKSIZE_s=d.BLKSIZE_s/2+1;d.NORM_TYPE=0;d.START_TYPE=1;d.SHORT_TYPE=2;d.STOP_TYPE=3;d.MPG_MD_LR_LR=0;d.MPG_MD_LR_I=1;d.MPG_MD_MS_LR=2;d.MPG_MD_MS_I=3;d.fircoef=[-.1039435,-.1892065,-.0432472*5,-.155915,3.898045E-17,.0467745*5,.50455,.756825,.187098*5];T.MFSIZE=3456+d.ENCDELAY-d.MDCTDELAY;T.MAX_HEADER_BUF=256;T.MAX_BITS_PER_CHANNEL=4095;T.MAX_BITS_PER_GRANULE=7680;T.BPC=320;Da.RIFF=jc("RIFF");Da.WAVE=jc("WAVE");
Da.fmt_=jc("fmt ");Da.data=jc("data");Da.readHeader=function(d){var l=new Da,q=d.getUint32(0,!1);if(Da.RIFF==q&&(d.getUint32(4,!0),Da.WAVE==d.getUint32(8,!1)&&Da.fmt_==d.getUint32(12,!1))){var u=d.getUint32(16,!0),v=20;switch(u){case 16:case 18:l.channels=d.getUint16(v+2,!0);l.sampleRate=d.getUint32(v+4,!0);break;default:throw"extended fmt chunk not implemented";}for(var v=v+u,u=Da.data,g=0;u!=q;){q=d.getUint32(v,!1);g=d.getUint32(v+4,!0);if(u==q)break;v+=g+8}l.dataLen=g;l.dataOffset=v+8;return l}};
this.Mp3Encoder=function(d,l,q){3!=arguments.length&&(console.error("WARN: Mp3Encoder(channels, samplerate, kbps) not specified"),d=1,l=44100,q=128);var u=new I,C=new Uc,g=new X,G=new ra,h=new Hc,b=new qa,r=new Oc,a=new Bb,f=new Gc,F=new Xc,p=new Fc,n=new Ab,c=new Vc,e=new Wc;u.setModules(g,G,h,b,r,a,f,F,e);G.setModules(g,e,f,a);F.setModules(G,f);h.setModules(u);r.setModules(G,p,b,n);b.setModules(n,p,u.enc.psy);p.setModules(G);n.setModules(b);a.setModules(u,G,f);C.setModules(c,e);c.setModules(f,F,
h);var t=u.lame_init();t.num_channels=d;t.in_samplerate=l;t.brate=q;t.mode=na.STEREO;t.quality=3;t.bWriteVbrTag=!1;t.disable_reservoir=!0;t.write_id3tag_automatic=!1;C=u.lame_init_params(t);v(0==C);var D=1152,y=0|1.25*D+7200,z=new Int8Array(y);this.encodeBuffer=function(a,b){1==d&&(b=a);v(a.length==b.length);a.length>D&&(D=a.length,y=0|1.25*D+7200,z=new Int8Array(y));var c=u.lame_encode_buffer(t,a,b,a.length,z,0,y);return z.subarray(0,c)};this.flush=function(){var a=u.lame_encode_flush(t,z,0,y);return z.subarray(0,
a)}}};
