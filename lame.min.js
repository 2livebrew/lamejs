function lamejs(){function aa(d){return new Int32Array(d)}function L(d){return new Float32Array(d)}function wa(d){if(1==d.length)return L(d[0]);var n=d[0];d=d.slice(1);for(var p=[],F=0;F<n;F++)p.push(wa(d));return p}function Sa(d){if(1==d.length)return aa(d[0]);var n=d[0];d=d.slice(1);for(var p=[],F=0;F<n;F++)p.push(Sa(d));return p}function rc(d){if(1==d.length)return new Int16Array(d[0]);var n=d[0];d=d.slice(1);for(var p=[],F=0;F<n;F++)p.push(rc(d));return p}function Ub(d){if(1==d.length)return Array(d[0]);
var n=d[0];d=d.slice(1);for(var p=[],F=0;F<n;F++)p.push(Ub(d));return p}function Ja(d){this.ordinal=d}function N(d){this.ordinal=d}function la(d){this.ordinal=function(){return d}}function Fc(){this.getLameVersion=function(){return"3.98.4"};this.getLameShortVersion=function(){return"3.98.4"};this.getLameVeryShortVersion=function(){return"LAME3.98r"};this.getPsyVersion=function(){return"0.93"};this.getLameUrl=function(){return"http://www.mp3dev.org/"};this.getLameOsBitness=function(){return"32bits"}}
function Gc(){function d(b,f,a,e,l,m,k,c,g,z,q,x,A,t,h){this.vbr_q=b;this.quant_comp=f;this.quant_comp_s=a;this.expY=e;this.st_lrm=l;this.st_s=m;this.masking_adj=k;this.masking_adj_short=c;this.ath_lower=g;this.ath_curve=z;this.ath_sensitivity=q;this.interch=x;this.safejoint=A;this.sfb21mod=t;this.msfix=h}function n(b,d,a,e,f,m,k,c,g,z,q,x,A,t){this.quant_comp=d;this.quant_comp_s=a;this.safejoint=e;this.nsmsfix=f;this.st_lrm=m;this.st_s=k;this.nsbass=c;this.scale=g;this.masking_adj=z;this.ath_lower=
q;this.ath_curve=x;this.interch=A;this.sfscale=t}function p(b,d,a){var e=b.VBR==N.vbr_rh?f:fa,l=b.VBR_q_frac,m=e[d],e=e[d+1];m.st_lrm+=l*(e.st_lrm-m.st_lrm);m.st_s+=l*(e.st_s-m.st_s);m.masking_adj+=l*(e.masking_adj-m.masking_adj);m.masking_adj_short+=l*(e.masking_adj_short-m.masking_adj_short);m.ath_lower+=l*(e.ath_lower-m.ath_lower);m.ath_curve+=l*(e.ath_curve-m.ath_curve);m.ath_sensitivity+=l*(e.ath_sensitivity-m.ath_sensitivity);m.interch+=l*(e.interch-m.interch);m.msfix+=l*(e.msfix-m.msfix);e=
m.vbr_q;0>e&&(e=0);9<e&&(e=9);b.VBR_q=e;b.VBR_q_frac=0;0!=a?b.quant_comp=m.quant_comp:0<Math.abs(b.quant_comp- -1)||(b.quant_comp=m.quant_comp);0!=a?b.quant_comp_short=m.quant_comp_s:0<Math.abs(b.quant_comp_short- -1)||(b.quant_comp_short=m.quant_comp_s);0!=m.expY&&(b.experimentalY=0!=m.expY);0!=a?b.internal_flags.nsPsy.attackthre=m.st_lrm:0<Math.abs(b.internal_flags.nsPsy.attackthre- -1)||(b.internal_flags.nsPsy.attackthre=m.st_lrm);0!=a?b.internal_flags.nsPsy.attackthre_s=m.st_s:0<Math.abs(b.internal_flags.nsPsy.attackthre_s-
-1)||(b.internal_flags.nsPsy.attackthre_s=m.st_s);0!=a?b.maskingadjust=m.masking_adj:0<Math.abs(b.maskingadjust-0)||(b.maskingadjust=m.masking_adj);0!=a?b.maskingadjust_short=m.masking_adj_short:0<Math.abs(b.maskingadjust_short-0)||(b.maskingadjust_short=m.masking_adj_short);0!=a?b.ATHlower=-m.ath_lower/10:0<Math.abs(10*-b.ATHlower-0)||(b.ATHlower=-m.ath_lower/10);0!=a?b.ATHcurve=m.ath_curve:0<Math.abs(b.ATHcurve- -1)||(b.ATHcurve=m.ath_curve);0!=a?b.athaa_sensitivity=m.ath_sensitivity:0<Math.abs(b.athaa_sensitivity-
-1)||(b.athaa_sensitivity=m.ath_sensitivity);0<m.interch&&(0!=a?b.interChRatio=m.interch:0<Math.abs(b.interChRatio- -1)||(b.interChRatio=m.interch));0<m.safejoint&&(b.exp_nspsytune|=m.safejoint);0<m.sfb21mod&&(b.exp_nspsytune|=m.sfb21mod<<20);0!=a?b.msfix=m.msfix:0<Math.abs(b.msfix- -1)||(b.msfix=m.msfix);0==a&&(b.VBR_q=d,b.VBR_q_frac=l)}function F(b,d,a){var e=y.nearestBitrateFullIndex(d);b.VBR=N.vbr_abr;b.VBR_mean_bitrate_kbps=d;b.VBR_mean_bitrate_kbps=Math.min(b.VBR_mean_bitrate_kbps,320);b.VBR_mean_bitrate_kbps=
Math.max(b.VBR_mean_bitrate_kbps,8);b.brate=b.VBR_mean_bitrate_kbps;320<b.VBR_mean_bitrate_kbps&&(b.disable_reservoir=!0);0<l[e].safejoint&&(b.exp_nspsytune|=2);0<l[e].sfscale&&(b.internal_flags.noise_shaping=2);if(0<Math.abs(l[e].nsbass)){var f=int(4*l[e].nsbass);0>f&&(f+=64);b.exp_nspsytune|=f<<2}0!=a?b.quant_comp=l[e].quant_comp:0<Math.abs(b.quant_comp- -1)||(b.quant_comp=l[e].quant_comp);0!=a?b.quant_comp_short=l[e].quant_comp_s:0<Math.abs(b.quant_comp_short- -1)||(b.quant_comp_short=l[e].quant_comp_s);
0!=a?b.msfix=l[e].nsmsfix:0<Math.abs(b.msfix- -1)||(b.msfix=l[e].nsmsfix);0!=a?b.internal_flags.nsPsy.attackthre=l[e].st_lrm:0<Math.abs(b.internal_flags.nsPsy.attackthre- -1)||(b.internal_flags.nsPsy.attackthre=l[e].st_lrm);0!=a?b.internal_flags.nsPsy.attackthre_s=l[e].st_s:0<Math.abs(b.internal_flags.nsPsy.attackthre_s- -1)||(b.internal_flags.nsPsy.attackthre_s=l[e].st_s);0!=a?b.scale=l[e].scale:0<Math.abs(b.scale- -1)||(b.scale=l[e].scale);0!=a?b.maskingadjust=l[e].masking_adj:0<Math.abs(b.maskingadjust-
0)||(b.maskingadjust=l[e].masking_adj);0<l[e].masking_adj?0!=a?b.maskingadjust_short=.9*l[e].masking_adj:0<Math.abs(b.maskingadjust_short-0)||(b.maskingadjust_short=.9*l[e].masking_adj):0!=a?b.maskingadjust_short=1.1*l[e].masking_adj:0<Math.abs(b.maskingadjust_short-0)||(b.maskingadjust_short=1.1*l[e].masking_adj);0!=a?b.ATHlower=-l[e].ath_lower/10:0<Math.abs(10*-b.ATHlower-0)||(b.ATHlower=-l[e].ath_lower/10);0!=a?b.ATHcurve=l[e].ath_curve:0<Math.abs(b.ATHcurve- -1)||(b.ATHcurve=l[e].ath_curve);0!=
a?b.interChRatio=l[e].interch:0<Math.abs(b.interChRatio- -1)||(b.interChRatio=l[e].interch);return d}var y;this.setModules=function(b){y=b};var f=[new d(0,9,9,0,5.2,125,-4.2,-6.3,4.8,1,0,0,2,21,.97),new d(1,9,9,0,5.3,125,-3.6,-5.6,4.5,1.5,0,0,2,21,1.35),new d(2,9,9,0,5.6,125,-2.2,-3.5,2.8,2,0,0,2,21,1.49),new d(3,9,9,1,5.8,130,-1.8,-2.8,2.6,3,-4,0,2,20,1.64),new d(4,9,9,1,6,135,-.7,-1.1,1.1,3.5,-8,0,2,0,1.79),new d(5,9,9,1,6.4,140,.5,.4,-7.5,4,-12,2E-4,0,0,1.95),new d(6,9,9,1,6.6,145,.67,.65,-14.7,
6.5,-19,4E-4,0,0,2.3),new d(7,9,9,1,6.6,145,.8,.75,-19.7,8,-22,6E-4,0,0,2.7),new d(8,9,9,1,6.6,145,1.2,1.15,-27.5,10,-23,7E-4,0,0,0),new d(9,9,9,1,6.6,145,1.6,1.6,-36,11,-25,8E-4,0,0,0),new d(10,9,9,1,6.6,145,2,2,-36,12,-25,8E-4,0,0,0)],fa=[new d(0,9,9,0,4.2,25,-7,-4,7.5,1,0,0,2,26,.97),new d(1,9,9,0,4.2,25,-5.6,-3.6,4.5,1.5,0,0,2,21,1.35),new d(2,9,9,0,4.2,25,-4.4,-1.8,2,2,0,0,2,18,1.49),new d(3,9,9,1,4.2,25,-3.4,-1.25,1.1,3,-4,0,2,15,1.64),new d(4,9,9,1,4.2,25,-2.2,.1,0,3.5,-8,0,2,0,1.79),new d(5,
9,9,1,4.2,25,-1,1.65,-7.7,4,-12,2E-4,0,0,1.95),new d(6,9,9,1,4.2,25,-0,2.47,-7.7,6.5,-19,4E-4,0,0,2),new d(7,9,9,1,4.2,25,.5,2,-14.5,8,-22,6E-4,0,0,2),new d(8,9,9,1,4.2,25,1,2.4,-22,10,-23,7E-4,0,0,2),new d(9,9,9,1,4.2,25,1.5,2.95,-30,11,-25,8E-4,0,0,2),new d(10,9,9,1,4.2,25,2,2.95,-36,12,-30,8E-4,0,0,2)],l=[new n(8,9,9,0,0,6.6,145,0,.95,0,-30,11,.0012,1),new n(16,9,9,0,0,6.6,145,0,.95,0,-25,11,.001,1),new n(24,9,9,0,0,6.6,145,0,.95,0,-20,11,.001,1),new n(32,9,9,0,0,6.6,145,0,.95,0,-15,11,.001,1),
new n(40,9,9,0,0,6.6,145,0,.95,0,-10,11,9E-4,1),new n(48,9,9,0,0,6.6,145,0,.95,0,-10,11,9E-4,1),new n(56,9,9,0,0,6.6,145,0,.95,0,-6,11,8E-4,1),new n(64,9,9,0,0,6.6,145,0,.95,0,-2,11,8E-4,1),new n(80,9,9,0,0,6.6,145,0,.95,0,0,8,7E-4,1),new n(96,9,9,0,2.5,6.6,145,0,.95,0,1,5.5,6E-4,1),new n(112,9,9,0,2.25,6.6,145,0,.95,0,2,4.5,5E-4,1),new n(128,9,9,0,1.95,6.4,140,0,.95,0,3,4,2E-4,1),new n(160,9,9,1,1.79,6,135,0,.95,-2,5,3.5,0,1),new n(192,9,9,1,1.49,5.6,125,0,.97,-4,7,3,0,0),new n(224,9,9,1,1.25,5.2,
125,0,.98,-6,9,2,0,0),new n(256,9,9,1,.97,5.2,125,0,1,-8,10,1,0,0),new n(320,9,9,1,.9,5.2,125,0,1,-10,12,0,0,0)];this.apply_preset=function(b,d,a){switch(d){case P.R3MIX:d=P.V3;b.VBR=N.vbr_mtrh;break;case P.MEDIUM:d=P.V4;b.VBR=N.vbr_rh;break;case P.MEDIUM_FAST:d=P.V4;b.VBR=N.vbr_mtrh;break;case P.STANDARD:d=P.V2;b.VBR=N.vbr_rh;break;case P.STANDARD_FAST:d=P.V2;b.VBR=N.vbr_mtrh;break;case P.EXTREME:d=P.V0;b.VBR=N.vbr_rh;break;case P.EXTREME_FAST:d=P.V0;b.VBR=N.vbr_mtrh;break;case P.INSANE:return d=
320,b.preset=d,F(b,d,a),b.VBR=N.vbr_off,d}b.preset=d;switch(d){case P.V9:return p(b,9,a),d;case P.V8:return p(b,8,a),d;case P.V7:return p(b,7,a),d;case P.V6:return p(b,6,a),d;case P.V5:return p(b,5,a),d;case P.V4:return p(b,4,a),d;case P.V3:return p(b,3,a),d;case P.V2:return p(b,2,a),d;case P.V1:return p(b,1,a),d;case P.V0:return p(b,0,a),d}if(8<=d&&320>=d)return F(b,d,a);b.preset=0;return d}}function M(){function d(f,n,l,b,r,a){for(;0!=r--;)l[b]=1E-10+f[n+0]*a[0]-l[b-1]*a[1]+f[n-1]*a[2]-l[b-2]*a[3]+
f[n-2]*a[4]-l[b-3]*a[5]+f[n-3]*a[6]-l[b-4]*a[7]+f[n-4]*a[8]-l[b-5]*a[9]+f[n-5]*a[10]-l[b-6]*a[11]+f[n-6]*a[12]-l[b-7]*a[13]+f[n-7]*a[14]-l[b-8]*a[15]+f[n-8]*a[16]-l[b-9]*a[17]+f[n-9]*a[18]-l[b-10]*a[19]+f[n-10]*a[20],++b,++n}function n(d,n,l,b,r,a){for(;0!=r--;)l[b]=d[n+0]*a[0]-l[b-1]*a[1]+d[n-1]*a[2]-l[b-2]*a[3]+d[n-2]*a[4],++b,++n}function p(d){return d*d}var F=[[.038575994352,-3.84664617118067,-.02160367184185,7.81501653005538,-.00123395316851,-11.34170355132042,-9.291677959E-5,13.05504219327545,
-.01655260341619,-12.28759895145294,.02161526843274,9.4829380631979,-.02074045215285,-5.87257861775999,.00594298065125,2.75465861874613,.00306428023191,-.86984376593551,1.2025322027E-4,.13919314567432,.00288463683916],[.0541865640643,-3.47845948550071,-.02911007808948,6.36317777566148,-.00848709379851,-8.54751527471874,-.00851165645469,9.4769360780128,-.00834990904936,-8.81498681370155,.02245293253339,6.85401540936998,-.02596338512915,-4.39470996079559,.01624864962975,2.19611684890774,-.00240879051584,
-.75104302451432,.00674613682247,.13149317958808,-.00187763777362],[.15457299681924,-2.37898834973084,-.09331049056315,2.84868151156327,-.06247880153653,-2.64577170229825,.02163541888798,2.23697657451713,-.05588393329856,-1.67148153367602,.04781476674921,1.00595954808547,.00222312597743,-.45953458054983,.03174092540049,.16378164858596,-.01390589421898,-.05032077717131,.00651420667831,.0234789740702,-.00881362733839],[.30296907319327,-1.61273165137247,-.22613988682123,1.0797749225997,-.08587323730772,
-.2565625775407,.03282930172664,-.1627671912044,-.00915702933434,-.22638893773906,-.02364141202522,.39120800788284,-.00584456039913,-.22138138954925,.06276101321749,.04500235387352,-8.28086748E-6,.02005851806501,.00205861885564,.00302439095741,-.02950134983287],[.33642304856132,-1.49858979367799,-.2557224142557,.87350271418188,-.11828570177555,.12205022308084,.11921148675203,-.80774944671438,-.07834489609479,.47854794562326,-.0046997791438,-.12453458140019,-.0058950022444,-.04067510197014,.05724228140351,
.08333755284107,.00832043980773,-.04237348025746,-.0163538138454,.02977207319925,-.0176017656815],[.4491525660845,-.62820619233671,-.14351757464547,.29661783706366,-.22784394429749,-.372563729424,-.01419140100551,.00213767857124,.04078262797139,-.42029820170918,-.12398163381748,.22199650564824,.04097565135648,.00613424350682,.10478503600251,.06747620744683,-.01863887810927,.05784820375801,-.03193428438915,.03222754072173,.00541907748707],[.56619470757641,-1.04800335126349,-.75464456939302,.29156311971249,
.1624213774223,-.26806001042947,.16744243493672,.00819999645858,-.18901604199609,.45054734505008,.3093178284183,-.33032403314006,-.27562961986224,.0673936833311,.00647310677246,-.04784254229033,.08647503780351,.01639907836189,-.0378898455484,.01807364323573,-.00588215443421],[.58100494960553,-.51035327095184,-.53174909058578,-.31863563325245,-.14289799034253,-.20256413484477,.17520704835522,.1472815413433,.02377945217615,.38952639978999,.15558449135573,-.23313271880868,-.25344790059353,-.05246019024463,
.01628462406333,-.02505961724053,.06920467763959,.02442357316099,-.03721611395801,.01818801111503,-.00749618797172],[.53648789255105,-.2504987195602,-.42163034350696,-.43193942311114,-.00275953611929,-.03424681017675,.04267842219415,-.04678328784242,-.10214864179676,.26408300200955,.14590772289388,.15113130533216,-.02459864859345,-.17556493366449,-.11202315195388,-.18823009262115,-.04060034127,.05477720428674,.0478866554818,.0470440968812,-.02217936801134]],y=[[.98621192462708,-1.97223372919527,-1.97242384925416,
.97261396931306,.98621192462708],[.98500175787242,-1.96977855582618,-1.97000351574484,.9702284756635,.98500175787242],[.97938932735214,-1.95835380975398,-1.95877865470428,.95920349965459,.97938932735214],[.97531843204928,-1.95002759149878,-1.95063686409857,.95124613669835,.97531843204928],[.97316523498161,-1.94561023566527,-1.94633046996323,.94705070426118,.97316523498161],[.96454515552826,-1.92783286977036,-1.92909031105652,.93034775234268,.96454515552826],[.96009142950541,-1.91858953033784,-1.92018285901082,
.92177618768381,.96009142950541],[.95856916599601,-1.9154210807478,-1.91713833199203,.91885558323625,.95856916599601],[.94597685600279,-1.88903307939452,-1.89195371200558,.89487434461664,.94597685600279]];this.InitGainAnalysis=function(d,n){var l;a:{for(l=0;l<MAX_ORDER;l++)d.linprebuf[l]=d.lstepbuf[l]=d.loutbuf[l]=d.rinprebuf[l]=d.rstepbuf[l]=d.routbuf[l]=0;switch(0|n){case 48E3:d.reqindex=0;break;case 44100:d.reqindex=1;break;case 32E3:d.reqindex=2;break;case 24E3:d.reqindex=3;break;case 22050:d.reqindex=
4;break;case 16E3:d.reqindex=5;break;case 12E3:d.reqindex=6;break;case 11025:d.reqindex=7;break;case 8E3:d.reqindex=8;break;default:l=INIT_GAIN_ANALYSIS_ERROR;break a}d.sampleWindow=0|(1*n+20-1)/20;d.lsum=0;d.rsum=0;d.totsamp=0;Ha.ill(d.A,0);l=INIT_GAIN_ANALYSIS_OK}if(l!=INIT_GAIN_ANALYSIS_OK)return INIT_GAIN_ANALYSIS_ERROR;d.linpre=MAX_ORDER;d.rinpre=MAX_ORDER;d.lstep=MAX_ORDER;d.rstep=MAX_ORDER;d.lout=MAX_ORDER;d.rout=MAX_ORDER;Ha.fill(d.B,0);return INIT_GAIN_ANALYSIS_OK};this.AnalyzeSamples=function(f,
u,l,b,r,a,e){var C,m,k,c,g,z;if(0==a)return GAIN_ANALYSIS_OK;z=0;c=a;switch(e){case 1:b=u;r=l;break;case 2:break;default:return GAIN_ANALYSIS_ERROR}a<MAX_ORDER?(Q.arraycopy(u,l,f.linprebuf,MAX_ORDER,a),Q.arraycopy(b,r,f.rinprebuf,MAX_ORDER,a)):(Q.arraycopy(u,l,f.linprebuf,MAX_ORDER,MAX_ORDER),Q.arraycopy(b,r,f.rinprebuf,MAX_ORDER,MAX_ORDER));for(;0<c;){g=c>f.sampleWindow-f.totsamp?f.sampleWindow-f.totsamp:c;z<MAX_ORDER?(e=f.linpre+z,C=f.linprebuf,m=f.rinpre+z,k=f.rinprebuf,g>MAX_ORDER-z&&(g=MAX_ORDER-
z)):(e=l+z,C=u,m=r+z,k=b);d(C,e,f.lstepbuf,f.lstep+f.totsamp,g,F[f.reqindex]);d(k,m,f.rstepbuf,f.rstep+f.totsamp,g,F[f.reqindex]);n(f.lstepbuf,f.lstep+f.totsamp,f.loutbuf,f.lout+f.totsamp,g,y[f.reqindex]);n(f.rstepbuf,f.rstep+f.totsamp,f.routbuf,f.rout+f.totsamp,g,y[f.reqindex]);e=f.lout+f.totsamp;C=f.loutbuf;m=f.rout+f.totsamp;k=f.routbuf;for(var q=g%8;0!=q--;)f.lsum+=p(C[e++]),f.rsum+=p(k[m++]);for(q=g/8;0!=q--;)f.lsum+=p(C[e+0])+p(C[e+1])+p(C[e+2])+p(C[e+3])+p(C[e+4])+p(C[e+5])+p(C[e+6])+p(C[e+
7]),e+=8,f.rsum+=p(k[m+0])+p(k[m+1])+p(k[m+2])+p(k[m+3])+p(k[m+4])+p(k[m+5])+p(k[m+6])+p(k[m+7]),m+=8;c-=g;z+=g;f.totsamp+=g;f.totsamp==f.sampleWindow&&(e=10*M.STEPS_per_dB*Math.log10((f.lsum+f.rsum)/f.totsamp*.5+1E-37),e=0>=e?0:0|e,e>=f.A.length&&(e=f.A.length-1),f.A[e]++,f.lsum=f.rsum=0,Q.arraycopy(f.loutbuf,f.totsamp,f.loutbuf,0,MAX_ORDER),Q.arraycopy(f.routbuf,f.totsamp,f.routbuf,0,MAX_ORDER),Q.arraycopy(f.lstepbuf,f.totsamp,f.lstepbuf,0,MAX_ORDER),Q.arraycopy(f.rstepbuf,f.totsamp,f.rstepbuf,
0,MAX_ORDER),f.totsamp=0);if(f.totsamp>f.sampleWindow)return GAIN_ANALYSIS_ERROR}a<MAX_ORDER?(Q.arraycopy(f.linprebuf,a,f.linprebuf,0,MAX_ORDER-a),Q.arraycopy(f.rinprebuf,a,f.rinprebuf,0,MAX_ORDER-a),Q.arraycopy(u,l,f.linprebuf,MAX_ORDER-a,a),Q.arraycopy(b,r,f.rinprebuf,MAX_ORDER-a,a)):(Q.arraycopy(u,l+a-MAX_ORDER,f.linprebuf,0,MAX_ORDER),Q.arraycopy(b,r+a-MAX_ORDER,f.rinprebuf,0,MAX_ORDER));return GAIN_ANALYSIS_OK};this.GetTitleGain=function(d){var n;n=d.A;var l=d.A.length,b,r=0;for(b=0;b<l;b++)r+=
n[b];if(0==r)n=GAIN_NOT_ENOUGH_SAMPLES;else{r=0|Math.ceil(r*(1-.95));for(b=l;0<b--&&!(0>=(r-=n[b])););n=64.82-b/M.STEPS_per_dB}for(l=0;l<d.A.length;l++)d.B[l]+=d.A[l],d.A[l]=0;for(l=0;l<MAX_ORDER;l++)d.linprebuf[l]=d.lstepbuf[l]=d.loutbuf[l]=d.rinprebuf[l]=d.rstepbuf[l]=d.routbuf[l]=0;d.totsamp=0;d.lsum=d.rsum=0;return n}}function Hc(){var d;this.setModules=function(n){d=n};this.ResvFrameBegin=function(n,p){var F=n.internal_flags,y,f=F.l3_side,u=d.getframebits(n);p.bits=(u-8*F.sideinfo_len)/F.mode_gr;
var l=2048*F.mode_gr-8;320<n.brate?y=8*int(1E3*n.brate/(n.out_samplerate/1152)/8+.5):(y=11520,n.strict_ISO&&(y=8*int(32E4/(n.out_samplerate/1152)/8+.5)));F.ResvMax=y-u;F.ResvMax>l&&(F.ResvMax=l);if(0>F.ResvMax||n.disable_reservoir)F.ResvMax=0;u=p.bits*F.mode_gr+Math.min(F.ResvSize,F.ResvMax);u>y&&(u=y);f.resvDrain_pre=0;null!=F.pinfo&&(F.pinfo.mean_bits=p.bits/2,F.pinfo.resvsize=F.ResvSize);return u};this.ResvMaxBits=function(d,p,B,y){var f=d.internal_flags,u=f.ResvSize,l=f.ResvMax;0!=y&&(u+=p);0!=
(f.substep_shaping&1)&&(l*=.9);B.bits=p;10*u>9*l?(y=u-9*l/10,B.bits+=y,f.substep_shaping|=128):(y=0,f.substep_shaping&=127,d.disable_reservoir||0!=(f.substep_shaping&1)||(B.bits-=.1*p));d=u<6*f.ResvMax/10?u:6*f.ResvMax/10;d-=y;0>d&&(d=0);return d};this.ResvAdjust=function(d,p){d.ResvSize-=p.part2_3_length+p.part2_length};this.ResvFrameEnd=function(d,p){var B,y=d.l3_side;d.ResvSize+=p*d.mode_gr;var f=0;y.resvDrain_post=0;y.resvDrain_pre=0;0!=(B=d.ResvSize%8)&&(f+=B);B=d.ResvSize-f-d.ResvMax;0<B&&(f+=
B);B=Math.min(8*y.main_data_begin,f)/8;y.resvDrain_pre+=8*B;f-=8*B;d.ResvSize-=8*B;y.main_data_begin-=B;y.resvDrain_post+=f;d.ResvSize-=f}}function zb(){function B(a){this.bits=0|a}function n(a,c,d,b,m,h){c=.5946/c;for(a>>=1;0!=a--;)m[h++]=c>d[b++]?0:1,m[h++]=c>d[b++]?0:1}function p(a,c,d,b,m,h){a>>=1;var w=a%2;for(a>>=1;0!=a--;){var g,k,e,l,r,n,p;g=d[b++]*c;k=d[b++]*c;r=0|g;e=d[b++]*c;n=0|k;l=d[b++]*c;p=0|e;g+=f.adj43[r];r=0|l;k+=f.adj43[n];m[h++]=0|g;e+=f.adj43[p];m[h++]=0|k;l+=f.adj43[r];m[h++]=
0|e;m[h++]=0|l}0!=w&&(g=d[b++]*c,k=d[b++]*c,g+=f.adj43[0|g],k+=f.adj43[0|k],m[h++]=0|g,m[h++]=0|k)}function F(a,c,d,b){var m,h=c,w=m=0;do{var g=a[h++],k=a[h++];m<g&&(m=g);w<k&&(w=k)}while(h<d);m<w&&(m=w);switch(m){case 0:return m;case 1:h=c;c=0;m=u.ht[1].hlen;do w=2*a[h+0]+a[h+1],h+=2,c+=m[w];while(h<d);b.bits+=c;return 1;case 2:case 3:h=c;c=l[m-1];m=0;w=u.ht[c].xlen;g=2==c?u.table23:u.table56;do k=a[h+0]*w+a[h+1],h+=2,m+=g[k];while(h<d);a=m&65535;m>>=16;m>a&&(m=a,c++);b.bits+=m;return c;case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:h=
c;c=l[m-1];var g=w=m=0,k=u.ht[c].xlen,e=u.ht[c].hlen,I=u.ht[c+1].hlen,f=u.ht[c+2].hlen;do{var r=a[h+0]*k+a[h+1],h=h+2;m+=e[r];w+=I[r];g+=f[r]}while(h<d);a=c;m>w&&(m=w,a++);m>g&&(m=g,a=c+2);b.bits+=m;return a;default:if(m>ya.IXMAX_VAL)return b.bits=ya.LARGE_BITS,-1;m-=15;for(h=24;32>h&&!(u.ht[h].linmax>=m);h++);for(w=h-8;24>w&&!(u.ht[w].linmax>=m);w++);m=w;g=65536*u.ht[m].xlen+u.ht[h].xlen;w=0;do k=a[c++],e=a[c++],0!=k&&(14<k&&(k=15,w+=g),k*=16),0!=e&&(14<e&&(e=15,w+=g),k+=e),w+=u.largetbl[k];while(c<
d);a=w&65535;w>>=16;w>a&&(w=a,m=h);b.bits+=w;return m}}function y(a,c,m,b,g,h,w,k){for(var e=c.big_values,l=2;l<d.SBMAX_l+1;l++){var f=a.scalefac_band.l[l];if(f>=e)break;var r=g[l-2]+c.count1bits;if(m.part2_3_length<=r)break;r=new B(r);f=F(b,f,e,r);r=r.bits;m.part2_3_length<=r||(m.assign(c),m.part2_3_length=r,m.region0_count=h[l-2],m.region1_count=l-2-h[l-2],m.table_select[0]=w[l-2],m.table_select[1]=k[l-2],m.table_select[2]=f)}}var f=null;this.qupvt=null;this.setModules=function(a){f=this.qupvt=
a};var fa=[[0,0],[0,0],[0,0],[0,0],[0,0],[0,1],[1,1],[1,1],[1,2],[2,2],[2,3],[2,3],[3,4],[3,4],[3,4],[4,5],[4,5],[4,6],[5,6],[5,6],[5,7],[6,7],[6,7]],l=[1,2,5,7,7,10,10,13,13,13,13,13,13,13,13];this.noquant_count_bits=function(a,c,m){var b=c.l3_enc,g=Math.min(576,c.max_nonzero_coeff+2>>1<<1);null!=m&&(m.sfb_count1=0);for(;1<g&&0==(b[g-1]|b[g-2]);g-=2);c.count1=g;for(var h=0,w=0;3<g;g-=4){var k;if(1<((b[g-1]|b[g-2]|b[g-3]|b[g-4])&2147483647))break;k=2*(2*(2*b[g-4]+b[g-3])+b[g-2])+b[g-1];h+=u.t32l[k];
w+=u.t33l[k]}k=h;c.count1table_select=0;h>w&&(k=w,c.count1table_select=1);c.count1bits=k;c.big_values=g;if(0==g)return k;c.block_type==d.SHORT_TYPE?(h=3*a.scalefac_band.s[3],h>c.big_values&&(h=c.big_values),w=c.big_values):c.block_type==d.NORM_TYPE?(h=c.region0_count=a.bv_scf[g-2],w=c.region1_count=a.bv_scf[g-1],w=a.scalefac_band.l[h+w+2],h=a.scalefac_band.l[h+1],w<g&&(k=new B(k),c.table_select[2]=F(b,w,g,k),k=k.bits)):(c.region0_count=7,c.region1_count=d.SBMAX_l-1-7-1,h=a.scalefac_band.l[8],w=g,
h>w&&(h=w));h=Math.min(h,g);w=Math.min(w,g);0<h&&(k=new B(k),c.table_select[0]=F(b,0,h,k),k=k.bits);h<w&&(k=new B(k),c.table_select[1]=F(b,h,w,k),k=k.bits);2==a.use_best_huffman&&(c.part2_3_length=k,best_huffman_divide(a,c),k=c.part2_3_length);if(null!=m&&c.block_type==d.NORM_TYPE){for(b=0;a.scalefac_band.l[b]<c.big_values;)b++;m.sfb_count1=b}return k};this.count_bits=function(a,c,b,m){var g=b.l3_enc,h=ya.IXMAX_VAL/f.IPOW20(b.global_gain);if(b.xrpow_max>h)return ya.LARGE_BITS;var h=f.IPOW20(b.global_gain),
w,k,e=0,l,r=0,v=0,G=0,B=0,D=g,K=0,T=c,W=0;l=null!=m&&b.global_gain==m.global_gain;k=b.block_type==d.SHORT_TYPE?38:21;for(w=0;w<=k;w++){var C=-1;if(l||b.block_type==d.NORM_TYPE)C=b.global_gain-(b.scalefac[w]+(0!=b.preflag?f.pretab[w]:0)<<b.scalefac_scale+1)-8*b.subblock_gain[b.window[w]];if(l&&m.step[w]==C)0!=r&&(p(r,h,T,W,D,K),r=0),0!=v&&(n(v,h,T,W,D,K),v=0);else{var ia=b.width[w];e+b.width[w]>b.max_nonzero_coeff&&(w=b.max_nonzero_coeff-e+1,Ha.fill(g,b.max_nonzero_coeff,576,0),ia=w,0>ia&&(ia=0),w=
k+1);0==r&&0==v&&(D=g,K=B,T=c,W=G);null!=m&&0<m.sfb_count1&&w>=m.sfb_count1&&0<m.step[w]&&C>=m.step[w]?(0!=r&&(p(r,h,T,W,D,K),r=0,D=g,K=B,T=c,W=G),v+=ia):(0!=v&&(n(v,h,T,W,D,K),v=0,D=g,K=B,T=c,W=G),r+=ia);if(0>=ia){0!=v&&(n(v,h,T,W,D,K),v=0);0!=r&&(p(r,h,T,W,D,K),r=0);break}}w<=k&&(B+=b.width[w],G+=b.width[w],e+=b.width[w])}0!=r&&p(r,h,T,W,D,K);0!=v&&n(v,h,T,W,D,K);if(0!=(a.substep_shaping&2))for(h=0,k=.634521682242439/f.IPOW20(b.global_gain+b.scalefac_scale),e=0;e<b.sfbmax;e++)if(l=b.width[e],0==
a.pseudohalf[e])h+=l;else for(r=h,h+=l;r<h;++r)g[r]=c[r]>=k?g[r]:0;return this.noquant_count_bits(a,b,m)};this.best_huffman_divide=function(a,c){var b=new Ab,m=c.l3_enc,g=aa(23),h=aa(23),w=aa(23),k=aa(23);if(c.block_type!=d.SHORT_TYPE||1!=a.mode_gr){b.assign(c);if(c.block_type==d.NORM_TYPE){for(var e=c.big_values,l=0;22>=l;l++)g[l]=ya.LARGE_BITS;for(l=0;16>l;l++){var r=a.scalefac_band.l[l+1];if(r>=e)break;for(var f=0,n=new B(f),p=F(m,0,r,n),f=n.bits,D=0;8>D;D++){var K=a.scalefac_band.l[l+D+2];if(K>=
e)break;n=f;n=new B(n);K=F(m,r,K,n);n=n.bits;g[l+D]>n&&(g[l+D]=n,h[l+D]=l,w[l+D]=p,k[l+D]=K)}}y(a,b,c,m,g,h,w,k)}e=b.big_values;if(!(0==e||1<(m[e-2]|m[e-1])||(e=c.count1+2,576<e))){b.assign(c);b.count1=e;for(r=l=0;e>b.big_values;e-=4)f=2*(2*(2*m[e-4]+m[e-3])+m[e-2])+m[e-1],l+=u.t32l[f],r+=u.t33l[f];b.big_values=e;b.count1table_select=0;l>r&&(l=r,b.count1table_select=1);b.count1bits=l;b.block_type==d.NORM_TYPE?y(a,b,c,m,g,h,w,k):(b.part2_3_length=l,l=a.scalefac_band.l[8],l>e&&(l=e),0<l&&(g=new B(b.part2_3_length),
b.table_select[0]=F(m,0,l,g),b.part2_3_length=g.bits),e>l&&(g=new B(b.part2_3_length),b.table_select[1]=F(m,l,e,g),b.part2_3_length=g.bits),c.part2_3_length>b.part2_3_length&&c.assign(b))}}};var b=[1,1,1,1,8,2,2,2,4,4,4,8,8,8,16,16],r=[1,2,4,8,1,2,4,8,2,4,8,2,4,8,4,8],a=[0,0,0,0,3,1,1,1,2,2,2,3,3,3,4,4],e=[0,1,2,3,0,1,2,3,1,2,3,1,2,3,2,3];zb.slen1_tab=a;zb.slen2_tab=e;this.best_scalefac_store=function(c,m,g,k){var t=k.tt[m][g],h,w,l,H=0;for(h=w=0;h<t.sfbmax;h++){l=t.width[h];w+=l;for(l=-l;0>l&&0==
t.l3_enc[l+w];l++);0==l&&(t.scalefac[h]=H=-2)}if(0==t.scalefac_scale&&0==t.preflag){for(h=w=0;h<t.sfbmax;h++)0<t.scalefac[h]&&(w|=t.scalefac[h]);if(0==(w&1)&&0!=w){for(h=0;h<t.sfbmax;h++)0<t.scalefac[h]&&(t.scalefac[h]>>=1);t.scalefac_scale=H=1}}if(0==t.preflag&&t.block_type!=d.SHORT_TYPE&&2==c.mode_gr){for(h=11;h<d.SBPSY_l&&!(t.scalefac[h]<f.pretab[h]&&-2!=t.scalefac[h]);h++);if(h==d.SBPSY_l){for(h=11;h<d.SBPSY_l;h++)0<t.scalefac[h]&&(t.scalefac[h]-=f.pretab[h]);t.preflag=H=1}}for(h=0;4>h;h++)k.scfsi[g][h]=
0;if(2==c.mode_gr&&1==m&&k.tt[0][g].block_type!=d.SHORT_TYPE&&k.tt[1][g].block_type!=d.SHORT_TYPE){m=k.tt[1][g];w=k.tt[0][g];for(H=0;H<u.scfsi_band.length-1;H++){for(h=u.scfsi_band[H];h<u.scfsi_band[H+1]&&!(w.scalefac[h]!=m.scalefac[h]&&0<=m.scalefac[h]);h++);if(h==u.scfsi_band[H+1]){for(h=u.scfsi_band[H];h<u.scfsi_band[H+1];h++)m.scalefac[h]=-1;k.scfsi[g][H]=1}}for(h=k=g=0;11>h;h++)-1!=m.scalefac[h]&&(k++,g<m.scalefac[h]&&(g=m.scalefac[h]));for(l=w=0;h<d.SBPSY_l;h++)-1!=m.scalefac[h]&&(l++,w<m.scalefac[h]&&
(w=m.scalefac[h]));for(H=0;16>H;H++)g<b[H]&&w<r[H]&&(h=a[H]*k+e[H]*l,m.part2_length>h&&(m.part2_length=h,m.scalefac_compress=H));H=0}for(h=0;h<t.sfbmax;h++)-2==t.scalefac[h]&&(t.scalefac[h]=0);0!=H&&(2==c.mode_gr?this.scale_bitcount(t):this.scale_bitcount_lsf(c,t))};var C=[0,18,36,54,54,36,54,72,54,72,90,72,90,108,108,126],m=[0,18,36,54,51,35,53,71,52,70,88,69,87,105,104,122],k=[0,10,20,30,33,21,31,41,32,42,52,43,53,63,64,74];this.scale_bitcount=function(a){var c,g=0,l=0,e,h=a.scalefac;if(a.block_type==
d.SHORT_TYPE)e=C,0!=a.mixed_block_flag&&(e=m);else if(e=k,0==a.preflag){for(c=11;c<d.SBPSY_l&&!(h[c]<f.pretab[c]);c++);if(c==d.SBPSY_l)for(a.preflag=1,c=11;c<d.SBPSY_l;c++)h[c]-=f.pretab[c]}for(c=0;c<a.sfbdivide;c++)g<h[c]&&(g=h[c]);for(;c<a.sfbmax;c++)l<h[c]&&(l=h[c]);a.part2_length=ya.LARGE_BITS;for(c=0;16>c;c++)g<b[c]&&l<r[c]&&a.part2_length>e[c]&&(a.part2_length=e[c],a.scalefac_compress=c);return a.part2_length==ya.LARGE_BITS};var c=[[15,15,7,7],[15,15,7,0],[7,3,0,0],[15,31,31,0],[7,7,7,0],[3,
3,0,0]];this.scale_bitcount_lsf=function(a,b){var m,k,e,h,w,l,r,n=aa(4),I=b.scalefac;m=0!=b.preflag?2:0;for(l=0;4>l;l++)n[l]=0;if(b.block_type==d.SHORT_TYPE){k=1;var p=f.nr_of_sfb_block[m][k];for(e=r=0;4>e;e++)for(h=p[e]/3,l=0;l<h;l++,r++)for(w=0;3>w;w++)I[3*r+w]>n[e]&&(n[e]=I[3*r+w])}else for(k=0,p=f.nr_of_sfb_block[m][k],e=r=0;4>e;e++)for(h=p[e],l=0;l<h;l++,r++)I[r]>n[e]&&(n[e]=I[r]);h=!1;for(e=0;4>e;e++)n[e]>c[m][e]&&(h=!0);if(!h){b.sfb_partition_table=f.nr_of_sfb_block[m][k];for(e=0;4>e;e++)b.slen[e]=
g[n[e]];k=b.slen[0];e=b.slen[1];n=b.slen[2];w=b.slen[3];switch(m){case 0:b.scalefac_compress=(5*k+e<<4)+(n<<2)+w;break;case 1:b.scalefac_compress=400+(5*k+e<<2)+n;break;case 2:b.scalefac_compress=500+3*k+e;break;default:Q.err.printf("intensity stereo not implemented yet\n")}}if(!h)for(e=b.part2_length=0;4>e;e++)b.part2_length+=b.slen[e]*b.sfb_partition_table[e];return h};var g=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4];this.huffman_init=function(a){for(var c=2;576>=c;c+=2){for(var b=0,m;a.scalefac_band.l[++b]<
c;);for(m=fa[b][0];a.scalefac_band.l[m+1]>c;)m--;0>m&&(m=fa[b][0]);a.bv_scf[c-2]=m;for(m=fa[b][1];a.scalefac_band.l[m+a.bv_scf[c-2]+2]>c;)m--;0>m&&(m=fa[b][1]);a.bv_scf[c-1]=m}}}function ma(){function B(a,b,m){for(;0<m;){var h;0==q&&(q=8,z++,a.header[a.w_ptr].write_timing==g&&(h=a,Q.arraycopy(h.header[h.w_ptr].buf,0,c,z,h.sideinfo_len),z+=h.sideinfo_len,g+=8*h.sideinfo_len,h.w_ptr=h.w_ptr+1&Y.MAX_HEADER_BUF-1),c[z]=0);h=Math.min(m,q);m-=h;q-=h;c[z]|=b>>m<<q;g+=h}}function n(a,c){var b=a.internal_flags,
h;8<=c&&(B(b,76,8),c-=8);8<=c&&(B(b,65,8),c-=8);8<=c&&(B(b,77,8),c-=8);8<=c&&(B(b,69,8),c-=8);if(32<=c){var g=m.getLameShortVersion();if(32<=c)for(h=0;h<g.length&&8<=c;++h)c-=8,B(b,g.charAt(h),8)}for(;1<=c;--c)B(b,b.ancillary_flag,1),b.ancillary_flag^=a.disable_reservoir?0:1}function p(a,c,b){for(var h=a.header[a.h_ptr].ptr;0<b;){var m=Math.min(b,8-(h&7));b-=m;a.header[a.h_ptr].buf[h>>3]|=c>>b<<8-(h&7)-m;h+=m}a.header[a.h_ptr].ptr=h}function F(a,c){a<<=8;for(var b=0;8>b;b++)a<<=1,c<<=1,0!=((c^a)&
65536)&&(c^=32773);return c}function y(a,c){var b=u.ht[c.count1table_select+32],h,m=0,g=c.big_values,d=c.big_values;for(h=(c.count1-c.big_values)/4;0<h;--h){var k=0,e=0,l;l=c.l3_enc[g+0];0!=l&&(e+=8,0>c.xr[d+0]&&k++);l=c.l3_enc[g+1];0!=l&&(e+=4,k*=2,0>c.xr[d+1]&&k++);l=c.l3_enc[g+2];0!=l&&(e+=2,k*=2,0>c.xr[d+2]&&k++);l=c.l3_enc[g+3];0!=l&&(e++,k*=2,0>c.xr[d+3]&&k++);g+=4;d+=4;B(a,k+b.table[e],b.hlen[e]);m+=b.hlen[e]}return m}function f(a,c,b,h,m){var g=u.ht[c],k=0;if(0==c)return k;for(;b<h;b+=2){var d=
0,e=0,l=g.xlen,r=g.xlen,f=0,D=m.l3_enc[b],K=m.l3_enc[b+1];0!=D&&(0>m.xr[b]&&f++,d--);15<c&&(14<D&&(f|=D-15<<1,e=l,D=15),14<K&&(r=K-15,f<<=l,f|=r,e+=l,K=15),r=16);0!=K&&(f<<=1,0>m.xr[b+1]&&f++,d--);D=D*r+K;e-=d;d+=g.hlen[D];B(a,g.table[D],d);B(a,f,e);k+=d+e}return k}function fa(a,c){var b=3*a.scalefac_band.s[3];b>c.big_values&&(b=c.big_values);var h=f(a,c.table_select[0],0,b,c);return h+=f(a,c.table_select[1],b,c.big_values,c)}function l(a,c){var b,h,m,g;b=c.big_values;h=c.region0_count+1;m=a.scalefac_band.l[h];
h+=c.region1_count+1;g=a.scalefac_band.l[h];m>b&&(m=b);g>b&&(g=b);h=f(a,c.table_select[0],0,m,c);h+=f(a,c.table_select[1],m,g,c);return h+=f(a,c.table_select[2],g,b,c)}function b(){this.total=0}function r(c,b){var m=c.internal_flags,h,k,d,e;e=m.w_ptr;d=m.h_ptr-1;-1==d&&(d=Y.MAX_HEADER_BUF-1);h=m.header[d].write_timing-g;b.total=h;0<=h&&(k=1+d-e,d<e&&(k=1+d-e+Y.MAX_HEADER_BUF),h-=8*k*m.sideinfo_len);m=a.getframebits(c);h+=m;b.total+=m;b.total=0!=b.total%8?1+b.total/8:b.total/8;b.total+=z+1;0>h&&Q.err.println("strange error flushing buffer ... \n");
return h}var a=this,e=null,C=null,m=null,k=null;this.setModules=function(a,c,b,h){e=a;C=c;m=b;k=h};var c=null,g=0,z=0,q=0;this.getframebits=function(a){var c=a.internal_flags;return 8*(0|72E3*(a.version+1)*(0!=c.bitrate_index?u.bitrate_table[a.version][c.bitrate_index]:a.brate)/a.out_samplerate+c.padding)};this.CRC_writeheader=function(a,c){var b;b=F(c[2]&255,65535);b=F(c[3]&255,b);for(var h=6;h<a.sideinfo_len;h++)b=F(c[h]&255,b);c[4]=byte(b>>8);c[5]=byte(b&255)};this.flush_bitstream=function(a){var c=
a.internal_flags,m,h;m=c.l3_side;0>(h=r(a,new b))||(n(a,h),c.ResvSize=0,m.main_data_begin=0,c.findReplayGain&&(m=e.GetTitleGain(c.rgdata),c.RadioGain=Math.floor(10*m+.5)|0),c.findPeakSample&&(c.noclipGainChange=Math.ceil(200*Math.log10(c.PeakSample/32767))|0,0<c.noclipGainChange?EQ(a.scale,1)||EQ(a.scale,0)?c.noclipScale=Math.floor(32767/c.PeakSample*100)/100:c.noclipScale=-1:c.noclipScale=-1))};this.add_dummy_byte=function(a,b,m){a=a.internal_flags;for(var h;0<m--;){h=b;for(var d=8;0<d;){var k;0==
q&&(q=8,z++,c[z]=0);k=Math.min(d,q);d-=k;q-=k;c[z]|=h>>d<<q;g+=k}for(h=0;h<Y.MAX_HEADER_BUF;++h)a.header[h].write_timing+=8}};this.format_bitstream=function(a){var c=a.internal_flags,m;m=c.l3_side;var h=this.getframebits(a);n(a,m.resvDrain_pre);var k=a.internal_flags,e,f,z;e=k.l3_side;k.header[k.h_ptr].ptr=0;Ha.fill(k.header[k.h_ptr].buf,0,k.sideinfo_len,0);16E3>a.out_samplerate?p(k,4094,12):p(k,4095,12);p(k,a.version,1);p(k,1,2);p(k,a.error_protection?0:1,1);p(k,k.bitrate_index,4);p(k,k.samplerate_index,
2);p(k,k.padding,1);p(k,a.extension,1);p(k,a.mode.ordinal(),2);p(k,k.mode_ext,2);p(k,a.copyright,1);p(k,a.original,1);p(k,a.emphasis,2);a.error_protection&&p(k,0,16);if(1==a.version){p(k,e.main_data_begin,9);2==k.channels_out?p(k,e.private_bits,3):p(k,e.private_bits,5);for(z=0;z<k.channels_out;z++)for(f=0;4>f;f++)p(k,e.scfsi[z][f],1);for(f=0;2>f;f++)for(z=0;z<k.channels_out;z++){var q=e.tt[f][z];p(k,q.part2_3_length+q.part2_length,12);p(k,q.big_values/2,9);p(k,q.global_gain,8);p(k,q.scalefac_compress,
4);q.block_type!=d.NORM_TYPE?(p(k,1,1),p(k,q.block_type,2),p(k,q.mixed_block_flag,1),14==q.table_select[0]&&(q.table_select[0]=16),p(k,q.table_select[0],5),14==q.table_select[1]&&(q.table_select[1]=16),p(k,q.table_select[1],5),p(k,q.subblock_gain[0],3),p(k,q.subblock_gain[1],3),p(k,q.subblock_gain[2],3)):(p(k,0,1),14==q.table_select[0]&&(q.table_select[0]=16),p(k,q.table_select[0],5),14==q.table_select[1]&&(q.table_select[1]=16),p(k,q.table_select[1],5),14==q.table_select[2]&&(q.table_select[2]=16),
p(k,q.table_select[2],5),p(k,q.region0_count,4),p(k,q.region1_count,3));p(k,q.preflag,1);p(k,q.scalefac_scale,1);p(k,q.count1table_select,1)}}else for(p(k,e.main_data_begin,8),p(k,e.private_bits,k.channels_out),z=f=0;z<k.channels_out;z++)q=e.tt[f][z],p(k,q.part2_3_length+q.part2_length,12),p(k,q.big_values/2,9),p(k,q.global_gain,8),p(k,q.scalefac_compress,9),q.block_type!=d.NORM_TYPE?(p(k,1,1),p(k,q.block_type,2),p(k,q.mixed_block_flag,1),14==q.table_select[0]&&(q.table_select[0]=16),p(k,q.table_select[0],
5),14==q.table_select[1]&&(q.table_select[1]=16),p(k,q.table_select[1],5),p(k,q.subblock_gain[0],3),p(k,q.subblock_gain[1],3),p(k,q.subblock_gain[2],3)):(p(k,0,1),14==q.table_select[0]&&(q.table_select[0]=16),p(k,q.table_select[0],5),14==q.table_select[1]&&(q.table_select[1]=16),p(k,q.table_select[1],5),14==q.table_select[2]&&(q.table_select[2]=16),p(k,q.table_select[2],5),p(k,q.region0_count,4),p(k,q.region1_count,3)),p(k,q.scalefac_scale,1),p(k,q.count1table_select,1);a.error_protection&&CRC_writeheader(k,
k.header[k.h_ptr].buf);e=k.h_ptr;k.h_ptr=e+1&Y.MAX_HEADER_BUF-1;k.header[k.h_ptr].write_timing=k.header[e].write_timing+h;k.h_ptr==k.w_ptr&&Q.err.println("Error: MAX_HEADER_BUF too small in bitstream.c \n");var k=8*c.sideinfo_len,v=0,C=a.internal_flags,J=C.l3_side;if(1==a.version)for(e=0;2>e;e++)for(z=0;z<C.channels_out;z++){var D=J.tt[e][z],K=zb.slen1_tab[D.scalefac_compress],T=zb.slen2_tab[D.scalefac_compress];for(f=q=0;f<D.sfbdivide;f++)-1!=D.scalefac[f]&&(B(C,D.scalefac[f],K),q+=K);for(;f<D.sfbmax;f++)-1!=
D.scalefac[f]&&(B(C,D.scalefac[f],T),q+=T);q=D.block_type==d.SHORT_TYPE?q+fa(C,D):q+l(C,D);q+=y(C,D);v+=q}else for(z=e=0;z<C.channels_out;z++){var D=J.tt[e][z],W=0,T=f=q=0;if(D.block_type==d.SHORT_TYPE){for(;4>T;T++)for(var u=D.sfb_partition_table[T]/3,ia=D.slen[T],K=0;K<u;K++,f++)B(C,Math.max(D.scalefac[3*f+0],0),ia),B(C,Math.max(D.scalefac[3*f+1],0),ia),B(C,Math.max(D.scalefac[3*f+2],0),ia),W+=3*ia;q+=fa(C,D)}else{for(;4>T;T++)for(u=D.sfb_partition_table[T],ia=D.slen[T],K=0;K<u;K++,f++)B(C,Math.max(D.scalefac[f],
0),ia),W+=ia;q+=l(C,D)}q+=y(C,D);v+=W+q}k+=v;n(a,m.resvDrain_post);k+=m.resvDrain_post;m.main_data_begin+=(h-k)/8;r(a,new b)!=c.ResvSize&&Q.err.println("Internal buffer inconsistency. flushbits <> ResvSize");8*m.main_data_begin!=c.ResvSize&&(Q.err.printf("bit reservoir error: \nl3_side.main_data_begin: %d \nResvoir size:             %d \nresv drain (post)         %d \nresv drain (pre)          %d \nheader and sideinfo:      %d \ndata bits:                %d \ntotal bits:               %d (remainder: %d) \nbitsperframe:             %d \n",
8*m.main_data_begin,c.ResvSize,m.resvDrain_post,m.resvDrain_pre,8*c.sideinfo_len,k-m.resvDrain_post-8*c.sideinfo_len,k,k%8,h),Q.err.println("This is a fatal error.  It has several possible causes:"),Q.err.println("90%%  LAME compiled with buggy version of gcc using advanced optimizations"),Q.err.println(" 9%%  Your system is overclocked"),Q.err.println(" 1%%  bug in LAME encoding library"),c.ResvSize=8*m.main_data_begin);if(1E9<g){for(a=0;a<Y.MAX_HEADER_BUF;++a)c.header[a].write_timing-=g;g=0}return 0};
this.copy_buffer=function(a,b,m,h,g){var d=z+1;if(0>=d)return 0;if(0!=h&&d>h)return-1;Q.arraycopy(c,0,b,m,d);z=-1;q=0;if(0!=g&&(h=aa(1),h[0]=a.nMusicCRC,k.updateMusicCRC(h,b,m,d),a.nMusicCRC=h[0],0<d&&(a.VBR_seek_table.nBytesWritten+=d),a.decode_on_the_fly)){h=wa([2,1152]);g=d;for(var l=-1,f;0!=l;)if(l=C.hip_decode1_unclipped(a.hip,b,m,g,h[0],h[1]),g=0,-1==l&&(l=0),0<l){if(a.findPeakSample){for(f=0;f<l;f++)h[0][f]>a.PeakSample?a.PeakSample=h[0][f]:-h[0][f]>a.PeakSample&&(a.PeakSample=-h[0][f]);if(1<
a.channels_out)for(f=0;f<l;f++)h[1][f]>a.PeakSample?a.PeakSample=h[1][f]:-h[1][f]>a.PeakSample&&(a.PeakSample=-h[1][f])}if(a.findReplayGain&&e.AnalyzeSamples(a.rgdata,h[0],0,h[1],0,l,a.channels_out)==M.GAIN_ANALYSIS_ERROR)return-6}}return d};this.init_bit_stream_w=function(a){c=new Int8Array(P.LAME_MAXMP3BUFFER);a.h_ptr=a.w_ptr=0;a.header[a.h_ptr].write_timing=0;z=-1;g=q=0}}function pb(){function d(a,b){var c=a[b+0]&255,c=c<<8|a[b+1]&255,c=c<<8,c=c|a[b+2]&255,c=c<<8;return c|=a[b+3]&255}function n(a,
b,c){a[b+0]=c>>24&255;a[b+1]=c>>16&255;a[b+2]=c>>8&255;a[b+3]=c&255}function p(a,b,c){a[b+0]=c>>8&255;a[b+1]=c&255}function F(a,b,c){return 255&(a<<b|c&~(-1<<b))}function y(a,b){var c=a.internal_flags;b[0]=F(b[0],8,255);b[1]=F(b[1],3,7);b[1]=F(b[1],1,16E3>a.out_samplerate?0:1);b[1]=F(b[1],1,a.version);b[1]=F(b[1],2,1);b[1]=F(b[1],1,a.error_protection?0:1);b[2]=F(b[2],4,c.bitrate_index);b[2]=F(b[2],2,c.samplerate_index);b[2]=F(b[2],1,0);b[2]=F(b[2],1,a.extension);b[3]=F(b[3],2,a.mode.ordinal());b[3]=
F(b[3],2,c.mode_ext);b[3]=F(b[3],1,a.copyright);b[3]=F(b[3],1,a.original);b[3]=F(b[3],2,a.emphasis);b[0]=255;var c=b[1]&241,g;g=1==a.version?128:16E3>a.out_samplerate?32:64;a.VBR==N.vbr_off&&(g=a.brate);g=a.free_format?0:255&16*fa.BitrateIndex(g,a.version,a.out_samplerate);b[1]=1==a.version?255&(c|10):255&(c|2);c=b[2]&13;b[2]=255&(g|c)}function f(a,b){return b=b>>8^C[(b^a)&255]}var fa,l,b;this.setModules=function(a,k,c){fa=a;l=k;b=c};var r=pb.NUMTOCENTRIES,a=pb.MAXFRAMESIZE,e=r+4+4+4+4+4+9+1+1+8+
1+1+3+1+1+2+4+2+2,C=[0,49345,49537,320,49921,960,640,49729,50689,1728,1920,51009,1280,50625,50305,1088,52225,3264,3456,52545,3840,53185,52865,3648,2560,51905,52097,2880,51457,2496,2176,51265,55297,6336,6528,55617,6912,56257,55937,6720,7680,57025,57217,8E3,56577,7616,7296,56385,5120,54465,54657,5440,55041,6080,5760,54849,53761,4800,4992,54081,4352,53697,53377,4160,61441,12480,12672,61761,13056,62401,62081,12864,13824,63169,63361,14144,62721,13760,13440,62529,15360,64705,64897,15680,65281,16320,16E3,
65089,64001,15040,15232,64321,14592,63937,63617,14400,10240,59585,59777,10560,60161,11200,10880,59969,60929,11968,12160,61249,11520,60865,60545,11328,58369,9408,9600,58689,9984,59329,59009,9792,8704,58049,58241,9024,57601,8640,8320,57409,40961,24768,24960,41281,25344,41921,41601,25152,26112,42689,42881,26432,42241,26048,25728,42049,27648,44225,44417,27968,44801,28608,28288,44609,43521,27328,27520,43841,26880,43457,43137,26688,30720,47297,47489,31040,47873,31680,31360,47681,48641,32448,32640,48961,
32E3,48577,48257,31808,46081,29888,30080,46401,30464,47041,46721,30272,29184,45761,45953,29504,45313,29120,28800,45121,20480,37057,37249,20800,37633,21440,21120,37441,38401,22208,22400,38721,21760,38337,38017,21568,39937,23744,23936,40257,24320,40897,40577,24128,23040,39617,39809,23360,39169,22976,22656,38977,34817,18624,18816,35137,19200,35777,35457,19008,19968,36545,36737,20288,36097,19904,19584,35905,17408,33985,34177,17728,34561,18368,18048,34369,33281,17088,17280,33601,16640,33217,32897,16448];
this.addVbrFrame=function(a){var b=a.internal_flags;var c=b.VBR_seek_table;a=u.bitrate_table[a.version][b.bitrate_index];c.nVbrNumFrames++;c.sum+=a;c.seen++;if(!(c.seen<c.want)&&(c.pos<c.size&&(c.bag[c.pos]=c.sum,c.pos++,c.seen=0),c.pos==c.size)){for(a=1;a<c.size;a+=2)c.bag[a/2]=c.bag[a];c.want*=2;c.pos/=2}};this.getVbrTag=function(a){var b=new VBRTagData,c=0;b.flags=0;var g=a[c+1]>>3&1,e=a[c+2]>>2&3,l=a[c+3]>>6&3,f=a[c+2]>>4&15,f=u.bitrate_table[g][f];b.samprate=14==a[c+1]>>4?u.samplerate_table[2][e]:
u.samplerate_table[g][e];e=c=0!=g?3!=l?c+36:c+21:3!=l?c+21:c+13;if(!(new String(a,e,4(),null)).equals("Xing")&&!(new String(a,e,4(),null)).equals("Info"))return null;c+=4;b.hId=g;e=b.flags=d(a,c);c+=4;0!=(e&1)&&(b.frames=d(a,c),c+=4);0!=(e&2)&&(b.bytes=d(a,c),c+=4);if(0!=(e&4)){if(null!=b.toc)for(l=0;l<r;l++)b.toc[l]=a[c+l];c+=r}b.vbrScale=-1;0!=(e&8)&&(b.vbrScale=d(a,c),c+=4);b.headersize=72E3*(g+1)*f/b.samprate;c+=21;g=a[c+0]<<4;g+=a[c+1]>>4;f=(a[c+1]&15)<<8;f+=a[c+2]&255;if(0>g||3E3<g)g=-1;if(0>
f||3E3<f)f=-1;b.encDelay=g;b.encPadding=f;return b};this.InitVbrTag=function(b){var k=b.internal_flags,c;c=1==b.version?128:16E3>b.out_samplerate?32:64;b.VBR==N.vbr_off&&(c=b.brate);c=72E3*(b.version+1)*c/b.out_samplerate;var g=k.sideinfo_len+e;k.VBR_seek_table.TotalFrameSize=c;if(c<g||c>a)b.bWriteVbrTag=!1;else for(k.VBR_seek_table.nVbrNumFrames=0,k.VBR_seek_table.nBytesWritten=0,k.VBR_seek_table.sum=0,k.VBR_seek_table.seen=0,k.VBR_seek_table.want=1,k.VBR_seek_table.pos=0,null==k.VBR_seek_table.bag&&
(k.VBR_seek_table.bag=new int[400],k.VBR_seek_table.size=400),c=new Int8Array(a),y(b,c),k=k.VBR_seek_table.TotalFrameSize,g=0;g<k;++g)l.add_dummy_byte(b,c[g]&255,1)};this.updateMusicCRC=function(a,b,c,g){for(var d=0;d<g;++d)a[0]=f(b[c+d],a[0])};this.getLameTagFrame=function(a,d){var c=a.internal_flags;if(!a.bWriteVbrTag||c.Class_ID!=P.LAME_ID||0>=c.VBR_seek_table.pos)return 0;if(d.length<c.VBR_seek_table.TotalFrameSize)return c.VBR_seek_table.TotalFrameSize;Ha.fill(d,0,c.VBR_seek_table.TotalFrameSize,
0);y(a,d);var g=new Int8Array(r);if(a.free_format)for(var e=1;e<r;++e)g[e]=255&255*e/100;else{var q=c.VBR_seek_table;if(!(0>=q.pos))for(e=1;e<r;++e){var x=0|Math.floor(e/r*q.pos);x>q.pos-1&&(x=q.pos-1);x=0|256*q.bag[x]/q.sum;255<x&&(x=255);g[e]=255&x}}x=c.sideinfo_len;a.error_protection&&(x-=2);d[x++]=0;d[x++]=0;d[x++]=0;d[x++]=0;n(d,x,15);x+=4;n(d,x,c.VBR_seek_table.nVbrNumFrames);x+=4;q=c.VBR_seek_table.nBytesWritten+c.VBR_seek_table.TotalFrameSize;n(d,x,0|q);x+=4;Q.arraycopy(g,0,d,x,g.length);
x+=g.length;a.error_protection&&l.CRC_writeheader(c,d);for(var A=0,e=0;e<x;e++)A=f(d[e],A);var g=x,e=A,t=a.internal_flags,x=0,A=a.encoder_delay,h=a.encoder_padding,w=100-10*a.VBR_q-a.quality,E=b.getLameVeryShortVersion(),H;H=[1,5,3,2,4,0,3];var C=0|(255<a.lowpassfreq/100+.5?255:a.lowpassfreq/100+.5),B=0,v=0,G=a.internal_flags.noise_shaping,J=0,D=0,K=0,T=0,J=0,J=0!=(a.exp_nspsytune&1),K=0!=(a.exp_nspsytune&2),W=!1,u=!1,ia=a.internal_flags.nogap_total,sa=a.internal_flags.nogap_current,T=a.ATHtype,F=
0,lc;switch(a.VBR){case vbr_abr:lc=a.VBR_mean_bitrate_kbps;break;case vbr_off:lc=a.brate;break;default:lc=a.VBR_min_bitrate_kbps}H=0+(a.VBR.ordinal()<H.length?H[a.VBR.ordinal()]:0);t.findReplayGain&&(510<t.RadioGain&&(t.RadioGain=510),-510>t.RadioGain&&(t.RadioGain=-510),v=11264,v=0<=t.RadioGain?v|t.RadioGain:v|512|-t.RadioGain);t.findPeakSample&&(B=Math.abs(0|t.PeakSample/32767*Math.pow(2,23)+.5));-1!=ia&&(0<sa&&(u=!0),sa<ia-1&&(W=!0));F=T+((J?1:0)<<4)+((K?1:0)<<5)+((W?1:0)<<6)+((u?1:0)<<7);0>w&&
(w=0);switch(a.mode){case MONO:J=0;break;case STEREO:J=1;break;case DUAL_CHANNEL:J=2;break;case JOINT_STEREO:J=a.force_ms?4:3;break;default:J=7}K=32E3>=a.in_samplerate?0:48E3==a.in_samplerate?2:48E3<a.in_samplerate?3:1;if(a.short_blocks==Ja.short_block_forced||a.short_blocks==Ja.short_block_dispensed||-1==a.lowpassfreq&&-1==a.highpassfreq||a.scale_left<a.scale_right||a.scale_left>a.scale_right||a.disable_reservoir&&320>a.brate||a.noATH||a.ATHonly||0==T||32E3>=a.in_samplerate)D=1;T=G+(J<<2)+(D<<5)+
(K<<6);J=t.nMusicCRC;n(d,g+x,w);x+=4;for(t=0;9>t;t++)d[g+x+t]=255&E.charAt(t);x+=9;d[g+x]=255&H;x++;d[g+x]=255&C;x++;n(d,g+x,B);x+=4;p(d,g+x,v);x+=2;p(d,g+x,0);x+=2;d[g+x]=255&F;x++;d[g+x]=255<=lc?255:255&lc;x++;d[g+x]=255&A>>4;d[g+x+1]=255&(A<<4)+(h>>8);d[g+x+2]=255&h;x+=3;d[g+x]=255&T;x++;d[g+x++]=0;p(d,g+x,a.preset);x+=2;n(d,g+x,q);x+=4;p(d,g+x,J);x+=2;for(q=0;q<x;q++)e=f(d[g+q],e);p(d,g+x,e);return c.VBR_seek_table.TotalFrameSize};this.putVbrTag=function(b,d){if(0>=b.internal_flags.VBR_seek_table.pos)return-1;
d.seek(d.length());if(0==d.length())return-1;d.seek(0);var c=new Int8Array(10);d.readFully(c);c=(new String(c,"ISO-8859-1")).startsWith("ID3")?0:((c[6]&127)<<21|(c[7]&127)<<14|(c[8]&127)<<7|c[9]&127)+c.length;d.seek(c);var c=new Int8Array(a),g=getLameTagFrame(b,c);if(g>c.length)return-1;if(1>g)return 0;d.write(c,0,g);return 0}}function U(d,n,p,u){this.xlen=d;this.linmax=n;this.table=p;this.hlen=u}function hb(d){this.bits=d}function Ic(){this.setModules=function(d,n){}}function Jb(){this.bits=this.over_SSD=
this.over_count=this.max_noise=this.tot_noise=this.over_noise=0}function Jc(){this.floor=this.decay=this.adjustLimit=this.adjust=this.aaSensitivityP=this.useAdjust=0;this.l=L(d.SBMAX_l);this.s=L(d.SBMAX_s);this.psfb21=L(d.PSFB21);this.psfb12=L(d.PSFB12);this.cb_l=L(d.CBANDS);this.cb_s=L(d.CBANDS);this.eql_w=L(d.BLKSIZE/2)}function Kc(){this.scale_right=this.scale_left=this.scale=this.out_samplerate=this.in_samplerate=this.num_channels=this.num_samples=this.class_id=0;this.decode_only=this.bWriteVbrTag=
this.analysis=!1;this.quality=0;this.mode=la.STEREO;this.write_id3tag_automatic=this.decode_on_the_fly=this.findReplayGain=this.free_format=this.force_ms=!1;this.error_protection=this.emphasis=this.extension=this.original=this.copyright=this.compression_ratio=this.brate=0;this.disable_reservoir=this.strict_ISO=!1;this.quant_comp_short=this.quant_comp=0;this.experimentalY=!1;this.preset=this.exp_nspsytune=this.experimentalZ=0;this.VBR=null;this.maskingadjust_short=this.maskingadjust=this.highpasswidth=
this.lowpasswidth=this.highpassfreq=this.lowpassfreq=this.VBR_hard_min=this.VBR_max_bitrate_kbps=this.VBR_min_bitrate_kbps=this.VBR_mean_bitrate_kbps=this.VBR_q=this.VBR_q_frac=0;this.noATH=this.ATHshort=this.ATHonly=!1;this.athaa_sensitivity=this.athaa_loudapprox=this.athaa_type=this.ATHlower=this.ATHcurve=this.ATHtype=0;this.short_blocks=null;this.useTemporal=!1;this.msfix=this.interChRatio=0;this.tune=!1;this.lame_allocated_gfp=this.frameNum=this.framesize=this.encoder_padding=this.encoder_delay=
this.version=this.tune_value_a=0;this.internal_flags=null}function Lc(){this.linprebuf=L(2*M.MAX_ORDER);this.linpre=0;this.lstepbuf=L(M.MAX_SAMPLES_PER_WINDOW+M.MAX_ORDER);this.lstep=0;this.loutbuf=L(M.MAX_SAMPLES_PER_WINDOW+M.MAX_ORDER);this.lout=0;this.rinprebuf=L(2*M.MAX_ORDER);this.rinpre=0;this.rstepbuf=L(M.MAX_SAMPLES_PER_WINDOW+M.MAX_ORDER);this.rstep=0;this.routbuf=L(M.MAX_SAMPLES_PER_WINDOW+M.MAX_ORDER);this.first=this.freqindex=this.rsum=this.lsum=this.totsamp=this.sampleWindow=this.rout=
0;this.A=aa(0|M.STEPS_per_dB*M.MAX_dB);this.B=aa(0|M.STEPS_per_dB*M.MAX_dB)}function Mc(B){this.quantize=B;this.iteration_loop=function(n,p,B,y){var f=n.internal_flags,u=L(za.SFBMAX),l=L(576),b=aa(2),r,a,e=f.l3_side;r=new hb(0);this.quantize.rv.ResvFrameBegin(n,r);r=r.bits;for(var C=0;C<f.mode_gr;C++)for(a=this.quantize.qupvt.on_pe(n,p,b,r,C,C),f.mode_ext==d.MPG_MD_MS_LR&&(this.quantize.ms_convert(f.l3_side,C),this.quantize.qupvt.reduce_side(b,B[C],r,a)),a=0;a<f.channels_out;a++){var m,k=e.tt[C][a];
k.block_type!=d.SHORT_TYPE?(m=0,m=f.PSY.mask_adjust-m):(m=0,m=f.PSY.mask_adjust_short-m);f.masking_lower=Math.pow(10,.1*m);this.quantize.init_outer_loop(f,k);this.quantize.init_xrpow(f,k,l)&&(this.quantize.qupvt.calc_xmin(n,y[C][a],k,u),this.quantize.outer_loop(n,k,u,l,a,b[a]));this.quantize.iteration_finish_one(f,C,a)}this.quantize.rv.ResvFrameEnd(f,r)}}function Ba(B,n,p,u){this.l=aa(1+d.SBMAX_l);this.s=aa(1+d.SBMAX_s);this.psfb21=aa(1+d.PSFB21);this.psfb12=aa(1+d.PSFB12);var y=this.l,f=this.s;4==
arguments.length&&(this.arrL=arguments[0],this.arrS=arguments[1],this.arr21=arguments[2],this.arr12=arguments[3],Q.arraycopy(this.arrL,0,y,0,Math.min(this.arrL.length,this.l.length)),Q.arraycopy(this.arrS,0,f,0,Math.min(this.arrS.length,this.s.length)),Q.arraycopy(this.arr21,0,this.psfb21,0,Math.min(this.arr21.length,this.psfb21.length)),Q.arraycopy(this.arr12,0,this.psfb12,0,Math.min(this.arr12.length,this.psfb12.length)))}function ya(){function B(a,b){var c=y.ATHformula(b,a);return c=Math.pow(10,
(c-100)/10+a.ATHlower)}function n(a){this.s=a}var p=null,u=null,y=null;this.setModules=function(a,b,c){p=a;u=b;y=c};this.IPOW20=function(b){return a[b]};var f=ya.IXMAX_VAL+2,fa=ya.Q_MAX,l=ya.Q_MAX2;this.nr_of_sfb_block=[[[6,5,5,5],[9,9,9,9],[6,9,9,9]],[[6,5,7,3],[9,9,12,6],[6,9,12,6]],[[11,10,0,0],[18,18,0,0],[15,18,0,0]],[[7,7,7,0],[12,12,12,0],[6,15,12,0]],[[6,6,6,3],[12,9,9,6],[6,12,9,6]],[[8,8,5,0],[15,12,9,0],[6,18,9,0]]];var b=[0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,2,2,3,3,3,2,0];this.pretab=b;this.sfBandIndex=
[new Ba([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,24,32,42,56,74,100,132,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new Ba([0,6,12,18,24,30,36,44,54,66,80,96,114,136,162,194,232,278,332,394,464,540,576],[0,4,8,12,18,26,36,48,62,80,104,136,180,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new Ba([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,26,36,48,62,80,104,134,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new Ba([0,
4,8,12,16,20,24,30,36,44,52,62,74,90,110,134,162,196,238,288,342,418,576],[0,4,8,12,16,22,30,40,52,66,84,106,136,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new Ba([0,4,8,12,16,20,24,30,36,42,50,60,72,88,106,128,156,190,230,276,330,384,576],[0,4,8,12,16,22,28,38,50,64,80,100,126,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new Ba([0,4,8,12,16,20,24,30,36,44,54,66,82,102,126,156,194,240,296,364,448,550,576],[0,4,8,12,16,22,30,42,58,78,104,138,180,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new Ba([0,6,12,18,24,30,36,
44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,26,36,48,62,80,104,134,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new Ba([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,26,36,48,62,80,104,134,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new Ba([0,12,24,36,48,60,72,88,108,132,160,192,232,280,336,400,476,566,568,570,572,574,576],[0,8,16,24,36,52,72,96,124,160,162,164,166,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0])];var r=L(fa+l+1),a=L(fa),
e=L(f),C=L(f);this.adj43=C;this.iteration_init=function(b){var k=b.internal_flags,c=k.l3_side;if(0==k.iteration_init_init){k.iteration_init_init=1;c.main_data_begin=0;for(var c=b.internal_flags.ATH.l,g=b.internal_flags.ATH.psfb21,n=b.internal_flags.ATH.s,q=b.internal_flags.ATH.psfb12,x=b.internal_flags,A=b.out_samplerate,t=0;t<d.SBMAX_l;t++){var h=x.scalefac_band.l[t],w=x.scalefac_band.l[t+1];for(c[t]=$a.MAX_VALUE;h<w;h++){var E=h*A/1152,E=B(b,E);c[t]=Math.min(c[t],E)}}for(t=0;t<d.PSFB21;t++)for(h=
x.scalefac_band.psfb21[t],w=x.scalefac_band.psfb21[t+1],g[t]=$a.MAX_VALUE;h<w;h++)E=h*A/1152,E=B(b,E),g[t]=Math.min(g[t],E);for(t=0;t<d.SBMAX_s;t++){h=x.scalefac_band.s[t];w=x.scalefac_band.s[t+1];for(n[t]=$a.MAX_VALUE;h<w;h++)E=h*A/384,E=B(b,E),n[t]=Math.min(n[t],E);n[t]*=x.scalefac_band.s[t+1]-x.scalefac_band.s[t]}for(t=0;t<d.PSFB12;t++){h=x.scalefac_band.psfb12[t];w=x.scalefac_band.psfb12[t+1];for(q[t]=$a.MAX_VALUE;h<w;h++)E=h*A/384,E=B(b,E),q[t]=Math.min(q[t],E);q[t]*=x.scalefac_band.s[13]-x.scalefac_band.s[12]}if(b.noATH){for(t=
0;t<d.SBMAX_l;t++)c[t]=1E-20;for(t=0;t<d.PSFB21;t++)g[t]=1E-20;for(t=0;t<d.SBMAX_s;t++)n[t]=1E-20;for(t=0;t<d.PSFB12;t++)q[t]=1E-20}x.ATH.floor=10*Math.log10(B(b,-1));e[0]=0;for(c=1;c<f;c++)e[c]=Math.pow(c,4/3);for(c=0;c<f-1;c++)C[c]=c+1-Math.pow(.5*(e[c]+e[c+1]),.75);C[c]=.5;for(c=0;c<fa;c++)a[c]=Math.pow(2,-.1875*(c-210));for(c=0;c<=fa+l;c++)r[c]=Math.pow(2,.25*(c-210-l));p.huffman_init(k);c=b.exp_nspsytune>>2&63;32<=c&&(c-=64);g=Math.pow(10,c/4/10);c=b.exp_nspsytune>>8&63;32<=c&&(c-=64);n=Math.pow(10,
c/4/10);c=b.exp_nspsytune>>14&63;32<=c&&(c-=64);q=Math.pow(10,c/4/10);c=b.exp_nspsytune>>20&63;32<=c&&(c-=64);b=q*Math.pow(10,c/4/10);for(c=0;c<d.SBMAX_l;c++)x=6>=c?g:13>=c?n:20>=c?q:b,k.nsPsy.longfact[c]=x;for(c=0;c<d.SBMAX_s;c++)x=5>=c?g:10>=c?n:11>=c?q:b,k.nsPsy.shortfact[c]=x}};this.on_pe=function(a,b,c,d,e,l){var f=a.internal_flags,r=0,n=aa(2),h,r=new hb(r);a=u.ResvMaxBits(a,d,r,l);var r=r.bits,w=r+a;w>Y.MAX_BITS_PER_GRANULE&&(w=Y.MAX_BITS_PER_GRANULE);for(h=l=0;h<f.channels_out;++h)c[h]=Math.min(Y.MAX_BITS_PER_CHANNEL,
r/f.channels_out),n[h]=0|c[h]*b[e][h]/700-c[h],n[h]>3*d/4&&(n[h]=3*d/4),0>n[h]&&(n[h]=0),n[h]+c[h]>Y.MAX_BITS_PER_CHANNEL&&(n[h]=Math.max(0,Y.MAX_BITS_PER_CHANNEL-c[h])),l+=n[h];if(l>a)for(h=0;h<f.channels_out;++h)n[h]=a*n[h]/l;for(h=0;h<f.channels_out;++h)c[h]+=n[h],a-=n[h];for(h=l=0;h<f.channels_out;++h)l+=c[h];if(l>Y.MAX_BITS_PER_GRANULE)for(h=0;h<f.channels_out;++h)c[h]*=Y.MAX_BITS_PER_GRANULE,c[h]/=l;return w};this.reduce_side=function(a,b,c,d){b=.33*(.5-b)/.5;0>b&&(b=0);.5<b&&(b=.5);b=0|.5*
b*(a[0]+a[1]);b>Y.MAX_BITS_PER_CHANNEL-a[0]&&(b=Y.MAX_BITS_PER_CHANNEL-a[0]);0>b&&(b=0);125<=a[1]&&(125<a[1]-b?(a[0]<c&&(a[0]+=b),a[1]-=b):(a[0]+=a[1]-125,a[1]=125));b=a[0]+a[1];b>d&&(a[0]=d*a[0]/b,a[1]=d*a[1]/b)};this.athAdjust=function(a,b,c){b=ca.FAST_LOG10_X(b,10);a*=a;var d=0;b-=c;1E-20<a&&(d=1+ca.FAST_LOG10_X(a,10/90.30873362));0>d&&(d=0);b=b*d+(c+90.30873362-94.82444863);return Math.pow(10,.1*b)};this.calc_xmin=function(a,b,c,g){var e=0,l=a.internal_flags,f,r=0,n=0,h=l.ATH,w=c.xr,E=a.VBR==
N.vbr_mtrh?1:0,p=l.masking_lower;if(a.VBR==N.vbr_mtrh||a.VBR==N.vbr_mt)p=1;for(f=0;f<c.psy_lmax;f++){var C,B,v,G,u,D;B=a.VBR==N.vbr_rh||a.VBR==N.vbr_mtrh?athAdjust(h.adjust,h.l[f],h.floor):h.adjust*h.l[f];u=c.width[f];v=B/u;G=2.220446049250313E-16;D=u>>1;C=0;do{var K;K=w[r]*w[r];C+=K;G+=K<v?K:v;r++;K=w[r]*w[r];C+=K;G+=K<v?K:v;r++}while(0<--D);C>B&&n++;f==d.SBPSY_l&&(v=B*l.nsPsy.longfact[f],G<v&&(G=v));0!=E&&(B=G);a.ATHonly||(G=b.en.l[f],0<G&&(v=C*b.thm.l[f]*p/G,0!=E&&(v*=l.nsPsy.longfact[f]),B<v&&
(B=v)));0!=E?g[e++]=B:g[e++]=B*l.nsPsy.longfact[f]}C=575;if(c.block_type!=d.SHORT_TYPE)for(B=576;0!=B--&&ma.EQ(w[B],0);)C=B;c.max_nonzero_coeff=C;for(var T=c.sfb_smin;f<c.psymax;T++,f+=3){var W,y;y=a.VBR==N.vbr_rh||a.VBR==N.vbr_mtrh?athAdjust(h.adjust,h.s[T],h.floor):h.adjust*h.s[T];u=c.width[f];for(W=0;3>W;W++){C=0;D=u>>1;v=y/u;G=2.220446049250313E-16;do K=w[r]*w[r],C+=K,G+=K<v?K:v,r++,K=w[r]*w[r],C+=K,G+=K<v?K:v,r++;while(0<--D);C>y&&n++;T==d.SBPSY_s&&(v=y*l.nsPsy.shortfact[T],G<v&&(G=v));B=0!=
E?G:y;a.ATHonly||a.ATHshort||(G=b.en.s[T][W],0<G&&(v=C*b.thm.s[T][W]*p/G,0!=E&&(v*=l.nsPsy.shortfact[T]),B<v&&(B=v)));0!=E?g[e++]=B:g[e++]=B*l.nsPsy.shortfact[T]}a.useTemporal&&(g[e-3]>g[e-3+1]&&(g[e-3+1]+=(g[e-3]-g[e-3+1])*l.decay),g[e-3+1]>g[e-3+2]&&(g[e-3+2]+=(g[e-3+1]-g[e-3+2])*l.decay))}return n};this.calc_noise_core=function(a,b,c,d){var l=0,f=b.s,r=a.l3_enc;if(f>a.count1)for(;0!=c--;){var n;n=a.xr[f];f++;l+=n*n;n=a.xr[f];f++;l+=n*n}else if(f>a.big_values){var t=L(2);t[0]=0;for(t[1]=d;0!=c--;)n=
Math.abs(a.xr[f])-t[r[f]],f++,l+=n*n,n=Math.abs(a.xr[f])-t[r[f]],f++,l+=n*n}else for(;0!=c--;)n=Math.abs(a.xr[f])-e[r[f]]*d,f++,l+=n*n,n=Math.abs(a.xr[f])-e[r[f]]*d,f++,l+=n*n;b.s=f;return l};this.calc_noise=function(a,d,c,g,e){var l=0,f=0,p,t,h=0,w=0,E=0,C=-20,B=0,u=a.scalefac,v=0;for(p=g.over_SSD=0;p<a.psymax;p++){var G=a.global_gain-(u[v++]+(0!=a.preflag?b[p]:0)<<a.scalefac_scale+1)-8*a.subblock_gain[a.window[p]],y=0;null!=e&&e.step[p]==G?(y=e.noise[p],B+=a.width[p],c[l++]=y/d[f++],y=e.noise_log[p]):
(y=r[G+ya.Q_MAX2],t=a.width[p]>>1,B+a.width[p]>a.max_nonzero_coeff&&(t=a.max_nonzero_coeff-B+1,t=0<t?t>>1:0),B=new n(B),y=this.calc_noise_core(a,B,t,y),B=B.s,null!=e&&(e.step[p]=G,e.noise[p]=y),y=c[l++]=y/d[f++],y=ca.FAST_LOG10(Math.max(y,1E-20)),null!=e&&(e.noise_log[p]=y));null!=e&&(e.global_gain=a.global_gain);E+=y;0<y&&(G=Math.max(0|10*y+.5,1),g.over_SSD+=G*G,h++,w+=y);C=Math.max(C,y)}g.over_count=h;g.tot_noise=E;g.over_noise=w;g.max_noise=C;return h};this.set_pinfo=function(a,e,c,g,l){var f=
a.internal_flags,r,n,t,h,w=0==e.scalefac_scale?.5:1,E=e.scalefac,p=L(za.SFBMAX),C=L(za.SFBMAX),B=new Jb;calc_xmin(a,c,e,p);calc_noise(e,p,C,B,null);var v=0;n=e.sfb_lmax;e.block_type!=d.SHORT_TYPE&&0==e.mixed_block_flag&&(n=22);for(r=0;r<n;r++){var y=f.scalefac_band.l[r],u=f.scalefac_band.l[r+1],D=u-y;for(h=0;v<u;v++)h+=e.xr[v]*e.xr[v];h/=D;t=1E15;f.pinfo.en[g][l][r]=t*h;f.pinfo.xfsf[g][l][r]=t*p[r]*C[r]/D;h=0<c.en.l[r]&&!a.ATHonly?h/c.en.l[r]:0;f.pinfo.thr[g][l][r]=t*Math.max(h*c.thm.l[r],f.ATH.l[r]);
f.pinfo.LAMEsfb[g][l][r]=0;0!=e.preflag&&11<=r&&(f.pinfo.LAMEsfb[g][l][r]=-w*b[r]);r<d.SBPSY_l&&(f.pinfo.LAMEsfb[g][l][r]-=w*E[r])}if(e.block_type==d.SHORT_TYPE)for(n=r,r=e.sfb_smin;r<d.SBMAX_s;r++)for(var y=f.scalefac_band.s[r],u=f.scalefac_band.s[r+1],D=u-y,K=0;3>K;K++){h=0;for(t=y;t<u;t++)h+=e.xr[v]*e.xr[v],v++;h=Math.max(h/D,1E-20);t=1E15;f.pinfo.en_s[g][l][3*r+K]=t*h;f.pinfo.xfsf_s[g][l][3*r+K]=t*p[n]*C[n]/D;h=0<c.en.s[r][K]?h/c.en.s[r][K]:0;if(a.ATHonly||a.ATHshort)h=0;f.pinfo.thr_s[g][l][3*
r+K]=t*Math.max(h*c.thm.s[r][K],f.ATH.s[r]);f.pinfo.LAMEsfb_s[g][l][3*r+K]=-2*e.subblock_gain[K];r<d.SBPSY_s&&(f.pinfo.LAMEsfb_s[g][l][3*r+K]-=w*E[n]);n++}f.pinfo.LAMEqss[g][l]=e.global_gain;f.pinfo.LAMEmainbits[g][l]=e.part2_3_length+e.part2_length;f.pinfo.LAMEsfbits[g][l]=e.part2_length;f.pinfo.over[g][l]=B.over_count;f.pinfo.max_noise[g][l]=10*B.max_noise;f.pinfo.over_noise[g][l]=10*B.over_noise;f.pinfo.tot_noise[g][l]=10*B.tot_noise;f.pinfo.over_SSD[g][l]=B.over_SSD}}function Nc(){this.sfb_count1=
this.global_gain=0;this.step=aa(39);this.noise=L(39);this.noise_log=L(39)}function Ab(){this.xr=L(576);this.l3_enc=aa(576);this.scalefac=aa(za.SFBMAX);this.mixed_block_flag=this.block_type=this.scalefac_compress=this.global_gain=this.count1=this.big_values=this.part2_3_length=this.xrpow_max=0;this.table_select=aa(3);this.subblock_gain=aa(4);this.sfbdivide=this.psymax=this.sfbmax=this.psy_lmax=this.sfb_smin=this.sfb_lmax=this.part2_length=this.count1table_select=this.scalefac_scale=this.preflag=this.region1_count=
this.region0_count=0;this.width=aa(za.SFBMAX);this.window=aa(za.SFBMAX);this.count1bits=0;this.sfb_partition_table=null;this.slen=aa(4);this.max_nonzero_coeff=0;var d=this;this.assign=function(n){d.xr=new Float32Array(n.xr);d.l3_enc=new Int32Array(n.l3_enc);d.scalefac=new Int32Array(n.scalefac);d.xrpow_max=n.xrpow_max;d.part2_3_length=n.part2_3_length;d.big_values=n.big_values;d.count1=n.count1;d.global_gain=n.global_gain;d.scalefac_compress=n.scalefac_compress;d.block_type=n.block_type;d.mixed_block_flag=
n.mixed_block_flag;d.table_select=new Int32Array(n.table_select);d.subblock_gain=new Int32Array(n.subblock_gain);d.region0_count=n.region0_count;d.region1_count=n.region1_count;d.preflag=n.preflag;d.scalefac_scale=n.scalefac_scale;d.count1table_select=n.count1table_select;d.part2_length=n.part2_length;d.sfb_lmax=n.sfb_lmax;d.sfb_smin=n.sfb_smin;d.psy_lmax=n.psy_lmax;d.sfbmax=n.sfbmax;d.psymax=n.psymax;d.sfbdivide=n.sfbdivide;d.width=new Int32Array(n.width);d.window=new Int32Array(n.window);d.count1bits=
n.count1bits;d.sfb_partition_table=n.sfb_partition_table.slice(0);d.slen=new Int32Array(n.slen);d.max_nonzero_coeff=n.max_nonzero_coeff}}function Oc(){function B(d){this.ordinal=d}function n(d){for(var b=0;b<d.sfbmax;b++)if(0==d.scalefac[b]+d.subblock_gain[d.window[b]])return!1;return!0}var p;this.rv=null;var u;this.qupvt=null;var y,f=new Ic,fa;this.setModules=function(d,b,r,a){p=d;this.rv=u=b;this.qupvt=y=r;fa=a;f.setModules(y,fa)};this.ms_convert=function(d,b){for(var f=0;576>f;++f){var a=d.tt[b][0].xr[f],
e=d.tt[b][1].xr[f];d.tt[b][0].xr[f]=.5*(a+e)*ca.SQRT2;d.tt[b][1].xr[f]=.5*(a-e)*ca.SQRT2}};this.init_xrpow=function(d,b,f){var a=0,e=0|b.max_nonzero_coeff;b.xrpow_max=0;Ha.fill(f,e,576,0);for(var n=a=0;n<=e;++n){var m=Math.abs(b.xr[n]),a=a+m;f[n]=Math.sqrt(m*Math.sqrt(m));f[n]>b.xrpow_max&&(b.xrpow_max=f[n])}if(1E-20<a){f=0;0!=(d.substep_shaping&2)&&(f=1);for(e=0;e<b.psymax;e++)d.pseudohalf[e]=f;return!0}Ha.fill(b.l3_enc,0,576,0);return!1};this.init_outer_loop=function(l,b){b.part2_3_length=0;b.big_values=
0;b.count1=0;b.global_gain=210;b.scalefac_compress=0;b.table_select[0]=0;b.table_select[1]=0;b.table_select[2]=0;b.subblock_gain[0]=0;b.subblock_gain[1]=0;b.subblock_gain[2]=0;b.subblock_gain[3]=0;b.region0_count=0;b.region1_count=0;b.preflag=0;b.scalefac_scale=0;b.count1table_select=0;b.part2_length=0;b.sfb_lmax=d.SBPSY_l;b.sfb_smin=d.SBPSY_s;b.psy_lmax=l.sfb21_extra?d.SBMAX_l:d.SBPSY_l;b.psymax=b.psy_lmax;b.sfbmax=b.sfb_lmax;b.sfbdivide=11;for(var f=0;f<d.SBMAX_l;f++)b.width[f]=l.scalefac_band.l[f+
1]-l.scalefac_band.l[f],b.window[f]=3;if(b.block_type==d.SHORT_TYPE){var a=L(576);b.sfb_smin=0;b.sfb_lmax=0;0!=b.mixed_block_flag&&(b.sfb_smin=3,b.sfb_lmax=2*l.mode_gr+4);b.psymax=b.sfb_lmax+3*((l.sfb21_extra?d.SBMAX_s:d.SBPSY_s)-b.sfb_smin);b.sfbmax=b.sfb_lmax+3*(d.SBPSY_s-b.sfb_smin);b.sfbdivide=b.sfbmax-18;b.psy_lmax=b.sfb_lmax;var e=l.scalefac_band.l[b.sfb_lmax];Q.arraycopy(b.xr,0,a,0,576);for(f=b.sfb_smin;f<d.SBMAX_s;f++)for(var n=l.scalefac_band.s[f],m=l.scalefac_band.s[f+1],k=0;3>k;k++)for(var c=
n;c<m;c++)b.xr[e++]=a[3*c+k];a=b.sfb_lmax;for(f=b.sfb_smin;f<d.SBMAX_s;f++)b.width[a]=b.width[a+1]=b.width[a+2]=l.scalefac_band.s[f+1]-l.scalefac_band.s[f],b.window[a]=0,b.window[a+1]=1,b.window[a+2]=2,a+=3}b.count1bits=0;b.sfb_partition_table=y.nr_of_sfb_block[0][0];b.slen[0]=0;b.slen[1]=0;b.slen[2]=0;b.slen[3]=0;b.max_nonzero_coeff=575;Ha.fill(b.scalefac,0);f=l.ATH;a=b.xr;if(b.block_type!=d.SHORT_TYPE)for(e=!1,n=d.PSFB21-1;0<=n&&!e;n--)for(m=l.scalefac_band.psfb21[n],k=l.scalefac_band.psfb21[n+
1],c=y.athAdjust(f.adjust,f.psfb21[n],f.floor),1E-12<l.nsPsy.longfact[21]&&(c*=l.nsPsy.longfact[21]),--k;k>=m;k--)if(Math.abs(a[k])<c)a[k]=0;else{e=!0;break}else for(c=0;3>c;c++)for(e=!1,n=d.PSFB12-1;0<=n&&!e;n--){var m=3*l.scalefac_band.s[12]+(l.scalefac_band.s[13]-l.scalefac_band.s[12])*c+(l.scalefac_band.psfb12[n]-l.scalefac_band.psfb12[0]),k=m+(l.scalefac_band.psfb12[n+1]-l.scalefac_band.psfb12[n]),g=y.athAdjust(f.adjust,f.psfb12[n],f.floor);1E-12<l.nsPsy.shortfact[12]&&(g*=l.nsPsy.shortfact[12]);
for(--k;k>=m;k--)if(Math.abs(a[k])<g)a[k]=0;else{e=!0;break}}};B.BINSEARCH_NONE=new B(0);B.BINSEARCH_UP=new B(1);B.BINSEARCH_DOWN=new B(2);this.trancate_smallspectrums=function(l,b,f,a){var e=L(za.SFBMAX);if((0!=(l.substep_shaping&4)||b.block_type!=d.SHORT_TYPE)&&0==(l.substep_shaping&128)){y.calc_noise(b,f,e,new Jb,null);for(var n=0;576>n;n++){var m=0;0!=b.l3_enc[n]&&(m=Math.abs(b.xr[n]));a[n]=m}n=0;m=8;b.block_type==d.SHORT_TYPE&&(m=6);do{var k,c,g,p,q=b.width[m],n=n+q;if(!(1<=e[m]||(Ha.sort(a,
n-q,q),ma.EQ(a[n-1],0)))){k=(1-e[m])*f[m];p=c=0;do{var x;for(g=1;p+g<q&&!ma.NEQ(a[p+n-q],a[p+n+g-q]);g++);x=a[p+n-q]*a[p+n-q]*g;if(k<x){0!=p&&(c=a[p+n-q-1]);break}k-=x;p+=g}while(p<q);if(!ma.EQ(c,0)){do Math.abs(b.xr[n-q])<=c&&(b.l3_enc[n-q]=0);while(0<--q)}}}while(++m<b.psymax);b.part2_3_length=fa.noquant_count_bits(l,b,null)}};this.outer_loop=function(l,b,f,a,e,p){var m=l.internal_flags,k=new Ab,c=L(576),g=L(za.SFBMAX),z=new Jb,q,x=new Nc,u=9999999,t=!1,h=!1,w=0,E,H,F=m.CurrentStep[e],I=!1,v=m.OldValue[e];
q=B.BINSEARCH_NONE;b.global_gain=v;for(E=p-b.part2_length;;){H=fa.count_bits(m,a,b,null);if(1==F||H==E)break;H>E?(q==B.BINSEARCH_DOWN&&(I=!0),I&&(F/=2),q=B.BINSEARCH_UP,H=F):(q==B.BINSEARCH_UP&&(I=!0),I&&(F/=2),q=B.BINSEARCH_DOWN,H=-F);b.global_gain+=H;0>b.global_gain&&(b.global_gain=0,I=!0);255<b.global_gain&&(b.global_gain=255,I=!0)}for(;H>E&&255>b.global_gain;)b.global_gain++,H=fa.count_bits(m,a,b,null);m.CurrentStep[e]=4<=v-b.global_gain?4:2;m.OldValue[e]=b.global_gain;b.part2_3_length=H;if(0==
m.noise_shaping)return 100;y.calc_noise(b,f,g,z,x);z.bits=b.part2_3_length;k.assign(b);e=0;for(Q.arraycopy(a,0,c,0,576);!t;){do{E=new Jb;I=255;F=0!=(m.substep_shaping&2)?20:3;if(m.sfb21_extra){if(1<g[k.sfbmax])break;if(k.block_type==d.SHORT_TYPE&&(1<g[k.sfbmax+1]||1<g[k.sfbmax+2]))break}v=k;H=a;q=l.internal_flags;for(var G=v,J=g,D=H,K=l.internal_flags,T=void 0,T=0==G.scalefac_scale?1.2968395546510096:1.6817928305074292,W=0,ra=0;ra<G.sfbmax;ra++)W<J[ra]&&(W=J[ra]);ra=K.noise_shaping_amp;3==ra&&(ra=
h?2:1);switch(ra){case 2:break;case 1:W=1<W?Math.pow(W,.5):.95*W;break;default:W=1<W?1:.95*W}for(var ia=0,ra=0;ra<G.sfbmax;ra++){var sa=G.width[ra],ia=ia+sa;if(!(J[ra]<W)){if(0!=(K.substep_shaping&2)&&(K.pseudohalf[ra]=0==K.pseudohalf[ra]?1:0,0==K.pseudohalf[ra]&&2==K.noise_shaping_amp))break;G.scalefac[ra]++;for(sa=-sa;0>sa;sa++)D[ia+sa]*=T,D[ia+sa]>G.xrpow_max&&(G.xrpow_max=D[ia+sa]);if(2==K.noise_shaping_amp)break}}if(G=n(v))v=!1;else if(G=2==q.mode_gr?fa.scale_bitcount(v):fa.scale_bitcount_lsf(q,
v)){if(1<q.noise_shaping)if(Ha.fill(q.pseudohalf,0),0==v.scalefac_scale){G=v;for(D=J=0;D<G.sfbmax;D++){T=G.width[D];K=G.scalefac[D];0!=G.preflag&&(K+=y.pretab[D]);J+=T;if(0!=(K&1))for(K++,T=-T;0>T;T++)H[J+T]*=1.2968395546510096,H[J+T]>G.xrpow_max&&(G.xrpow_max=H[J+T]);G.scalefac[D]=K>>1}G.preflag=0;G.scalefac_scale=1;G=!1}else if(v.block_type==d.SHORT_TYPE&&0<q.subblock_gain){b:{G=q;J=v;D=void 0;K=J.scalefac;for(D=0;D<J.sfb_lmax;D++)if(16<=K[D]){H=!0;break b}for(T=0;3>T;T++){ra=W=0;for(D=J.sfb_lmax+
T;D<J.sfbdivide;D+=3)W<K[D]&&(W=K[D]);for(;D<J.sfbmax;D+=3)ra<K[D]&&(ra=K[D]);if(!(16>W&&8>ra)){if(7<=J.subblock_gain[T]){H=!0;break b}J.subblock_gain[T]++;W=G.scalefac_band.l[J.sfb_lmax];for(D=J.sfb_lmax+T;D<J.sfbmax;D+=3)if(ra=J.width[D],ia=K[D],ia-=4>>J.scalefac_scale,0<=ia)K[D]=ia,W+=3*ra;else{K[D]=0;ia=y.IPOW20(210+(ia<<J.scalefac_scale+1));W+=ra*(T+1);for(sa=-ra;0>sa;sa++)H[W+sa]*=ia,H[W+sa]>J.xrpow_max&&(J.xrpow_max=H[W+sa]);W+=ra*(3-T-1)}ia=y.IPOW20(202);W+=J.width[D]*(T+1);for(sa=-J.width[D];0>
sa;sa++)H[W+sa]*=ia,H[W+sa]>J.xrpow_max&&(J.xrpow_max=H[W+sa])}}H=!1}G=H||n(v)}G||(G=2==q.mode_gr?fa.scale_bitcount(v):fa.scale_bitcount_lsf(q,v));v=!G}else v=!0;if(!v)break;0!=k.scalefac_scale&&(I=254);v=p-k.part2_length;if(0>=v)break;for(;(k.part2_3_length=fa.count_bits(m,a,k,x))>v&&k.global_gain<=I;)k.global_gain++;if(k.global_gain>I)break;if(0==z.over_count){for(;(k.part2_3_length=fa.count_bits(m,a,k,x))>u&&k.global_gain<=I;)k.global_gain++;if(k.global_gain>I)break}y.calc_noise(k,f,g,E,x);E.bits=
k.part2_3_length;q=b.block_type!=d.SHORT_TYPE?l.quant_comp:l.quant_comp_short;I=z;v=E;G=k;H=g;J=void 0;switch(q){default:case 9:0<I.over_count?(J=v.over_SSD<=I.over_SSD,v.over_SSD==I.over_SSD&&(J=v.bits<I.bits)):J=0>v.max_noise&&10*v.max_noise+v.bits<=10*I.max_noise+I.bits;break;case 0:J=v.over_count<I.over_count||v.over_count==I.over_count&&v.over_noise<I.over_noise||v.over_count==I.over_count&&ma.EQ(v.over_noise,I.over_noise)&&v.tot_noise<I.tot_noise;break;case 8:q=v;D=1E-37;for(J=0;J<G.psymax;J++)K=
H[J],K=ca.FAST_LOG10(.368+.632*K*K*K),D+=K;H=Math.max(1E-20,D);q.max_noise=H;case 1:J=v.max_noise<I.max_noise;break;case 2:J=v.tot_noise<I.tot_noise;break;case 3:J=v.tot_noise<I.tot_noise&&v.max_noise<I.max_noise;break;case 4:J=0>=v.max_noise&&.2<I.max_noise||0>=v.max_noise&&0>I.max_noise&&I.max_noise>v.max_noise-.2&&v.tot_noise<I.tot_noise||0>=v.max_noise&&0<I.max_noise&&I.max_noise>v.max_noise-.2&&v.tot_noise<I.tot_noise+I.over_noise||0<v.max_noise&&-.05<I.max_noise&&I.max_noise>v.max_noise-.1&&
v.tot_noise+v.over_noise<I.tot_noise+I.over_noise||0<v.max_noise&&-.1<I.max_noise&&I.max_noise>v.max_noise-.15&&v.tot_noise+v.over_noise+v.over_noise<I.tot_noise+I.over_noise+I.over_noise;break;case 5:J=v.over_noise<I.over_noise||ma.EQ(v.over_noise,I.over_noise)&&v.tot_noise<I.tot_noise;break;case 6:J=v.over_noise<I.over_noise||ma.EQ(v.over_noise,I.over_noise)&&(v.max_noise<I.max_noise||ma.EQ(v.max_noise,I.max_noise)&&v.tot_noise<=I.tot_noise);break;case 7:J=v.over_count<I.over_count||v.over_noise<
I.over_noise}0==I.over_count&&(J=J&&v.bits<I.bits);q=J?1:0;if(0!=q)u=b.part2_3_length,z=E,b.assign(k),e=0,Q.arraycopy(a,0,c,0,576);else if(0==m.full_outer_loop){if(++e>F&&0==z.over_count)break;if(3==m.noise_shaping_amp&&h&&30<e)break;if(3==m.noise_shaping_amp&&h&&15<k.global_gain-w)break}}while(255>k.global_gain+k.scalefac_scale);3==m.noise_shaping_amp?h?t=!0:(k.assign(b),Q.arraycopy(c,0,a,0,576),e=0,w=k.global_gain,h=!0):t=!0}l.VBR==N.vbr_rh||l.VBR==N.vbr_mtrh?Q.arraycopy(c,0,a,0,576):0!=(m.substep_shaping&
1)&&trancate_smallspectrums(m,b,f,a);return z.over_count};this.iteration_finish_one=function(d,b,f){var a=d.l3_side,e=a.tt[b][f];fa.best_scalefac_store(d,b,f,a);1==d.use_best_huffman&&fa.best_huffman_divide(d,e);u.ResvAdjust(d,e)};this.VBR_encode_granule=function(d,b,f,a,e,n,m){var k=d.internal_flags,c=new Ab,g=L(576),p=m,q=m+1,q=(m+n)/2,x,u=0,t=k.sfb21_extra;Ha.fill(c.l3_enc,0);do k.sfb21_extra=q>p-42?!1:t,x=outer_loop(d,b,f,a,e,q),0>=x?(u=1,q=b.part2_3_length,c.assign(b),Q.arraycopy(a,0,g,0,576),
m=q-32,x=m-n,q=(m+n)/2):(n=q+32,x=m-n,q=(m+n)/2,0!=u&&(u=2,b.assign(c),Q.arraycopy(g,0,a,0,576)));while(12<x);k.sfb21_extra=t;2==u&&Q.arraycopy(c.l3_enc,0,b.l3_enc,0,576)};this.get_framebits=function(d,b){var f=d.internal_flags;f.bitrate_index=f.VBR_min_bitrate;var a=p.getframebits(d);f.bitrate_index=1;for(var a=p.getframebits(d),e=1;e<=f.VBR_max_bitrate;e++)f.bitrate_index=e,a=new hb(a),b[e]=u.ResvFrameBegin(d,a),a=a.bits};this.VBR_old_prepare=function(f,b,n,a,e,p,m,k,c){var g=f.internal_flags,z;
z=0;var q=1,x=0;g.bitrate_index=g.VBR_max_bitrate;var B=u.ResvFrameBegin(f,new hb(0))/g.mode_gr;get_framebits(f,p);for(var t=0;t<g.mode_gr;t++){var h=y.on_pe(f,b,k[t],B,t,0);g.mode_ext==d.MPG_MD_MS_LR&&(ms_convert(g.l3_side,t),y.reduce_side(k[t],n[t],B,h));for(h=0;h<g.channels_out;++h){var w=g.l3_side.tt[t][h];w.block_type!=d.SHORT_TYPE?(z=1.28/(1+Math.exp(3.5-b[t][h]/300))-.05,z=g.PSY.mask_adjust-z):(z=2.56/(1+Math.exp(3.5-b[t][h]/300))-.14,z=g.PSY.mask_adjust_short-z);g.masking_lower=Math.pow(10,
.1*z);init_outer_loop(g,w);c[t][h]=y.calc_xmin(f,a[t][h],w,e[t][h]);0!=c[t][h]&&(q=0);m[t][h]=126;x+=k[t][h]}}for(t=0;t<g.mode_gr;t++)for(h=0;h<g.channels_out;h++)x>p[g.VBR_max_bitrate]&&(k[t][h]*=p[g.VBR_max_bitrate],k[t][h]/=x),m[t][h]>k[t][h]&&(m[t][h]=k[t][h]);return q};this.bitpressure_strategy=function(f,b,n,a){for(var e=0;e<f.mode_gr;e++)for(var p=0;p<f.channels_out;p++){for(var m=f.l3_side.tt[e][p],k=b[e][p],c=0,g=0;g<m.psy_lmax;g++)k[c++]*=1+.029*g*g/d.SBMAX_l/d.SBMAX_l;if(m.block_type==
d.SHORT_TYPE)for(g=m.sfb_smin;g<d.SBMAX_s;g++)k[c++]*=1+.029*g*g/d.SBMAX_s/d.SBMAX_s,k[c++]*=1+.029*g*g/d.SBMAX_s/d.SBMAX_s,k[c++]*=1+.029*g*g/d.SBMAX_s/d.SBMAX_s;a[e][p]=0|Math.max(n[e][p],.9*a[e][p])}};this.VBR_new_prepare=function(f,b,n,a,e,p){var m=f.internal_flags,k=1,c=0,g=0,z;f.free_format?(m.bitrate_index=0,c=new hb(c),z=u.ResvFrameBegin(f,c),c=c.bits,e[0]=z):(m.bitrate_index=m.VBR_max_bitrate,c=new hb(c),u.ResvFrameBegin(f,c),c=c.bits,get_framebits(f,e),z=e[m.VBR_max_bitrate]);for(e=0;e<
m.mode_gr;e++){y.on_pe(f,b,p[e],c,e,0);m.mode_ext==d.MPG_MD_MS_LR&&ms_convert(m.l3_side,e);for(var q=0;q<m.channels_out;++q){var x=m.l3_side.tt[e][q];m.masking_lower=Math.pow(10,.1*m.PSY.mask_adjust);init_outer_loop(m,x);0!=y.calc_xmin(f,n[e][q],x,a[e][q])&&(k=0);g+=p[e][q]}}for(e=0;e<m.mode_gr;e++)for(q=0;q<m.channels_out;q++)g>z&&(p[e][q]*=z,p[e][q]/=g);return k};this.calc_target_bits=function(f,b,n,a,e,B){var m=f.internal_flags,k=m.l3_side,c,g;m.bitrate_index=m.VBR_max_bitrate;g=new hb(0);B[0]=
u.ResvFrameBegin(f,g);m.bitrate_index=1;g=p.getframebits(f)-8*m.sideinfo_len;e[0]=g/(m.mode_gr*m.channels_out);g=f.VBR_mean_bitrate_kbps*f.framesize*1E3;0!=(m.substep_shaping&1)&&(g*=1.09);g/=f.out_samplerate;g-=8*m.sideinfo_len;g/=m.mode_gr*m.channels_out;c=.93+.07*(11-f.compression_ratio)/5.5;.9>c&&(c=.9);1<c&&(c=1);for(f=0;f<m.mode_gr;f++){var z=0;for(e=0;e<m.channels_out;e++){a[f][e]=int(c*g);if(700<b[f][e]){var q=int((b[f][e]-700)/1.4),x=k.tt[f][e];a[f][e]=int(c*g);x.block_type==d.SHORT_TYPE&&
q<g/2&&(q=g/2);q>3*g/2?q=3*g/2:0>q&&(q=0);a[f][e]+=q}a[f][e]>Y.MAX_BITS_PER_CHANNEL&&(a[f][e]=Y.MAX_BITS_PER_CHANNEL);z+=a[f][e]}if(z>Y.MAX_BITS_PER_GRANULE)for(e=0;e<m.channels_out;++e)a[f][e]*=Y.MAX_BITS_PER_GRANULE,a[f][e]/=z}if(m.mode_ext==d.MPG_MD_MS_LR)for(f=0;f<m.mode_gr;f++)y.reduce_side(a[f],n[f],g*m.channels_out,Y.MAX_BITS_PER_GRANULE);for(f=b=0;f<m.mode_gr;f++)for(e=0;e<m.channels_out;e++)a[f][e]>Y.MAX_BITS_PER_CHANNEL&&(a[f][e]=Y.MAX_BITS_PER_CHANNEL),b+=a[f][e];if(b>B[0])for(f=0;f<m.mode_gr;f++)for(e=
0;e<m.channels_out;e++)a[f][e]*=B[0],a[f][e]/=b}}function Xa(){this.thm=new Vb;this.en=new Vb}function Pc(){function B(b,d,a){for(var f=10,l=d+238-14-286,m=-15;0>m;m++){var k,c,g;k=n[f+-10];c=b[l+-224]*k;g=b[d+224]*k;k=n[f+-9];c+=b[l+-160]*k;g+=b[d+160]*k;k=n[f+-8];c+=b[l+-96]*k;g+=b[d+96]*k;k=n[f+-7];c+=b[l+-32]*k;g+=b[d+32]*k;k=n[f+-6];c+=b[l+32]*k;g+=b[d+-32]*k;k=n[f+-5];c+=b[l+96]*k;g+=b[d+-96]*k;k=n[f+-4];c+=b[l+160]*k;g+=b[d+-160]*k;k=n[f+-3];c+=b[l+224]*k;g+=b[d+-224]*k;k=n[f+-2];c+=b[d+-256]*
k;g-=b[l+256]*k;k=n[f+-1];c+=b[d+-192]*k;g-=b[l+192]*k;k=n[f+0];c+=b[d+-128]*k;g-=b[l+128]*k;k=n[f+1];c+=b[d+-64]*k;g-=b[l+64]*k;k=n[f+2];c+=b[d+0]*k;g-=b[l+0]*k;k=n[f+3];c+=b[d+64]*k;g-=b[l+-64]*k;k=n[f+4];c+=b[d+128]*k;g-=b[l+-128]*k;k=n[f+5];c+=b[d+192]*k;g-=b[l+-192]*k;c*=n[f+6];k=g-c;a[30+2*m]=g+c;a[31+2*m]=n[f+7]*k;f+=18;d--;l++}g=b[d+-16]*n[f+-10];c=b[d+-32]*n[f+-2];g+=(b[d+-48]-b[d+16])*n[f+-9];c+=b[d+-96]*n[f+-1];g+=(b[d+-80]+b[d+48])*n[f+-8];c+=b[d+-160]*n[f+0];g+=(b[d+-112]-b[d+80])*n[f+
-7];c+=b[d+-224]*n[f+1];g+=(b[d+-144]+b[d+112])*n[f+-6];c-=b[d+32]*n[f+2];g+=(b[d+-176]-b[d+144])*n[f+-5];c-=b[d+96]*n[f+3];g+=(b[d+-208]+b[d+176])*n[f+-4];c-=b[d+160]*n[f+4];g+=(b[d+-240]-b[d+208])*n[f+-3];c-=b[d+224];b=c-g;d=c+g;g=a[14];c=a[15]-g;a[31]=d+g;a[30]=b+c;a[15]=b-c;a[14]=d-g;c=a[28]-a[0];a[0]+=a[28];a[28]=c*n[f+-36+7];c=a[29]-a[1];a[1]+=a[29];a[29]=c*n[f+-36+7];c=a[26]-a[2];a[2]+=a[26];a[26]=c*n[f+-72+7];c=a[27]-a[3];a[3]+=a[27];a[27]=c*n[f+-72+7];c=a[24]-a[4];a[4]+=a[24];a[24]=c*n[f+
-108+7];c=a[25]-a[5];a[5]+=a[25];a[25]=c*n[f+-108+7];c=a[22]-a[6];a[6]+=a[22];a[22]=c*ca.SQRT2;c=a[23]-a[7];a[7]+=a[23];a[23]=c*ca.SQRT2-a[7];a[7]-=a[6];a[22]-=a[7];a[23]-=a[22];c=a[6];a[6]=a[31]-c;a[31]+=c;c=a[7];a[7]=a[30]-c;a[30]+=c;c=a[22];a[22]=a[15]-c;a[15]+=c;c=a[23];a[23]=a[14]-c;a[14]+=c;c=a[20]-a[8];a[8]+=a[20];a[20]=c*n[f+-180+7];c=a[21]-a[9];a[9]+=a[21];a[21]=c*n[f+-180+7];c=a[18]-a[10];a[10]+=a[18];a[18]=c*n[f+-216+7];c=a[19]-a[11];a[11]+=a[19];a[19]=c*n[f+-216+7];c=a[16]-a[12];a[12]+=
a[16];a[16]=c*n[f+-252+7];c=a[17]-a[13];a[13]+=a[17];a[17]=c*n[f+-252+7];c=-a[20]+a[24];a[20]+=a[24];a[24]=c*n[f+-216+7];c=-a[21]+a[25];a[21]+=a[25];a[25]=c*n[f+-216+7];c=a[4]-a[8];a[4]+=a[8];a[8]=c*n[f+-216+7];c=a[5]-a[9];a[5]+=a[9];a[9]=c*n[f+-216+7];c=a[0]-a[12];a[0]+=a[12];a[12]=c*n[f+-72+7];c=a[1]-a[13];a[1]+=a[13];a[13]=c*n[f+-72+7];c=a[16]-a[28];a[16]+=a[28];a[28]=c*n[f+-72+7];c=-a[17]+a[29];a[17]+=a[29];a[29]=c*n[f+-72+7];c=ca.SQRT2*(a[2]-a[10]);a[2]+=a[10];a[10]=c;c=ca.SQRT2*(a[3]-a[11]);
a[3]+=a[11];a[11]=c;c=ca.SQRT2*(-a[18]+a[26]);a[18]+=a[26];a[26]=c-a[18];c=ca.SQRT2*(-a[19]+a[27]);a[19]+=a[27];a[27]=c-a[19];c=a[2];a[19]-=a[3];a[3]-=c;a[2]=a[31]-c;a[31]+=c;c=a[3];a[11]-=a[19];a[18]-=c;a[3]=a[30]-c;a[30]+=c;c=a[18];a[27]-=a[11];a[19]-=c;a[18]=a[15]-c;a[15]+=c;c=a[19];a[10]-=c;a[19]=a[14]-c;a[14]+=c;c=a[10];a[11]-=c;a[10]=a[23]-c;a[23]+=c;c=a[11];a[26]-=c;a[11]=a[22]-c;a[22]+=c;c=a[26];a[27]-=c;a[26]=a[7]-c;a[7]+=c;c=a[27];a[27]=a[6]-c;a[6]+=c;c=ca.SQRT2*(a[0]-a[4]);a[0]+=a[4];a[4]=
c;c=ca.SQRT2*(a[1]-a[5]);a[1]+=a[5];a[5]=c;c=ca.SQRT2*(a[16]-a[20]);a[16]+=a[20];a[20]=c;c=ca.SQRT2*(a[17]-a[21]);a[17]+=a[21];a[21]=c;c=-ca.SQRT2*(a[8]-a[12]);a[8]+=a[12];a[12]=c-a[8];c=-ca.SQRT2*(a[9]-a[13]);a[9]+=a[13];a[13]=c-a[9];c=-ca.SQRT2*(a[25]-a[29]);a[25]+=a[29];a[29]=c-a[25];c=-ca.SQRT2*(a[24]+a[28]);a[24]-=a[28];a[28]=c-a[24];c=a[24]-a[16];a[24]=c;c=a[20]-c;a[20]=c;c=a[28]-c;a[28]=c;c=a[25]-a[17];a[25]=c;c=a[21]-c;a[21]=c;c=a[29]-c;a[29]=c;c=a[17]-a[1];a[17]=c;c=a[9]-c;a[9]=c;c=a[25]-
c;a[25]=c;c=a[5]-c;a[5]=c;c=a[21]-c;a[21]=c;c=a[13]-c;a[13]=c;c=a[29]-c;a[29]=c;c=a[1]-a[0];a[1]=c;c=a[16]-c;a[16]=c;c=a[17]-c;a[17]=c;c=a[8]-c;a[8]=c;c=a[9]-c;a[9]=c;c=a[24]-c;a[24]=c;c=a[25]-c;a[25]=c;c=a[4]-c;a[4]=c;c=a[5]-c;a[5]=c;c=a[20]-c;a[20]=c;c=a[21]-c;a[21]=c;c=a[12]-c;a[12]=c;c=a[13]-c;a[13]=c;c=a[28]-c;a[28]=c;c=a[29]-c;a[29]=c;c=a[0];a[0]+=a[31];a[31]-=c;c=a[1];a[1]+=a[30];a[30]-=c;c=a[16];a[16]+=a[15];a[15]-=c;c=a[17];a[17]+=a[14];a[14]-=c;c=a[8];a[8]+=a[23];a[23]-=c;c=a[9];a[9]+=a[22];
a[22]-=c;c=a[24];a[24]+=a[7];a[7]-=c;c=a[25];a[25]+=a[6];a[6]-=c;c=a[4];a[4]+=a[27];a[27]-=c;c=a[5];a[5]+=a[26];a[26]-=c;c=a[20];a[20]+=a[11];a[11]-=c;c=a[21];a[21]+=a[10];a[10]-=c;c=a[12];a[12]+=a[19];a[19]-=c;c=a[13];a[13]+=a[18];a[18]-=c;c=a[28];a[28]+=a[3];a[3]-=c;c=a[29];a[29]+=a[2];a[2]-=c}var n=[-.1482523854003001,32.308141959636465,296.40344946382766,883.1344870032432,11113.947376231741,1057.2713659324597,305.7402417275812,30.825928907280012,3.8533188138216365,59.42900443849514,709.5899960123345,
5281.91112291017,-5829.66483675846,-817.6293103748613,-76.91656988279972,-4.594269939176596,.9063471690191471,.1960342806591213,-.15466694054279598,34.324387823855965,301.8067566458425,817.599602898885,11573.795901679885,1181.2520595540152,321.59731579894424,31.232021761053772,3.7107095756221318,53.650946155329365,684.167428119626,5224.56624370173,-6366.391851890084,-908.9766368219582,-89.83068876699639,-5.411397422890401,.8206787908286602,.3901806440322567,-.16070888947830023,36.147034243915876,
304.11815768187864,732.7429163887613,11989.60988270091,1300.012278487897,335.28490093152146,31.48816102859945,3.373875931311736,47.232241542899175,652.7371796173471,5132.414255594984,-6909.087078780055,-1001.9990371107289,-103.62185754286375,-6.104916304710272,.7416505462720353,.5805693545089249,-.16636367662261495,37.751650073343995,303.01103387567713,627.9747488785183,12358.763425278165,1412.2779918482834,346.7496836825721,31.598286663170416,3.1598635433980946,40.57878626349686,616.1671130880391,
5007.833007176154,-7454.040671756168,-1095.7960341867115,-118.24411666465777,-6.818469345853504,.6681786379192989,.7653668647301797,-.1716176790982088,39.11551877123304,298.3413246578966,503.5259106886539,12679.589408408976,1516.5821921214542,355.9850766329023,31.395241710249053,2.9164211881972335,33.79716964664243,574.8943997801362,4853.234992253242,-7997.57021486075,-1189.7624067269965,-133.6444792601766,-7.7202770609839915,.5993769336819237,.9427934736519954,-.17645823955292173,40.21879108166477,
289.9982036694474,359.3226160751053,12950.259102786438,1612.1013903507662,362.85067106591504,31.045922092242872,2.822222032597987,26.988862316190684,529.8996541764288,4671.371946949588,-8535.899136645805,-1282.5898586244496,-149.58553632943463,-8.643494270763135,.5345111359507916,1.111140466039205,-.36174739330527045,41.04429910497807,277.5463268268618,195.6386023135583,13169.43812144731,1697.6433561479398,367.40983966190305,30.557037410382826,2.531473372857427,20.070154905927314,481.50208566532336,
4464.970341588308,-9065.36882077239,-1373.62841526722,-166.1660487028118,-9.58289321133207,.4729647758913199,1.268786568327291,-.36970682634889585,41.393213350082036,261.2935935556502,12.935476055240873,13336.131683328815,1772.508612059496,369.76534388639965,29.751323653701338,2.4023193045459172,13.304795348228817,430.5615775526625,4237.0568611071185,-9581.931701634761,-1461.6913552409758,-183.12733958476446,-10.718010163869403,.41421356237309503,1.414213562373095,-.37677560326535325,41.619486213528496,
241.05423794991074,-187.94665032361226,13450.063605744153,1836.153896465782,369.4908799925761,29.001847876923147,2.0714759319987186,6.779591200894186,377.7767837205709,3990.386575512536,-10081.709459700915,-1545.947424837898,-200.3762958015653,-11.864482073055006,.3578057213145241,1.546020906725474,-.3829366947518991,41.1516456456653,216.47684307105183,-406.1569483347166,13511.136535077321,1887.8076599260432,367.3025214564151,28.136213436723654,1.913880671464418,.3829366947518991,323.85365704338597,
3728.1472257487526,-10561.233882199509,-1625.2025997821418,-217.62525175416,-13.015432208941645,.3033466836073424,1.66293922460509,-.5822628872992417,40.35639251440489,188.20071124269245,-640.2706748618148,13519.21490106562,1927.6022433578062,362.8197642637487,26.968821921868447,1.7463817695935329,-5.62650678237171,269.3016715297017,3453.386536448852,-11016.145278780888,-1698.6569643425091,-234.7658734267683,-14.16351421663124,.2504869601913055,1.76384252869671,-.5887180101749253,39.23429103868072,
155.76096234403798,-889.2492977967378,13475.470561874661,1955.0535223723712,356.4450994756727,25.894952980042156,1.5695032905781554,-11.181939564328772,214.80884394039484,3169.1640829158237,-11443.321309975563,-1765.1588461316153,-251.68908574481912,-15.49755935939164,.198912367379658,1.847759065022573,-.7912582233652842,37.39369355329111,119.699486012458,-1151.0956593239027,13380.446257078214,1970.3952110853447,348.01959814116185,24.731487364283044,1.3850130831637748,-16.421408865300393,161.05030052864092,
2878.3322807850063,-11838.991423510031,-1823.985884688674,-268.2854986386903,-16.81724543849939,.1483359875383474,1.913880671464418,-.7960642926861912,35.2322109610459,80.01928065061526,-1424.0212633405113,13235.794061869668,1973.804052543835,337.9908651258184,23.289159354463873,1.3934255946442087,-21.099669467133474,108.48348407242611,2583.700758091299,-12199.726194855148,-1874.2780658979746,-284.2467154529415,-18.11369784385905,.09849140335716425,1.961570560806461,-.998795456205172,32.56307803611191,
36.958364584370486,-1706.075448829146,13043.287458812016,1965.3831106103316,326.43182772364605,22.175018750622293,1.198638339011324,-25.371248002043963,57.53505923036915,2288.41886619975,-12522.674544337233,-1914.8400385312243,-299.26241273417224,-19.37805630698734,.04912684976946725,1.990369453344394,.0178904535*ca.SQRT2/2.384E-6,.008938074*ca.SQRT2/2.384E-6,.0015673635*ca.SQRT2/2.384E-6,.001228571*ca.SQRT2/2.384E-6,4.856585E-4*ca.SQRT2/2.384E-6,1.09434E-4*ca.SQRT2/2.384E-6,5.0783E-5*ca.SQRT2/2.384E-6,
6.914E-6*ca.SQRT2/2.384E-6,12804.797818791945,1945.5515939597317,313.4244966442953,20.801593959731544,1995.1556208053692,9.000838926174497,-29.20218120805369],p=[[2.382191739347913E-13,6.423305872147834E-13,9.400849094049688E-13,1.122435026096556E-12,1.183840321267481E-12,1.122435026096556E-12,9.40084909404969E-13,6.423305872147839E-13,2.382191739347918E-13,5.456116108943412E-12,4.878985199565852E-12,4.240448995017367E-12,3.559909094758252E-12,2.858043359288075E-12,2.156177623817898E-12,1.475637723558783E-12,
8.371015190102974E-13,2.599706096327376E-13,-5.456116108943412E-12,-4.878985199565852E-12,-4.240448995017367E-12,-3.559909094758252E-12,-2.858043359288076E-12,-2.156177623817898E-12,-1.475637723558783E-12,-8.371015190102975E-13,-2.599706096327376E-13,-2.382191739347923E-13,-6.423305872147843E-13,-9.400849094049696E-13,-1.122435026096556E-12,-1.183840321267481E-12,-1.122435026096556E-12,-9.400849094049694E-13,-6.42330587214784E-13,-2.382191739347918E-13],[2.382191739347913E-13,6.423305872147834E-13,
9.400849094049688E-13,1.122435026096556E-12,1.183840321267481E-12,1.122435026096556E-12,9.400849094049688E-13,6.423305872147841E-13,2.382191739347918E-13,5.456116108943413E-12,4.878985199565852E-12,4.240448995017367E-12,3.559909094758253E-12,2.858043359288075E-12,2.156177623817898E-12,1.475637723558782E-12,8.371015190102975E-13,2.599706096327376E-13,-5.461314069809755E-12,-4.921085770524055E-12,-4.343405037091838E-12,-3.732668368707687E-12,-3.093523840190885E-12,-2.430835727329465E-12,-1.734679010007751E-12,
-9.74825365660928E-13,-2.797435120168326E-13,0,0,0,0,0,0,-2.283748241799531E-13,-4.037858874020686E-13,-2.146547464825323E-13],[.1316524975873958,.414213562373095,.7673269879789602,1.091308501069271,1.303225372841206,1.56968557711749,1.920982126971166,2.414213562373094,3.171594802363212,4.510708503662055,7.595754112725146,22.90376554843115,.984807753012208,.6427876096865394,.3420201433256688,.9396926207859084,-.1736481776669303,-.7660444431189779,.8660254037844387,.5,-.5144957554275265,-.4717319685649723,
-.3133774542039019,-.1819131996109812,-.09457419252642064,-.04096558288530405,-.01419856857247115,-.003699974673760037,.8574929257125442,.8817419973177052,.9496286491027329,.9833145924917901,.9955178160675857,.9991605581781475,.999899195244447,.9999931550702802],[0,0,0,0,0,0,2.283748241799531E-13,4.037858874020686E-13,2.146547464825323E-13,5.461314069809755E-12,4.921085770524055E-12,4.343405037091838E-12,3.732668368707687E-12,3.093523840190885E-12,2.430835727329466E-12,1.734679010007751E-12,9.74825365660928E-13,
2.797435120168326E-13,-5.456116108943413E-12,-4.878985199565852E-12,-4.240448995017367E-12,-3.559909094758253E-12,-2.858043359288075E-12,-2.156177623817898E-12,-1.475637723558782E-12,-8.371015190102975E-13,-2.599706096327376E-13,-2.382191739347913E-13,-6.423305872147834E-13,-9.400849094049688E-13,-1.122435026096556E-12,-1.183840321267481E-12,-1.122435026096556E-12,-9.400849094049688E-13,-6.423305872147841E-13,-2.382191739347918E-13]],u=p[d.SHORT_TYPE],y=p[d.SHORT_TYPE],f=p[d.SHORT_TYPE],fa=p[d.SHORT_TYPE],
l=[0,1,16,17,8,9,24,25,4,5,20,21,12,13,28,29,2,3,18,19,10,11,26,27,6,7,22,23,14,15,30,31];this.mdct_sub48=function(b,n,a){for(var e=286,C=0;C<b.channels_out;C++){for(var m=0;m<b.mode_gr;m++){for(var k,c=b.l3_side.tt[m][C],g=c.xr,z=0,q=b.sb_sample[C][1-m],x=0,A=0;9>A;A++)for(B(n,e,q[x]),B(n,e+32,q[x+1]),x+=2,e+=64,k=1;32>k;k+=2)q[x-1][k]*=-1;for(k=0;32>k;k++,z+=18){var q=c.block_type,x=b.sb_sample[C][m],t=b.sb_sample[C][1-m];0!=c.mixed_block_flag&&2>k&&(q=0);if(1E-12>b.amp_filter[k])Ha.fill(g,z+0,
z+18,0);else{if(1>b.amp_filter[k])for(A=0;18>A;A++)t[A][l[k]]*=b.amp_filter[k];if(q==d.SHORT_TYPE){for(A=-3;0>A;A++){var h=p[d.SHORT_TYPE][A+3];g[z+3*A+9]=x[9+A][l[k]]*h-x[8-A][l[k]];g[z+3*A+18]=x[14-A][l[k]]*h+x[15+A][l[k]];g[z+3*A+10]=x[15+A][l[k]]*h-x[14-A][l[k]];g[z+3*A+19]=t[2-A][l[k]]*h+t[3+A][l[k]];g[z+3*A+11]=t[3+A][l[k]]*h-t[2-A][l[k]];g[z+3*A+20]=t[8-A][l[k]]*h+t[9+A][l[k]]}A=g;x=z;for(h=0;3>h;h++){var w,E,H,Z,I;H=A[x+6]*p[d.SHORT_TYPE][0]-A[x+15];t=A[x+0]*p[d.SHORT_TYPE][2]-A[x+9];w=H+
t;E=H-t;H=A[x+15]*p[d.SHORT_TYPE][0]+A[x+6];t=A[x+9]*p[d.SHORT_TYPE][2]+A[x+0];Z=H+t;I=-H+t;t=2.069978111953089E-11*(A[x+3]*p[d.SHORT_TYPE][1]-A[x+12]);H=2.069978111953089E-11*(A[x+12]*p[d.SHORT_TYPE][1]+A[x+3]);A[x+0]=1.90752519173728E-11*w+t;A[x+15]=1.90752519173728E-11*-Z+H;E*=1.6519652744032674E-11;Z=9.537625958686404E-12*Z+H;A[x+3]=E-Z;A[x+6]=E+Z;w=9.537625958686404E-12*w-t;I*=1.6519652744032674E-11;A[x+9]=w+I;A[x+12]=w-I;x++}}else{h=L(18);for(A=-9;0>A;A++)w=p[q][A+27]*t[A+9][l[k]]+p[q][A+36]*
t[8-A][l[k]],E=p[q][A+9]*x[A+9][l[k]]-p[q][A+18]*x[8-A][l[k]],h[A+9]=w-E*u[3+A+9],h[A+18]=w*u[3+A+9]+E;var A=g,x=z,v=I=Z=H=E=w=t=void 0,G=void 0,J=void 0,D=void 0;E=h[17]-h[9];Z=h[15]-h[11];I=h[14]-h[12];v=h[0]+h[8];G=h[1]+h[7];J=h[2]+h[6];D=h[3]+h[5];A[x+17]=v+J-D-(G-h[4]);w=(v+J-D)*y[19]+(G-h[4]);t=(E-Z-I)*y[18];A[x+5]=t+w;A[x+6]=t-w;H=(h[16]-h[10])*y[18];G=G*y[19]+h[4];t=E*y[12]+H+Z*y[13]+I*y[14];w=-v*y[16]+G-J*y[17]+D*y[15];A[x+1]=t+w;A[x+2]=t-w;t=E*y[13]-H-Z*y[14]+I*y[12];w=-v*y[17]+G-J*y[15]+
D*y[16];A[x+9]=t+w;A[x+10]=t-w;t=E*y[14]-H+Z*y[12]-I*y[13];w=v*y[15]-G+J*y[16]-D*y[17];A[x+13]=t+w;A[x+14]=t-w;D=J=G=v=I=Z=H=E=void 0;E=h[8]-h[0];Z=h[6]-h[2];I=h[5]-h[3];v=h[17]+h[9];G=h[16]+h[10];J=h[15]+h[11];D=h[14]+h[12];A[x+0]=v+J+D+(G+h[13]);t=(v+J+D)*y[19]-(G+h[13]);w=(E-Z+I)*y[18];A[x+11]=t+w;A[x+12]=t-w;H=(h[7]-h[1])*y[18];G=h[13]-G*y[19];t=v*y[15]-G+J*y[16]+D*y[17];w=E*y[14]+H+Z*y[12]+I*y[13];A[x+3]=t+w;A[x+4]=t-w;t=-v*y[17]+G-J*y[15]-D*y[16];w=E*y[13]+H-Z*y[14]-I*y[12];A[x+7]=t+w;A[x+8]=
t-w;t=-v*y[16]+G-J*y[17]-D*y[15];w=E*y[12]-H+Z*y[13]-I*y[14];A[x+15]=t+w;A[x+16]=t-w}}if(q!=d.SHORT_TYPE&&0!=k)for(A=7;0<=A;--A)q=g[z+A]*f[20+A]+g[z+-1-A]*fa[28+A],x=g[z+A]*fa[28+A]-g[z+-1-A]*f[20+A],g[z+-1-A]=q,g[z+A]=x}}n=a;e=286;if(1==b.mode_gr)for(m=0;18>m;m++)Q.arraycopy(b.sb_sample[C][1][m],0,b.sb_sample[C][0][m],0,32)}}}function d(){var u=d.FFTOFFSET,n=d.MPG_MD_MS_LR,p=null,F=this.psy=null,y=null,f=null;this.setModules=function(d,b,n,a){p=d;F=this.psy=b;y=a;f=n};var fa=new Pc;this.lame_encode_mp3_frame=
function(l,b,r,a,e,C){var m=Ub([2,2]);m[0][0]=new Xa;m[0][1]=new Xa;m[1][0]=new Xa;m[1][1]=new Xa;var k=Ub([2,2]);k[0][0]=new Xa;k[0][1]=new Xa;k[1][0]=new Xa;k[1][1]=new Xa;var c=[null,null],g=l.internal_flags,z=wa([2,4]),q=[.5,.5],x=[[0,0],[0,0]],A=[[0,0],[0,0]];c[0]=b;c[1]=r;if(0==g.lame_encode_frame_init){b=l.internal_flags;var t,h;if(0==b.lame_encode_frame_init){r=L(2014);var w=L(2014);b.lame_encode_frame_init=1;for(h=t=0;t<286+576*(1+b.mode_gr);++t)t<576*b.mode_gr?(r[t]=0,2==b.channels_out&&
(w[t]=0)):(r[t]=c[0][h],2==b.channels_out&&(w[t]=c[1][h]),++h);for(h=0;h<b.mode_gr;h++)for(t=0;t<b.channels_out;t++)b.l3_side.tt[h][t].block_type=d.SHORT_TYPE;fa.mdct_sub48(b,r,w)}}g.padding=0;0>(g.slot_lag-=g.frac_SpF)&&(g.slot_lag+=l.out_samplerate,g.padding=1);if(0!=g.psymodel)for(w=[null,null],t=0,h=aa(2),r=0;r<g.mode_gr;r++){for(b=0;b<g.channels_out;b++)w[b]=c[b],t=576+576*r-d.FFTOFFSET;b=l.VBR==N.vbr_mtrh||l.VBR==N.vbr_mt?F.L3psycho_anal_vbr(l,w,t,r,m,k,x[r],A[r],z[r],h):F.L3psycho_anal_ns(l,
w,t,r,m,k,x[r],A[r],z[r],h);if(0!=b)return-4;l.mode==la.JOINT_STEREO&&(q[r]=z[r][2]+z[r][3],0<q[r]&&(q[r]=z[r][3]/q[r]));for(b=0;b<g.channels_out;b++){var E=g.l3_side.tt[r][b];E.block_type=h[b];E.mixed_block_flag=0}}else for(r=0;r<g.mode_gr;r++)for(b=0;b<g.channels_out;b++)g.l3_side.tt[r][b].block_type=NORM_TYPE,g.l3_side.tt[r][b].mixed_block_flag=0,A[r][b]=x[r][b]=700;0==g.ATH.useAdjust?g.ATH.adjust=1:(b=g.loudness_sq[0][0],z=g.loudness_sq[1][0],2==g.channels_out?(b+=g.loudness_sq[0][1],z+=g.loudness_sq[1][1]):
(b+=b,z+=z),2==g.mode_gr&&(b=Math.max(b,z)),b=.5*b*g.ATH.aaSensitivityP,.03125<b?(1<=g.ATH.adjust?g.ATH.adjust=1:g.ATH.adjust<g.ATH.adjustLimit&&(g.ATH.adjust=g.ATH.adjustLimit),g.ATH.adjustLimit=1):(z=31.98*b+6.25E-4,g.ATH.adjust>=z?(g.ATH.adjust*=.075*z+.925,g.ATH.adjust<z&&(g.ATH.adjust=z)):g.ATH.adjustLimit>=z?g.ATH.adjust=z:g.ATH.adjust<g.ATH.adjustLimit&&(g.ATH.adjust=g.ATH.adjustLimit),g.ATH.adjustLimit=z));fa.mdct_sub48(g,c[0],c[1]);g.mode_ext=d.MPG_MD_LR_LR;if(l.force_ms)g.mode_ext=d.MPG_MD_MS_LR;
else if(l.mode==la.JOINT_STEREO){for(r=w=z=0;r<g.mode_gr;r++)for(b=0;b<g.channels_out;b++)z+=A[r][b],w+=x[r][b];z<=1*w&&(z=g.l3_side.tt[0],b=g.l3_side.tt[g.mode_gr-1],z[0].block_type==z[1].block_type&&b[0].block_type==b[1].block_type&&(g.mode_ext=d.MPG_MD_MS_LR))}g.mode_ext==n&&(m=k,x=A);if(l.analysis&&null!=g.pinfo)for(r=0;r<g.mode_gr;r++)for(b=0;b<g.channels_out;b++)g.pinfo.ms_ratio[r]=g.ms_ratio[r],g.pinfo.ms_ener_ratio[r]=q[r],g.pinfo.blocktype[r][b]=g.l3_side.tt[r][b].block_type,g.pinfo.pe[r][b]=
x[r][b],Q.arraycopy(g.l3_side.tt[r][b].xr,0,g.pinfo.xr[r][b],0,576),g.mode_ext==n&&(g.pinfo.ers[r][b]=g.pinfo.ers[r][b+2],Q.arraycopy(g.pinfo.energy[r][b+2],0,g.pinfo.energy[r][b],0,g.pinfo.energy[r][b].length));if(l.VBR==N.vbr_off||l.VBR==N.vbr_abr){for(k=0;18>k;k++)g.nsPsy.pefirbuf[k]=g.nsPsy.pefirbuf[k+1];for(r=A=0;r<g.mode_gr;r++)for(b=0;b<g.channels_out;b++)A+=x[r][b];g.nsPsy.pefirbuf[18]=A;A=g.nsPsy.pefirbuf[9];for(k=0;9>k;k++)A+=(g.nsPsy.pefirbuf[k]+g.nsPsy.pefirbuf[18-k])*d.fircoef[k];A=3350*
g.mode_gr*g.channels_out/A;for(r=0;r<g.mode_gr;r++)for(b=0;b<g.channels_out;b++)x[r][b]*=A}g.iteration_loop.iteration_loop(l,x,q,m);p.format_bitstream(l);a=p.copy_buffer(g,a,e,C,1);l.bWriteVbrTag&&y.addVbrFrame(l);if(l.analysis&&null!=g.pinfo){for(b=0;b<g.channels_out;b++){for(e=0;e<u;e++)g.pinfo.pcmdata[b][e]=g.pinfo.pcmdata[b][e+l.framesize];for(e=u;1600>e;e++)g.pinfo.pcmdata[b][e]=c[b][e-u]}f.set_frame_pinfo(l,m)}g.bitrate_stereoMode_Hist[g.bitrate_index][4]++;g.bitrate_stereoMode_Hist[15][4]++;
2==g.channels_out&&(g.bitrate_stereoMode_Hist[g.bitrate_index][g.mode_ext]++,g.bitrate_stereoMode_Hist[15][g.mode_ext]++);for(l=0;l<g.mode_gr;++l)for(c=0;c<g.channels_out;++c)e=g.l3_side.tt[l][c].block_type|0,0!=g.l3_side.tt[l][c].mixed_block_flag&&(e=4),g.bitrate_blockType_Hist[g.bitrate_index][e]++,g.bitrate_blockType_Hist[g.bitrate_index][5]++,g.bitrate_blockType_Hist[15][e]++,g.bitrate_blockType_Hist[15][5]++;return a}}function Qc(){this.size=this.pos=this.want=this.seen=this.sum=0;this.bag=null;
this.TotalFrameSize=this.nBytesWritten=this.nVbrNumFrames=0}function Rc(){this.tt=[[null,null],[null,null]];this.resvDrain_post=this.resvDrain_pre=this.private_bits=this.main_data_begin=0;this.scfsi=[aa(4),aa(4)];for(var d=0;2>d;d++)for(var n=0;2>n;n++)this.tt[d][n]=new Ab}function Sc(){this.last_en_subshort=wa([4,9]);this.lastAttacks=aa(4);this.pefirbuf=L(19);this.longfact=L(d.SBMAX_l);this.shortfact=L(d.SBMAX_s);this.attackthre_s=this.attackthre=0}function Vb(){this.l=L(d.SBMAX_l);this.s=wa([d.SBMAX_s,
3]);var u=this;this.assign=function(n){Q.arraycopy(n.l,0,u.l,0,d.SBMAX_l);for(var p=0;p<d.SBMAX_s;p++)for(var F=0;3>F;F++)u.s[p][F]=n.s[p][F]}}function Y(){function u(){this.ptr=this.write_timing=0;this.buf=new Int8Array(40)}this.fill_buffer_resample_init=this.iteration_init_init=this.lame_encode_frame_init=this.Class_ID=0;this.mfbuf=wa([2,Y.MFSIZE]);this.full_outer_loop=this.use_best_huffman=this.subblock_gain=this.noise_shaping_stop=this.psymodel=this.substep_shaping=this.noise_shaping_amp=this.noise_shaping=
this.highpass2=this.highpass1=this.lowpass2=this.lowpass1=this.mode_ext=this.samplerate_index=this.bitrate_index=this.VBR_max_bitrate=this.VBR_min_bitrate=this.mf_size=this.mf_samples_to_encode=this.resample_ratio=this.channels_out=this.channels_in=this.mode_gr=0;this.l3_side=new Rc;this.ms_ratio=L(2);this.slot_lag=this.frac_SpF=this.padding=0;this.tag_spec=null;this.nMusicCRC=0;this.OldValue=aa(2);this.CurrentStep=aa(2);this.masking_lower=0;this.bv_scf=aa(576);this.pseudohalf=aa(za.SFBMAX);this.sfb21_extra=
!1;this.inbuf_old=Array(2);this.blackfilt=Array(2*Y.BPC+1);this.itime=new Float64Array(2);this.sideinfo_len=0;this.sb_sample=wa([2,2,18,d.SBLIMIT]);this.amp_filter=L(32);this.header=Array(Y.MAX_HEADER_BUF);this.ResvMax=this.ResvSize=this.ancillary_flag=this.w_ptr=this.h_ptr=0;this.scalefac_band=new Ba;this.minval_l=L(d.CBANDS);this.minval_s=L(d.CBANDS);this.nb_1=wa([4,d.CBANDS]);this.nb_2=wa([4,d.CBANDS]);this.nb_s1=wa([4,d.CBANDS]);this.nb_s2=wa([4,d.CBANDS]);this.s3_ll=this.s3_ss=null;this.decay=
0;this.thm=Array(4);this.en=Array(4);this.tot_ener=L(4);this.loudness_sq=wa([2,2]);this.loudness_sq_save=L(2);this.mld_l=L(d.SBMAX_l);this.mld_s=L(d.SBMAX_s);this.bm_l=aa(d.SBMAX_l);this.bo_l=aa(d.SBMAX_l);this.bm_s=aa(d.SBMAX_s);this.bo_s=aa(d.SBMAX_s);this.npart_s=this.npart_l=0;this.s3ind=Sa([d.CBANDS,2]);this.s3ind_s=Sa([d.CBANDS,2]);this.numlines_s=aa(d.CBANDS);this.numlines_l=aa(d.CBANDS);this.rnumlines_l=L(d.CBANDS);this.mld_cb_l=L(d.CBANDS);this.mld_cb_s=L(d.CBANDS);this.numlines_l_num1=this.numlines_s_num1=
0;this.pe=L(4);this.ms_ener_ratio_old=this.ms_ratio_l_old=this.ms_ratio_s_old=0;this.blocktype_old=aa(2);this.nsPsy=new Sc;this.VBR_seek_table=new Qc;this.PSY=this.ATH=null;this.nogap_current=this.nogap_total=0;this.findPeakSample=this.findReplayGain=this.decode_on_the_fly=!0;this.AudiophileGain=this.RadioGain=this.PeakSample=0;this.rgdata=null;this.noclipScale=this.noclipGainChange=0;this.bitrate_stereoMode_Hist=Sa([16,5]);this.bitrate_blockType_Hist=Sa([16,6]);this.hip=this.pinfo=null;this.in_buffer_nsamples=
0;this.iteration_loop=this.in_buffer_1=this.in_buffer_0=null;for(var n=0;n<this.en.length;n++)this.en[n]=new Vb;for(n=0;n<this.thm.length;n++)this.thm[n]=new Vb;for(n=0;n<this.header.length;n++)this.header[n]=new u}function Tc(){function u(d,n,l){var b=0,p,a,e;l<<=1;var y=n+l;p=4;do{var m,k,c,g,z,q,x;x=p>>1;g=p;z=p<<1;q=z+g;p=z<<1;a=n;e=a+x;do{var B,t,h,w;t=d[a+0]-d[a+g];B=d[a+0]+d[a+g];w=d[a+z]-d[a+q];h=d[a+z]+d[a+q];d[a+z]=B-h;d[a+0]=B+h;d[a+q]=t-w;d[a+g]=t+w;t=d[e+0]-d[e+g];B=d[e+0]+d[e+g];w=ca.SQRT2*
d[e+q];h=ca.SQRT2*d[e+z];d[e+z]=B-h;d[e+0]=B+h;d[e+q]=t-w;d[e+g]=t+w;e+=p;a+=p}while(a<y);k=F[b+0];m=F[b+1];for(c=1;c<x;c++){var E,H;E=1-2*m*m;H=2*m*k;a=n+c;e=n+g-c;do{var Z,I,v,G,J;Z=H*d[a+g]-E*d[e+g];h=E*d[a+g]+H*d[e+g];t=d[a+0]-h;B=d[a+0]+h;v=d[e+0]-Z;I=d[e+0]+Z;Z=H*d[a+q]-E*d[e+q];h=E*d[a+q]+H*d[e+q];w=d[a+z]-h;h=d[a+z]+h;J=d[e+z]-Z;G=d[e+z]+Z;Z=m*h-k*J;h=k*h+m*J;d[a+z]=B-h;d[a+0]=B+h;d[e+q]=v-Z;d[e+g]=v+Z;Z=k*G-m*w;h=m*G+k*w;d[e+z]=I-h;d[e+0]=I+h;d[a+q]=t-Z;d[a+g]=t+Z;e+=p;a+=p}while(a<y);E=
k;k=E*F[b+0]-m*F[b+1];m=E*F[b+1]+m*F[b+0]}b+=2}while(p<l)}var n=L(d.BLKSIZE),p=L(d.BLKSIZE_s/2),F=[.9238795325112867,.3826834323650898,.9951847266721969,.0980171403295606,.9996988186962042,.02454122852291229,.9999811752826011,.006135884649154475],y=[0,128,64,192,32,160,96,224,16,144,80,208,48,176,112,240,8,136,72,200,40,168,104,232,24,152,88,216,56,184,120,248,4,132,68,196,36,164,100,228,20,148,84,212,52,180,116,244,12,140,76,204,44,172,108,236,28,156,92,220,60,188,124,252,2,130,66,194,34,162,98,
226,18,146,82,210,50,178,114,242,10,138,74,202,42,170,106,234,26,154,90,218,58,186,122,250,6,134,70,198,38,166,102,230,22,150,86,214,54,182,118,246,14,142,78,206,46,174,110,238,30,158,94,222,62,190,126,254];this.fft_short=function(f,n,l,b,r){for(f=0;3>f;f++){var a=d.BLKSIZE_s/2,e=65535&192*(f+1),C=d.BLKSIZE_s/8-1;do{var m,k,c,g,z,q=y[C<<2]&255;m=p[q]*b[l][r+q+e];z=p[127-q]*b[l][r+q+e+128];k=m-z;m+=z;c=p[q+64]*b[l][r+q+e+64];z=p[63-q]*b[l][r+q+e+192];g=c-z;c+=z;a-=4;n[f][a+0]=m+c;n[f][a+2]=m-c;n[f][a+
1]=k+g;n[f][a+3]=k-g;m=p[q+1]*b[l][r+q+e+1];z=p[126-q]*b[l][r+q+e+129];k=m-z;m+=z;c=p[q+65]*b[l][r+q+e+65];z=p[62-q]*b[l][r+q+e+193];g=c-z;c+=z;n[f][a+d.BLKSIZE_s/2+0]=m+c;n[f][a+d.BLKSIZE_s/2+2]=m-c;n[f][a+d.BLKSIZE_s/2+1]=k+g;n[f][a+d.BLKSIZE_s/2+3]=k-g}while(0<=--C);u(n[f],a,d.BLKSIZE_s/2)}};this.fft_long=function(f,p,l,b,r){f=d.BLKSIZE/8-1;var a=d.BLKSIZE/2;do{var e,C,m,k,c,g=y[f]&255;e=n[g]*b[l][r+g];c=n[g+512]*b[l][r+g+512];C=e-c;e+=c;m=n[g+256]*b[l][r+g+256];c=n[g+768]*b[l][r+g+768];k=m-c;
m+=c;a-=4;p[a+0]=e+m;p[a+2]=e-m;p[a+1]=C+k;p[a+3]=C-k;e=n[g+1]*b[l][r+g+1];c=n[g+513]*b[l][r+g+513];C=e-c;e+=c;m=n[g+257]*b[l][r+g+257];c=n[g+769]*b[l][r+g+769];k=m-c;m+=c;p[a+d.BLKSIZE/2+0]=e+m;p[a+d.BLKSIZE/2+2]=e-m;p[a+d.BLKSIZE/2+1]=C+k;p[a+d.BLKSIZE/2+3]=C-k}while(0<=--f);u(p,a,d.BLKSIZE/2)};this.init_fft=function(f){for(f=0;f<d.BLKSIZE;f++)n[f]=.42-.5*Math.cos(2*Math.PI*(f+.5)/d.BLKSIZE)+.08*Math.cos(4*Math.PI*(f+.5)/d.BLKSIZE);for(f=0;f<d.BLKSIZE_s/2;f++)p[f]=.5*(1-Math.cos(2*Math.PI*(f+.5)/
d.BLKSIZE_s))}}function dc(){function u(a,c){for(var h=0,b=0;b<d.BLKSIZE/2;++b)h+=a[b]*c.ATH.eql_w[b];return h*=q}function n(a,c,h,b,d,g){var f;if(c>a)if(c<a*A)f=c/a;else return a+c;else{if(a>=c*A)return a+c;f=a/c}a+=c;if(6>=b+3){if(f>=x)return a;b=0|ca.FAST_LOG10_X(f,16);return a*E[b]}b=0|ca.FAST_LOG10_X(f,16);c=0!=g?d.ATH.cb_s[h]*d.ATH.adjust:d.ATH.cb_l[h]*d.ATH.adjust;return a<t*c?a>c?(h=1,13>=b&&(h=H[b]),c=ca.FAST_LOG10_X(a/c,10/15),a*((w[b]-h)*c+h)):13<b?a:a*H[b]:a*w[b]}function p(a,c,b){var h;
0>a&&(a=0);0>c&&(c=0);if(0>=a)return c;if(0>=c)return a;h=c>a?c/a:a/c;if(-2<=b&&2>=b){if(h>=x)return a+c;b=0|ca.FAST_LOG10_X(h,16);return(a+c)*Z[b]}if(h<A)return a+c;a<c&&(a=c);return a}function F(a,c,b,h,g){var f,e,k=0,m=0;for(f=e=0;f<d.SBMAX_s;++e,++f){for(var l=a.bo_s[f],n=a.npart_s,l=l<n?l:n;e<l;)k+=c[e],m+=b[e],e++;a.en[h].s[f][g]=k;a.thm[h].s[f][g]=m;if(e>=n){++f;break}m=a.PSY.bo_s_weight[f];n=1-m;k=m*c[e];m*=b[e];a.en[h].s[f][g]+=k;a.thm[h].s[f][g]+=m;k=n*c[e];m=n*b[e]}for(;f<d.SBMAX_s;++f)a.en[h].s[f][g]=
0,a.thm[h].s[f][g]=0}function y(a,c,h,b){var f,g,e=0,k=0;for(f=g=0;f<d.SBMAX_l;++g,++f){for(var m=a.bo_l[f],l=a.npart_l,m=m<l?m:l;g<m;)e+=c[g],k+=h[g],g++;a.en[b].l[f]=e;a.thm[b].l[f]=k;if(g>=l){++f;break}k=a.PSY.bo_l_weight[f];l=1-k;e=k*c[g];k*=h[g];a.en[b].l[f]+=e;a.thm[b].l[f]+=k;e=l*c[g];k=l*h[g]}for(;f<d.SBMAX_l;++f)a.en[b].l[f]=0,a.thm[b].l[f]=0}function f(a,c,b){return 1<=b?a:0>=b?c:0<c?Math.pow(a/c,b)*c:0}function fa(a,c){for(var b=309.07,h=0;h<d.SBMAX_s-1;h++)for(var f=0;3>f;f++){var g=a.thm.s[h][f];
if(0<g){var g=g*c,e=a.en.s[h][f];e>g&&(b=e>1E10*g?b+23.02585092994046*I[h]:b+I[h]*ca.FAST_LOG10(e/g))}}return b}function l(a,c){for(var b=281.0575,h=0;h<d.SBMAX_l-1;h++){var f=a.thm.l[h];if(0<f){var f=f*c,g=a.en.l[h];g>f&&(b=g>1E10*f?b+23.02585092994046*v[h]:b+v[h]*ca.FAST_LOG10(g/f))}}return b}function b(a,c,b,h,d){var f,g;for(f=g=0;f<a.npart_l;++f){var e=0,k=0,m;for(m=0;m<a.numlines_l[f];++m,++g){var l=c[g],e=e+l;k<l&&(k=l)}b[f]=e;h[f]=k;d[f]=e*a.rnumlines_l[f]}}function r(a,c,b,d){var f=h.length-
1,g=0,e=b[g]+b[g+1];if(0<e){var k=c[g];k<c[g+1]&&(k=c[g+1]);e=20*(2*k-e)/(e*(a.numlines_l[g]+a.numlines_l[g+1]-1));e|=0;e>f&&(e=f);d[g]=e}else d[g]=0;for(g=1;g<a.npart_l-1;g++)e=b[g-1]+b[g]+b[g+1],0<e?(k=c[g-1],k<c[g]&&(k=c[g]),k<c[g+1]&&(k=c[g+1]),e=20*(3*k-e)/(e*(a.numlines_l[g-1]+a.numlines_l[g]+a.numlines_l[g+1]-1)),e|=0,e>f&&(e=f),d[g]=e):d[g]=0;e=b[g-1]+b[g];0<e?(k=c[g-1],k<c[g]&&(k=c[g]),e=20*(2*k-e)/(e*(a.numlines_l[g-1]+a.numlines_l[g]-1)),e|=0,e>f&&(e=f),d[g]=e):d[g]=0}function a(a,c,b,
h,d,g,f){var e=2*g;d=0<g?Math.pow(10,d):1;for(var k,m,l=0;l<f;++l){var n=a[2][l],w=a[3][l],p=c[0][l],E=c[1][l],r=c[2][l],q=c[3][l];p<=1.58*E&&E<=1.58*p?(k=b[l]*n,m=Math.max(r,Math.min(q,b[l]*w)),k=Math.max(q,Math.min(r,k))):(m=r,k=q);0<g&&(q=h[l]*d,p=Math.min(Math.max(p,q),Math.max(E,q)),r=Math.max(m,q),q=Math.max(k,q),E=r+q,0<E&&p*e<E&&(p=p*e/E,r*=p,q*=p),m=Math.min(r,m),k=Math.min(q,k));m>n&&(m=n);k>w&&(k=w);c[2][l]=m;c[3][l]=k}}function e(a,c){var b;b=0<=a?27*-a:a*c;return-72>=b?0:Math.exp(.2302585093*
b)}function C(a){0>a&&(a=0);a*=.001;return 13*Math.atan(.76*a)+3.5*Math.atan(a*a/56.25)}function m(a,c,b,h,g,f,e,k,m,l,n,w){var p=L(d.CBANDS+1),E=k/(15<w?1152:384),q=aa(d.HBLKSIZE),r;k/=m;var t=0,x=0;for(r=0;r<d.CBANDS;r++){var v,u;v=C(k*t);p[r]=k*t;for(u=t;.34>C(k*u)-v&&u<=m/2;u++);a[r]=u-t;for(x=r+1;t<u;)q[t++]=r;if(t>m/2){t=m/2;++r;break}}p[r]=k*t;for(t=0;t<w;t++)r=l[t],v=l[t+1],r=0|Math.floor(.5+n*(r-.5)),0>r&&(r=0),u=0|Math.floor(.5+n*(v-.5)),u>m/2&&(u=m/2),b[t]=(q[r]+q[u])/2,c[t]=q[u],e[t]=
(E*v-p[c[t]])/(p[c[t]+1]-p[c[t]]),0>e[t]?e[t]=0:1<e[t]&&(e[t]=1),v=C(k*l[t]*n),v=Math.min(v,15.5)/15.5,f[t]=Math.pow(10,1.25*(1-Math.cos(Math.PI*v))-2.5);for(c=t=0;c<x;c++)b=a[c],v=C(k*t),f=C(k*(t+b-1)),h[c]=.5*(v+f),v=C(k*(t-.5)),f=C(k*(t+b-.5)),g[c]=f-v,t+=b;return x}function k(a,c,b,h,g,f){var k=wa([d.CBANDS,d.CBANDS]),m=0;if(f)for(var l=0;l<c;l++)for(f=0;f<c;f++){var n;var w=n=void 0,w=n=void 0;n=b[l]-b[f];n=0<=n?3*n:1.5*n;.5<=n&&2.5>=n?(w=n-.5,w=8*(w*w-2*w)):w=0;n+=.474;n=15.811389+7.5*n-17.5*
Math.sqrt(1+n*n);-60>=n?n=0:(n=Math.exp(.2302585093*(w+n)),n/=.6609193);w=n*h[f];k[l][f]=w*g[l]}else for(f=0;f<c;f++){n=15+Math.min(21/b[f],12);var p;var l=n,r=w=0;p=0;var t=r=void 0;for(p=0;1E-20<e(p,l);--p);r=p;for(t=0;1E-12<Math.abs(t-r);)p=(t+r)/2,0<e(p,l)?t=p:r=p;w=r;for(p=0;1E-20<e(p,l);p+=1);r=0;for(t=p;1E-12<Math.abs(t-r);)p=(t+r)/2,0<e(p,l)?r=p:t=p;for(var r=t,t=0,E=void 0,E=0;1E3>=E;++E)p=w+E*(r-w)/1E3,p=e(p,l),t+=p;p=1001/(t*(r-w));for(l=0;l<c;l++)w=p*e(b[l]-b[f],n)*h[f],k[l][f]=w*g[l]}for(l=
0;l<c;l++){for(f=0;f<c&&!(0<k[l][f]);f++);a[l][0]=f;for(f=c-1;0<f&&!(0<k[l][f]);f--);a[l][1]=f;m+=a[l][1]-a[l][0]+1}b=L(m);for(l=h=0;l<c;l++)for(f=a[l][0];f<=a[l][1];f++)b[h++]=k[l][f];return b}function c(a){a=C(a);a=Math.min(a,15.5)/15.5;return Math.pow(10,1.25*(1-Math.cos(Math.PI*a))-2.5)}function g(a,c){-.3>a&&(a=3410);a=Math.max(.1,a/1E3);return 3.64*Math.pow(a,-.8)-6.8*Math.exp(-.6*Math.pow(a-3.4,2))+6*Math.exp(-.15*Math.pow(a-8.7,2))+.001*(.6+.04*c)*Math.pow(a,4)}var z=new Tc,q=1/217621504/
(d.BLKSIZE/2),x,A,t,h=[1,.79433,.63096,.63096,.63096,.63096,.63096,.25119,.11749],w=[3.3246*3.3246,3.23837*3.23837,9.9500500969,9.0247369744,8.1854926609,7.0440875649,2.46209*2.46209,2.284*2.284,4.4892710641,1.96552*1.96552,1.82335*1.82335,1.69146*1.69146,2.4621061921,2.1508568964,1.37074*1.37074,1.31036*1.31036,1.5691069696,1.4555939904,1.16203*1.16203,1.2715945225,1.09428*1.09428,1.0659*1.0659,1.0779838276,1.0382591025,1],E=[1.7782755904,1.35879*1.35879,1.38454*1.38454,1.39497*1.39497,1.40548*1.40548,
1.3537*1.3537,1.6999465924,1.22321*1.22321,1.3169398564,1],H=[5.5396212496,2.29259*2.29259,4.9868695969,2.12675*2.12675,2.02545*2.02545,1.87894*1.87894,1.74303*1.74303,1.61695*1.61695,2.2499700001,1.39148*1.39148,1.29083*1.29083,1.19746*1.19746,1.2339655056,1.0779838276],Z=[1.7782755904,1.35879*1.35879,1.38454*1.38454,1.39497*1.39497,1.40548*1.40548,1.3537*1.3537,1.6999465924,1.22321*1.22321,1.3169398564,1],I=[11.8,13.6,17.2,32,46.5,51.3,57.5,67.1,71.5,84.6,97.6,130],v=[6.8,5.8,5.8,6.4,6.5,9.9,12.1,
14.4,15,18.9,21.6,26.9,34.2,40.2,46.8,56.5,60.7,73.9,85.7,93.4,126.1],G=[-1.730326E-17,-.01703172,-1.349528E-17,.0418072,-6.73278E-17,-.0876324,-3.0835E-17,.1863476,-1.104424E-16,-.627638];this.L3psycho_anal_ns=function(a,c,g,e,k,m,w,p,t,E){var q=a.internal_flags,v=wa([2,d.BLKSIZE]),x=wa([2,3,d.BLKSIZE_s]),H=L(d.CBANDS+1),A=L(d.CBANDS+1),C=L(d.CBANDS+2),I=aa(2),J=aa(2),Z,V,P,O,Q,U,Y,M,ma=wa([2,576]),X,ya=aa(d.CBANDS+2),R=aa(d.CBANDS+2);Ha.fill(R,0);Z=q.channels_out;a.mode==la.JOINT_STEREO&&(Z=4);
X=a.VBR==N.vbr_off?0==q.ResvMax?0:q.ResvSize/q.ResvMax*.5:a.VBR==N.vbr_rh||a.VBR==N.vbr_mtrh||a.VBR==N.vbr_mt?.6:1;for(V=0;V<q.channels_out;V++){var za=c[V],Fa=g+576-350-21+192;for(O=0;576>O;O++){var Na,sc;Na=za[Fa+O+10];for(Q=sc=0;9>Q;Q+=2)Na+=G[Q]*(za[Fa+O+Q]+za[Fa+O+21-Q]),sc+=G[Q+1]*(za[Fa+O+Q+1]+za[Fa+O+21-Q-1]);ma[V][O]=Na+sc}k[e][V].en.assign(q.en[V]);k[e][V].thm.assign(q.thm[V]);2<Z&&(m[e][V].en.assign(q.en[V+2]),m[e][V].thm.assign(q.thm[V+2]))}for(V=0;V<Z;V++){var na=L(12),Oa=[0,0,0,0],Ba=
L(12),zc=1,Xa,Sa=L(d.CBANDS),hb=L(d.CBANDS),oa=[0,0,0,0],$a=L(d.HBLKSIZE),ab=wa([3,d.HBLKSIZE_s]);for(O=0;3>O;O++)na[O]=q.nsPsy.last_en_subshort[V][O+6],Ba[O]=na[O]/q.nsPsy.last_en_subshort[V][O+4],Oa[0]+=na[O];if(2==V)for(O=0;576>O;O++){var Ac,Bb;Ac=ma[0][O];Bb=ma[1][O];ma[0][O]=Ac+Bb;ma[1][O]=Ac-Bb}var ec=ma[V&1],Cb=0;for(O=0;9>O;O++){for(var zb=Cb+64,La=1;Cb<zb;Cb++)La<Math.abs(ec[Cb])&&(La=Math.abs(ec[Cb]));q.nsPsy.last_en_subshort[V][O]=na[O+3]=La;Oa[1+O/3]+=La;La=La>na[O+3-2]?La/na[O+3-2]:na[O+
3-2]>10*La?na[O+3-2]/(10*La):0;Ba[O+3]=La}if(a.analysis){var Kb=Ba[0];for(O=1;12>O;O++)Kb<Ba[O]&&(Kb=Ba[O]);q.pinfo.ers[e][V]=q.pinfo.ers_save[V];q.pinfo.ers_save[V]=Kb}Xa=3==V?q.nsPsy.attackthre_s:q.nsPsy.attackthre;for(O=0;12>O;O++)0==oa[O/3]&&Ba[O]>Xa&&(oa[O/3]=O%3+1);for(O=1;4>O;O++)1.7>(Oa[O-1]>Oa[O]?Oa[O-1]/Oa[O]:Oa[O]/Oa[O-1])&&(oa[O]=0,1==O&&(oa[0]=0));0!=oa[0]&&0!=q.nsPsy.lastAttacks[V]&&(oa[0]=0);if(3==q.nsPsy.lastAttacks[V]||0!=oa[0]+oa[1]+oa[2]+oa[3])zc=0,0!=oa[1]&&0!=oa[0]&&(oa[1]=0),
0!=oa[2]&&0!=oa[1]&&(oa[2]=0),0!=oa[3]&&0!=oa[2]&&(oa[3]=0);2>V?J[V]=zc:0==zc&&(J[0]=J[1]=0);t[V]=q.tot_ener[V];var S=a,Ia=$a,Lb=ab,Ma=v,qb=V&1,Ta=x,Pa=V&1,ib=e,Ca=V,ta=c,pb=g,Va=S.internal_flags;if(2>Ca)z.fft_long(Va,Ma[qb],Ca,ta,pb),z.fft_short(Va,Ta[Pa],Ca,ta,pb);else if(2==Ca){for(var ga=d.BLKSIZE-1;0<=ga;--ga){var Mb=Ma[qb+0][ga],Db=Ma[qb+1][ga];Ma[qb+0][ga]=(Mb+Db)*ca.SQRT2*.5;Ma[qb+1][ga]=(Mb-Db)*ca.SQRT2*.5}for(var Da=2;0<=Da;--Da)for(ga=d.BLKSIZE_s-1;0<=ga;--ga)Mb=Ta[Pa+0][Da][ga],Db=Ta[Pa+
1][Da][ga],Ta[Pa+0][Da][ga]=(Mb+Db)*ca.SQRT2*.5,Ta[Pa+1][Da][ga]=(Mb-Db)*ca.SQRT2*.5}Ia[0]=Ma[qb+0][0];Ia[0]*=Ia[0];for(ga=d.BLKSIZE/2-1;0<=ga;--ga){var Wb=Ma[qb+0][d.BLKSIZE/2-ga],ub=Ma[qb+0][d.BLKSIZE/2+ga];Ia[d.BLKSIZE/2-ga]=.5*(Wb*Wb+ub*ub)}for(Da=2;0<=Da;--Da)for(Lb[Da][0]=Ta[Pa+0][Da][0],Lb[Da][0]*=Lb[Da][0],ga=d.BLKSIZE_s/2-1;0<=ga;--ga)Wb=Ta[Pa+0][Da][d.BLKSIZE_s/2-ga],ub=Ta[Pa+0][Da][d.BLKSIZE_s/2+ga],Lb[Da][d.BLKSIZE_s/2-ga]=.5*(Wb*Wb+ub*ub);for(var xa=0,ga=11;ga<d.HBLKSIZE;ga++)xa+=Ia[ga];
Va.tot_ener[Ca]=xa;if(S.analysis){for(ga=0;ga<d.HBLKSIZE;ga++)Va.pinfo.energy[ib][Ca][ga]=Va.pinfo.energy_save[Ca][ga],Va.pinfo.energy_save[Ca][ga]=Ia[ga];Va.pinfo.pe[ib][Ca]=Va.pe[Ca]}2==S.athaa_loudapprox&&2>Ca&&(Va.loudness_sq[ib][Ca]=Va.loudness_sq_save[Ca],Va.loudness_sq_save[Ca]=u(Ia,Va));b(q,$a,H,Sa,hb);r(q,Sa,hb,ya);for(M=0;3>M;M++){for(var mc,va,bb=ab,cb=A,Nb=C,Eb=V,Xb=M,ba=a.internal_flags,jb=void 0,ka=void 0,ka=jb=0;ka<ba.npart_s;++ka){for(var Wa=0,fc=0,Ab=ba.numlines_s[ka],db=0;db<Ab;++db,
++jb){var nc=bb[Xb][jb],Wa=Wa+nc;fc<nc&&(fc=nc)}cb[ka]=Wa}for(jb=ka=0;ka<ba.npart_s;ka++){var kb=ba.s3ind_s[ka][0],vb=ba.s3_ss[jb++]*cb[kb];for(++kb;kb<=ba.s3ind_s[ka][1];)vb+=ba.s3_ss[jb]*cb[kb],++jb,++kb;var Ob=2*ba.nb_s1[Eb][ka];Nb[ka]=Math.min(vb,Ob);ba.blocktype_old[Eb&1]==d.SHORT_TYPE&&(Ob=16*ba.nb_s2[Eb][ka],Nb[ka]=Math.min(Ob,Nb[ka]));ba.nb_s2[Eb][ka]=ba.nb_s1[Eb][ka];ba.nb_s1[Eb][ka]=vb}for(;ka<=d.CBANDS;++ka)cb[ka]=0,Nb[ka]=0;F(q,A,C,V,M);for(Y=0;Y<d.SBMAX_s;Y++){va=q.thm[V].s[Y][M];va*=
.8;if(2<=oa[M]||1==oa[M+1]){var Fb=0!=M?M-1:2,La=f(q.thm[V].s[Y][Fb],va,.6*X);va=Math.min(va,La)}if(1==oa[M])Fb=0!=M?M-1:2,La=f(q.thm[V].s[Y][Fb],va,.3*X),va=Math.min(va,La);else if(0!=M&&3==oa[M-1]||0==M&&3==q.nsPsy.lastAttacks[V])Fb=2!=M?M+1:0,La=f(q.thm[V].s[Y][Fb],va,.3*X),va=Math.min(va,La);mc=na[3*M+3]+na[3*M+4]+na[3*M+5];6*na[3*M+5]<mc&&(va*=.5,6*na[3*M+4]<mc&&(va*=.5));q.thm[V].s[Y][M]=va}}q.nsPsy.lastAttacks[V]=oa[2];for(P=U=0;P<q.npart_l;P++){for(var lb=q.s3ind[P][0],Pb=H[lb]*h[ya[lb]],
mb=q.s3_ll[U++]*Pb;++lb<=q.s3ind[P][1];)Pb=H[lb]*h[ya[lb]],mb=n(mb,q.s3_ll[U++]*Pb,lb,lb-P,q,0);mb*=.158489319246111;C[P]=q.blocktype_old[V&1]==d.SHORT_TYPE?mb:f(Math.min(mb,Math.min(2*q.nb_1[V][P],16*q.nb_2[V][P])),mb,X);q.nb_2[V][P]=q.nb_1[V][P];q.nb_1[V][P]=mb}for(;P<=d.CBANDS;++P)H[P]=0,C[P]=0;y(q,H,C,V)}if((a.mode==la.STEREO||a.mode==la.JOINT_STEREO)&&0<a.interChRatio){var wb=a.interChRatio,da=a.internal_flags;if(1<da.channels_out){for(var Ea=0;Ea<d.SBMAX_l;Ea++){var Yb=da.thm[0].l[Ea],Gb=da.thm[1].l[Ea];
da.thm[0].l[Ea]+=Gb*wb;da.thm[1].l[Ea]+=Yb*wb}for(Ea=0;Ea<d.SBMAX_s;Ea++)for(var nb=0;3>nb;nb++)Yb=da.thm[0].s[Ea][nb],Gb=da.thm[1].s[Ea][nb],da.thm[0].s[Ea][nb]+=Gb*wb,da.thm[1].s[Ea][nb]+=Yb*wb}}if(a.mode==la.JOINT_STEREO){for(var Qa,ha=0;ha<d.SBMAX_l;ha++)if(!(q.thm[0].l[ha]>1.58*q.thm[1].l[ha]||q.thm[1].l[ha]>1.58*q.thm[0].l[ha])){var Ua=q.mld_l[ha]*q.en[3].l[ha],ob=Math.max(q.thm[2].l[ha],Math.min(q.thm[3].l[ha],Ua)),Ua=q.mld_l[ha]*q.en[2].l[ha],oc=Math.max(q.thm[3].l[ha],Math.min(q.thm[2].l[ha],
Ua));q.thm[2].l[ha]=ob;q.thm[3].l[ha]=oc}for(ha=0;ha<d.SBMAX_s;ha++)for(var pa=0;3>pa;pa++)q.thm[0].s[ha][pa]>1.58*q.thm[1].s[ha][pa]||q.thm[1].s[ha][pa]>1.58*q.thm[0].s[ha][pa]||(Ua=q.mld_s[ha]*q.en[3].s[ha][pa],ob=Math.max(q.thm[2].s[ha][pa],Math.min(q.thm[3].s[ha][pa],Ua)),Ua=q.mld_s[ha]*q.en[2].s[ha][pa],oc=Math.max(q.thm[3].s[ha][pa],Math.min(q.thm[2].s[ha][pa],Ua)),q.thm[2].s[ha][pa]=ob,q.thm[3].s[ha][pa]=oc);Qa=a.msfix;if(0<Math.abs(Qa)){for(var Hb=Qa,gc=Hb,Zb=Math.pow(10,a.ATHlower*q.ATH.adjust),
Hb=2*Hb,gc=2*gc,ua=0;ua<d.SBMAX_l;ua++){var Qb,Ka,Aa,Ya;Ya=q.ATH.cb_l[q.bm_l[ua]]*Zb;Qb=Math.min(Math.max(q.thm[0].l[ua],Ya),Math.max(q.thm[1].l[ua],Ya));Ka=Math.max(q.thm[2].l[ua],Ya);Aa=Math.max(q.thm[3].l[ua],Ya);if(Qb*Hb<Ka+Aa){var $b=Qb*gc/(Ka+Aa);Ka*=$b;Aa*=$b}q.thm[2].l[ua]=Math.min(Ka,q.thm[2].l[ua]);q.thm[3].l[ua]=Math.min(Aa,q.thm[3].l[ua])}Zb*=d.BLKSIZE_s/d.BLKSIZE;for(ua=0;ua<d.SBMAX_s;ua++)for(var qa=0;3>qa;qa++)Ya=q.ATH.cb_s[q.bm_s[ua]]*Zb,Qb=Math.min(Math.max(q.thm[0].s[ua][qa],Ya),
Math.max(q.thm[1].s[ua][qa],Ya)),Ka=Math.max(q.thm[2].s[ua][qa],Ya),Aa=Math.max(q.thm[3].s[ua][qa],Ya),Qb*Hb<Ka+Aa&&($b=Qb*Hb/(Ka+Aa),Ka*=$b,Aa*=$b),q.thm[2].s[ua][qa]=Math.min(q.thm[2].s[ua][qa],Ka),q.thm[3].s[ua][qa]=Math.min(q.thm[3].s[ua][qa],Aa)}}var eb=a.internal_flags;a.short_blocks!=Ja.short_block_coupled||0!=J[0]&&0!=J[1]||(J[0]=J[1]=0);for(var Ga=0;Ga<eb.channels_out;Ga++)I[Ga]=d.NORM_TYPE,a.short_blocks==Ja.short_block_dispensed&&(J[Ga]=1),a.short_blocks==Ja.short_block_forced&&(J[Ga]=
0),0!=J[Ga]?eb.blocktype_old[Ga]==d.SHORT_TYPE&&(I[Ga]=d.STOP_TYPE):(I[Ga]=d.SHORT_TYPE,eb.blocktype_old[Ga]==d.NORM_TYPE&&(eb.blocktype_old[Ga]=d.START_TYPE),eb.blocktype_old[Ga]==d.STOP_TYPE&&(eb.blocktype_old[Ga]=d.SHORT_TYPE)),E[Ga]=eb.blocktype_old[Ga],eb.blocktype_old[Ga]=I[Ga];for(V=0;V<Z;V++){var Rb,fb=0,ea,xb;if(1<V){Rb=p;fb=-2;ea=d.NORM_TYPE;if(E[0]==d.SHORT_TYPE||E[1]==d.SHORT_TYPE)ea=d.SHORT_TYPE;xb=m[e][V-2]}else Rb=w,fb=0,ea=E[V],xb=k[e][V];Rb[fb+V]=ea==d.SHORT_TYPE?fa(xb,q.masking_lower):
l(xb,q.masking_lower);a.analysis&&(q.pinfo.pe[e][V]=Rb[fb+V])}return 0};var J=[-1.730326E-17,-.01703172,-1.349528E-17,.0418072,-6.73278E-17,-.0876324,-3.0835E-17,.1863476,-1.104424E-16,-.627638];this.L3psycho_anal_vbr=function(c,g,e,k,m,n,w,q,t,E){for(var v=c.internal_flags,x,H,G=L(d.HBLKSIZE),A=wa([3,d.HBLKSIZE_s]),C=wa([2,d.BLKSIZE]),I=wa([2,3,d.BLKSIZE_s]),Z=wa([4,d.CBANDS]),N=wa([4,d.CBANDS]),P=wa([4,3]),M=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],O=aa(2),Q=c.mode==la.JOINT_STEREO?4:v.channels_out,
Y=wa([2,576]),U=c.internal_flags,ma=U.channels_out,ya=c.mode==la.JOINT_STEREO?4:ma,X=0;X<ma;X++){firbuf=g[X];for(var za=e+576-350-21+192,R=0;576>R;R++){var Ba,Fa;Ba=firbuf[za+R+10];for(var Na=Fa=0;9>Na;Na+=2)Ba+=J[Na]*(firbuf[za+R+Na]+firbuf[za+R+21-Na]),Fa+=J[Na+1]*(firbuf[za+R+Na+1]+firbuf[za+R+21-Na-1]);Y[X][R]=Ba+Fa}m[k][X].en.assign(U.en[X]);m[k][X].thm.assign(U.thm[X]);2<ya&&(n[k][X].en.assign(U.en[X+2]),n[k][X].thm.assign(U.thm[X+2]))}for(X=0;X<ya;X++){var Ha=L(12),na=L(12),Oa=[0,0,0,0],Xa=
Y[X&1],Sa=0,hb=3==X?U.nsPsy.attackthre_s:U.nsPsy.attackthre,$a=1;if(2==X)for(R=0,Na=576;0<Na;++R,--Na){var pb=Y[0][R],oa=Y[1][R];Y[0][R]=pb+oa;Y[1][R]=pb-oa}for(R=0;3>R;R++)na[R]=U.nsPsy.last_en_subshort[X][R+6],Ha[R]=na[R]/U.nsPsy.last_en_subshort[X][R+4],Oa[0]+=na[R];for(R=0;9>R;R++){for(var zb=Sa+64,ab=1;Sa<zb;Sa++)ab<Math.abs(Xa[Sa])&&(ab=Math.abs(Xa[Sa]));U.nsPsy.last_en_subshort[X][R]=na[R+3]=ab;Oa[1+R/3]+=ab;ab=ab>na[R+3-2]?ab/na[R+3-2]:na[R+3-2]>10*ab?na[R+3-2]/(10*ab):0;Ha[R+3]=ab}for(R=
0;3>R;++R){var Ab=na[3*R+3]+na[3*R+4]+na[3*R+5],Bb=1;6*na[3*R+5]<Ab&&(Bb*=.5,6*na[3*R+4]<Ab&&(Bb*=.5));P[X][R]=Bb}if(c.analysis){for(var ec=Ha[0],R=1;12>R;R++)ec<Ha[R]&&(ec=Ha[R]);U.pinfo.ers[k][X]=U.pinfo.ers_save[X];U.pinfo.ers_save[X]=ec}for(R=0;12>R;R++)0==M[X][R/3]&&Ha[R]>hb&&(M[X][R/3]=R%3+1);for(R=1;4>R;R++){var Cb=Oa[R-1],Jb=Oa[R];4E4>Math.max(Cb,Jb)&&Cb<1.7*Jb&&Jb<1.7*Cb&&(1==R&&M[X][0]<=M[X][R]&&(M[X][0]=0),M[X][R]=0)}M[X][0]<=U.nsPsy.lastAttacks[X]&&(M[X][0]=0);if(3==U.nsPsy.lastAttacks[X]||
0!=M[X][0]+M[X][1]+M[X][2]+M[X][3])$a=0,0!=M[X][1]&&0!=M[X][0]&&(M[X][1]=0),0!=M[X][2]&&0!=M[X][1]&&(M[X][2]=0),0!=M[X][3]&&0!=M[X][2]&&(M[X][3]=0);2>X?O[X]=$a:0==$a&&(O[0]=O[1]=0);t[X]=U.tot_ener[X]}var La=c.internal_flags;c.short_blocks!=Ja.short_block_coupled||0!=O[0]&&0!=O[1]||(O[0]=O[1]=0);for(var Kb=0;Kb<La.channels_out;Kb++)c.short_blocks==Ja.short_block_dispensed&&(O[Kb]=1),c.short_blocks==Ja.short_block_forced&&(O[Kb]=0);for(var S=0;S<Q;S++){var Ia=S&1;x=C;var Lb=c,Ma=S,qb=k,Ta=G,Pa=x,ib=
Ia,Ca=Lb.internal_flags;if(2>Ma)z.fft_long(Ca,Pa[ib],Ma,g,e);else if(2==Ma)for(var ta=d.BLKSIZE-1;0<=ta;--ta){var Vb=Pa[ib+0][ta],Va=Pa[ib+1][ta];Pa[ib+0][ta]=(Vb+Va)*ca.SQRT2*.5;Pa[ib+1][ta]=(Vb-Va)*ca.SQRT2*.5}Ta[0]=Pa[ib+0][0];Ta[0]*=Ta[0];for(ta=d.BLKSIZE/2-1;0<=ta;--ta){var ga=Pa[ib+0][d.BLKSIZE/2-ta],Mb=Pa[ib+0][d.BLKSIZE/2+ta];Ta[d.BLKSIZE/2-ta]=.5*(ga*ga+Mb*Mb)}for(var Db=0,ta=11;ta<d.HBLKSIZE;ta++)Db+=Ta[ta];Ca.tot_ener[Ma]=Db;if(Lb.analysis){for(ta=0;ta<d.HBLKSIZE;ta++)Ca.pinfo.energy[qb][Ma][ta]=
Ca.pinfo.energy_save[Ma][ta],Ca.pinfo.energy_save[Ma][ta]=Ta[ta];Ca.pinfo.pe[qb][Ma]=Ca.pe[Ma]}var Da=S,Wb=G,ub=c.internal_flags;2==c.athaa_loudapprox&&2>Da&&(ub.loudness_sq[k][Da]=ub.loudness_sq_save[Da],ub.loudness_sq_save[Da]=u(Wb,ub));if(0!=O[Ia]){var xa=v,mc=G,va=Z[S],bb=N[S],cb=S,Nb=L(d.CBANDS),Eb=L(d.CBANDS),Xb=aa(d.CBANDS+2),ba=void 0;b(xa,mc,va,Nb,Eb);r(xa,Nb,Eb,Xb);for(var jb=0,ba=0;ba<xa.npart_l;ba++){var ka,Wa,fc,kc,db=xa.s3ind[ba][0],nc=xa.s3ind[ba][1],kb=0,vb=0,kb=Xb[db],vb=vb+1;Wa=
xa.s3_ll[jb]*va[db]*h[Xb[db]];++jb;for(++db;db<=nc;)kb+=Xb[db],vb+=1,ka=xa.s3_ll[jb]*va[db]*h[Xb[db]],Wa=kc=p(Wa,ka,db-ba),++jb,++db;kb=(1+2*kb)/(2*vb);fc=.5*h[kb];Wa*=fc;if(xa.blocktype_old[cb&1]==d.SHORT_TYPE){var Ob=2*xa.nb_1[cb][ba];bb[ba]=0<Ob?Math.min(Wa,Ob):Math.min(Wa,.3*va[ba])}else{var Fb=16*xa.nb_2[cb][ba],lb=2*xa.nb_1[cb][ba];0>=Fb&&(Fb=Wa);0>=lb&&(lb=Wa);Ob=xa.blocktype_old[cb&1]==d.NORM_TYPE?Math.min(lb,Fb):lb;bb[ba]=Math.min(Wa,Ob)}xa.nb_2[cb][ba]=xa.nb_1[cb][ba];xa.nb_1[cb][ba]=Wa;
ka=Nb[ba];ka*=xa.minval_l[ba];ka*=fc;bb[ba]>ka&&(bb[ba]=ka);1<xa.masking_lower&&(bb[ba]*=xa.masking_lower);bb[ba]>va[ba]&&(bb[ba]=va[ba]);1>xa.masking_lower&&(bb[ba]*=xa.masking_lower)}for(;ba<d.CBANDS;++ba)va[ba]=0,bb[ba]=0}else for(var Pb=v,mb=S,wb=0;wb<Pb.npart_l;wb++)Pb.nb_2[mb][wb]=Pb.nb_1[mb][wb],Pb.nb_1[mb][wb]=0}2==O[0]+O[1]&&c.mode==la.JOINT_STEREO&&a(Z,N,v.mld_cb_l,v.ATH.cb_l,c.ATHlower*v.ATH.adjust,c.msfix,v.npart_l);for(S=0;S<Q;S++)Ia=S&1,0!=O[Ia]&&y(v,Z[S],N[S],S);for(var da=0;3>da;da++){for(S=
0;S<Q;++S)if(Ia=S&1,0!=O[Ia]){var Ea=v,Yb=S;if(0==da)for(var Gb=0;Gb<Ea.npart_s;Gb++)Ea.nb_s2[Yb][Gb]=Ea.nb_s1[Yb][Gb],Ea.nb_s1[Yb][Gb]=0}else{H=I;var nb=S,Qa=da,ha=A,Ua=H,ob=Ia,oc=c.internal_flags;0==Qa&&2>nb&&z.fft_short(oc,Ua[ob],nb,g,e);if(2==nb)for(var pa=d.BLKSIZE_s-1;0<=pa;--pa){var Hb=Ua[ob+0][Qa][pa],gc=Ua[ob+1][Qa][pa];Ua[ob+0][Qa][pa]=(Hb+gc)*ca.SQRT2*.5;Ua[ob+1][Qa][pa]=(Hb-gc)*ca.SQRT2*.5}ha[Qa][0]=Ua[ob+0][Qa][0];ha[Qa][0]*=ha[Qa][0];for(pa=d.BLKSIZE_s/2-1;0<=pa;--pa){var Zb=Ua[ob+0][Qa][d.BLKSIZE_s/
2-pa],ua=Ua[ob+0][Qa][d.BLKSIZE_s/2+pa];ha[Qa][d.BLKSIZE_s/2-pa]=.5*(Zb*Zb+ua*ua)}for(var Qb=A,Ka=Z[S],Aa=N[S],Ya=S,$b=da,qa=c.internal_flags,eb=new float[d.CBANDS],Ga=L(d.CBANDS),Rb=void 0,fb=void 0,ea=void 0,xb=new int[d.CBANDS],ea=fb=0;ea<qa.npart_s;++ea){for(var tc=0,Ub=0,dc=qa.numlines_s[ea],Rb=0;Rb<dc;++Rb,++fb){var Bc=Qb[$b][fb],tc=tc+Bc;Ub<Bc&&(Ub=Bc)}Ka[ea]=tc;eb[ea]=Ub;Ga[ea]=tc/dc}for(;ea<d.CBANDS;++ea)eb[ea]=0,Ga[ea]=0;var Sb=qa,rb=eb,ac=Ga,hc=xb,ic=h.length-1,ja=0,Ra=ac[ja]+ac[ja+1];
if(0<Ra){var gb=rb[ja];gb<rb[ja+1]&&(gb=rb[ja+1]);var Ra=20*(2*gb-Ra)/(Ra*(Sb.numlines_s[ja]+Sb.numlines_s[ja+1]-1)),sb=0|Ra;sb>ic&&(sb=ic);hc[ja]=sb}else hc[ja]=0;for(ja=1;ja<Sb.npart_s-1;ja++)Ra=ac[ja-1]+ac[ja]+ac[ja+1],0<Ra?(gb=rb[ja-1],gb<rb[ja]&&(gb=rb[ja]),gb<rb[ja+1]&&(gb=rb[ja+1]),Ra=20*(3*gb-Ra)/(Ra*(Sb.numlines_s[ja-1]+Sb.numlines_s[ja]+Sb.numlines_s[ja+1]-1)),sb=0|Ra,sb>ic&&(sb=ic),hc[ja]=sb):hc[ja]=0;Ra=ac[ja-1]+ac[ja];0<Ra?(gb=rb[ja-1],gb<rb[ja]&&(gb=rb[ja]),Ra=20*(2*gb-Ra)/(Ra*(Sb.numlines_s[ja-
1]+Sb.numlines_s[ja]-1)),sb=0|Ra,sb>ic&&(sb=ic),hc[ja]=sb):hc[ja]=0;for(fb=ea=0;ea<qa.npart_s;ea++){var yb=qa.s3ind_s[ea][0],rc=qa.s3ind_s[ea][1],jc,uc,Ib,bc,Cc;jc=xb[yb];uc=1;bc=qa.s3_ss[fb]*Ka[yb]*h[xb[yb]];++fb;for(++yb;yb<=rc;)jc+=xb[yb],uc+=1,Ib=qa.s3_ss[fb]*Ka[yb]*h[xb[yb]],bc=p(bc,Ib,yb-ea),++fb,++yb;jc=(1+2*jc)/(2*uc);Cc=.5*h[jc];bc*=Cc;Aa[ea]=bc;qa.nb_s2[Ya][ea]=qa.nb_s1[Ya][ea];qa.nb_s1[Ya][ea]=bc;Ib=eb[ea];Ib*=qa.minval_s[ea];Ib*=Cc;Aa[ea]>Ib&&(Aa[ea]=Ib);1<qa.masking_lower&&(Aa[ea]*=qa.masking_lower);
Aa[ea]>Ka[ea]&&(Aa[ea]=Ka[ea]);1>qa.masking_lower&&(Aa[ea]*=qa.masking_lower)}for(;ea<d.CBANDS;++ea)Ka[ea]=0,Aa[ea]=0}0==O[0]+O[1]&&c.mode==la.JOINT_STEREO&&a(Z,N,v.mld_cb_s,v.ATH.cb_s,c.ATHlower*v.ATH.adjust,c.msfix,v.npart_s);for(S=0;S<Q;++S)Ia=S&1,0==O[Ia]&&F(v,Z[S],N[S],S,da)}for(S=0;S<Q;S++)if(Ia=S&1,0==O[Ia])for(var cc=0;cc<d.SBMAX_s;cc++){for(var Ec=L(3),da=0;3>da;da++){var Za=v.thm[S].s[cc][da],Za=.8*Za;if(2<=M[S][da]||1==M[S][da+1])var pc=0!=da?da-1:2,qc=f(v.thm[S].s[cc][pc],Za,.36),Za=Math.min(Za,
qc);else if(1==M[S][da])pc=0!=da?da-1:2,qc=f(v.thm[S].s[cc][pc],Za,.18),Za=Math.min(Za,qc);else if(0!=da&&3==M[S][da-1]||0==da&&3==v.nsPsy.lastAttacks[S])pc=2!=da?da+1:0,qc=f(v.thm[S].s[cc][pc],Za,.18),Za=Math.min(Za,qc);Za*=P[S][da];Ec[da]=Za}for(da=0;3>da;da++)v.thm[S].s[cc][da]=Ec[da]}for(S=0;S<Q;S++)v.nsPsy.lastAttacks[S]=M[S][2];for(var Tb=c.internal_flags,tb=0;tb<Tb.channels_out;tb++){var Dc=d.NORM_TYPE;0!=O[tb]?Tb.blocktype_old[tb]==d.SHORT_TYPE&&(Dc=d.STOP_TYPE):(Dc=d.SHORT_TYPE,Tb.blocktype_old[tb]==
d.NORM_TYPE&&(Tb.blocktype_old[tb]=d.START_TYPE),Tb.blocktype_old[tb]==d.STOP_TYPE&&(Tb.blocktype_old[tb]=d.SHORT_TYPE));E[tb]=Tb.blocktype_old[tb];Tb.blocktype_old[tb]=Dc}for(S=0;S<Q;S++){var vc,wc,xc,yc;if(1<S){vc=q;wc=-2;xc=d.NORM_TYPE;if(E[0]==d.SHORT_TYPE||E[1]==d.SHORT_TYPE)xc=d.SHORT_TYPE;yc=n[k][S-2]}else vc=w,wc=0,xc=E[S],yc=m[k][S];vc[wc+S]=xc==d.SHORT_TYPE?fa(yc,v.masking_lower):l(yc,v.masking_lower);c.analysis&&(v.pinfo.pe[k][S]=vc[wc+S])}return 0};this.psymodel_init=function(a){var b=
a.internal_flags,h,f=!0,g=13,e=0,l=0,n=-8.25,w=-4.5,q=L(d.CBANDS),p=L(d.CBANDS),r=L(d.CBANDS),E=a.out_samplerate;switch(a.experimentalZ){default:case 0:f=!0;break;case 1:f=a.VBR==N.vbr_mtrh||a.VBR==N.vbr_mt?!1:!0;break;case 2:f=!1;break;case 3:g=8,e=-1.75,l=-.0125,n=-8.25,w=-2.25}b.ms_ener_ratio_old=.25;b.blocktype_old[0]=b.blocktype_old[1]=d.NORM_TYPE;for(h=0;4>h;++h){for(var v=0;v<d.CBANDS;++v)b.nb_1[h][v]=1E20,b.nb_2[h][v]=1E20,b.nb_s1[h][v]=b.nb_s2[h][v]=1;for(var u=0;u<d.SBMAX_l;u++)b.en[h].l[u]=
1E20,b.thm[h].l[u]=1E20;for(v=0;3>v;++v){for(u=0;u<d.SBMAX_s;u++)b.en[h].s[u][v]=1E20,b.thm[h].s[u][v]=1E20;b.nsPsy.lastAttacks[h]=0}for(v=0;9>v;v++)b.nsPsy.last_en_subshort[h][v]=10}b.loudness_sq_save[0]=b.loudness_sq_save[1]=0;b.npart_l=m(b.numlines_l,b.bo_l,b.bm_l,q,p,b.mld_l,b.PSY.bo_l_weight,E,d.BLKSIZE,b.scalefac_band.l,d.BLKSIZE/1152,d.SBMAX_l);for(h=0;h<b.npart_l;h++)u=e,q[h]>=g&&(u=l*(q[h]-g)/(24-g)+e*(24-q[h])/(24-g)),r[h]=Math.pow(10,u/10),b.rnumlines_l[h]=0<b.numlines_l[h]?1/b.numlines_l[h]:
0;b.s3_ll=k(b.s3ind,b.npart_l,q,p,r,f);for(h=v=0;h<b.npart_l;h++){l=$a.MAX_VALUE;for(u=0;u<b.numlines_l[h];u++,v++)e=E*v/(1E3*d.BLKSIZE),e=this.ATHformula(1E3*e,a)-20,e=Math.pow(10,.1*e),e*=b.numlines_l[h],l>e&&(l=e);b.ATH.cb_l[h]=l;l=-20+20*q[h]/10;6<l&&(l=100);-15>l&&(l=-15);l-=8;b.minval_l[h]=Math.pow(10,l/10)*b.numlines_l[h]}b.npart_s=m(b.numlines_s,b.bo_s,b.bm_s,q,p,b.mld_s,b.PSY.bo_s_weight,E,d.BLKSIZE_s,b.scalefac_band.s,d.BLKSIZE_s/384,d.SBMAX_s);for(h=v=0;h<b.npart_s;h++){u=n;q[h]>=g&&(u=
w*(q[h]-g)/(24-g)+n*(24-q[h])/(24-g));r[h]=Math.pow(10,u/10);l=$a.MAX_VALUE;for(u=0;u<b.numlines_s[h];u++,v++)e=E*v/(1E3*d.BLKSIZE_s),e=this.ATHformula(1E3*e,a)-20,e=Math.pow(10,.1*e),e*=b.numlines_s[h],l>e&&(l=e);b.ATH.cb_s[h]=l;l=-7+7*q[h]/12;12<q[h]&&(l*=1+3.1*Math.log(1+l));12>q[h]&&(l*=1+2.3*Math.log(1-l));-15>l&&(l=-15);l-=8;b.minval_s[h]=Math.pow(10,l/10)*b.numlines_s[h]}b.s3_ss=k(b.s3ind_s,b.npart_s,q,p,r,f);x=Math.pow(10,.5625);A=Math.pow(10,1.5);t=Math.pow(10,1.5);z.init_fft(b);b.decay=
Math.exp(-2.302585092994046/(.01*E/192));h=3.5;0!=(a.exp_nspsytune&2)&&(h=1);0<Math.abs(a.msfix)&&(h=a.msfix);a.msfix=h;for(f=0;f<b.npart_l;f++)b.s3ind[f][1]>b.npart_l-1&&(b.s3ind[f][1]=b.npart_l-1);b.ATH.decay=Math.pow(10,576*b.mode_gr/E*-1.2);b.ATH.adjust=.01;b.ATH.adjustLimit=1;if(-1!=a.ATHtype){v=a.out_samplerate/d.BLKSIZE;for(h=e=f=0;h<d.BLKSIZE/2;++h)e+=v,b.ATH.eql_w[h]=1/Math.pow(10,this.ATHformula(e,a)/10),f+=b.ATH.eql_w[h];f=1/f;for(h=d.BLKSIZE/2;0<=--h;)b.ATH.eql_w[h]*=f}for(f=v=0;f<b.npart_s;++f)for(h=
0;h<b.numlines_s[f];++h)++v;for(f=v=0;f<b.npart_l;++f)for(h=0;h<b.numlines_l[f];++h)++v;for(h=v=0;h<b.npart_l;h++)e=E*(v+b.numlines_l[h]/2)/(1*d.BLKSIZE),b.mld_cb_l[h]=c(e),v+=b.numlines_l[h];for(;h<d.CBANDS;++h)b.mld_cb_l[h]=1;for(h=v=0;h<b.npart_s;h++)e=E*(v+b.numlines_s[h]/2)/(1*d.BLKSIZE_s),b.mld_cb_s[h]=c(e),v+=b.numlines_s[h];for(;h<d.CBANDS;++h)b.mld_cb_s[h]=1;return 0};this.ATHformula=function(a,b){var c;switch(b.ATHtype){case 0:c=g(a,9);break;case 1:c=g(a,-1);break;case 2:c=g(a,0);break;
case 3:c=g(a,1)+6;break;case 4:c=g(a,b.ATHcurve);break;default:c=g(a,0)}return c}}function P(){function B(){this.mask_adjust_short=this.mask_adjust=0;this.bo_l_weight=L(d.SBMAX_l);this.bo_s_weight=L(d.SBMAX_s)}function n(){this.lowerlimit=0}function p(a,b){this.lowpass=b}function F(a){return 1<a?0:0>=a?1:Math.cos(Math.PI/2*a)}function y(a,b){switch(a){case 44100:return b.version=1,0;case 48E3:return b.version=1;case 32E3:return b.version=1,2;case 22050:return b.version=0;case 24E3:return b.version=
0,1;case 16E3:return b.version=0,2;case 11025:return b.version=0;case 12E3:return b.version=0,1;case 8E3:return b.version=0,2;default:return b.version=0,-1}}function f(a,b,c){16E3>c&&(b=2);c=u.bitrate_table[b][1];for(var d=2;14>=d;d++)0<u.bitrate_table[b][d]&&Math.abs(u.bitrate_table[b][d]-a)<Math.abs(c-a)&&(c=u.bitrate_table[b][d]);return c}function U(a,b,c){16E3>c&&(b=2);for(c=0;14>=c;c++)if(0<u.bitrate_table[b][c]&&u.bitrate_table[b][c]==a)return c;return-1}function l(a,b){var c=[new p(8,2E3),
new p(16,3700),new p(24,3900),new p(32,5500),new p(40,7E3),new p(48,7500),new p(56,1E4),new p(64,11E3),new p(80,13500),new p(96,15100),new p(112,15600),new p(128,17E3),new p(160,17500),new p(192,18600),new p(224,19400),new p(256,19700),new p(320,20500)],d=C.nearestBitrateFullIndex(b);a.lowerlimit=c[d].lowpass}function b(a){var b=d.BLKSIZE+a.framesize-d.FFTOFFSET;return b=Math.max(b,512+a.framesize-32)}function r(c,f,g,l,n,q,p){var r=c.internal_flags,t=0,u,x,z=[null,null],y=[null,null];if(4294479419!=
r.Class_ID)return-3;if(0==l)return 0;u=k.copy_buffer(r,n,q,p,0);if(0>u)return u;q+=u;t+=u;y[0]=f;y[1]=g;if(ma.NEQ(c.scale,0)&&ma.NEQ(c.scale,1))for(u=0;u<l;++u)y[0][u]*=c.scale,2==r.channels_out&&(y[1][u]*=c.scale);if(ma.NEQ(c.scale_left,0)&&ma.NEQ(c.scale_left,1))for(u=0;u<l;++u)y[0][u]*=c.scale_left;if(ma.NEQ(c.scale_right,0)&&ma.NEQ(c.scale_right,1))for(u=0;u<l;++u)y[1][u]*=c.scale_right;if(2==c.num_channels&&1==r.channels_out)for(u=0;u<l;++u)y[0][u]=.5*(y[0][u]+y[1][u]),y[1][u]=0;f=b(c);z[0]=
r.mfbuf[0];z[1]=r.mfbuf[1];for(g=0;0<l;){var B=[null,null];u=x=0;B[0]=y[0];B[1]=y[1];u=new a;var A=c;x=z;var F=g,N=l,L=u,P=A.internal_flags;if(.9999>P.resample_ratio||1.0001<P.resample_ratio)for(var Q=0;Q<P.channels_out;Q++){var U=new e;L.n_out=fill_buffer_resample(A,x[Q],P.mf_size,A.framesize,B[Q],F,N,U,Q);L.n_in=U.num_used}else for(L.n_out=Math.min(A.framesize,N),L.n_in=L.n_out,A=0;A<L.n_out;++A)x[0][P.mf_size+A]=B[0][F+A],2==P.channels_out&&(x[1][P.mf_size+A]=B[1][F+A]);x=u.n_in;u=u.n_out;if(r.findReplayGain&&
!r.decode_on_the_fly&&m.AnalyzeSamples(r.rgdata,z[0],r.mf_size,z[1],r.mf_size,u,r.channels_out)==M.GAIN_ANALYSIS_ERROR)return-6;l-=x;g+=x;r.mf_size+=u;1>r.mf_samples_to_encode&&(r.mf_samples_to_encode=d.ENCDELAY+d.POSTDELAY);r.mf_samples_to_encode+=u;if(r.mf_size>=f){x=p-t;0==p&&(x=0);u=c;x=C.enc.lame_encode_mp3_frame(u,z[0],z[1],n,q,x);u.frameNum++;u=x;if(0>u)return u;q+=u;t+=u;r.mf_size-=c.framesize;r.mf_samples_to_encode-=c.framesize;for(x=0;x<r.channels_out;x++)for(u=0;u<r.mf_size;u++)z[x][u]=
z[x][u+c.framesize]}}return t}function a(){this.n_out=this.n_in=0}function e(){this.num_used=0}var C=this;P.V9=410;P.V8=420;P.V7=430;P.V6=440;P.V5=450;P.V4=460;P.V3=470;P.V2=480;P.V1=490;P.V0=500;P.R3MIX=1E3;P.STANDARD=1001;P.EXTREME=1002;P.INSANE=1003;P.STANDARD_FAST=1004;P.EXTREME_FAST=1005;P.MEDIUM=1006;P.MEDIUM_FAST=1007;P.LAME_MAXMP3BUFFER=147456;var m,k,c,g,z,q=new dc,x,A,t;this.enc=new d;this.setModules=function(a,b,d,f,e,l,n,p,r){m=a;k=b;c=d;g=f;z=e;x=l;A=p;t=r;this.enc.setModules(k,q,g,x)};
this.lame_init=function(){var a=new Kc,b;a.class_id=4294479419;b=a.internal_flags=new Y;a.mode=la.NOT_SET;a.original=1;a.in_samplerate=44100;a.num_channels=2;a.num_samples=-1;a.bWriteVbrTag=!0;a.quality=-1;a.short_blocks=null;b.subblock_gain=-1;a.lowpassfreq=0;a.highpassfreq=0;a.lowpasswidth=-1;a.highpasswidth=-1;a.VBR=N.vbr_off;a.VBR_q=4;a.ATHcurve=-1;a.VBR_mean_bitrate_kbps=128;a.VBR_min_bitrate_kbps=0;a.VBR_max_bitrate_kbps=0;a.VBR_hard_min=0;b.VBR_min_bitrate=1;b.VBR_max_bitrate=13;a.quant_comp=
-1;a.quant_comp_short=-1;a.msfix=-1;b.resample_ratio=1;b.OldValue[0]=180;b.OldValue[1]=180;b.CurrentStep[0]=4;b.CurrentStep[1]=4;b.masking_lower=1;b.nsPsy.attackthre=-1;b.nsPsy.attackthre_s=-1;a.scale=-1;a.athaa_type=-1;a.ATHtype=-1;a.athaa_loudapprox=-1;a.athaa_sensitivity=0;a.useTemporal=null;a.interChRatio=-1;b.mf_samples_to_encode=d.ENCDELAY+d.POSTDELAY;a.encoder_padding=0;b.mf_size=d.ENCDELAY-d.MDCTDELAY;a.findReplayGain=!1;a.decode_on_the_fly=!1;b.decode_on_the_fly=!1;b.findReplayGain=!1;b.findPeakSample=
!1;b.RadioGain=0;b.AudiophileGain=0;b.noclipGainChange=0;b.noclipScale=-1;a.preset=0;a.write_id3tag_automatic=!0;a.lame_allocated_gfp=1;return a};this.nearestBitrateFullIndex=function(a){for(var b=[8,16,24,32,40,48,56,64,80,96,112,128,160,192,224,256,320],c=0,d=0,f=0,g=0,g=b[16],f=16,d=b[16],c=16,e=0;16>e;e++)if(Math.max(a,b[e+1])!=a){g=b[e+1];f=e+1;d=b[e];c=e;break}return g-a>a-d?c:f};this.lame_init_params=function(a){var b=a.internal_flags;b.Class_ID=0;null==b.ATH&&(b.ATH=new Jc);null==b.PSY&&(b.PSY=
new B);null==b.rgdata&&(b.rgdata=new Lc);b.channels_in=a.num_channels;1==b.channels_in&&(a.mode=la.MONO);b.channels_out=a.mode==la.MONO?1:2;b.mode_ext=d.MPG_MD_MS_LR;a.mode==la.MONO&&(a.force_ms=!1);a.VBR==N.vbr_off&&128!=a.VBR_mean_bitrate_kbps&&0==a.brate&&(a.brate=a.VBR_mean_bitrate_kbps);a.VBR!=N.vbr_off&&a.VBR!=N.vbr_mtrh&&a.VBR!=N.vbr_mt&&(a.free_format=!1);a.VBR==N.vbr_off&&0==a.brate&&ma.EQ(a.compression_ratio,0)&&(a.compression_ratio=11.025);a.VBR==N.vbr_off&&0<a.compression_ratio&&(0==a.out_samplerate&&
(a.out_samplerate=map2MP3Frequency(int(.97*a.in_samplerate))),a.brate=0|16*a.out_samplerate*b.channels_out/(1E3*a.compression_ratio),b.samplerate_index=y(a.out_samplerate,a),a.free_format||(a.brate=f(a.brate,a.version,a.out_samplerate)));0!=a.out_samplerate&&(16E3>a.out_samplerate?(a.VBR_mean_bitrate_kbps=Math.max(a.VBR_mean_bitrate_kbps,8),a.VBR_mean_bitrate_kbps=Math.min(a.VBR_mean_bitrate_kbps,64)):32E3>a.out_samplerate?(a.VBR_mean_bitrate_kbps=Math.max(a.VBR_mean_bitrate_kbps,8),a.VBR_mean_bitrate_kbps=
Math.min(a.VBR_mean_bitrate_kbps,160)):(a.VBR_mean_bitrate_kbps=Math.max(a.VBR_mean_bitrate_kbps,32),a.VBR_mean_bitrate_kbps=Math.min(a.VBR_mean_bitrate_kbps,320)));if(0==a.lowpassfreq){var e=16E3;switch(a.VBR){case N.vbr_off:e=new n;l(e,a.brate);e=e.lowerlimit;break;case N.vbr_abr:e=new n;l(e,a.VBR_mean_bitrate_kbps);e=e.lowerlimit;break;case N.vbr_rh:var p=[19500,19E3,18600,18E3,17500,16E3,15600,14900,12500,1E4,3950];if(0<=a.VBR_q&&9>=a.VBR_q)var e=p[a.VBR_q],p=p[a.VBR_q+1],r=a.VBR_q_frac,e=linear_int(e,
p,r);else e=19500;break;default:p=[19500,19E3,18500,18E3,17500,16500,15500,14500,12500,9500,3950],0<=a.VBR_q&&9>=a.VBR_q?(e=p[a.VBR_q],p=p[a.VBR_q+1],r=a.VBR_q_frac,e=linear_int(e,p,r)):e=19500}a.mode!=la.MONO||a.VBR!=N.vbr_off&&a.VBR!=N.vbr_abr||(e*=1.5);a.lowpassfreq=e|0}0==a.out_samplerate&&(2*a.lowpassfreq>a.in_samplerate&&(a.lowpassfreq=a.in_samplerate/2),e=a.lowpassfreq|0,p=a.in_samplerate,r=44100,48E3<=p?r=48E3:44100<=p?r=44100:32E3<=p?r=32E3:24E3<=p?r=24E3:22050<=p?r=22050:16E3<=p?r=16E3:
12E3<=p?r=12E3:11025<=p?r=11025:8E3<=p&&(r=8E3),-1==e?e=r:(15960>=e&&(r=44100),15250>=e&&(r=32E3),11220>=e&&(r=24E3),9970>=e&&(r=22050),7230>=e&&(r=16E3),5420>=e&&(r=12E3),4510>=e&&(r=11025),3970>=e&&(r=8E3),e=p<r?44100<p?48E3:32E3<p?44100:24E3<p?32E3:22050<p?24E3:16E3<p?22050:12E3<p?16E3:11025<p?12E3:8E3<p?11025:8E3:r),a.out_samplerate=e);a.lowpassfreq=Math.min(20500,a.lowpassfreq);a.lowpassfreq=Math.min(a.out_samplerate/2,a.lowpassfreq);a.VBR==N.vbr_off&&(a.compression_ratio=16*a.out_samplerate*
b.channels_out/(1E3*a.brate));a.VBR==N.vbr_abr&&(a.compression_ratio=16*a.out_samplerate*b.channels_out/(1E3*a.VBR_mean_bitrate_kbps));a.bWriteVbrTag||(a.findReplayGain=!1,a.decode_on_the_fly=!1,b.findPeakSample=!1);b.findReplayGain=a.findReplayGain;b.decode_on_the_fly=a.decode_on_the_fly;b.decode_on_the_fly&&(b.findPeakSample=!0);if(b.findReplayGain&&m.InitGainAnalysis(b.rgdata,a.out_samplerate)==M.INIT_GAIN_ANALYSIS_ERROR)return a.internal_flags=null,-6;b.decode_on_the_fly&&!a.decode_only&&(null!=
b.hip&&t.hip_decode_exit(b.hip),b.hip=t.hip_decode_init());b.mode_gr=24E3>=a.out_samplerate?1:2;a.framesize=576*b.mode_gr;a.encoder_delay=d.ENCDELAY;b.resample_ratio=a.in_samplerate/a.out_samplerate;switch(a.VBR){case N.vbr_mt:case N.vbr_rh:case N.vbr_mtrh:a.compression_ratio=[5.7,6.5,7.3,8.2,10,11.9,13,14,15,16.5][a.VBR_q];break;case N.vbr_abr:a.compression_ratio=16*a.out_samplerate*b.channels_out/(1E3*a.VBR_mean_bitrate_kbps);break;default:a.compression_ratio=16*a.out_samplerate*b.channels_out/
(1E3*a.brate)}a.mode==la.NOT_SET&&(a.mode=la.JOINT_STEREO);0<a.highpassfreq?(b.highpass1=2*a.highpassfreq,b.highpass2=0<=a.highpasswidth?2*(a.highpassfreq+a.highpasswidth):2*a.highpassfreq,b.highpass1/=a.out_samplerate,b.highpass2/=a.out_samplerate):(b.highpass1=0,b.highpass2=0);0<a.lowpassfreq?(b.lowpass2=2*a.lowpassfreq,0<=a.lowpasswidth?(b.lowpass1=2*(a.lowpassfreq-a.lowpasswidth),0>b.lowpass1&&(b.lowpass1=0)):b.lowpass1=2*a.lowpassfreq,b.lowpass1/=a.out_samplerate,b.lowpass2/=a.out_samplerate):
(b.lowpass1=0,b.lowpass2=0);var e=a.internal_flags,C=32,v=-1;if(0<e.lowpass1){for(var G=999,p=0;31>=p;p++)r=p/31,r>=e.lowpass2&&(C=Math.min(C,p)),e.lowpass1<r&&r<e.lowpass2&&(G=Math.min(G,p));e.lowpass1=999==G?(C-.75)/31:(G-.75)/31;e.lowpass2=C/31}0<e.highpass2&&e.highpass2<.75/31*.9&&(e.highpass1=0,e.highpass2=0,Q.err.println("Warning: highpass filter disabled.  highpass frequency too small\n"));if(0<e.highpass2){C=-1;for(p=0;31>=p;p++)r=p/31,r<=e.highpass1&&(v=Math.max(v,p)),e.highpass1<r&&r<e.highpass2&&
(C=Math.max(C,p));e.highpass1=v/31;e.highpass2=-1==C?(v+.75)/31:(C+.75)/31}for(p=0;32>p;p++)r=p/31,v=e.highpass2>e.highpass1?F((e.highpass2-r)/(e.highpass2-e.highpass1+1E-20)):1,r=e.lowpass2>e.lowpass1?F((r-e.lowpass1)/(e.lowpass2-e.lowpass1+1E-20)):1,e.amp_filter[p]=v*r;b.samplerate_index=y(a.out_samplerate,a);if(0>b.samplerate_index)return a.internal_flags=null,-1;if(a.VBR==N.vbr_off)if(a.free_format)b.bitrate_index=0;else{if(a.brate=f(a.brate,a.version,a.out_samplerate),b.bitrate_index=U(a.brate,
a.version,a.out_samplerate),0>=b.bitrate_index)return a.internal_flags=null,-1}else b.bitrate_index=1;a.analysis&&(a.bWriteVbrTag=!1);null!=b.pinfo&&(a.bWriteVbrTag=!1);k.init_bit_stream_w(b);e=b.samplerate_index+3*a.version+6*(16E3>a.out_samplerate?1:0);for(p=0;p<d.SBMAX_l+1;p++)b.scalefac_band.l[p]=g.sfBandIndex[e].l[p];for(p=0;p<d.PSFB21+1;p++)r=(b.scalefac_band.l[22]-b.scalefac_band.l[21])/d.PSFB21,r=b.scalefac_band.l[21]+p*r,b.scalefac_band.psfb21[p]=r;b.scalefac_band.psfb21[d.PSFB21]=576;for(p=
0;p<d.SBMAX_s+1;p++)b.scalefac_band.s[p]=g.sfBandIndex[e].s[p];for(p=0;p<d.PSFB12+1;p++)r=(b.scalefac_band.s[13]-b.scalefac_band.s[12])/d.PSFB12,r=b.scalefac_band.s[12]+p*r,b.scalefac_band.psfb12[p]=r;b.scalefac_band.psfb12[d.PSFB12]=192;b.sideinfo_len=1==a.version?1==b.channels_out?21:36:1==b.channels_out?13:21;a.error_protection&&(b.sideinfo_len+=2);e=a.internal_flags;a.frameNum=0;a.write_id3tag_automatic&&A.id3tag_write_v2(a);e.bitrate_stereoMode_Hist=Sa([16,5]);e.bitrate_blockType_Hist=Sa([16,
6]);e.PeakSample=0;a.bWriteVbrTag&&x.InitVbrTag(a);b.Class_ID=4294479419;for(e=0;19>e;e++)b.nsPsy.pefirbuf[e]=700*b.mode_gr*b.channels_out;-1==a.ATHtype&&(a.ATHtype=4);switch(a.VBR){case N.vbr_mt:a.VBR=N.vbr_mtrh;case N.vbr_mtrh:null==a.useTemporal&&(a.useTemporal=!1);c.apply_preset(a,500-10*a.VBR_q,0);0>a.quality&&(a.quality=LAME_DEFAULT_QUALITY);5>a.quality&&(a.quality=0);5<a.quality&&(a.quality=5);b.PSY.mask_adjust=a.maskingadjust;b.PSY.mask_adjust_short=a.maskingadjust_short;b.sfb21_extra=a.experimentalY?
!1:44E3<a.out_samplerate;b.iteration_loop=new VBRNewIterationLoop(z);break;case N.vbr_rh:c.apply_preset(a,500-10*a.VBR_q,0);b.PSY.mask_adjust=a.maskingadjust;b.PSY.mask_adjust_short=a.maskingadjust_short;b.sfb21_extra=a.experimentalY?!1:44E3<a.out_samplerate;6<a.quality&&(a.quality=6);0>a.quality&&(a.quality=LAME_DEFAULT_QUALITY);b.iteration_loop=new VBROldIterationLoop(z);break;default:b.sfb21_extra=!1,0>a.quality&&(a.quality=LAME_DEFAULT_QUALITY),e=a.VBR,e==N.vbr_off&&(a.VBR_mean_bitrate_kbps=a.brate),
c.apply_preset(a,a.VBR_mean_bitrate_kbps,0),a.VBR=e,b.PSY.mask_adjust=a.maskingadjust,b.PSY.mask_adjust_short=a.maskingadjust_short,b.iteration_loop=e==N.vbr_off?new Mc(z):new ABRIterationLoop(z)}if(a.VBR!=N.vbr_off){b.VBR_min_bitrate=1;b.VBR_max_bitrate=14;16E3>a.out_samplerate&&(b.VBR_max_bitrate=8);if(0!=a.VBR_min_bitrate_kbps&&(a.VBR_min_bitrate_kbps=f(a.VBR_min_bitrate_kbps,a.version,a.out_samplerate),b.VBR_min_bitrate=U(a.VBR_min_bitrate_kbps,a.version,a.out_samplerate),0>b.VBR_min_bitrate)||
0!=a.VBR_max_bitrate_kbps&&(a.VBR_max_bitrate_kbps=f(a.VBR_max_bitrate_kbps,a.version,a.out_samplerate),b.VBR_max_bitrate=U(a.VBR_max_bitrate_kbps,a.version,a.out_samplerate),0>b.VBR_max_bitrate))return-1;a.VBR_min_bitrate_kbps=u.bitrate_table[a.version][b.VBR_min_bitrate];a.VBR_max_bitrate_kbps=u.bitrate_table[a.version][b.VBR_max_bitrate];a.VBR_mean_bitrate_kbps=Math.min(u.bitrate_table[a.version][b.VBR_max_bitrate],a.VBR_mean_bitrate_kbps);a.VBR_mean_bitrate_kbps=Math.max(u.bitrate_table[a.version][b.VBR_min_bitrate],
a.VBR_mean_bitrate_kbps)}a.tune&&(b.PSY.mask_adjust+=a.tune_value_a,b.PSY.mask_adjust_short+=a.tune_value_a);e=a.internal_flags;switch(a.quality){default:case 9:e.psymodel=0;e.noise_shaping=0;e.noise_shaping_amp=0;e.noise_shaping_stop=0;e.use_best_huffman=0;e.full_outer_loop=0;break;case 8:a.quality=7;case 7:e.psymodel=1;e.noise_shaping=0;e.noise_shaping_amp=0;e.noise_shaping_stop=0;e.use_best_huffman=0;e.full_outer_loop=0;break;case 6:e.psymodel=1;0==e.noise_shaping&&(e.noise_shaping=1);e.noise_shaping_amp=
0;e.noise_shaping_stop=0;-1==e.subblock_gain&&(e.subblock_gain=1);e.use_best_huffman=0;e.full_outer_loop=0;break;case 5:e.psymodel=1;0==e.noise_shaping&&(e.noise_shaping=1);e.noise_shaping_amp=0;e.noise_shaping_stop=0;-1==e.subblock_gain&&(e.subblock_gain=1);e.use_best_huffman=0;e.full_outer_loop=0;break;case 4:e.psymodel=1;0==e.noise_shaping&&(e.noise_shaping=1);e.noise_shaping_amp=0;e.noise_shaping_stop=0;-1==e.subblock_gain&&(e.subblock_gain=1);e.use_best_huffman=1;e.full_outer_loop=0;break;case 3:e.psymodel=
1;0==e.noise_shaping&&(e.noise_shaping=1);e.noise_shaping_amp=1;e.noise_shaping_stop=1;-1==e.subblock_gain&&(e.subblock_gain=1);e.use_best_huffman=1;e.full_outer_loop=0;break;case 2:e.psymodel=1;0==e.noise_shaping&&(e.noise_shaping=1);0==e.substep_shaping&&(e.substep_shaping=2);e.noise_shaping_amp=1;e.noise_shaping_stop=1;-1==e.subblock_gain&&(e.subblock_gain=1);e.use_best_huffman=1;e.full_outer_loop=0;break;case 1:e.psymodel=1;0==e.noise_shaping&&(e.noise_shaping=1);0==e.substep_shaping&&(e.substep_shaping=
2);e.noise_shaping_amp=2;e.noise_shaping_stop=1;-1==e.subblock_gain&&(e.subblock_gain=1);e.use_best_huffman=1;e.full_outer_loop=0;break;case 0:e.psymodel=1,0==e.noise_shaping&&(e.noise_shaping=1),0==e.substep_shaping&&(e.substep_shaping=2),e.noise_shaping_amp=2,e.noise_shaping_stop=1,-1==e.subblock_gain&&(e.subblock_gain=1),e.use_best_huffman=1,e.full_outer_loop=0}b.ATH.useAdjust=0>a.athaa_type?3:a.athaa_type;b.ATH.aaSensitivityP=Math.pow(10,a.athaa_sensitivity/-10);null==a.short_blocks&&(a.short_blocks=
Ja.short_block_allowed);a.short_blocks!=Ja.short_block_allowed||a.mode!=la.JOINT_STEREO&&a.mode!=la.STEREO||(a.short_blocks=Ja.short_block_coupled);0>a.quant_comp&&(a.quant_comp=1);0>a.quant_comp_short&&(a.quant_comp_short=0);0>a.msfix&&(a.msfix=0);a.exp_nspsytune|=1;0>a.internal_flags.nsPsy.attackthre&&(a.internal_flags.nsPsy.attackthre=dc.NSATTACKTHRE);0>a.internal_flags.nsPsy.attackthre_s&&(a.internal_flags.nsPsy.attackthre_s=dc.NSATTACKTHRE_S);0>a.scale&&(a.scale=1);0>a.ATHtype&&(a.ATHtype=4);
0>a.ATHcurve&&(a.ATHcurve=4);0>a.athaa_loudapprox&&(a.athaa_loudapprox=2);0>a.interChRatio&&(a.interChRatio=0);null==a.useTemporal&&(a.useTemporal=!0);b.slot_lag=b.frac_SpF=0;a.VBR==N.vbr_off&&(b.slot_lag=b.frac_SpF=72E3*(a.version+1)*a.brate%a.out_samplerate|0);g.iteration_init(a);q.psymodel_init(a);return 0};this.lame_encode_flush=function(a,c,e,f){var g=a.internal_flags,l=rc([2,1152]),m=0,n,p,q=g.mf_samples_to_encode-d.POSTDELAY,r=b(a);if(1>g.mf_samples_to_encode)return 0;n=0;a.in_samplerate!=
a.out_samplerate&&(q+=16*a.out_samplerate/a.in_samplerate);p=a.framesize-q%a.framesize;576>p&&(p+=a.framesize);a.encoder_padding=p;for(p=(q+p)/a.framesize;0<p&&0<=m;){var t=r-g.mf_size,q=a.frameNum,t=t*a.in_samplerate,t=t/a.out_samplerate;1152<t&&(t=1152);1>t&&(t=1);m=f-n;0==f&&(m=0);m=this.lame_encode_buffer(a,l[0],l[1],t,c,e,m);e+=m;n+=m;p-=q!=a.frameNum?1:0}g.mf_samples_to_encode=0;if(0>m)return m;m=f-n;0==f&&(m=0);k.flush_bitstream(a);m=k.copy_buffer(g,c,e,m,1);if(0>m)return m;e+=m;n+=m;m=f-n;
0==f&&(m=0);if(a.write_id3tag_automatic){A.id3tag_write_v1(a);m=k.copy_buffer(g,c,e,m,0);if(0>m)return m;n+=m}return n};this.lame_encode_buffer=function(a,b,c,d,e,f,g){var k=a.internal_flags,l=[null,null];if(4294479419!=k.Class_ID)return-3;if(0==d)return 0;if(null==k.in_buffer_0||k.in_buffer_nsamples<d)k.in_buffer_0=L(d),k.in_buffer_1=L(d),k.in_buffer_nsamples=d;l[0]=k.in_buffer_0;l[1]=k.in_buffer_1;for(var m=0;m<d;m++)l[0][m]=b[m],1<k.channels_in&&(l[1][m]=c[m]);return r(a,l[0],l[1],d,e,f,g)}}function Uc(){this.setModules=
function(d,n){}}function Vc(){this.setModules=function(d,n,p){}}function Wc(){}function Xc(){this.setModules=function(d,n){}}function Fa(){this.sampleRate=this.channels=this.dataLen=this.dataOffset=0}function kc(d){return d.charCodeAt(0)<<24|d.charCodeAt(1)<<16|d.charCodeAt(2)<<8|d.charCodeAt(3)}var Ha={fill:function(d,n,p,u){if(2==arguments.length)for(var y=0;y<d.length;y++)d[y]=arguments[1];else for(y=n;y<p;y++)d[y]=u}},Q={arraycopy:function(d,n,p,u,y){for(y=n+y;n<y;)p[u++]=d[n++]}},ca={SQRT2:1.4142135623730951,
FAST_LOG10:function(d){return Math.log10(d)},FAST_LOG10_X:function(d,n){return Math.log10(d)*n}};Ja.short_block_allowed=new Ja(0);Ja.short_block_coupled=new Ja(1);Ja.short_block_dispensed=new Ja(2);Ja.short_block_forced=new Ja(3);var $a={MAX_VALUE:3.4028235E38};N.vbr_off=new N(0);N.vbr_mt=new N(1);N.vbr_rh=new N(2);N.vbr_abr=new N(3);N.vbr_mtrh=new N(4);N.vbr_default=N.vbr_mtrh;la.STEREO=new la(0);la.JOINT_STEREO=new la(1);la.DUAL_CHANNEL=new la(2);la.MONO=new la(3);la.NOT_SET=new la(4);M.STEPS_per_dB=
100;M.MAX_dB=120;M.GAIN_NOT_ENOUGH_SAMPLES=-24601;M.GAIN_ANALYSIS_ERROR=0;M.GAIN_ANALYSIS_OK=1;M.INIT_GAIN_ANALYSIS_ERROR=0;M.INIT_GAIN_ANALYSIS_OK=1;M.YULE_ORDER=10;M.MAX_ORDER=M.YULE_ORDER;ma.EQ=function(d,n){return Math.abs(d)>Math.abs(n)?Math.abs(d-n)<=1E-6*Math.abs(d):Math.abs(d-n)<=1E-6*Math.abs(n)};ma.NEQ=function(d,n){return!ma.EQ(d,n)};pb.NUMTOCENTRIES=100;pb.MAXFRAMESIZE=2880;var u={t1HB:[1,1,1,0],t2HB:[1,2,1,3,1,1,3,2,0],t3HB:[3,2,1,1,1,1,3,2,0],t5HB:[1,2,6,5,3,1,4,4,7,5,7,1,6,1,1,0],t6HB:[7,
3,5,1,6,2,3,2,5,4,4,1,3,3,2,0],t7HB:[1,2,10,19,16,10,3,3,7,10,5,3,11,4,13,17,8,4,12,11,18,15,11,2,7,6,9,14,3,1,6,4,5,3,2,0],t8HB:[3,4,6,18,12,5,5,1,2,16,9,3,7,3,5,14,7,3,19,17,15,13,10,4,13,5,8,11,5,1,12,4,4,1,1,0],t9HB:[7,5,9,14,15,7,6,4,5,5,6,7,7,6,8,8,8,5,15,6,9,10,5,1,11,7,9,6,4,1,14,4,6,2,6,0],t10HB:[1,2,10,23,35,30,12,17,3,3,8,12,18,21,12,7,11,9,15,21,32,40,19,6,14,13,22,34,46,23,18,7,20,19,33,47,27,22,9,3,31,22,41,26,21,20,5,3,14,13,10,11,16,6,5,1,9,8,7,8,4,4,2,0],t11HB:[3,4,10,24,34,33,21,
15,5,3,4,10,32,17,11,10,11,7,13,18,30,31,20,5,25,11,19,59,27,18,12,5,35,33,31,58,30,16,7,5,28,26,32,19,17,15,8,14,14,12,9,13,14,9,4,1,11,4,6,6,6,3,2,0],t12HB:[9,6,16,33,41,39,38,26,7,5,6,9,23,16,26,11,17,7,11,14,21,30,10,7,17,10,15,12,18,28,14,5,32,13,22,19,18,16,9,5,40,17,31,29,17,13,4,2,27,12,11,15,10,7,4,1,27,12,8,12,6,3,1,0],t13HB:[1,5,14,21,34,51,46,71,42,52,68,52,67,44,43,19,3,4,12,19,31,26,44,33,31,24,32,24,31,35,22,14,15,13,23,36,59,49,77,65,29,40,30,40,27,33,42,16,22,20,37,61,56,79,73,64,
43,76,56,37,26,31,25,14,35,16,60,57,97,75,114,91,54,73,55,41,48,53,23,24,58,27,50,96,76,70,93,84,77,58,79,29,74,49,41,17,47,45,78,74,115,94,90,79,69,83,71,50,59,38,36,15,72,34,56,95,92,85,91,90,86,73,77,65,51,44,43,42,43,20,30,44,55,78,72,87,78,61,46,54,37,30,20,16,53,25,41,37,44,59,54,81,66,76,57,54,37,18,39,11,35,33,31,57,42,82,72,80,47,58,55,21,22,26,38,22,53,25,23,38,70,60,51,36,55,26,34,23,27,14,9,7,34,32,28,39,49,75,30,52,48,40,52,28,18,17,9,5,45,21,34,64,56,50,49,45,31,19,12,15,10,7,6,3,48,
23,20,39,36,35,53,21,16,23,13,10,6,1,4,2,16,15,17,27,25,20,29,11,17,12,16,8,1,1,0,1],t15HB:[7,12,18,53,47,76,124,108,89,123,108,119,107,81,122,63,13,5,16,27,46,36,61,51,42,70,52,83,65,41,59,36,19,17,15,24,41,34,59,48,40,64,50,78,62,80,56,33,29,28,25,43,39,63,55,93,76,59,93,72,54,75,50,29,52,22,42,40,67,57,95,79,72,57,89,69,49,66,46,27,77,37,35,66,58,52,91,74,62,48,79,63,90,62,40,38,125,32,60,56,50,92,78,65,55,87,71,51,73,51,70,30,109,53,49,94,88,75,66,122,91,73,56,42,64,44,21,25,90,43,41,77,73,63,
56,92,77,66,47,67,48,53,36,20,71,34,67,60,58,49,88,76,67,106,71,54,38,39,23,15,109,53,51,47,90,82,58,57,48,72,57,41,23,27,62,9,86,42,40,37,70,64,52,43,70,55,42,25,29,18,11,11,118,68,30,55,50,46,74,65,49,39,24,16,22,13,14,7,91,44,39,38,34,63,52,45,31,52,28,19,14,8,9,3,123,60,58,53,47,43,32,22,37,24,17,12,15,10,2,1,71,37,34,30,28,20,17,26,21,16,10,6,8,6,2,0],t16HB:[1,5,14,44,74,63,110,93,172,149,138,242,225,195,376,17,3,4,12,20,35,62,53,47,83,75,68,119,201,107,207,9,15,13,23,38,67,58,103,90,161,72,
127,117,110,209,206,16,45,21,39,69,64,114,99,87,158,140,252,212,199,387,365,26,75,36,68,65,115,101,179,164,155,264,246,226,395,382,362,9,66,30,59,56,102,185,173,265,142,253,232,400,388,378,445,16,111,54,52,100,184,178,160,133,257,244,228,217,385,366,715,10,98,48,91,88,165,157,148,261,248,407,397,372,380,889,884,8,85,84,81,159,156,143,260,249,427,401,392,383,727,713,708,7,154,76,73,141,131,256,245,426,406,394,384,735,359,710,352,11,139,129,67,125,247,233,229,219,393,743,737,720,885,882,439,4,243,120,
118,115,227,223,396,746,742,736,721,712,706,223,436,6,202,224,222,218,216,389,386,381,364,888,443,707,440,437,1728,4,747,211,210,208,370,379,734,723,714,1735,883,877,876,3459,865,2,377,369,102,187,726,722,358,711,709,866,1734,871,3458,870,434,0,12,10,7,11,10,17,11,9,13,12,10,7,5,3,1,3],t24HB:[15,13,46,80,146,262,248,434,426,669,653,649,621,517,1032,88,14,12,21,38,71,130,122,216,209,198,327,345,319,297,279,42,47,22,41,74,68,128,120,221,207,194,182,340,315,295,541,18,81,39,75,70,134,125,116,220,204,
190,178,325,311,293,271,16,147,72,69,135,127,118,112,210,200,188,352,323,306,285,540,14,263,66,129,126,119,114,214,202,192,180,341,317,301,281,262,12,249,123,121,117,113,215,206,195,185,347,330,308,291,272,520,10,435,115,111,109,211,203,196,187,353,332,313,298,283,531,381,17,427,212,208,205,201,193,186,177,169,320,303,286,268,514,377,16,335,199,197,191,189,181,174,333,321,305,289,275,521,379,371,11,668,184,183,179,175,344,331,314,304,290,277,530,383,373,366,10,652,346,171,168,164,318,309,299,287,
276,263,513,375,368,362,6,648,322,316,312,307,302,292,284,269,261,512,376,370,364,359,4,620,300,296,294,288,282,273,266,515,380,374,369,365,361,357,2,1033,280,278,274,267,264,259,382,378,372,367,363,360,358,356,0,43,20,19,17,15,13,11,9,7,6,4,7,5,3,1,3],t32HB:[1,10,8,20,12,20,16,32,14,12,24,0,28,16,24,16],t33HB:[15,28,26,48,22,40,36,64,14,24,20,32,12,16,8,0],t1l:[1,4,3,5],t2l:[1,4,7,4,5,7,6,7,8],t3l:[2,3,7,4,4,7,6,7,8],t5l:[1,4,7,8,4,5,8,9,7,8,9,10,8,8,9,10],t6l:[3,4,6,8,4,4,6,7,5,6,7,8,7,7,8,9],t7l:[1,
4,7,9,9,10,4,6,8,9,9,10,7,7,9,10,10,11,8,9,10,11,11,11,8,9,10,11,11,12,9,10,11,12,12,12],t8l:[2,4,7,9,9,10,4,4,6,10,10,10,7,6,8,10,10,11,9,10,10,11,11,12,9,9,10,11,12,12,10,10,11,11,13,13],t9l:[3,4,6,7,9,10,4,5,6,7,8,10,5,6,7,8,9,10,7,7,8,9,9,10,8,8,9,9,10,11,9,9,10,10,11,11],t10l:[1,4,7,9,10,10,10,11,4,6,8,9,10,11,10,10,7,8,9,10,11,12,11,11,8,9,10,11,12,12,11,12,9,10,11,12,12,12,12,12,10,11,12,12,13,13,12,13,9,10,11,12,12,12,13,13,10,10,11,12,12,13,13,13],t11l:[2,4,6,8,9,10,9,10,4,5,6,8,10,10,9,
10,6,7,8,9,10,11,10,10,8,8,9,11,10,12,10,11,9,10,10,11,11,12,11,12,9,10,11,12,12,13,12,13,9,9,9,10,11,12,12,12,9,9,10,11,12,12,12,12],t12l:[4,4,6,8,9,10,10,10,4,5,6,7,9,9,10,10,6,6,7,8,9,10,9,10,7,7,8,8,9,10,10,10,8,8,9,9,10,10,10,11,9,9,10,10,10,11,10,11,9,9,9,10,10,11,11,12,10,10,10,11,11,11,11,12],t13l:[1,5,7,8,9,10,10,11,10,11,12,12,13,13,14,14,4,6,8,9,10,10,11,11,11,11,12,12,13,14,14,14,7,8,9,10,11,11,12,12,11,12,12,13,13,14,15,15,8,9,10,11,11,12,12,12,12,13,13,13,13,14,15,15,9,9,11,11,12,12,
13,13,12,13,13,14,14,15,15,16,10,10,11,12,12,12,13,13,13,13,14,13,15,15,16,16,10,11,12,12,13,13,13,13,13,14,14,14,15,15,16,16,11,11,12,13,13,13,14,14,14,14,15,15,15,16,18,18,10,10,11,12,12,13,13,14,14,14,14,15,15,16,17,17,11,11,12,12,13,13,13,15,14,15,15,16,16,16,18,17,11,12,12,13,13,14,14,15,14,15,16,15,16,17,18,19,12,12,12,13,14,14,14,14,15,15,15,16,17,17,17,18,12,13,13,14,14,15,14,15,16,16,17,17,17,18,18,18,13,13,14,15,15,15,16,16,16,16,16,17,18,17,18,18,14,14,14,15,15,15,17,16,16,19,17,17,17,
19,18,18,13,14,15,16,16,16,17,16,17,17,18,18,21,20,21,18],t15l:[3,5,6,8,8,9,10,10,10,11,11,12,12,12,13,14,5,5,7,8,9,9,10,10,10,11,11,12,12,12,13,13,6,7,7,8,9,9,10,10,10,11,11,12,12,13,13,13,7,8,8,9,9,10,10,11,11,11,12,12,12,13,13,13,8,8,9,9,10,10,11,11,11,11,12,12,12,13,13,13,9,9,9,10,10,10,11,11,11,11,12,12,13,13,13,14,10,9,10,10,10,11,11,11,11,12,12,12,13,13,14,14,10,10,10,11,11,11,11,12,12,12,12,12,13,13,13,14,10,10,10,11,11,11,11,12,12,12,12,13,13,14,14,14,10,10,11,11,11,11,12,12,12,13,13,13,
13,14,14,14,11,11,11,11,12,12,12,12,12,13,13,13,13,14,15,14,11,11,11,11,12,12,12,12,13,13,13,13,14,14,14,15,12,12,11,12,12,12,13,13,13,13,13,13,14,14,15,15,12,12,12,12,12,13,13,13,13,14,14,14,14,14,15,15,13,13,13,13,13,13,13,13,14,14,14,14,15,15,14,15,13,13,13,13,13,13,13,14,14,14,14,14,15,15,15,15],t16_5l:[1,5,7,9,10,10,11,11,12,12,12,13,13,13,14,11,4,6,8,9,10,11,11,11,12,12,12,13,14,13,14,11,7,8,9,10,11,11,12,12,13,12,13,13,13,14,14,12,9,9,10,11,11,12,12,12,13,13,14,14,14,15,15,13,10,10,11,11,12,
12,13,13,13,14,14,14,15,15,15,12,10,10,11,11,12,13,13,14,13,14,14,15,15,15,16,13,11,11,11,12,13,13,13,13,14,14,14,14,15,15,16,13,11,11,12,12,13,13,13,14,14,15,15,15,15,17,17,13,11,12,12,13,13,13,14,14,15,15,15,15,16,16,16,13,12,12,12,13,13,14,14,15,15,15,15,16,15,16,15,14,12,13,12,13,14,14,14,14,15,16,16,16,17,17,16,13,13,13,13,13,14,14,15,16,16,16,16,16,16,15,16,14,13,14,14,14,14,15,15,15,15,17,16,16,16,16,18,14,15,14,14,14,15,15,16,16,16,18,17,17,17,19,17,14,14,15,13,14,16,16,15,16,16,17,18,17,
19,17,16,14,11,11,11,12,12,13,13,13,14,14,14,14,14,14,14,12],t16l:[1,5,7,9,10,10,11,11,12,12,12,13,13,13,14,10,4,6,8,9,10,11,11,11,12,12,12,13,14,13,14,10,7,8,9,10,11,11,12,12,13,12,13,13,13,14,14,11,9,9,10,11,11,12,12,12,13,13,14,14,14,15,15,12,10,10,11,11,12,12,13,13,13,14,14,14,15,15,15,11,10,10,11,11,12,13,13,14,13,14,14,15,15,15,16,12,11,11,11,12,13,13,13,13,14,14,14,14,15,15,16,12,11,11,12,12,13,13,13,14,14,15,15,15,15,17,17,12,11,12,12,13,13,13,14,14,15,15,15,15,16,16,16,12,12,12,12,13,13,
14,14,15,15,15,15,16,15,16,15,13,12,13,12,13,14,14,14,14,15,16,16,16,17,17,16,12,13,13,13,13,14,14,15,16,16,16,16,16,16,15,16,13,13,14,14,14,14,15,15,15,15,17,16,16,16,16,18,13,15,14,14,14,15,15,16,16,16,18,17,17,17,19,17,13,14,15,13,14,16,16,15,16,16,17,18,17,19,17,16,13,10,10,10,11,11,12,12,12,13,13,13,13,13,13,13,10],t24l:[4,5,7,8,9,10,10,11,11,12,12,12,12,12,13,10,5,6,7,8,9,10,10,11,11,11,12,12,12,12,12,10,7,7,8,9,9,10,10,11,11,11,11,12,12,12,13,9,8,8,9,9,10,10,10,11,11,11,11,12,12,12,12,9,9,
9,9,10,10,10,10,11,11,11,12,12,12,12,13,9,10,9,10,10,10,10,11,11,11,11,12,12,12,12,12,9,10,10,10,10,10,11,11,11,11,12,12,12,12,12,13,9,11,10,10,10,11,11,11,11,12,12,12,12,12,13,13,10,11,11,11,11,11,11,11,11,11,12,12,12,12,13,13,10,11,11,11,11,11,11,11,12,12,12,12,12,13,13,13,10,12,11,11,11,11,12,12,12,12,12,12,13,13,13,13,10,12,12,11,11,11,12,12,12,12,12,12,13,13,13,13,10,12,12,12,12,12,12,12,12,12,12,13,13,13,13,13,10,12,12,12,12,12,12,12,12,13,13,13,13,13,13,13,10,13,12,12,12,12,12,12,13,13,13,
13,13,13,13,13,10,9,9,9,9,9,9,9,9,9,9,9,10,10,10,10,6],t32l:[1,5,5,7,5,8,7,9,5,7,7,9,7,9,9,10],t33l:[4,5,5,6,5,6,6,7,5,6,6,7,6,7,7,8]};u.ht=[new U(0,0,null,null),new U(2,0,u.t1HB,u.t1l),new U(3,0,u.t2HB,u.t2l),new U(3,0,u.t3HB,u.t3l),new U(0,0,null,null),new U(4,0,u.t5HB,u.t5l),new U(4,0,u.t6HB,u.t6l),new U(6,0,u.t7HB,u.t7l),new U(6,0,u.t8HB,u.t8l),new U(6,0,u.t9HB,u.t9l),new U(8,0,u.t10HB,u.t10l),new U(8,0,u.t11HB,u.t11l),new U(8,0,u.t12HB,u.t12l),new U(16,0,u.t13HB,u.t13l),new U(0,0,null,u.t16_5l),
new U(16,0,u.t15HB,u.t15l),new U(1,1,u.t16HB,u.t16l),new U(2,3,u.t16HB,u.t16l),new U(3,7,u.t16HB,u.t16l),new U(4,15,u.t16HB,u.t16l),new U(6,63,u.t16HB,u.t16l),new U(8,255,u.t16HB,u.t16l),new U(10,1023,u.t16HB,u.t16l),new U(13,8191,u.t16HB,u.t16l),new U(4,15,u.t24HB,u.t24l),new U(5,31,u.t24HB,u.t24l),new U(6,63,u.t24HB,u.t24l),new U(7,127,u.t24HB,u.t24l),new U(8,255,u.t24HB,u.t24l),new U(9,511,u.t24HB,u.t24l),new U(11,2047,u.t24HB,u.t24l),new U(13,8191,u.t24HB,u.t24l),new U(0,0,u.t32HB,u.t32l),new U(0,
0,u.t33HB,u.t33l)];u.largetbl=[65540,327685,458759,589832,655369,655370,720906,720907,786443,786444,786444,851980,851980,851980,917517,655370,262149,393222,524295,589832,655369,720906,720906,720907,786443,786443,786444,851980,917516,851980,917516,655370,458759,524295,589832,655369,720905,720906,786442,786443,851979,786443,851979,851980,851980,917516,917517,720905,589832,589832,655369,720905,720906,786442,786442,786443,851979,851979,917515,917516,917516,983052,983052,786441,655369,655369,720905,720906,
786442,786442,851978,851979,851979,917515,917516,917516,983052,983052,983053,720905,655370,655369,720906,720906,786442,851978,851979,917515,851979,917515,917516,983052,983052,983052,1048588,786441,720906,720906,720906,786442,851978,851979,851979,851979,917515,917516,917516,917516,983052,983052,1048589,786441,720907,720906,786442,786442,851979,851979,851979,917515,917516,983052,983052,983052,983052,1114125,1114125,786442,720907,786443,786443,851979,851979,851979,917515,917515,983051,983052,983052,
983052,1048588,1048589,1048589,786442,786443,786443,786443,851979,851979,917515,917515,983052,983052,983052,983052,1048588,983053,1048589,983053,851978,786444,851979,786443,851979,917515,917516,917516,917516,983052,1048588,1048588,1048589,1114125,1114125,1048589,786442,851980,851980,851979,851979,917515,917516,983052,1048588,1048588,1048588,1048588,1048589,1048589,983053,1048589,851978,851980,917516,917516,917516,917516,983052,983052,983052,983052,1114124,1048589,1048589,1048589,1048589,1179661,851978,
983052,917516,917516,917516,983052,983052,1048588,1048588,1048589,1179661,1114125,1114125,1114125,1245197,1114125,851978,917517,983052,851980,917516,1048588,1048588,983052,1048589,1048589,1114125,1179661,1114125,1245197,1114125,1048589,851978,655369,655369,655369,720905,720905,786441,786441,786441,851977,851977,851977,851978,851978,851978,851978,655366];u.table23=[65538,262147,458759,262148,327684,458759,393222,458759,524296];u.table56=[65539,262148,458758,524296,262148,327684,524294,589831,458757,
524294,589831,655368,524295,524295,589832,655369];u.bitrate_table=[[0,8,16,24,32,40,48,56,64,80,96,112,128,144,160,-1],[0,32,40,48,56,64,80,96,112,128,160,192,224,256,320,-1],[0,8,16,24,32,40,48,56,64,-1,-1,-1,-1,-1,-1,-1]];u.samplerate_table=[[22050,24E3,16E3,-1],[44100,48E3,32E3,-1],[11025,12E3,8E3,-1]];u.scfsi_band=[0,6,11,16,21];ya.Q_MAX=257;ya.Q_MAX2=116;ya.LARGE_BITS=1E5;ya.IXMAX_VAL=8206;var za={};za.SFBMAX=3*d.SBMAX_s;d.ENCDELAY=576;d.POSTDELAY=1152;d.MDCTDELAY=48;d.FFTOFFSET=224+d.MDCTDELAY;
d.DECDELAY=528;d.SBLIMIT=32;d.CBANDS=64;d.SBPSY_l=21;d.SBPSY_s=12;d.SBMAX_l=22;d.SBMAX_s=13;d.PSFB21=6;d.PSFB12=6;d.BLKSIZE=1024;d.HBLKSIZE=d.BLKSIZE/2+1;d.BLKSIZE_s=256;d.HBLKSIZE_s=d.BLKSIZE_s/2+1;d.NORM_TYPE=0;d.START_TYPE=1;d.SHORT_TYPE=2;d.STOP_TYPE=3;d.MPG_MD_LR_LR=0;d.MPG_MD_LR_I=1;d.MPG_MD_MS_LR=2;d.MPG_MD_MS_I=3;d.fircoef=[-.1039435,-.1892065,-.0432472*5,-.155915,3.898045E-17,.0467745*5,.50455,.756825,.187098*5];Y.MFSIZE=3456+d.ENCDELAY-d.MDCTDELAY;Y.MAX_HEADER_BUF=256;Y.MAX_BITS_PER_CHANNEL=
4095;Y.MAX_BITS_PER_GRANULE=7680;Y.BPC=320;Fa.RIFF=kc("RIFF");Fa.WAVE=kc("WAVE");Fa.fmt_=kc("fmt ");Fa.data=kc("data");Fa.readHeader=function(d){var n=new Fa,p=d.getUint32(0,!1);if(Fa.RIFF==p&&(d.getUint32(4,!0),Fa.WAVE==d.getUint32(8,!1)&&Fa.fmt_==d.getUint32(12,!1))){var u=d.getUint32(16,!0),y=20;switch(u){case 16:case 18:n.channels=d.getUint16(y+2,!0);n.sampleRate=d.getUint32(y+4,!0);break;default:throw"extended fmt chunk not implemented";}for(var y=y+u,u=Fa.data,f=0;u!=p;){p=d.getUint32(y,!1);
f=d.getUint32(y+4,!0);if(u==p)break;y+=f+8}n.dataLen=f;n.dataOffset=y+8;return n}};za.SFBMAX=3*d.SBMAX_s;this.Mp3Encoder=function(d,n,p){3!=arguments.length&&(console.error("WARN: Mp3Encoder(channels, samplerate, kbps) not specified"),d=1,n=44100,p=128);var u=new P,y=new Uc,f=new M,L=new ma,l=new Gc,b=new ya,r=new Oc,a=new pb,e=new Fc,C=new Xc,m=new Hc,k=new zb,c=new Vc,g=new Wc;u.setModules(f,L,l,b,r,a,e,C,g);L.setModules(f,g,e,a);C.setModules(L,e);l.setModules(u);r.setModules(L,m,b,k);b.setModules(k,
m,u.enc.psy);m.setModules(L);k.setModules(b);a.setModules(u,L,e);y.setModules(c,g);c.setModules(e,C,l);var z=u.lame_init();z.num_channels=d;z.in_samplerate=n;z.brate=p;z.mode=la.STEREO;z.quality=3;z.bWriteVbrTag=!1;z.disable_reservoir=!0;z.write_id3tag_automatic=!1;u.lame_init_params(z);var q=1152,x=0|1.25*q+7200,A=new Int8Array(x);this.encodeBuffer=function(a,b){1==d&&(b=a);a.length>q&&(q=a.length,x=0|1.25*q+7200,A=new Int8Array(x));var c=u.lame_encode_buffer(z,a,b,a.length,A,0,x);return A.subarray(0,
c)};this.flush=function(){var a=u.lame_encode_flush(z,A,0,x);return A.subarray(0,a)}};this.WavHeader=Fa};
